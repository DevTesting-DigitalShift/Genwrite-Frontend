import{r as w,l as X,u as Z,j as e,H as q}from"./vendor-react-De2z0TIU.js";import{b as K,U as Q}from"../assets/index-CsB5qvyX.js";import{h as $}from"./vendor-utils-8H1_Lg8i.js";import{m as r,A as ee}from"./vendor-animation-DLXwypMl.js";import{al as ae,am as le,an as se,ao as te,ap as ie}from"./vendor-icons-Cq_V5qsk.js";import{O as re,s as B}from"./vendor-ui-C0h2rz9i.js";import"./vendor-documents-Bo4tJiCa.js";import"./vendor-misc-VtNtTC9_.js";import"./vendor-http-DugNE7E_.js";import"./vendor-state-WK08LdY7.js";var ne=Object.defineProperty,oe=Object.defineProperties,de=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,V=(n,i,t)=>i in n?ne(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t,D=(n,i)=>{for(var t in i||(i={}))ce.call(i,t)&&V(n,t,i[t]);if(z)for(var t of z(i))pe.call(i,t)&&V(n,t,i[t]);return n},N=(n,i)=>oe(n,de(i)),me=(n,i,t)=>new Promise((f,h)=>{var x=s=>{try{j(t.next(s))}catch(b){h(b)}},y=s=>{try{j(t.throw(s))}catch(b){h(b)}},j=s=>s.done?f(s.value):Promise.resolve(s.value).then(x,y);j((t=t.apply(n,i)).next())});const p={profilePicture:"",personalDetails:{name:"eg : Siva Dheeraj",email:"eg : sivadheeraj@example.com",phone:"eg : +91 9990292929",bio:"eg : Lead Product Designer",jobTitle:"eg : Senior UX Engineer",company:"eg : Tech Innovators Inc",dob:"eg : 1990-05-15"},billingDetails:{companyName:"eg : ABC Corporation",address:"eg : 123 Business Street, Financial District",city:"eg : Mumbai",country:"eg : India",gstNumber:"eg : 27ABCDE1234F1Z5",taxId:"eg : AS564178969",paymentMethod:"eg : Stripe",companyEmail:"eg : accounts@abc-corp.in"},subscription:{type:"Free",startDate:"2024-01-01",renewalDate:"1/1/2025",credits:0,planFeatures:["Unlimited Projects","Priority Support","Advanced Analytics"],paymentHistory:[{id:1,date:"2024-03-01",amount:"$1500",status:"paid"},{id:2,date:"2024-02-01",amount:"$1500",status:"paid"}]}},De=()=>{var n,i,t,f,h,x,y,j;const[s,b]=w.useState(!1),P=w.useRef(null),[a,_]=w.useState(p),{user:l}=X(o=>o.auth),C=Z();w.useEffect(()=>{C(K())},[C]);const F=((i=(n=l==null?void 0:l.credits)==null?void 0:n.base)!=null?i:0)+((f=(t=l==null?void 0:l.credits)==null?void 0:t.extra)!=null?f:0);w.useEffect(()=>{l&&_(o=>{var d,u,c,g,I,O,H,k,R,T,A,L,M,U;return{profilePicture:l.avatar||o.profilePicture,personalDetails:{name:l.name||"",email:l.email||"",phone:l.phone||"",bio:l.bio||"",jobTitle:l.jobTitle||"",company:l.company||"",wordpress:l.wordpressLink||"",dob:l.dob||""},billingDetails:{companyName:((d=l.billingDetails)==null?void 0:d.companyName)||"",address:((u=l.billingDetails)==null?void 0:u.address)||"",city:((c=l.billingDetails)==null?void 0:c.city)||"",country:((g=l.billingDetails)==null?void 0:g.country)||"",gstNumber:((I=l.billingDetails)==null?void 0:I.gstNumber)||"",taxId:((O=l.billingDetails)==null?void 0:O.taxId)||"",paymentMethod:((H=l.billingDetails)==null?void 0:H.paymentMethod)||"",companyEmail:((k=l.billingDetails)==null?void 0:k.companyEmail)||""},subscription:{type:(l==null?void 0:l.plan)||"Free",startDate:((R=l.subscription)==null?void 0:R.startDate)||"",renewalDate:((T=l.subscription)==null?void 0:T.renewalDate)||"",credits:(L=(A=l.credits)==null?void 0:A.base)!=null?L:0,planFeatures:((M=l.subscription)==null?void 0:M.planFeatures)||[]},invoices:(U=l.invoices)!=null&&U.length?l.invoices:[]}})},[l]);const Y=()=>me(null,null,function*(){const o={avatar:a.profilePicture,name:a.personalDetails.name,bio:a.personalDetails.bio,email:a.personalDetails.email,phone:a.personalDetails.phone,jobTitle:a.personalDetails.jobTitle,company:a.personalDetails.company,dob:a.personalDetails.dob,wordpressLink:a.personalDetails.wordpress};try{C(Q(o)).unwrap().then(()=>{b(!1)})}catch(d){B.error("Error updating profile, try again")}}),W=()=>b(!s),G=()=>b(!1),E=o=>{if(!s)return;const d=o.target.files[0];if(d){const u=new FileReader;u.onload=c=>{_(g=>N(D({},g),{profilePicture:c.target.result}))},u.readAsDataURL(d)}},m=o=>{const{name:d,value:u}=o.target;if(d==="personalDetails.phone"){const c=u.replace(/[^0-9]/g,"");if(c.length>15){B.error("Phone number cannot exceed 15 digits.");return}_(g=>N(D({},g),{personalDetails:N(D({},g.personalDetails),{phone:c})}))}else _(c=>N(D({},c),{personalDetails:N(D({},c.personalDetails),{[d.split(".")[1]]:u})}))},J={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},S={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:120}},hover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -12px rgba(0, 0, 0, 0.15)"}};return e.jsx(e.Fragment,{children:e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/50 p-8",children:[e.jsx(q,{children:e.jsx("title",{children:"Profile | GenWrite"})}),e.jsxs(r.div,{variants:J,initial:"hidden",animate:"show",className:"max-w-7xl mx-auto bg-white/95 backdrop-blur-xl rounded-[2rem] shadow-2xl border border-white/20 overflow-hidden",children:[e.jsx("div",{className:"relative p-8 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:e.jsxs("div",{className:"relative flex flex-col md:flex-row items-center gap-8",children:[e.jsx(r.div,{className:"relative group",whileHover:"hover",variants:{hover:{scale:1.03}},children:a!=null&&a.profilePicture?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.profilePicture,alt:"Profile",className:"w-40 h-40 rounded-full border-4 border-white/80 object-cover shadow-2xl relative z-10",style:{cursor:s?"pointer":"default"}}),e.jsx("input",{type:"file",ref:P,onChange:E,className:"hidden",accept:"image/*",disabled:!s})]}):e.jsxs("div",{className:"w-40 h-40 rounded-full border-4 border-white/80 bg-gradient-to-tr from-blue-400 to-purple-700 text-white flex items-center justify-center text-7xl font-bold shadow-2xl relative z-10",onClick:()=>s&&P.current.click(),style:{cursor:s?"pointer":"default"},children:[(h=a==null?void 0:a.personalDetails)!=null&&h.name?`${(x=a==null?void 0:a.personalDetails.name[0])==null?void 0:x.toUpperCase()}`:"NA",e.jsx("input",{type:"file",ref:P,onChange:E,className:"hidden",accept:"image/*",disabled:!s})]})}),e.jsxs(r.div,{className:"space-y-3 text-white",initial:{x:-20},animate:{x:0},children:[e.jsx("h1",{className:"text-4xl font-bold flex items-center gap-3",children:a.personalDetails.name||e.jsx("span",{className:"text-gray-300",children:"Full Name"})}),e.jsx("p",{className:"text-xl font-light opacity-90",children:a.personalDetails.bio||e.jsx("span",{className:"text-gray-300",children:"Bio"})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(r.div,{className:"px-4 py-2 bg-white/20 rounded-full capitalize backdrop-blur-sm flex items-center gap-2",whileHover:{y:-2},children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{children:a.subscription.type})]}),e.jsxs(r.div,{className:"px-4 py-2 bg-white/20 rounded-full backdrop-blur-sm flex items-center gap-2",whileHover:{y:-2},children:[e.jsx(le,{className:"w-5 h-5"}),e.jsxs("span",{children:[F," Credits"]})]})]})]})]})}),e.jsxs(r.div,{className:"p-8 space-y-8",children:[e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(ee,{children:s?e.jsxs(e.Fragment,{children:[e.jsxs(r.button,{onClick:Y,className:"px-6 py-2 bg-green-500 text-white rounded-xl flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.05},children:[e.jsx(se,{className:"w-5 h-5"}),"Save Changes"]},"save"),e.jsxs(r.button,{onClick:G,className:"px-6 py-2 bg-gray-500 text-white rounded-xl flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.05},children:[e.jsx(te,{className:"w-5 h-5"}),"Cancel"]},"cancel")]}):e.jsxs(r.button,{onClick:W,className:"px-6 py-2 bg-blue-500 text-white rounded-xl flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.05},children:[e.jsx(ie,{className:"w-5 h-5"}),"Edit Profile"]},"edit")})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r.div,{variants:S,whileHover:"hover",className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border-2 border-slate-200 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Personal Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{label:"Full Name",name:"personalDetails.name",value:a.personalDetails.name,isEditing:s,onChange:m,placeholder:p.personalDetails.name}),e.jsx(v,{label:"Email",name:"personalDetails.email",value:a.personalDetails.email,isEditing:s,onChange:m,placeholder:p.personalDetails.email}),e.jsx(v,{label:"Bio",name:"personalDetails.bio",value:a.personalDetails.bio,isEditing:s,onChange:m,placeholder:"e.g : I'm a travel enthusiast who loves exploring new cultures."}),e.jsx(v,{label:"WordPress Link",name:"personalDetails.wordpress",value:a.personalDetails.wordpress,isEditing:s,onChange:m,placeholder:"eg : https://yourblog.wordpress.com"}),e.jsx(v,{label:"Phone",name:"personalDetails.phone",value:a.personalDetails.phone,isEditing:s,onChange:m,placeholder:p.personalDetails.phone,maxLength:15}),e.jsx(v,{label:"Job Title",name:"personalDetails.jobTitle",value:a.personalDetails.jobTitle,isEditing:s,onChange:m,placeholder:p.personalDetails.jobTitle}),e.jsx(v,{label:"Company",name:"personalDetails.company",value:a.personalDetails.company,isEditing:s,onChange:m,placeholder:p.personalDetails.company}),e.jsxs(r.div,{className:"space-y-2",whileHover:{scale:1.02},children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Date of Birth"}),s?e.jsx(re,{format:"YYYY-MM-DD",value:a.personalDetails.dob?$(a.personalDetails.dob):null,onChange:(o,d)=>m({target:{name:"personalDetails.dob",value:d}}),className:"w-full",disabledDate:o=>o&&o>$().endOf("day")}):e.jsx(r.div,{className:"px-4 py-2 bg-white/80 rounded-lg border-2 border-slate-200",whileHover:{x:5},children:a.personalDetails.dob?new Date(a.personalDetails.dob).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):e.jsx("span",{className:"text-gray-400",children:p.personalDetails.dob})})]})]})]}),e.jsxs(r.div,{variants:S,whileHover:"hover",className:"bg-gradient-to-br from-blue-50 to-purple-50 p-8 rounded-2xl border-2 border-indigo-100 shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-purple-200/20 rounded-full blur-3xl"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Subscription & Credits"}),e.jsxs("div",{className:"space-y-4 ",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/80",children:[e.jsx("span",{className:"font-medium",children:"Plan Type"}),e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full capitalize",children:a.subscription.type})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/80",children:[e.jsx("span",{className:"font-medium",children:"Credits Available"}),e.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-1 rounded-full",children:F||p.subscription.credits})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/80",children:[e.jsx("span",{className:"font-medium",children:"Start Date"}),e.jsx("span",{children:(y=a==null?void 0:a.subscription)!=null&&y.startDate?new Date(a.subscription.startDate).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):p.subscription.startDate})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/80",children:[e.jsx("span",{className:"font-medium",children:"Renewal Date"}),e.jsx("span",{children:(j=a==null?void 0:a.subscription)!=null&&j.startDate?new Date(new Date(a.subscription.startDate).setMonth(new Date(a.subscription.startDate).getMonth()+1)).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"Not renewed yet"})]})]})]})]})})]})]})]})})},v=({label:n,name:i,value:t,isEditing:f,onChange:h,placeholder:x,maxLength:y})=>e.jsxs(r.div,{className:"space-y-2",whileHover:{scale:1.02},children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:n}),f?e.jsx(r.input,{type:"tel",name:i,value:t||"",onChange:h,placeholder:x,className:"w-full px-4 py-2 border-2 border-blue-500 rounded-lg focus:ring-2 focus:ring-blue-200 bg-white/80",whileFocus:{scale:1.02},maxLength:y,pattern:"[0-9]*"}):e.jsx(r.div,{className:"px-4 py-2 bg-white/80 rounded-lg border-2 border-slate-200",whileHover:{x:5},children:t||e.jsx("span",{className:"text-gray-400",children:x})})]});export{De as default};
