import{r as o,l as xe,a2 as Fe,p as Ee,j as s,W as Be,H as Oe}from"./vendor-react-De2z0TIU.js";import{s as he,L as Le}from"../assets/index-CsB5qvyX.js";import{bU as Ue,bV as ye,bW as Ge,bX as Me,c0 as Y,c1 as $e}from"./vendor-misc-VtNtTC9_.js";import{h as X}from"./vendor-utils-8H1_Lg8i.js";import{m as pe}from"./vendor-animation-DLXwypMl.js";import{R as Z,az as Ke,Y as Qe,aA as ze,a as M,V as qe,a0 as Ve,aB as He,X as Je,h as We,aC as Ye,aD as Xe,a3 as ee}from"./vendor-icons-Cq_V5qsk.js";import{B as S,I as Ze,S as se,O as et,m as tt,b as fe,s as j,a as $,d as R}from"./vendor-ui-C0h2rz9i.js";import"./vendor-documents-Bo4tJiCa.js";import"./vendor-http-DugNE7E_.js";import"./vendor-state-WK08LdY7.js";var st=Object.defineProperty,be=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,we=(y,d,i)=>d in y?st(y,d,{enumerable:!0,configurable:!0,writable:!0,value:i}):y[d]=i,te=(y,d)=>{for(var i in d||(d={}))rt.call(d,i)&&we(y,i,d[i]);if(be)for(var i of be(d))nt.call(d,i)&&we(y,i,d[i]);return y},F=(y,d,i)=>new Promise((B,A)=>{var O=m=>{try{C(i.next(m))}catch(f){A(f)}},p=m=>{try{C(i.throw(m))}catch(f){A(f)}},C=m=>m.done?B(m.value):Promise.resolve(m.value).then(O,p);C((i=i.apply(y,d)).next())});const{Option:E}=se,{Search:at}=Ze,{RangePicker:ot}=et,lt={USA:"United States",IND:"India",GBR:"United Kingdom",CAN:"Canada",AUS:"Australia",DEU:"Germany",FRA:"France",JPN:"Japan",CHN:"China",BRA:"Brazil","N/A":"Unknown"},ft=()=>{var y,d,i,B,A,O;const[p,C]=o.useState(()=>sessionStorage.getItem("gscSearchTerm")||""),[m,f]=o.useState(()=>Number(sessionStorage.getItem("gscCurrentPage"))||1),[k,re]=o.useState(()=>Number(sessionStorage.getItem("gscItemsPerPage"))||10),[b,ne]=o.useState(()=>sessionStorage.getItem("gscDateRange")||"30d"),[g,K]=o.useState([sessionStorage.getItem("gscCustomDateRangeStart")?X(sessionStorage.getItem("gscCustomDateRangeStart")):null,sessionStorage.getItem("gscCustomDateRangeEnd")?X(sessionStorage.getItem("gscCustomDateRangeEnd")):null]),[c,ae]=o.useState(()=>sessionStorage.getItem("gscSelectedBlogTitle")||"all"),[I,Q]=o.useState(()=>JSON.parse(sessionStorage.getItem("gscSelectedCountries")||"[]")),[u,oe]=o.useState(()=>sessionStorage.getItem("gscIncludeCountry")==="true"),[le,_]=o.useState(!1),[ie,L]=o.useState(!!((y=xe(he))!=null&&y.gsc)),[z,ce]=Fe(),[q,T]=o.useState([]),[x,P]=o.useState(null),w=Ue(),N=xe(he),Ne=((N==null?void 0:N.plan)||((d=N==null?void 0:N.subscription)==null?void 0:d.plan)||"free").toLowerCase(),ve=Ee();o.useEffect(()=>{sessionStorage.setItem("gscSearchTerm",p),sessionStorage.setItem("gscCurrentPage",m),sessionStorage.setItem("gscItemsPerPage",k),sessionStorage.setItem("gscDateRange",b),sessionStorage.setItem("gscCustomDateRangeStart",g[0]?g[0].toISOString():""),sessionStorage.setItem("gscCustomDateRangeEnd",g[1]?g[1].toISOString():""),sessionStorage.setItem("gscSelectedBlogTitle",c),sessionStorage.setItem("gscSelectedCountries",JSON.stringify(I)),sessionStorage.setItem("gscIncludeCountry",u.toString())},[p,m,k,b,g,c,I,u]);const D=e=>{var t,r;return e?typeof e=="string"?e.toLowerCase().includes("invalid_grant"):e.message?e.message.toLowerCase().includes("invalid_grant"):e.error?e.error.toLowerCase().includes("invalid_grant"):(r=(t=e.response)==null?void 0:t.data)!=null&&r.error?e.response.data.error.toLowerCase().includes("invalid_grant"):!1:!1},{data:de={data:[]}}=ye({queryKey:["blogs"],queryFn:()=>F(null,null,function*(){return(yield fetchAllBlogs()).data||[]}),staleTime:10*60*1e3,cacheTime:15*60*1e3,onError:e=>{j.error("Failed to load blogs. Please try again.")}}),je=o.useCallback(()=>{let e,t;if(g[0]&&g[1])e=g[0].startOf("day").toISOString().split("T")[0],t=g[1].endOf("day").toISOString().split("T")[0];else{switch(t=new Date,e=new Date,b){case"7d":e.setDate(t.getDate()-7);break;case"30d":e.setDate(t.getDate()-30);break;case"180d":e.setDate(t.getDate()-180);break;default:e.setDate(t.getDate()-30)}e=e.toISOString().split("T")[0],t=t.toISOString().split("T")[0]}return{from:e,to:t}},[b,g]),Ce=o.useCallback(e=>{var t;if(e==="all")return null;const r=(t=de.data)==null?void 0:t.find(a=>a.title===e);return(r==null?void 0:r.url)||null},[de.data]),{data:v=[],isLoading:U}=ye({queryKey:["gscAnalytics",b,(B=(i=g[0])==null?void 0:i.toISOString())!=null?B:null,(O=(A=g[1])==null?void 0:A.toISOString())!=null?O:null,c,u],queryFn:()=>F(null,null,function*(){if(!(N!=null&&N.gsc))return L(!1),[];const{from:e,to:t}=je(),r=Ce(c),a=te({from:e,to:t,includeCountry:u},r&&{blogUrl:r});return(yield fetchGscAnalytics(a).unwrap()).map((n,_e)=>({id:`${n.link}-${_e}`,url:n.link,clicks:n.clicks,impressions:n.impressions,ctr:(n.ctr*100).toFixed(2),position:n.position.toFixed(1),keywords:[n.key].map(W=>W.length>50?`${W.substring(0,47)}...`:W),countryCode:n.countryCode||"N/A",countryName:lt[n.countryCode]||n.countryName||"Unknown",blogId:n.blogId,blogTitle:n.blogTitle||"Untitled"}))}),staleTime:10*60*1e3,cacheTime:15*60*1e3,enabled:!!(N!=null&&N.gsc),onError:e=>{P(e),D(e)&&L(!1),j.error("Failed to load analytics data. Please try again.")},onSuccess:()=>{P(null),L(!0)}}),Se=Ge({mutationFn:()=>F(null,null,function*(){let e=yield fetchGscAuthUrl().unwrap();if(!e.includes("prompt=select_account")){const t=new URL(e),r=new URLSearchParams(t.search);r.set("prompt","select_account"),t.search=r.toString(),e=t.toString()}return e}),onMutate:()=>{_(!0)},onSuccess:e=>{const t=window.open(e,"GSC Connect","width=600,height=600");if(!t)throw new Error("Popup blocked. Please allow popups and try again.");const r=l=>F(null,null,function*(){if(l.origin==="https://api.genwrite.co")if(typeof l.data=="string"&&l.data==="GSC Connected")try{L(!0),j.success("Google Search Console connected successfully!"),w.invalidateQueries(["gscAnalytics"]),ve(0)}catch(n){j.error(n.message||n.error||"Failed to verify GSC connection"),P(n)}finally{_(!1),window.removeEventListener("message",r)}else typeof l.data=="string"&&(j.error(l.data||"Authentication failed"),P(l.data||"Authentication failed"),_(!1),window.removeEventListener("message",r))});window.addEventListener("message",r);const a=setInterval(()=>{t.closed&&!ie&&(clearInterval(a),_(!1),P("Authentication window closed"),window.removeEventListener("message",r))},1e3);return()=>{window.removeEventListener("message",r),clearInterval(a)}},onError:e=>{j.error(e.message||e.error||"Failed to initiate GSC connection"),P(e),_(!1)}});o.useEffect(()=>{(z.get("code")||z.get("state"))&&ce({},{replace:!0})},[z,ce]);const ue=o.useMemo(()=>{const e=v.reduce((t,r)=>{const a=r.blogTitle||"Untitled";return t[a]||(t[a]={blogTitle:a,url:r.url,keywords:[],clicks:0,impressions:0,ctr:[],position:[],countryCode:r.countryCode,countryName:r.countryName,blogId:r.blogId,keywordDetails:[]}),t[a].keywords.push(...r.keywords),t[a].clicks+=Number(r.clicks)||0,t[a].impressions+=Number(r.impressions)||0,t[a].ctr.push(Number(r.ctr)||0),t[a].position.push(Number(r.position)||0),t[a].keywordDetails.push({id:r.id,keyword:r.keywords[0],clicks:r.clicks,impressions:r.impressions,ctr:r.ctr,position:r.position,url:r.url,countryCode:r.countryCode,countryName:r.countryName}),t},{});return Object.values(e).map((t,r)=>({id:`${t.blogTitle}-${r}`,blogTitle:t.blogTitle,url:t.url,keywords:[...new Set(t.keywords)],clicks:t.clicks,impressions:t.impressions,ctr:t.ctr.length?(t.ctr.reduce((a,l)=>a+l,0)/t.ctr.length).toFixed(2):0,position:t.position.length?(t.position.reduce((a,l)=>a+l,0)/t.position.length).toFixed(1):0,countryCode:t.countryCode,countryName:t.countryName,blogId:t.blogId,keywordDetails:t.keywordDetails}))},[v]),h=o.useMemo(()=>{let e=c==="all"?ue:v.filter(t=>t.blogTitle===c);return p!=null&&p.trim()&&(e=new Me(e,{keys:[{name:c==="all"?"blogTitle":"keywords",weight:.4},{name:"url",weight:.4},{name:c==="all"?"keywords":"blogTitle",weight:.2}],threshold:.3,includeScore:!0,shouldSort:!0}).search(p).map(({item:r})=>r)),u&&I.length>0&&(e=e.filter(t=>I.includes(t.countryCode))),e},[ue,v,p,I,u,c]),V=o.useMemo(()=>{const e=(m-1)*k,t=e+k;return h.slice(e,t)},[h,m,k]),ge=e=>{C(e),f(1)},ke=o.useCallback(()=>{C(""),ae("all"),Q([]),oe(!1),K([null,null]),ne("30d"),f(1),T([]),sessionStorage.removeItem("gscSearchTerm"),sessionStorage.removeItem("gscCurrentPage"),sessionStorage.removeItem("gscItemsPerPage"),sessionStorage.removeItem("gscDateRange"),sessionStorage.removeItem("gscCustomDateRangeStart"),sessionStorage.removeItem("gscCustomDateRangeEnd"),sessionStorage.removeItem("gscSelectedBlogTitle"),sessionStorage.removeItem("gscSelectedCountries"),sessionStorage.removeItem("gscIncludeCountry"),w.invalidateQueries(["gscAnalytics"])},[w]),Ie=b==="30d"&&!g[0],Te=!!p||c!=="all"||I.length>0||!Ie,Pe=o.useCallback(()=>F(null,null,function*(){if(!V.length){j.warning("No data available to export");return}try{const e=c==="all"?["Blog Title","Keywords","Total Clicks","Total Impressions","Avg CTR (%)","Avg Position","URL",...u?["Country"]:[]]:["Keyword","Clicks","Impressions","CTR (%)","Position","URL",...u?["Country"]:[]],t=V.map(n=>c==="all"?te({"Blog Title":n.blogTitle,Keywords:n.keywords.join(", "),"Total Clicks":n.clicks,"Total Impressions":n.impressions,"Avg CTR (%)":n.ctr,"Avg Position":n.position,URL:n.url},u?{Country:n.countryName}:{}):te({Keyword:n.keywords[0],Clicks:n.clicks,Impressions:n.impressions,"CTR (%)":n.ctr,Position:n.position,URL:n.url},u?{Country:n.countryName}:{})),r=Y.json_to_sheet(t,{header:e}),a=Y.book_new();Y.book_append_sheet(a,r,"Search Console Data");const l=`search_console_data_${new Date().toISOString().split("T")[0]}.xlsx`;$e(a,l)}catch(e){j.error(e.message||e.error||"Failed to export data")}}),[V,u,c]),G=o.useMemo(()=>{const e=h.reduce((l,n)=>l+Number(n.clicks||0),0),t=h.reduce((l,n)=>l+Number(n.impressions||0),0),r=h.length>0?h.reduce((l,n)=>l+Number(n.ctr||0),0)/h.length:0,a=h.length>0?h.reduce((l,n)=>l+Number(n.position||0),0)/h.length:0;return{clicks:e,impressions:t,avgCtr:r,avgPosition:a}},[h]),H=o.useMemo(()=>{const e=new Map;return v.forEach(t=>{t.countryCode&&t.countryName&&e.set(t.countryCode,t.countryName)}),Array.from(e.entries()).map(([t,r])=>({value:t,text:r}))},[v]),De=o.useMemo(()=>{const e=new Set,t=[];for(const r of v){const a=r.blogTitle||"Untitled";e.has(a)||(e.add(a),t.push(a))}return["all",...t]},[v]),J=e=>{T(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])},Re=[{title:"Keyword",dataIndex:"keyword",key:"keyword",render:e=>s.jsx(R,{title:e,children:s.jsx($,{color:"blue",className:"text-sm cursor-pointer",children:e})})},{title:"Clicks",dataIndex:"clicks",key:"clicks",sorter:(e,t)=>e.clicks-t.clicks,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"Impressions",dataIndex:"impressions",key:"impressions",sorter:(e,t)=>e.impressions-t.impressions,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"CTR",dataIndex:"ctr",key:"ctr",sorter:(e,t)=>e.ctr-t.ctr,render:e=>s.jsxs("div",{className:`font-semibold ${e>=8?"text-green-600":e>=5?"text-yellow-600":"text-red-600"}`,children:[e,"%"]}),align:"center"},{title:"Position",dataIndex:"position",key:"position",sorter:(e,t)=>e.position-t.position,render:e=>s.jsx("div",{className:`font-semibold ${e<=3?"text-green-600":e<=10?"text-yellow-600":"text-red-600"}`,children:e}),align:"center"},...u?[{title:"Country",dataIndex:"countryName",key:"countryName",render:e=>e||"-",sorter:(e,t)=>e.countryName.localeCompare(t.countryName),filters:H,filterMultiple:!0,onFilter:(e,t)=>t.countryCode===e}]:[],{title:"Actions",key:"actions",render:(e,t)=>s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx(R,{title:t.url,children:s.jsx(S,{type:"text",icon:s.jsx(ee,{className:"w-4 h-4"}),onClick:()=>window.open(t.url,"_blank"),disabled:!t.url,title:"View Blog"})})}),align:"center"}],Ae=c==="all"?[{title:"Blog Title",dataIndex:"blogTitle",key:"blogTitle",render:(e,t)=>s.jsx("div",{className:"font-medium text-blue-600 cursor-pointer hover:underline",onClick:()=>J(t.id),children:e}),sorter:(e,t)=>e.blogTitle.localeCompare(t.blogTitle)},{title:"Keywords",dataIndex:"keywords",key:"keywords",render:(e,t)=>s.jsx("div",{className:"flex flex-wrap gap-1 max-w-xs",children:e.length>0?s.jsxs($,{color:"blue",className:"text-sm",children:["+",e.length," keywords"]}):s.jsx($,{color:"default",className:"text-sm",children:"No keywords"})})},{title:"Total Clicks",dataIndex:"clicks",key:"clicks",sorter:(e,t)=>e.clicks-t.clicks,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"Total Impressions",dataIndex:"impressions",key:"impressions",sorter:(e,t)=>e.impressions-t.impressions,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"Avg CTR",dataIndex:"ctr",key:"ctr",sorter:(e,t)=>e.ctr-t.ctr,render:e=>s.jsxs("div",{className:`font-semibold ${e>=8?"text-green-600":e>=5?"text-yellow-600":"text-red-600"}`,children:[e,"%"]}),align:"center"},{title:"Avg Position",dataIndex:"position",key:"position",sorter:(e,t)=>e.position-t.position,render:e=>s.jsx("div",{className:`font-semibold ${e<=3?"text-green-600":e<=10?"text-yellow-600":"text-red-600"}`,children:e}),align:"center"},...u?[{title:"Country",dataIndex:"countryName",key:"countryName",render:e=>e||"-",sorter:(e,t)=>e.countryName.localeCompare(t.countryName),filters:H,filterMultiple:!0,onFilter:(e,t)=>t.countryCode===e}]:[],{title:"Actions",key:"actions",render:(e,t)=>s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(R,{title:"Toggle Keywords",children:s.jsx(S,{type:"text",icon:q.includes(t.id)?s.jsx(Ye,{className:"w-4 h-4"}):s.jsx(Xe,{className:"w-4 h-4"}),onClick:()=>J(t.id),title:q.includes(t.id)?"Hide Keywords":"Show Keywords"})}),s.jsx(R,{title:t.url,children:s.jsx(S,{type:"text",icon:s.jsx(ee,{className:"w-4 h-4"}),onClick:()=>window.open(t.url,"_blank"),disabled:!t.url,title:"View Blog"})})]}),align:"center"}]:[{title:"Keyword",dataIndex:"keywords",key:"keywords",render:e=>s.jsx(R,{title:e[0],children:s.jsx($,{color:"blue",className:"text-sm cursor-pointer",children:e[0]})})},{title:"Clicks",dataIndex:"clicks",key:"clicks",sorter:(e,t)=>e.clicks-t.clicks,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"Impressions",dataIndex:"impressions",key:"impressions",sorter:(e,t)=>e.impressions-t.impressions,render:e=>s.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat().format(e)}),align:"center"},{title:"CTR",dataIndex:"ctr",key:"ctr",sorter:(e,t)=>e.ctr-t.ctr,render:e=>s.jsxs("div",{className:`font-semibold ${e>=8?"text-green-600":e>=5?"text-yellow-600":"text-red-600"}`,children:[e,"%"]}),align:"center"},{title:"Position",dataIndex:"position",key:"position",sorter:(e,t)=>e.position-t.position,render:e=>s.jsx("div",{className:`font-semibold ${e<=3?"text-green-600":e<=10?"text-yellow-600":"text-red-600"}`,children:e}),align:"center"},...u?[{title:"Country",dataIndex:"countryName",key:"countryName",render:e=>e||"-",sorter:(e,t)=>e.countryName.localeCompare(t.countryName),filters:H,filterMultiple:!0,onFilter:(e,t)=>t.countryCode===e}]:[],{title:"Actions",key:"actions",render:(e,t)=>s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx(R,{title:t.url,children:s.jsx(S,{type:"text",icon:s.jsx(ee,{className:"w-4 h-4"}),onClick:()=>window.open(t.url,"_blank"),disabled:!t.url,title:"View Blog"})})}),align:"center"}],me=e=>new Intl.NumberFormat().format(e);return!ie||D(x)?s.jsx("div",{className:"p-6 flex items-center justify-center",style:{minHeight:"calc(100vh - 250px)"},children:s.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 max-w-md w-full text-center",children:[s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto",children:s.jsx(Be,{size:40})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:D(x)?"Reconnect Google Search Console":"Connect Google Search Console"}),s.jsx("p",{className:"text-gray-600 text-sm mb-6",children:D(x)?"Your Google Search Console connection has expired or is invalid. Please reconnect to continue monitoring your blog performance.":"Connect your Google Search Console account to monitor your blog performance, track search analytics, and optimize your content for better visibility."}),x&&s.jsx("div",{className:"bg-red-100 text-red-800 p-3 rounded-lg text-sm mb-4",children:D(x)?"Invalid grant: Your authentication token is no longer valid.":typeof x=="string"?x:x.message||x.error||"An error occurred"}),s.jsx("button",{onClick:()=>Se.mutate(),disabled:le,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed w-full",children:le?s.jsxs(s.Fragment,{children:[s.jsx(Z,{className:"w-5 h-5 animate-spin"}),"Connecting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ke,{className:"w-5 h-5"}),D(x)?"Reconnect GSC":"Connect GSC"]})})]})}):U?s.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-300px)] bg-white border rounded-lg",children:s.jsx(Le,{})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-transparent p-5",children:[s.jsx(Oe,{children:s.jsx("title",{children:"Blog Performance | GenWrite"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-5",children:[s.jsxs("div",{children:[s.jsx(pe.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blog Performance"}),s.jsx("p",{className:"text-gray-600",children:"Monitor your blog performance and search analytics"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[Ne&&s.jsx(S,{icon:s.jsx(Qe,{className:"w-4 h-4"}),onClick:Pe,disabled:U,className:"flex items-center gap-2 bg-green-600 text-white hover:bg-green-700",children:"Export"}),s.jsx(S,{icon:s.jsx(Z,{className:`w-4 h-4 ${U?"animate-spin":""}`}),onClick:()=>w.invalidateQueries(["gscAnalytics"]),disabled:U,className:"flex items-center gap-2 bg-blue-600 text-white hover:bg-blue-700",children:"Refresh"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(ze,{className:"w-6 h-6 text-blue-600"})}),s.jsx(M,{className:"w-5 h-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:me(G.clicks)}),s.jsx("p",{className:"text-gray-600 text-sm",children:c==="all"?"Total Clicks":"Clicks"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:s.jsx(qe,{className:"w-6 h-6 text-purple-600"})}),s.jsx(M,{className:"w-5 h-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:me(G.impressions)}),s.jsx("p",{className:"text-gray-600 text-sm",children:c==="all"?"Total Impressions":"Impressions"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(Ve,{className:"w-6 h-6 text-green-600"})}),s.jsx(He,{className:"w-5 h-5 text-red-500"})]}),s.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[G.avgCtr.toFixed(2),"%"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Average CTR"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(M,{className:"w-6 h-6 text-orange-600"})}),s.jsx(M,{className:"w-5 h-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:G.avgPosition.toFixed(1)}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Average Position"})]})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-3",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[s.jsx("div",{className:"flex-1 flex items-center gap-2",children:s.jsx(at,{placeholder:"Search by URL, keywords, or title...",value:p,onChange:e=>C(e.target.value),onSearch:ge,enterButton:s.jsx(We,{className:"w-5 h-5 text-white"}),suffix:p&&s.jsx("span",{onClick:()=>ge(""),className:"cursor-pointer text-gray-400 text-xs transition",children:s.jsx(Je,{className:"w-4 h-4"})}),className:`w-full ${p?"border-orange-400 shadow-orange-100":""}`})}),s.jsx("div",{className:"flex-1",children:s.jsx(se,{value:c,onChange:e=>{ae(e),f(1),T([]),w.invalidateQueries(["gscAnalytics"])},className:"w-full",placeholder:"Select Blog",children:De.map(e=>s.jsx(E,{value:e,children:e==="all"?"All Blogs":e},e))})}),s.jsx("div",{className:"w-1/6",children:s.jsxs(se,{value:g[0]?"custom":b,onChange:e=>{ne(e),K([null,null]),f(1),T([]),w.invalidateQueries(["gscAnalytics"])},className:"w-full",children:[s.jsx(E,{value:"7d",children:"Last 7 Days"}),s.jsx(E,{value:"30d",children:"Last 30 Days"}),s.jsx(E,{value:"180d",children:"Last 6 Months"}),s.jsx(E,{value:"custom",children:"Custom Range"})]})}),b==="custom"&&s.jsx("div",{className:"flex-1",children:s.jsx(ot,{value:g,onChange:e=>{K(e),f(1),T([]),w.invalidateQueries(["gscAnalytics"])},disabledDate:e=>e&&e>X().endOf("day"),className:"w-full",placeholder:["Start Date","End Date"]})}),s.jsxs("div",{className:"flex-2 flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Include Country"}),s.jsx(tt,{checked:u,onChange:e=>{oe(e),e||Q([]),f(1),T([]),w.invalidateQueries(["gscAnalytics"])},className:`w-fit ${u?"bg-blue-600":"bg-gray-200"}`})]}),s.jsx("div",{className:"flex-2",children:s.jsx(S,{icon:s.jsx(Z,{className:"w-4 h-4"}),onClick:ke,className:`w-full flex items-center gap-2 ${Te?"border-red-400 bg-red-50 text-red-600":""}`,children:"Reset"})})]})}),s.jsx(fe,{columns:Ae,dataSource:h,rowKey:"id",pagination:{current:m,pageSize:k,total:h.length,onChange:(e,t)=>{f(e),re(t)},pageSizeOptions:[10,20,50,100],showSizeChanger:!0,showTotal:e=>`Total ${e} results`},expandable:c==="all"?{expandedRowKeys:q,onExpand:(e,t)=>J(t.id),expandedRowRender:e=>s.jsx(fe,{columns:Re,dataSource:e.keywordDetails,rowKey:"id",pagination:!1,className:"bg-gray-50 rounded-lg"})}:void 0,onChange:(e,t)=>{Q(t.countryName||[]),f(e.current),re(e.pageSize)},className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",locale:{emptyText:x?`Error: ${x.message||x.error||"An error occurred"}. Please try refreshing or reconnecting GSC.`:"No data available. Try adjusting your filters or refreshing the data."}})]}),s.jsx("style",{jsx:!0,children:`
        .ant-select-highlighted-green .ant-select-selector {
          border-color: #10b981 !important;
          box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1) !important;
        }
        .ant-select-highlighted-purple .ant-select-selector {
          border-color: #8b5cf6 !important;
          box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.1) !important;
        }
        .ant-select-highlighted-indigo .ant-select-selector {
          border-color: #6366f1 !important;
          box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1) !important;
        }
        .ant-table-thead > tr > th {
          background: #f8fafc;
          font-weight: 600;
          color: #1f2937;
        }
        .ant-table-row {
          transition: background 0.2s;
        }
        .ant-table-row:hover {
          background: #f1f5f9;
        }
        .ant-tag {
          transition: all 0.2s;
        }
        .ant-tag:hover {
          transform: scale(1.05);
        }
      `})]})};export{ft as default};
