var h=(a,i,s)=>new Promise((l,u)=>{var v=n=>{try{m(s.next(n))}catch(o){u(o)}},r=n=>{try{m(s.throw(n))}catch(o){u(o)}},m=n=>n.done?l(n.value):Promise.resolve(n.value).then(v,r);m((s=s.apply(a,i)).next())});import{j as e}from"./tiptap-Cw5itmsP.js";import{r as t,q as O,j as k,L as F}from"./vendor-D8zynvq1.js";import{I as L,E as M}from"./index-6Wzook5W.js";import{z as p,C as P,T as B,y as q,I as $,B as R,G as H,s as A}from"./antd-CNZYc_MN.js";import{R as S}from"./ReloadOutlined-D_T4f90z.js";import"./utils-Djmlt6HM.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function y(){return y=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a},y.apply(this,arguments)}const Y=(a,i)=>t.createElement(L,y({},a,{ref:i,icon:G})),_=t.forwardRef(Y),{Title:D,Text:g}=B;function ee(){const[a]=p.useForm(),[i,s]=t.useState(!1),[l,u]=t.useState(!1),[v,r]=t.useState(""),[m,n]=t.useState(""),[o,C]=t.useState(!1),[c,b]=t.useState(0),[w,E]=t.useState(!0),{email:f}=O(),N=k();t.useEffect(()=>{f&&(n(f),a.setFieldsValue({email:f}))},[f]),t.useEffect(()=>{if(c>0){const d=setTimeout(()=>b(c-1),1e3);return()=>clearTimeout(d)}else E(!0)},[c]);const V=()=>{b(60),E(!1)},I=()=>h(null,null,function*(){var d,j;try{s(!0),r("");const x=yield a.validateFields(["email"]);n(x.email),yield M.post("/auth/resend-verification-email",{email:x.email}),V(),C(!0)}catch(x){r(((j=(d=x.response)==null?void 0:d.data)==null?void 0:j.message)||"Failed to send verification email")}finally{s(!1)}}),T=d=>h(null,null,function*(){try{s(!0),r(""),d.code==="123456"?(u(!0),A.success("Email Verified ðŸŽ‰"),setTimeout(()=>N("/dashboard"),1200)):r("Invalid verification code.")}catch(j){r("Verification failed.")}finally{s(!1)}}),z=()=>h(null,null,function*(){w&&(yield I())});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(P,{className:"w-full max-w-md shadow-xl border-0",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(_,{className:"text-blue-600 text-2xl"})}),e.jsx(D,{level:3,children:"Verify Your Email"})]}),e.jsx(p,{form:a,layout:"vertical",onFinish:T,children:e.jsxs(q,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(p.Item,{name:"email",rules:[{required:!0,message:"Email required"},{type:"email",message:"Invalid email"}],children:e.jsx($,{placeholder:"you@example.com",size:"large"})}),!o&&e.jsx(R,{type:"primary",size:"large",loading:i,block:!0,onClick:I,children:"Send Link"}),o&&e.jsxs(e.Fragment,{children:[e.jsx(H,{message:e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:m}),e.jsx("br",{}),e.jsx(g,{type:"secondary",children:"Check your inbox and click on link."})]}),type:"info",showIcon:!0}),e.jsx(R,{size:"large",className:"w-full",onClick:z,disabled:!w||i,icon:c>0?e.jsx(S,{spin:!0}):e.jsx(S,{}),children:c>0?`${c}s`:"Resend"})]})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(F,{to:"/pricing",children:e.jsx(g,{type:"secondary",className:"hover:text-blue-600 transition-colors",children:"Back"})})})]})})}export{ee as default};
