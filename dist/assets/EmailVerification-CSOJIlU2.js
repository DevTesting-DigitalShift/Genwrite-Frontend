var O=(e,t,o)=>new Promise((n,s)=>{var l=c=>{try{u(o.next(c))}catch(d){s(d)}},i=c=>{try{u(o.throw(c))}catch(d){s(d)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(l,i);u((o=o.apply(e,t)).next())});import{e as se,k as ae,n as W,r,aH as ie,t as B,bq as ce,cL as le,o as de,co as me,dI as ue,cX as fe,dJ as pe,dx as ge,cZ as he,dK as ye,dL as _,dM as xe,cM as be,bs as ve,bt as Ce,I as $e,ao as Ie,b as Se,j as a,C as je,y as we,B as D,b5 as Ee,ar as Ne,V as Oe}from"./index-CLze5aqT.js";import{F as P}from"./index-y8GycFO2.js";import{S as Re}from"./index-D5JcNr_R.js";import{I as Me}from"./index-_WVlhNrF.js";import{R as F}from"./ReloadOutlined-B_WHWELG.js";import"./collapse-BbEVqHco.js";import"./useForm-CBeyB4gx.js";import"./useBreakpoint-BcRiMA_M.js";import"./useForceUpdate-CQM6hFEe.js";import"./gapSize-U1swVQyS.js";import"./Input-CLK2QQdg.js";import"./SearchOutlined-DM8REk6l.js";const R=(e,t,o,n,s)=>({background:e,border:`${W(n.lineWidth)} ${n.lineType} ${t}`,[`${s}-icon`]:{color:o}}),Pe=e=>{const{componentCls:t,motionDurationSlow:o,marginXS:n,marginSM:s,fontSize:l,fontSizeLG:i,lineHeight:u,borderRadiusLG:c,motionEaseInOutCirc:d,withDescriptionIconSize:h,colorText:f,colorTextHeading:y,withDescriptionPadding:x,defaultPadding:m}=e;return{[t]:Object.assign(Object.assign({},ae(e)),{position:"relative",display:"flex",alignItems:"center",padding:m,wordWrap:"break-word",borderRadius:c,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:n,lineHeight:0},"&-description":{display:"none",fontSize:l,lineHeight:u},"&-message":{color:y},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${d}, opacity ${o} ${d},
        padding-top ${o} ${d}, padding-bottom ${o} ${d},
        margin-bottom ${o} ${d}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:x,[`${t}-icon`]:{marginInlineEnd:s,fontSize:h,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:n,color:y,fontSize:i},[`${t}-description`]:{display:"block",color:f}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},ze=e=>{const{componentCls:t,colorSuccess:o,colorSuccessBorder:n,colorSuccessBg:s,colorWarning:l,colorWarningBorder:i,colorWarningBg:u,colorError:c,colorErrorBorder:d,colorErrorBg:h,colorInfo:f,colorInfoBorder:y,colorInfoBg:x}=e;return{[t]:{"&-success":R(s,n,o,e,t),"&-info":R(x,y,f,e,t),"&-warning":R(u,i,l,e,t),"&-error":Object.assign(Object.assign({},R(h,d,c,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},Be=e=>{const{componentCls:t,iconCls:o,motionDurationMid:n,marginXS:s,fontSizeIcon:l,colorIcon:i,colorIconHover:u}=e;return{[t]:{"&-action":{marginInlineStart:s},[`${t}-close-icon`]:{marginInlineStart:s,padding:0,overflow:"hidden",fontSize:l,lineHeight:W(l),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:i,transition:`color ${n}`,"&:hover":{color:u}}},"&-close-text":{color:i,transition:`color ${n}`,"&:hover":{color:u}}}}},Te=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),He=se("Alert",e=>[Pe(e),ze(e),Be(e)],Te);var A=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]]);return o};const Le={success:ge,info:pe,error:fe,warning:ue},Ve=e=>{const{icon:t,prefixCls:o,type:n}=e,s=Le[n]||null;return t?me(t,r.createElement("span",{className:`${o}-icon`},t),()=>({className:B(`${o}-icon`,t.props.className)})):r.createElement(s,{className:`${o}-icon`})},ke=e=>{const{isClosable:t,prefixCls:o,closeIcon:n,handleClose:s,ariaProps:l}=e,i=n===!0||n===void 0?r.createElement(he,null):n;return t?r.createElement("button",Object.assign({type:"button",onClick:s,className:`${o}-close-icon`,tabIndex:0},l),i):null},X=r.forwardRef((e,t)=>{const{description:o,prefixCls:n,message:s,banner:l,className:i,rootClassName:u,style:c,onMouseEnter:d,onMouseLeave:h,onClick:f,afterClose:y,showIcon:x,closable:m,closeText:g,closeIcon:b,action:w,id:E}=e,M=A(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[N,C]=r.useState(!1),I=r.useRef(null);r.useImperativeHandle(t,()=>({nativeElement:I.current}));const{getPrefixCls:S,direction:G,closable:$,closeIcon:H,className:J,style:K}=ie("alert"),p=S("alert",n),[Y,Z,Q]=He(p),U=v=>{var j;C(!0),(j=e.onClose)===null||j===void 0||j.call(e,v)},L=r.useMemo(()=>e.type!==void 0?e.type:l?"warning":"info",[e.type,l]),ee=r.useMemo(()=>typeof m=="object"&&m.closeIcon||g?!0:typeof m=="boolean"?m:b!==!1&&b!==null&&b!==void 0?!0:!!$,[g,b,m,$]),V=l&&x===void 0?!0:x,te=B(p,`${p}-${L}`,{[`${p}-with-description`]:!!o,[`${p}-no-icon`]:!V,[`${p}-banner`]:!!l,[`${p}-rtl`]:G==="rtl"},J,i,u,Q,Z),oe=ce(M,{aria:!0,data:!0}),ne=r.useMemo(()=>typeof m=="object"&&m.closeIcon?m.closeIcon:g||(b!==void 0?b:typeof $=="object"&&$.closeIcon?$.closeIcon:H),[b,m,g,H]),re=r.useMemo(()=>{const v=m!=null?m:$;if(typeof v=="object"){const{closeIcon:j}=v;return A(v,["closeIcon"])}return{}},[m,$]);return Y(r.createElement(le,{visible:!N,motionName:`${p}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:v=>({maxHeight:v.offsetHeight}),onLeaveEnd:y},({className:v,style:j},k)=>r.createElement("div",Object.assign({id:E,ref:de(I,k),"data-show":!N,className:B(te,v),style:Object.assign(Object.assign(Object.assign({},K),c),j),onMouseEnter:d,onMouseLeave:h,onClick:f,role:"alert"},oe),V?r.createElement(Ve,{description:o,icon:e.icon,prefixCls:p,type:L}):null,r.createElement("div",{className:`${p}-content`},s?r.createElement("div",{className:`${p}-message`},s):null,o?r.createElement("div",{className:`${p}-description`},o):null),w?r.createElement("div",{className:`${p}-action`},w):null,r.createElement(ke,{isClosable:ee,prefixCls:p,closeIcon:ne,handleClose:U,ariaProps:re}))))});function _e(e,t,o){return t=_(t),ye(e,xe()?Reflect.construct(t,o||[],_(e).constructor):t.apply(e,o))}let De=(function(e){function t(){var o;return Ce(this,t),o=_e(this,t,arguments),o.state={error:void 0,info:{componentStack:""}},o}return be(t,e),ve(t,[{key:"componentDidCatch",value:function(n,s){this.setState({error:n,info:s})}},{key:"render",value:function(){const{message:n,description:s,id:l,children:i}=this.props,{error:u,info:c}=this.state,d=(c==null?void 0:c.componentStack)||null,h=typeof n=="undefined"?(u||"").toString():n,f=typeof s=="undefined"?d:s;return u?r.createElement(X,{id:l,type:"error",message:h,description:r.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},f)}):i}}])})(r.Component);const q=X;q.ErrorBoundary=De;var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},T.apply(this,arguments)}const Ae=(e,t)=>r.createElement($e,T({},e,{ref:t,icon:Fe})),We=r.forwardRef(Ae),{Title:Xe,Text:z}=we;function st(){const[e]=P.useForm(),[t,o]=r.useState(!1),[n,s]=r.useState(!1),[l,i]=r.useState(""),[u,c]=r.useState(""),[d,h]=r.useState(!1),[f,y]=r.useState(0),[x,m]=r.useState(!0),{email:g}=Ie(),b=Se();r.useEffect(()=>{g&&(c(g),e.setFieldsValue({email:g}))},[g]),r.useEffect(()=>{if(f>0){const C=setTimeout(()=>y(f-1),1e3);return()=>clearTimeout(C)}else m(!0)},[f]);const w=()=>{y(60),m(!1)},E=()=>O(null,null,function*(){var C,I;try{o(!0),i("");const S=yield e.validateFields(["email"]);c(S.email),yield Ne.post("/auth/resend-verification-email",{email:S.email}),w(),h(!0)}catch(S){i(((I=(C=S.response)==null?void 0:C.data)==null?void 0:I.message)||"Failed to send verification email")}finally{o(!1)}}),M=C=>O(null,null,function*(){try{o(!0),i(""),C.code==="123456"?(s(!0),Oe.success("Email Verified üéâ"),setTimeout(()=>b("/dashboard"),1200)):i("Invalid verification code. Try: 123456")}catch(I){i("Verification failed.")}finally{o(!1)}}),N=()=>O(null,null,function*(){x&&(yield E())});return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs(je,{className:"w-full max-w-md shadow-xl border-0",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(We,{className:"text-blue-600 text-2xl"})}),a.jsx(Xe,{level:3,children:"Verify Your Email"})]}),a.jsx(P,{form:e,layout:"vertical",onFinish:M,children:a.jsxs(Re,{direction:"vertical",size:"large",className:"w-full",children:[a.jsx(P.Item,{name:"email",rules:[{required:!0,message:"Email required"},{type:"email",message:"Invalid email"}],children:a.jsx(Me,{placeholder:"you@example.com",size:"large"})}),!d&&a.jsx(D,{type:"primary",size:"large",loading:t,block:!0,onClick:E,children:"Send Code"}),d&&a.jsxs(a.Fragment,{children:[a.jsx(q,{message:a.jsxs("div",{children:[a.jsx(z,{strong:!0,children:u}),a.jsx("br",{}),a.jsx(z,{type:"secondary",children:"Check your inbox and click on link."})]}),type:"info",showIcon:!0}),a.jsx(D,{size:"large",className:"w-full",onClick:N,disabled:!x||t,icon:f>0?a.jsx(F,{spin:!0}):a.jsx(F,{}),children:f>0?`${f}s`:"Resend"})]})]})}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(Ee,{to:"/login",children:a.jsx(z,{type:"secondary",className:"hover:text-blue-600 transition-colors",children:"‚Üê Back to Login"})})})]})})}export{st as default};
