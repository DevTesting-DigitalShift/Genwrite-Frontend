import{q as U,I as j,a as Ne,Z as Oe,j as e,Q as Ae,bj as $e,m as b,N as P,A as ke,T as ee,b as I,Y as f}from"./index-DMLCM3Nt.js";import{b as s}from"./chunk-tiptap-Bpe5wDXG.js";import{b as ze}from"./SkeletonLoader-XYEnARC7.js";import{S as Pe}from"./index-CDpBeOUA.js";import{I as te}from"./index-BVv_RBbZ.js";import{R as Be,T as Me}from"./trash-2-HipcbF0p.js";import{B as Le}from"./index-DvWBVTT2.js";import{P as Te}from"./index-DV1a96C5.js";import"./Overflow-CO6KR47-.js";import"./SearchOutlined-CJ_cbcwp.js";import"./Input-BhozE_Lk.js";import"./index-ClVlNgdQ.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],Re=U("arrow-down-up",De);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ae=U("rotate-ccw",Ee);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ie=U("search",Fe);var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Ve={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194zm-72 388v134H354V706c0-42.2 16.4-81.9 46.3-111.7C430.1 564.4 469.8 548 512 548s81.9 16.4 111.7 46.3C653.6 624.1 670 663.8 670 706zm0-388c0 42.2-16.4 81.9-46.3 111.7C593.9 459.6 554.2 476 512 476s-81.9-16.4-111.7-46.3A156.63 156.63 0 01354 318V184h316v134z"}}]},name:"hourglass",theme:"outlined"},Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};function _(){return _=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},_.apply(this,arguments)}const Ue=(n,a)=>s.createElement(j,_({},n,{ref:a,icon:_e})),se=s.forwardRef(Ue);function H(){return H=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},H.apply(this,arguments)}const Ze=(n,a)=>s.createElement(j,H({},n,{ref:a,icon:He})),ne=s.forwardRef(Ze);function V(){return V=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},V.apply(this,arguments)}const Ye=(n,a)=>s.createElement(j,V({},n,{ref:a,icon:Ve})),Ke=s.forwardRef(Ye);function q(){return q=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},q.apply(this,arguments)}const We=(n,a)=>s.createElement(j,q({},n,{ref:a,icon:qe})),Qe=s.forwardRef(We);function G(){return G=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},G.apply(this,arguments)}const Xe=(n,a)=>s.createElement(j,G({},n,{ref:a,icon:Ge})),le=s.forwardRef(Xe),mt=()=>{const[n,a]=s.useState([]),[o,c]=s.useState([]),[Z,Y]=s.useState(1),[w,B]=s.useState(5),[re,K]=s.useState(!0),[S,C]=s.useState("createdAt"),[x,N]=s.useState("desc"),[v,O]=s.useState("all"),oe=Ne(),[ce,g]=s.useState(!1),[ie,M]=s.useState(!1),[A,L]=s.useState(""),[T,W]=s.useState(""),[y,de]=s.useState("title"),[me,D]=s.useState(!1),{handlePopup:he}=Oe(),ge=()=>g(t=>!t),ue=()=>D(!0),pe=()=>{L(""),W(""),M(!1)},Q=()=>{M(!0),D(!1)},fe=()=>{D(!1)},R=async()=>{var t,l;try{K(!0);const r=(await I.get("/blogs/")).data.filter(h=>!h.isArchived);a(r),X(r,S,x,T,y,v)}catch(i){console.error("Error fetching blogs:",((l=(t=i.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to fetch blogs")}finally{K(!1)}},X=(t,l,i,r,h,m)=>{let u=[...t];m!=="all"&&(u=u.filter(d=>d.status.toLowerCase()===m.toLowerCase())),r&&(u=u.filter(d=>h==="title"?d.title.toLowerCase().includes(r.toLowerCase()):d.focusKeywords&&d.focusKeywords.some(p=>p.toLowerCase().includes(r.toLowerCase())))),u.sort((d,p)=>l==="az"?i==="asc"?d.title.localeCompare(p.title):p.title.localeCompare(d.title):i==="asc"?new Date(d.createdAt)-new Date(p.createdAt):new Date(p.createdAt)-new Date(d.createdAt)),c(u),Y(1)};s.useEffect(()=>{const t=setTimeout(()=>{W(A)},400);return()=>clearTimeout(t)},[A]),s.useEffect(()=>{R()},[]),s.useEffect(()=>{X(n,S,x,T,y,v)},[n,S,x,T,y,v]),s.useEffect(()=>{const t=()=>{window.innerWidth>=1024?B(15):window.innerWidth>=768?B(12):B(6)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const xe=t=>{oe(`/toolbox/${t._id}`,{state:{blog:t}})},ve=async t=>{var i,r,h;const l={createNew:!1};try{const m=await I.post(`blogs/${t}/retry`,l);m.status===200?(f.success(((i=m==null?void 0:m.data)==null?void 0:i.message)||"Blog regenerated successfully!"),R()):f.error("Failed to regenerate blog.")}catch(m){f.error("Failed to regenerate blog."),console.error("Error regenerating blog:",((h=(r=m.response)==null?void 0:r.data)==null?void 0:h.message)||"Failed to restore blog")}},E=Math.ceil(o.length/w),J=(Z-1)*w,$=o.slice(J,J+w),ye=t=>{Y(t)},be=async t=>{var l,i;try{(await I.patch(`/blogs/archive/${t}`)).status===200?(a(h=>h.filter(m=>m._id!==t)),f.success("Blog archived successfully!")):f.error("Failed to archive blog.")}catch(r){f.error("Failed to archive blog."),console.error("Error archiving blog:",((i=(l=r.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to archive blog")}},je=[{label:"A-Z (Ascending)",icon:e.jsx(le,{}),onClick:()=>{C("az"),N("asc"),g(!1)}},{label:"A-Z (Descending)",icon:e.jsx(le,{}),onClick:()=>{C("az"),N("desc"),g(!1)}},{label:"Created Date (Newest)",icon:e.jsx(se,{}),onClick:()=>{C("createdAt"),N("desc"),g(!1)}},{label:"Created Date (Oldest)",icon:e.jsx(se,{}),onClick:()=>{C("createdAt"),N("asc"),g(!1)}},{label:"Status: All",icon:e.jsx(ne,{}),onClick:()=>{O("all"),g(!1)}},{label:"Status: Completed",icon:e.jsx(ne,{}),onClick:()=>{O("complete"),g(!1)}},{label:"Status: Pending",icon:e.jsx(Qe,{}),onClick:()=>{O("pending"),g(!1)}},{label:"Status: Failed",icon:e.jsx(Ke,{}),onClick:()=>{O("failed"),g(!1)}}],we=async()=>{await R()};return e.jsxs("div",{className:"p-5",children:[e.jsx(Ae,{}),e.jsx($e,{title:"Search Blogs",open:me,onOk:Q,onCancel:fe,okText:"Search",cancelText:"Cancel",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Pe,{defaultValue:"title",onChange:t=>de(t),options:[{value:"title",label:"Search by Title"},{value:"keywords",label:"Search by Focus Keywords"}],className:"w-full"}),e.jsx(te,{placeholder:`Search by ${y==="title"?"title":"focus keywords"}...`,value:A,onChange:t=>L(t.target.value),onPressEnter:Q})]})}),e.jsxs("div",{className:"flex justify-between align-middle items-center",children:[e.jsxs("div",{children:[e.jsx(b.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blogs Generated"}),e.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-gray-600 max-w-xl mt-2 mb-5",children:"All your content creation tools in one place. Streamline your workflow with our powerful suite of tools."}),e.jsxs("div",{className:"flex gap-2 items-center text-sm text-gray-500",children:[e.jsx("span",{children:"Filter:"}),e.jsx("span",{className:"font-medium capitalize",children:v==="all"?"All Statuses":v}),e.jsx("span",{children:"| Sort:"}),e.jsx("span",{className:"font-medium",children:S==="az"?`A-Z (${x})`:`Date (${x==="desc"?"Newest":"Oldest"})`})]})]}),e.jsxs("div",{className:"flex gap-3",children:[ie?e.jsx(te,{autoFocus:!0,size:"small",placeholder:`Search by ${y==="title"?"title":"focus keywords"}...`,value:A,onChange:t=>L(t.target.value),onPressEnter:pe,onBlur:()=>M(!1),className:"w-48"}):e.jsx(P,{type:"button",onClick:ue,children:e.jsx(Ie,{})}),e.jsx(P,{type:"button",onClick:()=>we(),children:e.jsx(Be,{})}),e.jsx(b.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(P,{type:"button",icon:e.jsx(Re,{}),onClick:ge,className:"pt-1"})})]})]}),e.jsx(ke,{children:ce&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"absolute top-[12rem] right-10 z-50 min-w-[200px] rounded-lg shadow-lg border bg-white backdrop-blur-md p-2 space-y-1",children:je.map(({label:t,icon:l,onClick:i})=>e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(ee,{title:t,placement:"left",children:e.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-lg",children:l}),e.jsx("span",{children:t})]})})},t))})}),re?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(w)].map((t,l)=>e.jsx("div",{className:"bg-white shadow-md rounded-xl p-4",children:e.jsx(ze,{})},l))}):$.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 270px)"},children:[e.jsx("img",{src:"Images/no-blog.png",alt:"Trash",style:{width:"8rem"}}),e.jsx("p",{className:"text-xl mt-5",children:"No blogs available."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 place-items-center p-2",children:$==null?void 0:$.map(t=>{const{_id:l,title:i,status:r,createdAt:h,content:m,aiModel:u,focusKeywords:d,updatedAt:p,wordpress:k,agendaJob:z}=t,F=/gemini/gi.test(u);return e.jsx(Le.Ribbon,{text:e.jsxs("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide",children:[e.jsx("img",{src:`./Images/${F?"gemini":"chatgpt"}.png`,alt:"",width:20,height:20,loading:"lazy",className:"bg-white"}),F?"Gemini-1.5-flash":"Chatgpt-4o-mini"]}),className:"absolute top-0",color:F?"#4796E3":"#74AA9C",children:e.jsxs("div",{className:`bg-white shadow-md hover:shadow-xl transition-all duration-300 rounded-xl p-4 min-h-[180px] min-w-[390px] relative
                      ${(r==="failed"?"border-red-500":r==="pending"?"border-yellow-500":"border-green-500")+" border-2"}
                    `,title:i,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(h).toLocaleDateString("en-US",{dateStyle:"medium"})}),e.jsx(ee,{title:r==="complete"?i:r==="failed"?"Blog generation failed":r==="pending"?`Pending Blog will be generated ${z!=null&&z.nextRunAt?"at "+new Date(z.nextRunAt).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"shortly"}`:`Blog generation is ${r}`,color:r==="complete"?"green":r==="failed"?"red":"yellow",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{r==="complete"&&xe(t)},children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg capitalize font-semibold text-gray-900 !text-left max-w-76",children:i}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:m||""})]})})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:d==null?void 0:d.map((Se,Ce)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:Se},Ce))}),r==="failed"&&e.jsx(Te,{title:"Retry Blog Generation",description:"Are you sure you want to retry generating this blog?",icon:e.jsx(ae,{style:{color:"red"},size:15,className:"mt-1 mr-1"}),okText:"Yes",cancelText:"No",onConfirm:()=>ve(l),children:e.jsx(ae,{})}),e.jsx(P,{type:"undefined",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>he({title:"Move to Trash",description:e.jsxs("span",{className:"my-2",children:["Blog ",e.jsx("b",{children:i})," will be moved to trash. You can restore it later."]}),confirmText:"Delete",onConfirm:()=>{be(l)},confirmProps:{type:"undefined",className:"border-red-500 hover:bg-red-500 hover:text-white"},cancelProps:{danger:!1}}),children:e.jsx(Me,{})})]}),e.jsxs("div",{className:"mt-3 -mb-2 flex justify-end text-xs text-right text-gray-500 font-medium",children:[(k==null?void 0:k.postedOn)&&e.jsxs("span",{className:"",children:["Posted on :",new Date(k.postedOn).toLocaleDateString("en-US",{dateStyle:"medium"})]}),e.jsxs("span",{className:"ml-auto",children:["Last updated :",new Date(p).toLocaleDateString("en-US",{dateStyle:"medium"})]})]})]})},l)})}),E>1&&e.jsx("div",{className:"flex justify-center mt-8 self-end",children:e.jsx("nav",{className:"inline-flex rounded-md shadow",children:e.jsx("ul",{className:"flex",children:Array.from({length:E},(t,l)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>ye(l+1),className:`px-4 py-2 border-r border-gray-200 text-sm font-medium ${Z===l+1?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} ${l===0?"rounded-l-md":""} ${l===E-1?"rounded-r-md border-r-0":""}`,children:l+1})},l))})})})]})]})};export{mt as default};
