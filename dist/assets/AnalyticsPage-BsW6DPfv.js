var J=Object.defineProperty,q=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var R=(a,s,t)=>s in a?J(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,h=(a,s)=>{for(var t in s||(s={}))D.call(s,t)&&R(a,t,s[t]);if(B)for(var t of B(s))A.call(s,t)&&R(a,t,s[t]);return a},N=(a,s)=>q(a,Z(s));var I=(a,s)=>{var t={};for(var r in a)D.call(a,r)&&s.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&B)for(var r of B(a))s.indexOf(r)<0&&A.call(a,r)&&(t[r]=a[r]);return t};import{c as O,r as g,j as e,a as K,z as W,m as d,B as G,$ as H}from"./index-DGyKukHS.js";import{a as S,D as Q,g as V,h as X,i as Y,C as ee,A as se,B as ae,r as te}from"./chart-MA5MzoSM.js";import{u as ie}from"./useQuery-dfiIo4uw.js";import{d as re}from"./dayjs.min-4H0-nwp4.js";import{I as le}from"./image-CJP7Guf7.js";import{T as ne}from"./trending-up-BTGgAk80.js";import{F as oe}from"./file-text-DmPbVdWB.js";import{P as ce}from"./progress-CWr0ME6b.js";import{S as de}from"./index-BwEY3YVU.js";import"./index-DHwZnXZQ.js";import"./move-DJJhZmR8.js";import"./SearchOutlined-BMAxbBz4.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],me=O("circle-stop",ge);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],be=O("file-plus",ue);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],pe=O("gauge",xe),E="label";function z(a,s){typeof a=="function"?a(s):a&&(a.current=s)}function he(a,s){const t=a.options;t&&s&&Object.assign(t,s)}function P(a,s){a.labels=s}function F(a,s,t=E){const r=[];a.datasets=s.map(o=>{const c=a.datasets.find(b=>b[t]===o[t]);return!c||!o.data||r.includes(c)?h({},o):(r.push(c),Object.assign(c,o),c)})}function ye(a,s=E){const t={labels:[],datasets:[]};return P(t,a.labels),F(t,a.datasets,s),t}function fe(a,s){const v=a,{height:t=150,width:r=300,redraw:o=!1,datasetIdKey:c,type:b,data:l,options:x,plugins:k=[],fallbackContent:y,updateMode:m}=v,f=I(v,["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"]),p=g.useRef(null),n=g.useRef(null),j=()=>{p.current&&(n.current=new S(p.current,{type:b,data:ye(l,c),options:x&&h({},x),plugins:k}),z(s,n.current))},u=()=>{z(s,null),n.current&&(n.current.destroy(),n.current=null)};return g.useEffect(()=>{!o&&n.current&&x&&he(n.current,x)},[o,x]),g.useEffect(()=>{!o&&n.current&&P(n.current.config.data,l.labels)},[o,l.labels]),g.useEffect(()=>{!o&&n.current&&l.datasets&&F(n.current.config.data,l.datasets,c)},[o,l.datasets]),g.useEffect(()=>{n.current&&(o?(u(),setTimeout(j)):n.current.update(m))},[o,x,l.labels,l.datasets,m]),g.useEffect(()=>{n.current&&(u(),setTimeout(j))},[b]),g.useEffect(()=>(j(),()=>u()),[]),e.jsx("canvas",N(h({ref:p,role:"img",height:t,width:r},f),{children:y}))}const je=g.forwardRef(fe);function C(a,s){return S.register(s),g.forwardRef((t,r)=>e.jsx(je,N(h({},t),{ref:r,type:a})))}const Ne=C("line",X),ve=C("bar",V),we=C("doughnut",Q),Be=C("pie",Y);S.register(...te);const{Option:_e}=de,L=({title:a,value:s,icon:t,iconBg:r,cardBg:o,ringColor:c,progress:b,limit:l})=>e.jsx(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`
      group relative ${o} p-4 rounded-xl border border-gray-200
      shadow-sm hover:shadow-md transition-all duration-300
      hover:ring-1 hover:ring-offset-2 ${c}
      text-gray-900 border-gray-200
    `,children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:a}),e.jsx("div",{className:`p-2 rounded-md ${r} shadow-md`,children:t})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[s,l?` / ${l}`:""]}),b!==void 0&&l!==void 0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(ce,{percent:Math.min(s/l*100,100),size:"small",status:s>=l?"exception":s/l>.8?"warning":"normal",showInfo:!1,strokeColor:s>=l?"#ef4444":s/l>.8?"#f59e0b":"#10b981"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(s/l*100),"% of limit used"]})]})]})}),Ce=({title:a,children:s,className:t=""})=>e.jsxs("div",{className:`rounded-2xl p-6 shadow-sm border transition-all duration-300
      bg-white border-gray-100 text-gray-900
      hover:shadow-lg ${t}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h3",{className:"text-lg font-semibold",children:a})}),e.jsx("div",{className:"h-80",children:s})]}),$e=()=>{const a=K(W),{data:s,isLoading:t,error:r,refetch:o}=ie({queryKey:["blogStatus"],queryFn:()=>{const i=re().endOf("day").toISOString();let w={start:new Date((a==null?void 0:a.createdAt)||Date.now()).toISOString(),end:i};return H(w)}}),c=(s==null?void 0:s.stats)||{},{totalBlogs:b=0,postedBlogs:l=0,archivedBlogs:x=0,brandedBlogs:k=0,blogsByModel:y={},blogsByStatus:m={},imageSources:f={},templatesUsed:p={}}=c,n=(a==null?void 0:a.usage)||{createdJobs:0,aiImages:0},j=(a==null?void 0:a.usageLimits)||{createdJobs:10,aiImages:50},u={maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:12},padding:20,color:"#6b7280"}},tooltip:{backgroundColor:"white",titleColor:"#1f2937",bodyColor:"#1f2937",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:12}},scales:{x:{ticks:{font:{size:12},color:"#6b7280"}},y:{ticks:{font:{size:12},color:"#6b7280"},beginAtZero:!0}}},v=N(h({},u),{scales:{x:{ticks:{font:{size:12},color:"#6b7280",maxRotation:45,minRotation:45}},y:{ticks:{font:{size:12},color:"#6b7280",stepSize:1},beginAtZero:!0}}}),M=N(h({},u),{plugins:N(h({},u.plugins),{legend:{display:!1}}),scales:{x:{ticks:{font:{size:12},color:"#6b7280",maxRotation:45,minRotation:45}},y:{ticks:{font:{size:12},color:"#6b7280",stepSize:1},beginAtZero:!0}}}),T=[{title:"Blogs by Model",type:"Pie",data:{labels:Object.keys(y).length?Object.keys(y):["No Data"],datasets:[{data:Object.keys(y).length?Object.values(y):[1],backgroundColor:["#3B82F6","#10B981","#F59E0B","#6B7280"],hoverOffset:20,borderColor:"#ffffff"}]}},{title:"Image Sources",type:"Doughnut",data:{labels:Object.keys(f).length?Object.keys(f):["No Data"],datasets:[{data:Object.keys(f).length?Object.values(f):[1],backgroundColor:["#10B981","#F59E0B","#EF4444","#6B7280"],hoverOffset:20,borderColor:"#ffffff"}]}},{title:"Blogs by Status",type:"Bar",data:{labels:Object.keys(m).length?Object.keys(m):["No Data"],datasets:[{label:"Blogs by Status",data:Object.keys(m).length?Object.values(m):[0],backgroundColor:Object.keys(m).length?Object.keys(m).map(i=>{switch(i.toLowerCase()){case"pending":return"#facc15";case"complete":return"#22c55e";case"failed":return"#ef4444";case"in-progress":return"#a78bfa";default:return"#6b7280"}}):["#9ca3af"],borderColor:"#e5e7eb",borderWidth:1}]}},{title:"Templates Used",type:"Line",data:{labels:Object.keys(p).length?Object.keys(p):["No Data"],datasets:[{label:"Templates Used",data:Object.keys(p).length?Object.values(p):[0],borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0}]}}],_=[{title:"Total Blogs",value:b,icon:e.jsx(oe,{className:"w-5 h-5 text-white"}),iconBg:"bg-blue-500",cardBg:"bg-blue-50",ringColor:"ring-blue-200"},{title:"Posted Blogs",value:l,icon:e.jsx(ee,{className:"w-5 h-5 text-white"}),iconBg:"bg-green-500",cardBg:"bg-green-50",ringColor:"ring-green-200"},{title:"Archived Blogs",value:x,icon:e.jsx(se,{className:"w-5 h-5 text-white"}),iconBg:"bg-yellow-500",cardBg:"bg-yellow-50",ringColor:"ring-yellow-200"},{title:"Branded Blogs",value:k,icon:e.jsx(ae,{className:"w-5 h-5 text-white"}),iconBg:"bg-pink-500",cardBg:"bg-pink-50",ringColor:"ring-pink-200"}],$=[{title:"Created Jobs",value:n.createdJobs,limit:j.createdJobs,progress:n.createdJobs,icon:e.jsx(be,{className:"w-5 h-5 text-white"}),iconBg:"bg-purple-500",cardBg:"bg-purple-50",ringColor:"ring-purple-200"},{title:"AI Images",value:n.aiImages,limit:j.aiImages,progress:n.aiImages,icon:e.jsx(le,{className:"w-5 h-5 text-white"}),iconBg:"bg-teal-500",cardBg:"bg-teal-50",ringColor:"ring-teal-200"}],U=()=>{o()};return e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"p-6",children:[e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blog Analytics"}),e.jsx("p",{className:"text-base mt-1 text-gray-600",children:"Track your blog performance and engagement metrics"})]})}),t||!a?e.jsx(ke,{}):r?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-lg text-red-500",children:["Error: ",r.message||"Failed to load analytics data"]}),e.jsx(G,{onClick:U,className:"mt-4 bg-blue-600 text-white","aria-label":"Retry loading data",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-600 flex items-center justify-center",children:e.jsx(ne,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blog Statistics"})]})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:_.map((i,w)=>e.jsx(L,{title:i.title,value:i.value,icon:i.icon,iconBg:i.iconBg,cardBg:i.cardBg,ringColor:i.ringColor,progress:i.progress,limit:i.limit},i.title))}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center",children:e.jsx(pe,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usage & Limit"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 mb-8",children:$.map((i,w)=>e.jsx(L,{title:i.title,value:i.value,icon:i.icon,iconBg:i.iconBg,cardBg:i.cardBg,ringColor:i.ringColor,progress:i.progress,limit:i.limit},i.title))}),e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-600 flex items-center justify-center",children:e.jsx(me,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analytics Charts"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map((i,w)=>e.jsxs(Ce,{title:i.title,children:[i.type==="Pie"&&e.jsx(Be,{data:i.data,options:u}),i.type==="Doughnut"&&e.jsx(we,{data:i.data,options:u}),i.type==="Bar"&&e.jsx(ve,{data:i.data,options:v}),i.type==="Line"&&e.jsx(Ne,{data:i.data,options:M})]},i.title))})]})]})})},ke=()=>e.jsxs("div",{className:"p-2 md:p-4 lg:p-8 max-w-full",children:[e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded mt-2 animate-pulse"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"h-10 w-40 bg-gray-200 rounded animate-pulse"})})]}),e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((a,s)=>e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:s*.1},className:"p-4 rounded-xl border border-gray-200 bg-gray-50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-md animate-pulse"})]}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"})]},s))}),e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 mb-8",children:[...Array(2)].map((a,s)=>e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:s*.1},className:"p-4 rounded-xl border border-gray-200 bg-gray-50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-md animate-pulse"})]}),e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded mt-1 animate-pulse"})]})]},s))}),e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded animate-pulse"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(4)].map((a,s)=>e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:s*.1},className:"rounded-2xl p-6 shadow-sm border bg-white border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"h-5 w-40 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"h-80 w-full bg-gray-200 rounded-lg animate-pulse"})]},s))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("div",{className:"h-4 w-48 mx-auto bg-gray-200 rounded animate-pulse"})})]});export{$e as default};
