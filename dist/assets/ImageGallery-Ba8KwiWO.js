var G=Object.defineProperty,U=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var E=(r,a,t)=>a in r?G(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,P=(r,a)=>{for(var t in a||(a={}))q.call(a,t)&&E(r,t,a[t]);if(I)for(var t of I(a))M.call(a,t)&&E(r,t,a[t]);return r},L=(r,a)=>U(r,_(a));var j=(r,a,t)=>new Promise((m,d)=>{var w=n=>{try{g(t.next(n))}catch(x){d(x)}},h=n=>{try{g(t.throw(n))}catch(x){d(x)}},g=n=>n.done?m(n.value):Promise.resolve(n.value).then(w,h);g((t=t.apply(r,a)).next())});import{r as i,W as b,j as e,H,P as O}from"./index-54BNsocf.js";import{s as Q,g as W}from"./imageGalleryApi-KE03i0Rs.js";import{l as A}from"./lodash-DmQYlH4Z.js";import{S as X}from"./search-Duo5aQYD.js";import{C as T}from"./copy-QLLjU-4y.js";import{D}from"./download-M_7QFp3y.js";import{I as B}from"./image-DnJdZtLH.js";import{P as J}from"./Pagination-hGi6ScDS.js";import{X as K}from"./x-DbTuEVbB.js";import"./LeftOutlined-CVmjQM5U.js";import"./RightOutlined-B8q_hMJr.js";import"./useBreakpoint-DXSogBya.js";import"./index-OVXmCeJn.js";import"./index-D_XB9Jta.js";import"./move-McwzBUue.js";import"./SearchOutlined-BdhzflJX.js";const V=({count:r=12})=>{const a=["aspect-[3/4]","aspect-[4/5]","aspect-square","aspect-[2/3]","aspect-[5/6]"];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:r}).map((t,m)=>e.jsx("div",{className:"break-inside-avoid rounded-xl overflow-hidden bg-gray-100 animate-pulse",children:e.jsx("div",{className:`w-full ${a[m%a.length]} bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_200%] animate-shimmer`})},m))})},fe=()=>{const[r,a]=i.useState([]),[t,m]=i.useState(!1),[d,w]=i.useState(""),[h,g]=i.useState(1),[n]=i.useState(20),[x,R]=i.useState(0),[p,Y]=i.useState(0),[u,Z]=i.useState([]),[c,v]=i.useState(null);i.useEffect(()=>{g(1)},[d,p,u]);const k=i.useCallback(()=>j(null,null,function*(){var s;m(!0);try{const l={page:h,limit:n,minScore:p>0?p:void 0,tags:u.length>0?u:void 0};let o;d.trim()?o=yield Q(L(P({},l),{q:d})):o=yield W(l);const N=o.data||[],y=((s=o.pagination)==null?void 0:s.total)||0;R(y),a(N)}catch(l){console.error("Error fetching images:",l),b.error("Failed to load images")}finally{m(!1)}}),[h,n,p,u,d]);i.useEffect(()=>{k()},[k]);const $=i.useCallback(A.debounce(s=>{w(s)},500),[]),z=s=>{$(s.target.value)},F=s=>{v(s)},C=(s,l)=>j(null,null,function*(){l&&l.stopPropagation();try{const N=yield(yield fetch(s.url)).blob(),y=window.URL.createObjectURL(N),f=document.createElement("a");f.href=y,f.download=`image-${s._id}.jpg`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(y),document.body.removeChild(f),b.success("Image downloaded successfully!")}catch(o){console.error(o),b.error("Failed to download image")}}),S=(s,l)=>j(null,null,function*(){l&&l.stopPropagation();try{yield navigator.clipboard.writeText(s.url),b.success("Image link copied to clipboard!")}catch(o){console.error(o),b.error("Failed to copy link")}});return d||u.length>0||p>0,e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:"Image Gallery | GenWrite"})}),e.jsxs("div",{className:"min-h-screen p-3 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8 mt-5 md:mt-0",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Explore Creations"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2 max-w-md",children:"Curated high-quality generations for your next project"})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",onChange:z,className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400"})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map((s,l)=>e.jsxs("div",{className:"break-inside-avoid relative group rounded-xl overflow-hidden cursor-pointer bg-gray-100",onClick:()=>F(s),children:[e.jsx("img",{src:s.url,alt:s.description,className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-white text-sm line-clamp-2 font-medium mr-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:o=>S(s,o),className:"p-2 bg-white text-gray-900 rounded-full hover:bg-blue-50 hover:text-blue-600 transition-colors duration-200 shadow-lg",title:"Copy Link",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:o=>C(s,o),className:"p-2 bg-white text-gray-900 rounded-full hover:bg-gray-100 transition-colors duration-200 shadow-lg",title:"Download",children:e.jsx(D,{className:"w-4 h-4"})})]})]})})]},s._id))}),t&&r.length===0&&e.jsx(V,{count:12}),!t&&r.length===0&&e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center",children:[e.jsx(B,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filters"})]}),!t&&r.length>0&&x>0&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx(J,{current:h,total:x,pageSize:n,onChange:s=>g(s),showSizeChanger:!1,showTotal:(s,l)=>`${l[0]}-${l[1]} of ${s} images`})})]}),e.jsx(O,{open:!!c,onCancel:()=>v(null),footer:null,centered:!0,width:1e3,closeIcon:null,className:"image-detail-modal",styles:{content:{padding:0,borderRadius:"24px",overflow:"hidden",backgroundColor:"transparent",boxShadow:"none"}},children:c&&e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-2xl flex flex-col md:flex-row max-h-[90vh]",children:[e.jsxs("div",{className:"flex-1 relative group flex items-center justify-center p-2",children:[e.jsx("div",{className:"relative max-h-full max-w-full shadow-lg rounded-lg overflow-hidden",children:e.jsx("img",{src:c.url,alt:c.description,className:"max-h-[85vh] w-auto object-contain"})}),e.jsx("button",{onClick:()=>v(null),className:"absolute top-4 left-4 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all backdrop-blur-sm z-10",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"w-full md:w-[350px] bg-white p-6 md:p-4 flex flex-col overflow-y-auto border-l border-gray-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-snug mb-4",children:"Prompt Details"}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm mb-6",children:c.description||"No description provided for this generation."}),c.tags&&c.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((s,l)=>e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium border border-gray-200",children:["#",s]},l))})]})]}),e.jsxs("div",{className:"mt-0 md:mt-6 pt-0 md:pt-6 border-t border-gray-100 space-y-3",children:[e.jsxs("button",{onClick:()=>S(c),className:"w-full py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-100 flex items-center justify-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Copy Image Link"]}),e.jsxs("button",{onClick:()=>C(c),className:"w-full py-4 bg-gray-900 hover:bg-black text-white rounded-xl font-bold transition-all shadow-lg shadow-gray-200 flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Download Image"]})]})]})]})})]})]})};export{fe as default};
