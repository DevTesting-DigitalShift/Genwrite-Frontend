var v=(n,x,s)=>new Promise((h,p)=>{var u=o=>{try{m(s.next(o))}catch(a){p(a)}},g=o=>{try{m(s.throw(o))}catch(a){p(a)}},m=o=>o.done?h(o.value):Promise.resolve(o.value).then(u,g);m((s=s.apply(n,x)).next())});import{j as e}from"./tiptap-BabmW22p.js";import{b as d,h as R,l as B}from"./vendor-CcjAMWu8.js";import{u as V}from"./useAuthStore-CU2rUJjR.js";import{u as A}from"./useContentStore-CHj3LRLK.js";import{u as I}from"./index-CHEUOGl9.js";import{o as W}from"./UpgardePopUp-BR-RcAtv.js";import{P as Z}from"./ProgressLoadingScreen-C8VO8dwW.js";import{s as l,l as _,B as z}from"./antd-8WQTeuab.js";import{S as L}from"./sparkles-CoI3F60w.js";import{R as U}from"./refresh-cw-C9vuQMbq.js";import{C as q}from"./check-CTiRpsHo.js";import{C as D}from"./copy-Bau5eDru.js";import"./DataLayer-DALerVhB.js";import"./react-wNxFir7h.js";import"./utils-DIb0lvMo.js";const{TextArea:G}=_,me=()=>{var M;const[n,x]=d.useState(""),[s,h]=d.useState(""),[p,u]=d.useState(null),g=R(),m=B(),{handlePopup:o}=I(),{user:a}=V(),i=(M=a==null?void 0:a.subscription)==null?void 0:M.plan,{data:w,loading:c,error:y,generatePromptContent:N,resetMetadata:f}=A();d.useEffect(()=>()=>{f()},[m.pathname,f]);const j=s.trim().length>=10,b=n.trim().split(/\s+/).length>=300,C=j&&b&&!c,P=d.useCallback(()=>v(null,null,function*(){var t;if(!j){l.error("Prompt must be at least 10 characters long.");return}if(!b){l.error("Content must be at least 300 words long.");return}if(["free","basic"].includes((t=i==null?void 0:i.toLowerCase)==null?void 0:t.call(i))){W({featureName:"Content Generation",navigate:g});return}try{yield N({prompt:s,content:n}),l.success("Content generated successfully!")}catch(r){console.error("Error generating content:",r),l.error(typeof r=="string"?r:"Failed to generate content.")}}),[n,s,N,i,g,j,b]),S=d.useCallback(()=>{x(""),h(""),f(),l.success("Content and prompt reset!")},[f]),E=(t,r,F)=>v(null,null,function*(){try{yield navigator.clipboard.writeText(t),u(F),l.success(`${r} copied to clipboard!`),setTimeout(()=>{u(null)},2e3)}catch(J){l.error(`Failed to copy ${r}.`)}}),T=t=>{const r=document.createElement("div");return r.innerHTML=t,r.textContent||r.innerText||""},$=t=>e.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border",dangerouslySetInnerHTML:{__html:t},style:{lineHeight:"1.6",color:"#374151"}}),k=n.trim().split(/\s+/).filter(t=>t.length>0).length,H=s.trim().length;return c?e.jsx("div",{className:"h-[calc(100vh-200px)] p-4 flex items-center justify-center",children:e.jsx(Z,{message:"Generating content..."})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-5",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl text-white flex items-center justify-center",children:e.jsx(L,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Content from Prompts"}),e.jsx("p",{className:"text-gray-600",children:"Transform your ideas into ready-to-publish content in seconds."})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Reset all content",children:[e.jsx(U,{className:"w-4 h-4"}),"Reset"]})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-file-text w-5 h-5 text-blue-600",children:[e.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),e.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),e.jsx("path",{d:"M10 9H8"}),e.jsx("path",{d:"M16 13H8"}),e.jsx("path",{d:"M16 17H8"})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Prompt"})]}),e.jsxs("span",{className:`text-sm ${H>=10?"text-green-600":"text-red-500"}`,children:[H,"/10 minimum"]})]}),e.jsx(G,{value:s,onChange:t=>h(t.target.value),placeholder:"Enter your prompt here (e.g., 'Humanize this content to make it more engaging')...",rows:4,className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 custom-scroll ${s.trim()&&!j?"border-red-300":"border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-file-text w-5 h-5 text-blue-600",children:[e.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),e.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),e.jsx("path",{d:"M10 9H8"}),e.jsx("path",{d:"M16 13H8"}),e.jsx("path",{d:"M16 17H8"})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Content"})]}),e.jsxs("span",{className:`text-sm ${k>=300?"text-green-600":"text-red-500"}`,children:[k,"/300 words minimum"]})]}),e.jsx(G,{value:n,onChange:t=>x(t.target.value),placeholder:"Enter your content here (minimum 300 words)...",rows:12,className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 custom-scroll ${n.trim()&&!b?"border-red-300":"border-gray-300"}`})]}),e.jsx(z,{onClick:()=>P(),loading:c,disabled:!C,className:`w-full py-3 text-sm font-medium text-white rounded-lg transition-all duration-200 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg flex items-center justify-center gap-2 ${C?"":"opacity-50 cursor-not-allowed"}`,children:c?"Generating...":"Generate Content"})]})}),w&&!c&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg text-white flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Generated Content"})]}),e.jsx("button",{onClick:()=>E(T(w),"Generated content","generated"),className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Copy generated content",children:p==="generated"?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4"}),"Copy"]})})]}),$(w)]}),y&&!c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-red-700",children:["Error: ",y]})})]})};export{me as default};
