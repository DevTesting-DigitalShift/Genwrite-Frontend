var x=(a,r,o)=>new Promise((l,c)=>{var d=e=>{try{s(o.next(e))}catch(i){c(i)}},n=e=>{try{s(o.throw(e))}catch(i){c(i)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(d,n);s((o=o.apply(a,r)).next())});import{r as p,u as w,dp as f,Q as h,j as t,B as C}from"./index-G48zrVNx.js";import{F as y}from"./index-B4WZP6aY.js";import{F as b}from"./index-C7wLFPOg.js";import{c as v}from"./createLucideIcon-DfKG_cSf.js";import"./iconBase-oxS-Erx6.js";import"./gapSize-U1swVQyS.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],G=v("log-in",j),A=()=>{const[a,r]=p.useState(!1),[o,l]=p.useState(null),c=w(),d=p.useCallback(()=>x(null,null,function*(){try{r(!0);const n=yield c(f()).unwrap(),s=window.open(n,"GSC Connect","width=600,height=600");if(!s)throw new Error("Popup blocked. Please allow popups and try again.");const e=setInterval(()=>{s.closed&&(clearInterval(e),window.removeEventListener("message",g),r(!1))},1e3),i=new URL("https://api.genwrite.co").origin,g=u=>{if(u.origin!==i)return;const m=u.data||{};m==="GSC Connected"?(h.success("Google Search Console connected!"),clearInterval(e),window.location.reload()):(h.error(m||"Authentication failed"),l(m||"Authentication failed")),window.removeEventListener("message",g)};window.addEventListener("message",g)}catch(n){h.error(n.message||"Failed to connect to Google Search Console"),l(n.message||"Connection failed"),r(!1)}}),[c]);return t.jsx(b,{align:"center",justify:"center",className:"h-[80vh] p-6",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center border border-gray-200",children:[t.jsx(y,{size:48,className:"mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Connect Google Search Console"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Link your Google Search Console account to view performance data."}),o&&t.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:o}),t.jsx(C,{onClick:d,disabled:a,icon:t.jsx(G,{className:"!size-5 mr-2"}),type:"primary",loading:a,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:!bg-gradient-to-l rounded-lg h-12 text-lg font-medium tracking-wider",children:a?"Connecting...":"Connect GSC"})]})})};export{A as default};
