var Ce=Object.defineProperty,Se=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ue=(a,s,e)=>s in a?Ce(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,S=(a,s)=>{for(var e in s||(s={}))Me.call(s,e)&&ue(a,e,s[e]);if(de)for(var e of de(s))Be.call(s,e)&&ue(a,e,s[e]);return a},D=(a,s)=>Se(a,Ae(s));var H=(a,s,e)=>new Promise((n,w)=>{var $=i=>{try{l(e.next(i))}catch(x){w(x)}},h=i=>{try{l(e.throw(i))}catch(x){w(x)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then($,h);l((e=e.apply(a,s)).next())});import{r as d,I as L,j as t,T as q,x as Le,B as I,G as ve,u as Te,c as Pe,aa as Ie,a as Ee,z as _e,J as Re,al as Fe,Q as z,am as De,H as ze,m as P,A as Ue,an as He,b as ke}from"./index-D6kC-AX3.js";import{b as Ye}from"./SkeletonLoader-CVh43-r5.js";import{B as Ge}from"./index-DPfGQayO.js";import{F as E}from"./index-RfzX5LfU.js";import{T as qe}from"./index-Dsv5NYBA.js";import{R as be}from"./rotate-ccw-DNuYb5TN.js";import{T as Ve}from"./trash-2-vagDGFd9.js";import{d as u}from"./dayjs.min-BapNyRR7.js";import{u as Je}from"./useInfiniteQuery-et5Qa_gv.js";import{c as Qe}from"./clsx-B-dksMZM.js";import{l as We}from"./lodash-D2SN5CR8.js";import{D as Ke}from"./index-DtV9Idi5.js";import{u as Ze}from"./useProAction-DoRCZcCr.js";import{P as Xe}from"./plus-BIYCPpJt.js";import{R as et}from"./refresh-ccw-DH7D5pEw.js";import{I as tt}from"./index-DO-aYs5o.js";import{S as st}from"./search-DAoVTtb3.js";import{P as me}from"./index-C6OUOaZE.js";import{c as ye}from"./createLucideIcon--JMg2p5o.js";import"./gapSize-U1swVQyS.js";import"./useBaseQuery-CDid42v3.js";import"./Overflow-BRlLJNH1.js";import"./move-BHeO_Onl.js";import"./useIcons-BOZG5Drl.js";import"./SearchOutlined-CQCjSSSX.js";import"./Input-BH1KLcNm.js";var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function V(){return V=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},V.apply(this,arguments)}const rt=(a,s)=>d.createElement(L,V({},a,{ref:s,icon:at})),nt=d.forwardRef(rt);var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};function J(){return J=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},J.apply(this,arguments)}const ot=(a,s)=>d.createElement(L,J({},a,{ref:s,icon:lt})),it=d.forwardRef(ot);var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};function Q(){return Q=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Q.apply(this,arguments)}const dt=(a,s)=>d.createElement(L,Q({},a,{ref:s,icon:ct})),he=d.forwardRef(dt);var ut={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},W.apply(this,arguments)}const mt=(a,s)=>d.createElement(L,W({},a,{ref:s,icon:ut})),ht=d.forwardRef(mt);var gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194zm-72 388v134H354V706c0-42.2 16.4-81.9 46.3-111.7C430.1 564.4 469.8 548 512 548s81.9 16.4 111.7 46.3C653.6 624.1 670 663.8 670 706zm0-388c0 42.2-16.4 81.9-46.3 111.7C593.9 459.6 554.2 476 512 476s-81.9-16.4-111.7-46.3A156.63 156.63 0 01354 318V184h316v134z"}}]},name:"hourglass",theme:"outlined"};function K(){return K=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},K.apply(this,arguments)}const ft=(a,s)=>d.createElement(L,K({},a,{ref:s,icon:gt})),pt=d.forwardRef(ft);var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};function Z(){return Z=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Z.apply(this,arguments)}const vt=(a,s)=>d.createElement(L,Z({},a,{ref:s,icon:xt})),bt=d.forwardRef(vt);var yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM310.3 167.1a8 8 0 00-12.6 0L185.7 309c-4.2 5.3-.4 13 6.3 13h76v530c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V322h76c6.7 0 10.5-7.8 6.3-13l-112-141.9z"}}]},name:"sort-descending",theme:"outlined"};function X(){return X=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},X.apply(this,arguments)}const wt=(a,s)=>d.createElement(L,X({},a,{ref:s,icon:yt})),jt=d.forwardRef(wt);var Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"};function ee(){return ee=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ee.apply(this,arguments)}const Nt=(a,s)=>d.createElement(L,ee({},a,{ref:s,icon:Ot})),$t=d.forwardRef(Nt);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],St=ye("arrow-down-up",Ct);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Mt=ye("funnel",At),Bt=160,{Text:Lt,Title:Tt,Paragraph:Pt}=Le,It=a=>{let s=a.split("-");s.length>3&&(s=s.slice(0,3));const e=s.join(" ");return e[0].toUpperCase()+e.substring(1)},Et=({blog:a,onBlogClick:s,onManualBlogClick:e,onRetry:n,onArchive:w,handlePopup:$})=>{const h=(p,O=Bt)=>p?p.length>O?p.substring(0,O)+"...":p:"",l=p=>{var O,T,B;return(B=(T=(O=p==null?void 0:p.replace(/<[^>]*>/g,""))==null?void 0:O.replace(/[\\*#=_~`>\-]+/g,""))==null?void 0:T.replace(/\s{2,}/g," "))==null?void 0:B.trim()},i=a.isManuallyEdited===!0,{_id:x,title:f,status:m,createdAt:M,shortContent:F,aiModel:N,aiModelVer:o,focusKeywords:g,updatedAt:A,agendaNextRun:v,isArchived:j,archiveDate:R}=a,C=/gemini/gi.test(N);return t.jsx(Ge.Ribbon,{text:t.jsx("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide text-xs sm:text-sm",children:i?t.jsx(t.Fragment,{children:"Manually Generated"}):t.jsxs(t.Fragment,{children:[t.jsx("img",{src:`./Images/${C?"gemini":N==="claude"?"claude":"chatgpt"}.png`,alt:C?"Gemini":N==="claude"?"Claude":"ChatGPT",width:16,height:16,loading:"lazy",className:"bg-white"}),o?It(o):C?"Gemini 2.0 flash":N==="claude"?"Claude 4 sonnet":"Gpt 4.1 nano"]})}),className:"absolute top-0",color:i?"#9CA3AF":C?"#4796E3":N==="claude"?"#9368F8":"#74AA9C",children:t.jsxs("div",{className:`bg-white shadow-md hover:shadow-xl transition-all duration-300 rounded-lg p-4 sm:p-6 min-h-[180px] min-w-0 relative ${i?"border-gray-500":m==="failed"?"border-red-500":m==="pending"||m==="in-progress"?"border-yellow-500":"border-green-500"} border-2`,title:f,children:[t.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(M).toLocaleDateString("en-US",{dateStyle:"medium"})}),t.jsx(q,{title:t.jsx("span",{className:"text-base",children:m==="complete"?f:m==="failed"?"Blog generation failed":m==="pending"?`Pending Blog will be generated 
                ${v?"at "+new Date(v).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"shortly"}
                `:`Blog generation is ${m}`}),color:m==="complete"?"":m==="failed"?"red":"#eab308",children:t.jsx("div",{className:"cursor-pointer",onClick:()=>{(m==="complete"||m==="failed")&&(i?e(a):s(a))},role:"button",tabIndex:0,onKeyDown:p=>p.key==="Enter"&&(m==="complete"||m==="failed")&&i?e(a):s(a),"aria-label":`View blog ${f}`,children:t.jsxs(E,{justify:"space-between",gap:"middle",align:"center",vertical:!0,className:"mb-2",children:[t.jsx(Tt,{title:f,level:4,className:"line-clamp-2 text-center text-balance",children:f}),t.jsx(Pt,{ellipsis:{rows:2,expandable:!1},className:"break-all",children:h(l(F))||""})]})})}),t.jsxs(E,{className:"flex items-center justify-end gap-2",children:[t.jsx(E,{gap:"small",wrap:!0,children:g==null?void 0:g.map((p,O)=>t.jsx(qe,{color:"blue",className:"text-blue-800 text-[length:12px] tracking-wide font-montserrat font-semibold px-2 sm:px-2.5 py-0.5 rounded-full",children:p},O))}),m==="failed"&&t.jsx(I,{type:"text",className:"p-2 hover:!border-blue-500 hover:text-blue-500","aria-label":"Regenerate Blog",onClick:()=>$({title:"Regenerate Blog",description:t.jsxs("span",{className:"my-2",children:["Are you sure you want to retry generating ",t.jsx("b",{children:f})," blog?"]}),confirmText:"Yes",onConfirm:()=>{n(x)},confirmProps:{type:"text",className:"border-green-500 bg-green-50 text-green-600"},cancelProps:{danger:!1}}),children:t.jsx(be,{className:"w-4 sm:w-5 h-4 sm:h-5"})}),t.jsx(I,{type:"text",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>$({title:"Move to Trash",description:t.jsxs("span",{className:"my-2",children:["Blog ",t.jsx("b",{children:f})," will be moved to trash. You can restore it later."]}),confirmText:"Delete",onConfirm:()=>{w(x)},confirmProps:{type:"text",className:"border-red-500 hover:bg-red-500 bg-red-100 text-red-600"},cancelProps:{danger:!1}}),"aria-label":`Move blog ${f} to trash`,children:t.jsx(Ve,{className:"w-4 sm:w-5 h-4 sm:h-5"})})]}),t.jsx(E,{justify:"end",className:"mt-3 -mb-2 text-xs sm:text-sm text-right text-gray-500 font-medium",children:t.jsxs(Lt,{type:"secondary",className:"ml-auto",children:[j?"Archived at: ":"UpdatedAt: ",new Date(j?R:A).toLocaleDateString("en-US",{dateStyle:"medium"})]})})]})},x)};var k={exports:{}},_t=k.exports,ge;function Rt(){return ge||(ge=1,(function(a,s){(function(e,n){a.exports=n()})(_t,(function(){return function(e,n,w){n.prototype.isBetween=function($,h,l,i){var x=w($),f=w(h),m=(i=i||"()")[0]==="(",M=i[1]===")";return(m?this.isAfter(x,l):!this.isBefore(x,l))&&(M?this.isBefore(f,l):!this.isAfter(f,l))||(m?this.isBefore(x,l):!this.isAfter(x,l))&&(M?this.isAfter(f,l):!this.isBefore(f,l))}}}))})(k)),k.exports}var Ft=Rt();const Dt=ve(Ft);var Y={exports:{}},zt=Y.exports,fe;function Ut(){return fe||(fe=1,(function(a,s){(function(e,n){a.exports=n()})(zt,(function(){var e="minute",n=/[+-]\d\d(?::?\d\d)?/g,w=/([+-]|\d\d)/g;return function($,h,l){var i=h.prototype;l.utc=function(o){var g={date:o,utc:!0,args:arguments};return new h(g)},i.utc=function(o){var g=l(this.toDate(),{locale:this.$L,utc:!0});return o?g.add(this.utcOffset(),e):g},i.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var x=i.parse;i.parse=function(o){o.utc&&(this.$u=!0),this.$utils().u(o.$offset)||(this.$offset=o.$offset),x.call(this,o)};var f=i.init;i.init=function(){if(this.$u){var o=this.$d;this.$y=o.getUTCFullYear(),this.$M=o.getUTCMonth(),this.$D=o.getUTCDate(),this.$W=o.getUTCDay(),this.$H=o.getUTCHours(),this.$m=o.getUTCMinutes(),this.$s=o.getUTCSeconds(),this.$ms=o.getUTCMilliseconds()}else f.call(this)};var m=i.utcOffset;i.utcOffset=function(o,g){var A=this.$utils().u;if(A(o))return this.$u?0:A(this.$offset)?m.call(this):this.$offset;if(typeof o=="string"&&(o=(function(C){C===void 0&&(C="");var p=C.match(n);if(!p)return null;var O=(""+p[0]).match(w)||["-",0,0],T=O[0],B=60*+O[1]+ +O[2];return B===0?0:T==="+"?B:-B})(o),o===null))return this;var v=Math.abs(o)<=16?60*o:o;if(v===0)return this.utc(g);var j=this.clone();if(g)return j.$offset=v,j.$u=!1,j;var R=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(j=this.local().add(v+R,e)).$offset=v,j.$x.$localOffset=R,j};var M=i.format;i.format=function(o){var g=o||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return M.call(this,g)},i.valueOf=function(){var o=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*o},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var F=i.toDate;i.toDate=function(o){return o==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():F.call(this)};var N=i.diff;i.diff=function(o,g,A){if(o&&this.$u===o.$u)return N.call(this,o,g,A);var v=this.local(),j=l(o).local();return N.call(v,j,g,A)}}}))})(Y)),Y.exports}var Ht=Ut();const kt=ve(Ht);u.extend(kt);const{RangePicker:Yt}=Ke;function Gt({value:a,onChange:s,minDate:e,maxDate:n,className:w}){const $={"Last 7 Days":[u().subtract(6,"day").startOf("day").isBefore(e)?e:u().subtract(6,"day").startOf("day"),n.endOf("day")],"Last 30 Days":[u().subtract(29,"day").startOf("day").isBefore(e)?e:u().subtract(29,"day").startOf("day"),n.endOf("day")],"Last 3 Months":[u().subtract(3,"month").startOf("day").isBefore(e)?e:u().subtract(3,"month").startOf("day"),n.endOf("day")],"Last 6 Months":[u().subtract(6,"month").startOf("day").isBefore(e)?e:u().subtract(6,"month").startOf("day"),n.endOf("day")],"Last 1 Year":[u().subtract(1,"year").startOf("day").isBefore(e)?e:u().subtract(1,"year").startOf("day"),n.endOf("day")]};return t.jsx(t.Fragment,{children:t.jsx(Yt,{size:"middle",presets:Object.entries($).map(([h,l])=>({label:h,value:l})),value:a,minDate:e,maxDate:n,onChange:h=>{s(h?[u(h[0]).startOf("day"),u(h[1]).endOf("day")]:[null,null])},format:"YYYY-MM-DD",placeholder:["Start date","End date"],className:`w-full rounded-lg border-gray-300 shadow-sm ${w}`,allowClear:!1,"aria-label":"Select date range"})})}const _={ALL:"all",COMPLETE:"complete",PENDING:"pending",FAILED:"failed"},qt=[{label:"All Status",icon:t.jsx(he,{}),value:_.ALL},{label:"Status: Completed",icon:t.jsx(he,{}),value:_.COMPLETE},{label:"Status: Pending",icon:t.jsx(pt,{}),value:_.PENDING},{label:"Status: Failed",icon:t.jsx(ht,{}),value:_.FAILED}],G=[{label:"Recently Updated",value:"updatedAt:desc",icon:t.jsx($t,{})},{label:"Newest",value:"createdAt:desc",icon:t.jsx(it,{})},{label:"Oldest",value:"createdAt:asc",icon:t.jsx(nt,{})},{label:"A-Z",value:"title:asc",icon:t.jsx(bt,{})},{label:"Z-A",value:"title:desc",icon:t.jsx(jt,{})}],pe=[{label:"Last 7 Days",range:[u().subtract(7,"day").startOf("day"),u().endOf("day")]},{label:"Last 30 Days",range:[u().subtract(30,"day").startOf("day"),u().endOf("day")]},{label:"Last 3 Months",range:[u().subtract(3,"month").startOf("day"),u().endOf("day")]},{label:"Last 6 Months",range:[u().subtract(6,"month").startOf("day"),u().endOf("day")]},{label:"Last 1 Year",range:[u().startOf("year"),u()]}],xe=15;u.extend(Dt);const ws=()=>{var ae,re;Te();const a=Pe(),s=Ie(),e=Ee(_e),n=(e==null?void 0:e._id)||"guest",{handleProAction:w}=Ze(),{handlePopup:$}=Re(),h={start:pe[0].range[0].toISOString(),end:pe[0].range[1].toISOString(),q:"",status:_.ALL,sort:G[0].value},[l,i]=d.useState(()=>{const r=sessionStorage.getItem(`user_${e==null?void 0:e._id}_blog_filters`);return r?JSON.parse(r):h});d.useEffect(()=>{const r=sessionStorage.getItem(`user_${e==null?void 0:e._id}_blog_filters`);i(r?c=>S(S({},c),JSON.parse(r)):c=>D(S({},c),{start:e==null?void 0:e.createdAt}))},[e==null?void 0:e.createdAt]);const{isLoading:x,isRefetching:f,data:m,hasNextPage:M,fetchNextPage:F,isFetchingNextPage:N,refetch:o}=Je({queryKey:["blogs",n,l],initialPageParam:1,queryFn:c=>H(null,[c],function*({pageParam:r=1}){var ne,le,oe,ie,ce;let y={page:r,limit:xe,q:l.q||void 0,status:l.status!==_.ALL?l.status:void 0,sort:l.sort,start:l.start||void 0,end:l.end||void 0};y=Object.fromEntries(Object.entries(y).filter(([Vt,$e])=>!!$e));const b=yield He(y);return{data:(ne=b==null?void 0:b.data)!=null?ne:[],page:(le=b==null?void 0:b.page)!=null?le:1,totalPages:(oe=b==null?void 0:b.totalPages)!=null?oe:1,hasMore:(ie=b==null?void 0:b.hasMore)!=null?ie:!1,totalItems:(ce=b==null?void 0:b.totalItems)!=null?ce:0}}),getNextPageParam:r=>{var c;return r.hasMore?((c=r.page)!=null?c:1)+1:void 0},enabled:!!e,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,onError:r=>{console.error("Failed to fetch blogs:",{error:r.message,status:r.status,response:r.response}),z.error("Failed to load blogs. Please try again.")}}),g=d.useMemo(()=>{var r;return(r=m==null?void 0:m.pages.flatMap(c=>c.data))!=null?r:[]},[m]),A=(re=(ae=m==null?void 0:m.pages[0])==null?void 0:ae.totalItems)!=null?re:0,v=d.useRef(null),[j,R]=d.useState(!1),[C,p]=d.useState(!1),O=d.useCallback(()=>{var r,c;i(y=>D(S({},h),{start:e==null?void 0:e.createdAt})),v!=null&&v.current&&((c=(r=v.current)==null?void 0:r.input)!=null&&c.value)&&(v.current.input.value=""),sessionStorage.removeItem(`user_${n}_blog_filters`)},[e]),T=d.useMemo(()=>{if(!l||!h)return!1;const r=l.start===(e==null?void 0:e.createdAt),c=l.end===h.end;return!r||!c},[l,e==null?void 0:e.createdAt]),B=d.useMemo(()=>{if(!l||!h)return!1;const r=Object.keys(l).some(c=>c==="start"||c==="end"?!1:JSON.stringify(l[c])!==JSON.stringify(h[c]));return T||r},[l,e==null?void 0:e.createdAt]);d.useEffect(()=>{const r=ke();if(!r||!e)return;const c=We.debounce(()=>{s.invalidateQueries({queryKey:["blogs",n,l],refetchType:"all"})},100);return r.on("blog:statusChanged",c),()=>{var y;r.off("blog:statusChanged",c),(y=c.cancel)==null||y.call(c)}},[e,n,s]);const we=d.useCallback(r=>{a(`/toolbox/${r._id}`)},[a]),je=d.useCallback(r=>{a(`/blog-editor/${r._id}`)},[a]),Oe=d.useCallback(r=>H(null,null,function*(){try{yield Fe(r),z.success("Blog will be regenerated shortly"),o()}catch(c){z.error("Failed to retry blog")}}),[]),Ne=d.useCallback(r=>H(null,null,function*(){try{yield De(r),z.success("Blog archived successfully"),o()}catch(c){z.error("Failed to archive")}}),[]),te=d.useMemo(()=>G.map(r=>D(S({},r),{onClick:c=>{U({sort:r.value})}})),[]),se=d.useMemo(()=>qt.map(r=>D(S({},r),{onClick:c=>{U({status:r.value})}})),[]),U=d.useCallback(r=>{i(c=>{const y=S(S({},c),r);return sessionStorage.setItem(`user_${n}_blog_filters`,JSON.stringify(y)),y})},[l,n]);return t.jsxs("div",{className:"p-2 md:p-4 lg:p-8 max-w-full",children:[t.jsx(ze,{children:t.jsx("title",{children:"Blogs | GenWrite"})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[t.jsxs("div",{className:"flex-1 mt-5 p-2 md:mt-0 md:p-0",children:[t.jsx(P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blogs Generated"}),t.jsx(P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"text-gray-500 text-sm mt-2 max-w-md",children:"All our blogs in one place. Explore insights, tips, and strategies to level up your content creation."})]}),t.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:t.jsxs(E,{gap:8,justify:"center",align:"center",children:[t.jsxs("div",{onClick:()=>{w(()=>{a("/blog-editor")})},className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-[#1B6FC9] hover:bg-[#1B6FC9]/90 text-white rounded-lg transition-colors text-xs sm:text-sm font-medium cursor-pointer",children:[t.jsx(Xe,{className:"w-4 sm:w-5 h-4 sm:h-5"}),"New Blog"]}),t.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:t.jsx(I,{type:"default",icon:t.jsx(et,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:()=>s.invalidateQueries({queryKey:["blogs",n,l],refetchType:"all"}),className:"p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm",children:"Refresh"})})]})})]}),t.jsxs(E,{justify:"space-around",align:"center",gap:"middle",wrap:(window==null?void 0:window.innerWidth)<=1024,className:"flex-col sm:flex-row p-4 sm:p-6 rounded-lg mb-4",children:[t.jsx(tt.Search,{ref:v,size:"middle",className:"min-w-[300px] w-1/3 text-center ",placeholder:"search blogs...",onSearch:r=>{U({q:r})},enterButton:t.jsx(st,{}),allowClear:!0,styles:{input:{border:"none !important"}}}),t.jsx(me,{open:j,onOpenChange:r=>R(r),trigger:"click",placement:"bottomRight",content:t.jsx("div",{className:"min-w-[200px] rounded-lg space-y-1",children:te.map(({label:r,icon:c,onClick:y})=>t.jsx(q,{title:r,placement:"left",children:t.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[t.jsx("span",{className:"text-base sm:text-lg",children:c}),t.jsx("span",{children:r})]})},r))}),children:t.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:t.jsxs(I,{type:"default",icon:t.jsx(St,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`min-w-[210px] p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${l.sort!==G[0].value?"border-blue-400 bg-blue-50 text-blue-600":""}`,children:["Sort: ",te.find(r=>r.value===l.sort).label]})})}),t.jsx(me,{open:C,onOpenChange:r=>p(r),trigger:"click",placement:"bottomRight",content:t.jsx("div",{className:"min-w-[200px] rounded-lg space-y-1",children:se.map(({label:r,icon:c,onClick:y})=>t.jsx(q,{title:r,placement:"left",children:t.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[t.jsx("span",{className:"text-base sm:text-lg",children:c}),t.jsx("span",{children:r})]})},r))}),children:t.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:t.jsxs(I,{type:"default",icon:t.jsx(Mt,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`min-w-[210px] p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${l.status!==_.ALL?"border-green-400 bg-green-50 text-green-600":""}`,children:["Filter: ",se.find(r=>r.value===l.status).label]})})}),t.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:t.jsx(I,{type:"default",icon:t.jsx(be,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:O,className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${B&&"border-red-400 bg-red-50 text-red-600"}`,children:"Reset"})}),t.jsx(Gt,{value:[u(l.start),u(l.end)],minDate:e!=null&&e.createdAt?u(e.createdAt):void 0,maxDate:u(),onChange:r=>{U(S({},r[0]?{start:r[0].toISOString(),end:r[1].toISOString()}:{}))},className:Qe("min-w-[400px] !w-1/3",T&&"border-purple-500")})]}),t.jsx(Ue,{children:x||f?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[...Array(xe)].map((r,c)=>t.jsx("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6",children:t.jsx(Ye,{})},c))}):g.length===0?t.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 270px)"},children:[t.jsx("img",{src:"Images/no-blog.png",alt:"No blogs",className:"w-20 sm:w-24"}),t.jsx("p",{className:"text-lg sm:text-xl mt-5",children:"No blogs available."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8 place-items-center p-2",children:g.map(r=>t.jsx(Et,{blog:r,onBlogClick:we,onManualBlogClick:je,onRetry:Oe,onArchive:Ne,handlePopup:$},r._id))}),M&&t.jsx(t.Fragment,{children:t.jsxs(E,{vertical:!0,gap:12,justify:"center",align:"center",className:"mt-4",children:[t.jsxs("div",{className:"text-right text-sm text-gray-500 mr-0",children:["Showing ",g.length," of ",A," blogs"]}),t.jsx(I,{loading:N,onClick:()=>F(),disabled:N,children:N?"loading...":"Load More"})]})}),t.jsx("style",{children:`
      .ant-input, .ant-input:focus, .ant-input-search .ant-input{
        border:none !important;
        height:100% !important;
      }

      ant-input-search .ant-input:focus, .ant-input-search .ant-input:hover{
        box-shadow:none !important;
      }
      
      `})]})})]})};export{ws as default};
