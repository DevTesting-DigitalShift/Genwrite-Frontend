var se=Object.defineProperty,te=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var W=(d,x,u)=>x in d?se(d,x,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[x]=u,o=(d,x)=>{for(var u in x||(x={}))ae.call(x,u)&&W(d,u,x[u]);if(Y)for(var u of Y(x))le.call(x,u)&&W(d,u,x[u]);return d},n=(d,x)=>te(d,re(x));import{r as f,u as oe,b as ne,M as ie,a as de,z as ce,Q as me,j as e,L as ue,P as xe,W as I,ed as he}from"./index-7HC_oqoo.js";import{c as pe}from"./pricingConfig-DUMy0XHk.js";import{T as be}from"./TemplateSelection-BGZEVY39.js";import{I as j,L as ge,b as fe}from"./forms.schemas-pdGzUOEy.js";import{P as K}from"./plus-1lXaRtn5.js";import{X as S}from"./x-C_Q5vaHb.js";import"./index-B7zhhq2I.js";import"./gapSize-U1swVQyS.js";import"./index-BqUOVHjR.js";import"./Input-BmGF6SRQ.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-Z10FQSf9.js";import"./search-CUq37vP7.js";import"./index-BQVwH2lr.js";import"./crown-SkoU7jEJ.js";import"./index-CwIYrDhH.js";const Te=({type:d="quick",closeFnc:x})=>{var $,M,U;const[u,L]=f.useState(0),[g,k]=f.useState([]),[q,z]=f.useState(!1),R={topic:"",exactTitle:!1,performKeywordResearch:!1,addImages:!1,imageSource:j.NONE,template:null,templateIds:[],keywords:[],focusKeywords:[],otherLinkInput:"",focusKeywordInput:"",keywordInput:"",languageToWrite:"English",costCutter:!0},F={topic:"",template:"",focusKeywords:"",keywords:"",otherLinks:""},[r,b]=f.useState(R),[h,c]=f.useState(F),G=oe(),B=ne(),{handlePopup:P}=ie(),p=de(ce);me(),($=p==null?void 0:p.subscription)==null||$.plan;const y=f.useMemo(()=>{const s=[];r.performKeywordResearch&&s.push("keywordResearch");let t=pe({wordCount:1500,features:s,aiModel:"gemini",includeImages:r.addImages,imageSource:r.imageSource,numberOfImages:0});return r.costCutter&&(t=Math.round(t*.75)),t},[r.performKeywordResearch,r.addImages,r.imageSource,r.costCutter]),O=()=>{if(u===0){if(!r.template){c(s=>n(o({},s),{template:"Please select a template."}));return}c(s=>n(o({},s),{template:""})),L(1)}},w=()=>{b(R),k([]),c(F),x()},v=s=>{const{name:t,value:i}=s.target;b(l=>n(o({},l),{[t]:i})),c(l=>n(o({},l),{[t]:""}))},Q=()=>{var l,m;const s={topic:r.topic.trim()?"":"Please enter a topic.",focusKeywords:!r.performKeywordResearch&&r.focusKeywords.length===0?"Please add at least one focus keyword.":"",keywords:!r.performKeywordResearch&&r.keywords.length===0?"Please add at least one secondary keyword.":"",otherLinks:g.length===0&&d==="yt"?"Please add at least one valid link.":""};if(c(s),Object.values(s).some(a=>a)){I.error("Please fill all required fields correctly.");return}if(g.length>3){c(a=>n(o({},a),{otherLinks:"You can only add up to 3 links."})),I.error("You can only add up to 3 links.");return}const t=(((l=p==null?void 0:p.credits)==null?void 0:l.base)||0)+(((m=p==null?void 0:p.credits)==null?void 0:m.extra)||0);if(t<y){P({title:"Insufficient Credits",description:e.jsxs("div",{children:[e.jsx("p",{children:"You don't have enough credits to generate this blog."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Required:"})," ",y," credits"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",t," credits"]})]}),okText:"Buy Credits",onConfirm:()=>{B("/pricing"),w()}});return}const i=n(o({},r),{type:d,otherLinks:g,imageSource:r.addImages?r.imageSource:j.NONE});P({title:`${d==="quick"?"Quick":"Youtube"} Blog Generation`,description:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[d==="quick"?"Quick":"Youtube"," blog generation will cost you"," ",e.jsxs("b",{children:[y," credits"]}),"."]}),e.jsx("br",{}),e.jsx("span",{children:"Are you sure you want to proceed?"})]}),onConfirm:()=>{const a=fe(i);z(!0),G(he({blogData:a,user:p,navigate:B,type:d})),w()}})},V=f.useCallback(s=>{b(t=>{var i,l;return n(o({},t),{template:(l=(i=s==null?void 0:s[0])==null?void 0:i.name)!=null?l:null,templateIds:s==null?void 0:s.map(m=>m.id)})}),c(t=>n(o({},t),{template:""}))},[]),E=(s,t)=>{const i=t==="keywords"?"keywordInput":"focusKeywordInput";b(l=>n(o({},l),{[i]:s.target.value})),c(l=>n(o({},l),{[t]:""}))},N=s=>{const t=s==="keywords"?"keywordInput":"focusKeywordInput",i=r[t].trim();if(!i){c(a=>n(o({},a),{[s]:"Please enter a keyword."}));return}const l=new Set(r[s].map(a=>a.trim().toLowerCase())),m=i.split(",").map(a=>a.trim()).filter(a=>a!==""&&!l.has(a.toLowerCase()));if(m.length===0){c(a=>n(o({},a),{[s]:"Please enter valid, non-duplicate keywords separated by commas."}));return}if(s==="focusKeywords"&&r[s].length+m.length>3){c(a=>n(o({},a),{[s]:"You can only add up to 3 focus keywords."}));return}b(a=>n(o({},a),{[s]:[...a[s],...m],[t]:""})),c(a=>n(o({},a),{[s]:""}))},A=(s,t)=>{const i=[...r[t]];i.splice(s,1),b(n(o({},r),{[t]:i})),c(l=>n(o({},l),{[t]:""}))},T=(s,t)=>{s.key==="Enter"&&(s.preventDefault(),N(t))},_=s=>{try{const t=new URL(s),i=t.hostname.toLowerCase().replace("www.","");if(!i.includes("youtube.com")&&!i.includes("youtu.be"))return null;let l=null;if(i==="youtube.com"||i==="m.youtube.com"){const m=t.pathname;m.startsWith("/watch")?l=t.searchParams.get("v"):m.startsWith("/embed/")?l=m.split("/embed/")[1].split("/")[0].split("?")[0]:m.startsWith("/v/")?l=m.split("/v/")[1].split("/")[0].split("?")[0]:m.startsWith("/shorts/")&&(l=m.split("/shorts/")[1].split("/")[0].split("?")[0])}else i==="youtu.be"&&(l=t.pathname.slice(1).split("/")[0].split("?")[0]);return l}catch(t){return null}},H=s=>{switch(d){case"yt":const t=_(s);if(!t||!/^[a-zA-Z0-9_-]{11}$/.test(t))return{valid:!1,error:"Please enter a valid YouTube video link with a proper video ID."};break;default:try{new URL(s)}catch(l){return{valid:!1,error:"Please enter a valid URL (e.g., https://example.com)."}}}return{valid:!0}},D=()=>{var m;const s=(m=r.otherLinkInput)==null?void 0:m.trim(),t=3;if(!s){c(a=>n(o({},a),{otherLinks:`Please enter valid ${d==="yt"?"youtube":"reference"} links.`}));return}const i=s.split(",").map(a=>a.trim()).filter(a=>a!==""),l=[];for(let a of i){if(g.includes(a)||l.includes(a))continue;const C=H(a);if(!C.valid){c(ee=>n(o({},ee),{otherLinks:C.error})),I.error(C.error);return}l.push(a)}if(l.length===0){c(a=>n(o({},a),{otherLinks:"No valid, unique links found."}));return}if(g.length+l.length>t){c(a=>n(o({},a),{otherLinks:`You can only add up to ${t} links.`}));return}k([...g,...l]),b(a=>n(o({},a),{otherLinkInput:""})),c(a=>n(o({},a),{otherLinks:""}))},X=s=>{s.key==="Enter"&&(s.preventDefault(),D())},Z=s=>{const t=[...g];t.splice(s,1),k(t),c(i=>n(o({},i),{otherLinks:""}))},J=[{id:"stock",label:"Stock Images",value:j.STOCK},{id:"ai",label:"AI-Generated Images",value:j.AI}];return e.jsxs(e.Fragment,{children:[q&&e.jsx(ue,{}),e.jsx(xe,{title:`Generate ${d==="quick"?"Quick":"Youtube"} Blog`,open:!0,onCancel:w,footer:u===0?[e.jsx("button",{onClick:O,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Next step",children:"Next"},"next")]:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[y," credits"]}),r.costCutter&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"(-25% off)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>L(0),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors","aria-label":"Previous step",children:"Previous"},"previous"),e.jsx("button",{onClick:Q,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors ml-3","aria-label":"Submit quick blog",children:"Submit"},"submit")]})]},"footer-content")],width:800,centered:!0,transitionName:"",maskTransitionName:"",destroyOnHidden:!0,children:e.jsxs("div",{className:"p-2 space-y-2 !max-h-[75vh] overflow-y-auto custom-scroll",children:[u===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:` overflow-clip p-4 pt-0 ${h.template?"border-2 border-red-500 rounded-lg p-2":""}`,children:e.jsx(be,{userSubscriptionPlan:(U=(M=p==null?void 0:p.subscription)==null?void 0:M.plan)!=null?U:"free",onClick:V,preSelectedIds:r.templateIds})}),h.template&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.template})]}),u===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Topic ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"topic",value:r.topic,onChange:v,className:`w-full px-3 py-2 border ${h.topic?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter the blog topic","aria-label":"Blog topic"}),h.topic&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.topic})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Use Topic name as Blog Title"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.exactTitle,onChange:s=>b(t=>n(o({},t),{exactTitle:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Language ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"languageToWrite",value:r.languageToWrite,onChange:v,className:"w-full px-3 py-2 border border-gray-200 rounded-md text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#1B6FC9] focus:border-transparent","aria-label":"Select language",children:ge.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Perform Keyword Research"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.performKeywordResearch,onChange:s=>b(t=>n(o({},t),{performKeywordResearch:s.target.checked,focusKeywords:s.target.checked?[]:t.focusKeywords,keywords:s.target.checked?[]:t.keywords,focusKeywordInput:"",keywordInput:""})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),!r.performKeywordResearch&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Focus Keywords (Max 3) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.focusKeywordInput,onChange:s=>E(s,"focusKeywords"),onKeyDown:s=>T(s,"focusKeywords"),className:`flex-1 px-3 py-2 border ${h.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter focus keywords, separated by commas","aria-label":"Focus keywords"}),e.jsx("button",{onClick:()=>N("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add focus keywords",children:e.jsx(K,{size:16})})]}),h.focusKeywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.focusKeywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.focusKeywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>A(t,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(S,{size:16})})]},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keywords ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.keywordInput,onChange:s=>E(s,"keywords"),onKeyDown:s=>T(s,"keywords"),className:`flex-1 px-3 py-2 border ${h.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter secondary keywords, separated by commas","aria-label":"Secondary keywords"}),e.jsx("button",{onClick:()=>N("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add secondary keywords",children:e.jsx(K,{size:16})})]}),h.keywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.keywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.keywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>A(t,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(S,{size:16})})]},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Add Images"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.addImages,onChange:s=>b(t=>n(o({},t),{addImages:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),r.addImages&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Image Source"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mx-auto w-full mb-2",children:J.map(s=>e.jsxs("label",{htmlFor:s.id,className:`relative border rounded-lg px-4 py-3 flex items-center gap-3 justify-center cursor-pointer transition-all duration-150
                      ${r.imageSource===s.value?"border-blue-600 bg-blue-50":"border-gray-300"} hover:shadow-sm w-full`,children:[e.jsx("input",{type:"radio",id:s.id,name:"imageSource",value:s.value,checked:r.imageSource===s.value,onChange:v,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:s.label})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d==="yt"?"YouTube Video Links ":"Reference Links (e.g., articles, websites)"," ","(Max 3 links) ",d==="yt"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:r.otherLinkInput,onChange:s=>b(t=>n(o({},t),{otherLinkInput:s.target.value})),onKeyDown:s=>X(s),className:"flex-1 px-3 py-2 border rounded-md text-sm bg-gray-50",placeholder:"Enter full URLs (e.g., https://example.com), separated by commas","aria-label":"Reference/Video links"}),e.jsx("button",{onClick:()=>D(),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add reference/video links",children:e.jsx(K,{size:16})})]}),h.otherLinks&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.otherLinks}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>Z(t),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(S,{size:16})})]},t))})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900 mb-1",children:"üí∞ Cost Cutter"}),e.jsx("p",{className:"text-xs text-green-700",children:"Use AI Flash model for 25% savings"})]}),e.jsxs("label",{className:"relative inline-block w-14 h-7 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.costCutter,onChange:s=>b(t=>n(o({},t),{costCutter:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-300 rounded-full transition-colors duration-200 peer-checked:bg-green-500"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-6 w-6 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-7 shadow-md"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-5 shadow-sm",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900 mb-3 flex items-center gap-2",children:"üìù Blog Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Word Count"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"~1500 words"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"AI Model"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Gemini Flash"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Images"}),e.jsx("span",{className:"font-semibold text-blue-900",children:r.addImages?r.imageSource.includes("ai")?"AI Generated":"Stock Images":"None"})]})]})]})]})]})})]})};export{Te as default};
