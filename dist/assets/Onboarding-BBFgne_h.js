var $=Object.defineProperty,R=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(i,n,s)=>n in i?$(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s,o=(i,n)=>{for(var s in n||(n={}))W.call(n,s)&&I(i,s,n[s]);if(O)for(var s of O(n))U.call(n,s)&&I(i,s,n[s]);return i},c=(i,n)=>R(i,K(n));var v=(i,n,s)=>new Promise((g,m)=>{var j=l=>{try{f(s.next(l))}catch(x){m(x)}},N=l=>{try{f(s.throw(l))}catch(x){m(x)}},f=l=>l.done?g(l.value):Promise.resolve(l.value).then(j,N);f((s=s.apply(i,n)).next())});import{c as E,b as F,u as T,a as M,r as y,l as G,j as e,B as u,A as Y,m as w,W as d,ed as q,ee as H}from"./index-6vE63f-j.js";import{B as J}from"./building-2-BOp7lSYW.js";import{C as Q}from"./check-BmIUmKFc.js";import{I as b}from"./index-DKbJohlp.js";import{S as C}from"./index-CMEuEzxY.js";import"./Input-DSSEV1Bh.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-dWMKBnrX.js";import"./index-CEQ_sm_4.js";import"./move-BmZ66RIU.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Z=E("target",X),{TextArea:L}=b,me=()=>{const i=F(),n=T(),s=M(a=>a.auth.user),[g,m]=y.useState(0),[j,N]=y.useState(!1),[f,l]=y.useState(!1);y.useEffect(()=>{if(!localStorage.getItem("token")){i("/login",{replace:!0});return}n(G())},[n,i]),y.useEffect(()=>{if(!s||!s._id)return;const a=localStorage.getItem(`hasCompletedOnboarding_${s._id}`)==="true";(s.lastLogin||a)&&(s.emailVerified===!1?i(`/email-verify/${s.email}`,{replace:!0}):i("/dashboard",{replace:!0}))},[s,i]);const[x,V]=y.useState("https://"),[r,p]=y.useState({nameOfVoice:"",postLink:"",sitemap:"",describeBrand:"",keywords:[],persona:""}),[k,S]=y.useState(""),_=()=>v(null,null,function*(){if(!r.postLink){d.error("Please enter your company website URL");return}l(!0);try{const a=`${x}${r.postLink.replace(/^https?:\/\//,"")}`,t=yield q(a);p(h=>c(o({},h),{nameOfVoice:t.nameOfVoice||h.nameOfVoice,describeBrand:t.describeBrand||h.describeBrand,keywords:t.keywords||h.keywords,persona:t.persona||h.persona,sitemap:t.sitemap||h.sitemap})),d.success("Company information fetched successfully!"),m(1)}catch(a){d.warning(a.message||"Couldn't fetch company information automatically. Please enter details manually."),m(1)}finally{l(!1)}}),B=()=>{if(k.trim()){const a=k.split(",").map(t=>t.trim()).filter(t=>t&&!r.keywords.includes(t));p(t=>c(o({},t),{keywords:[...t.keywords,...a]})),S("")}},A=a=>{p(t=>c(o({},t),{keywords:t.keywords.filter(h=>h!==a)}))},P=()=>v(null,null,function*(){if(!r.nameOfVoice.trim()){d.error("Please enter your brand name");return}if(!r.postLink.trim()){d.error("Please enter your website URL");return}if(!r.keywords.length){d.error("Please enter at least one keyword");return}if(!r.persona.trim()){d.error("Please enter your persona");return}r.sitemap.trim().length||delete r.sitemap,N(!0);try{const a=c(o({},r),{postLink:`${x}${r.postLink.replace(/^https?:\/\//,"")}`});yield H(a),d.success("Brand voice created successfully!"),s!=null&&s._id&&localStorage.setItem(`hasCompletedOnboarding_${s._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),setTimeout(()=>{i("/dashboard")},1e3)}catch(a){d.error(a.message||"Failed to create brand voice")}finally{N(!1)}}),z=()=>{s!=null&&s._id&&localStorage.setItem(`hasCompletedOnboarding_${s._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),i("/dashboard")},D=[{title:"Company Info",icon:J},{title:"Brand Details",icon:Z},{title:"Review",icon:Q}];return e.jsxs("div",{className:"min-h-screen bg-white flex items-center justify-center p-6 relative",children:[e.jsx(u,{type:"text",onClick:z,disabled:!(s!=null&&s._id),className:"absolute top-6 right-6 text-gray-500 hover:text-gray-900",children:"Skip"}),e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"GenWrite"}),e.jsx("p",{className:"text-gray-500",children:"Set up your brand voice"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-12",children:D.map((a,t)=>e.jsx("div",{className:`h-2 rounded-full transition-all ${t===g?"w-8 bg-gray-900":t<g?"w-2 bg-gray-400":"w-2 bg-gray-200"}`},t))}),e.jsxs(Y,{mode:"wait",children:[g===0&&e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-500",children:"We'll analyze your website to understand your brand"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Name"}),e.jsx(b,{size:"large",placeholder:"Acme Corporation",value:r.nameOfVoice,onChange:a=>p(t=>c(o({},t),{nameOfVoice:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Website URL"}),e.jsx(b,{size:"large",placeholder:"www.example.com",addonBefore:e.jsxs(C,{value:x,onChange:V,dropdownMatchSelectWidth:!1,className:"protocol-select",children:[e.jsx(C.Option,{value:"https://",children:"https://"}),e.jsx(C.Option,{value:"http://",children:"http://"})]}),value:r.postLink,onChange:a=>p(t=>c(o({},t),{postLink:a.target.value})),className:"url-input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Sitemap URL ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(b,{size:"large",placeholder:"https://www.example.com/sitemap.xml",value:r.sitemap,onChange:a=>p(t=>c(o({},t),{sitemap:a.target.value})),className:"rounded-lg"})]})]}),e.jsx(u,{type:"primary",size:"large",block:!0,onClick:_,loading:f,disabled:!r.postLink||!r.nameOfVoice,className:"h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:f?"Analyzing...":"Continue"})]},"step-0"),g===1&&e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Brand Details"}),e.jsx("p",{className:"text-gray-500",children:"Refine your brand information"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),e.jsx(L,{rows:4,placeholder:"Describe what your company does...",value:r.describeBrand,onChange:a=>p(t=>c(o({},t),{describeBrand:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Author Persona"}),e.jsx(L,{rows:3,placeholder:"What is your Author Persona?",value:r.persona,onChange:a=>p(t=>c(o({},t),{persona:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Keywords"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(b,{placeholder:"Add keywords (comma-separated)",value:k,onChange:a=>S(a.target.value),onKeyDown:a=>a.key==="Enter"&&B(),className:"rounded-lg"}),e.jsx(u,{onClick:B,className:"rounded-lg",children:"Add"})]}),r.keywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,t)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:[a,e.jsx("button",{onClick:()=>A(a),className:"hover:text-gray-900",children:"Ã—"})]},t))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{size:"large",onClick:()=>m(0),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(u,{type:"primary",size:"large",onClick:()=>m(2),className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:"Continue"})]})]},"step-1"),g===2&&e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Review"}),e.jsx("p",{className:"text-gray-500",children:"Verify your information before creating"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Brand Name"}),e.jsx("p",{className:"text-gray-900",children:r.nameOfVoice||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Website"}),e.jsxs("p",{className:"text-gray-900",children:[x,r.postLink||"Not provided"]})]}),r.describeBrand&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:r.describeBrand})]}),r.persona&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Author Persona"}),e.jsx("p",{className:"text-gray-700 text-sm",children:r.persona})]}),r.keywords.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,t)=>e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:a},t))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{size:"large",onClick:()=>m(1),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(u,{type:"primary",size:"large",onClick:P,loading:j,className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:j?"Creating...":"Create Brand Voice"})]})]},"step-2")]}),e.jsx("p",{className:"text-center text-gray-400 text-sm mt-12",children:"You can update these settings anytime"})]})]})};export{me as default};
