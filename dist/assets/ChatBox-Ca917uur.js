import{q as h,j as e,A as j,m as t,bn as I,b as M}from"./index-DLHHoihS.js";import{b as a}from"./chunk-tiptap-JX9QK0Ia.js";import{X as S}from"./x-BntjOx32.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],d=h("bot",C);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],D=h("send",A);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$=h("user",E),z=({isOpen:b,onClose:v})=>{const[i,m]=a.useState(""),[r,c]=a.useState([]),[n,p]=a.useState(!1),g=a.useRef(null),N=()=>{var s;(s=g.current)==null||s.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{N()},[r]);const u=async()=>{var l,f;const s=i.trim();if(!s)return;const y={id:Date.now(),text:s,sender:"user",timestamp:new Date};c(o=>[...o,y]),m(""),p(!0);try{const x=((f=(l=(await M.post("/user/chat",{messages:[...r,y].slice(-5)})).data)==null?void 0:l.trim)==null?void 0:f.call(l))||"I couldn't process that. Could you try again?";c(k=>[...k,{id:Date.now()+1,text:x,sender:"ai",timestamp:new Date}])}catch(o){console.error("Chat request failed:",o),c(x=>[...x,{id:Date.now()+1,text:"Sorry, I'm having trouble connecting. Please try again later.",sender:"ai",timestamp:new Date}])}finally{p(!1)}},w=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),u())};return e.jsx(j,{children:b&&e.jsxs(t.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",damping:25},className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-2xl shadow-2xl flex flex-col z-50 border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-300/30 p-2 rounded-full",children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-semibold text-lg",children:"AI Assistant"})]}),e.jsx("button",{onClick:v,className:"p-1.5 rounded-full hover:bg-indigo-400/30 transition-colors",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"How can I help you today?"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-gray-100",children:[r.length===0?e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-center px-4",children:[e.jsx("div",{className:"bg-indigo-100 p-4 rounded-full mb-4",children:e.jsx(d,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h4",{className:"font-medium text-gray-700",children:"Welcome to AI Assistant"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ask me anything about content creation, SEO, or blog writing. I'm here to help!"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{children:r.map(s=>e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl p-3 relative ${s.sender==="user"?"bg-indigo-500 text-white rounded-tr-none":"bg-white text-gray-700 rounded-tl-none border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[s.sender==="ai"&&e.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-full mt-0.5",children:e.jsx(d,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:s.text}),e.jsx("div",{className:`text-xs mt-1.5 ${s.sender==="user"?"text-indigo-200":"text-gray-400"}`,children:s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.sender==="user"&&e.jsx("div",{className:"bg-indigo-400/30 p-1.5 rounded-full ml-2",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsx("div",{className:`absolute top-0 w-3 h-3 ${s.sender==="user"?"-right-3 bg-indigo-500 clip-path-user":"-left-3 bg-white clip-path-ai border-l border-t border-gray-200"}`})]})},s.id))}),n&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] rounded-2xl p-3 bg-white text-gray-700 rounded-tl-none border border-gray-200 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-full",children:e.jsx(d,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(t.div,{animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:1.5},className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx(t.div,{animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:1.5,delay:.2},className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx(t.div,{animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:1.5,delay:.4},className:"w-2 h-2 bg-gray-400 rounded-full"})]})]}),e.jsx("div",{className:"absolute top-0 -left-3 w-3 h-3 bg-white clip-path-ai border-l border-t border-gray-200"})]})})]}),e.jsx("div",{ref:g})]}),e.jsxs("div",{className:"p-4 border-t bg-white",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t.div,{whileHover:{boxShadow:"0 0 0 3px rgba(99, 102, 241, 0.2)"},className:"flex-1 border border-gray-200 rounded-xl overflow-hidden",children:e.jsx("textarea",{value:i,onChange:s=>m(s.target.value),onKeyPress:w,placeholder:"Type your message...",className:"w-full p-3 text-sm resize-none focus:outline-none",rows:2})}),e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,disabled:n||!i.trim(),className:`p-3 rounded-xl flex items-center justify-center ${n||!i.trim()?"bg-gray-200 text-gray-400":"bg-gradient-to-r from-indigo-500 to-purple-500 text-white"}`,children:n?e.jsx(I,{className:"w-5 h-5 animate-spin"}):e.jsx(D,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"Press ‚èé Enter to send"})]}),e.jsx("style",{jsx:!0,children:`
            .clip-path-user {
              clip-path: polygon(0 0, 100% 0, 100% 100%);
            }
            .clip-path-ai {
              clip-path: polygon(0 0, 100% 0, 0 100%);
            }
          `})]})})};export{z as C};
