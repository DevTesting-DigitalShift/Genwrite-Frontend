var f=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var B=(t,r)=>{var e={};for(var s in t)E.call(t,s)&&r.indexOf(s)<0&&(e[s]=t[s]);if(t!=null&&f)for(var s of f(t))r.indexOf(s)<0&&F.call(t,s)&&(e[s]=t[s]);return e};var c=(t,r,e)=>new Promise((s,o)=>{var p=a=>{try{l(e.next(a))}catch(n){o(n)}},g=a=>{try{l(e.throw(a))}catch(n){o(n)}},l=a=>a.done?s(a.value):Promise.resolve(a.value).then(p,g);l((e=e.apply(t,r)).next())});import{a as d}from"./index-CHEUOGl9.js";import"./tiptap-BabmW22p.js";import"./vendor-CcjAMWu8.js";import"./antd-8WQTeuab.js";import"./utils-DIb0lvMo.js";const O=(t,r)=>c(null,null,function*(){var e,s,o,p,g,l,a;try{const n=r==="yt"?"/blogs/yt":"/blogs/quick";return(yield d.post(n,t)).data.blog}catch(n){if(console.error("Blog creation API error:",n),((e=n.response)==null?void 0:e.status)===402){const w=(o=(s=n.response)==null?void 0:s.data)==null?void 0:o.neededCredits,y=w?`Insufficient credits. You need ${w} credits to create this blog.`:((g=(p=n.response)==null?void 0:p.data)==null?void 0:g.message)||"Insufficient credits to create blog",h=new Error(y);throw h.status=402,h.neededCredits=w,h}const i=((a=(l=n.response)==null?void 0:l.data)==null?void 0:a.message)||"Failed to create blog";throw new Error(i)}}),j=t=>c(null,null,function*(){var e,s,o,p,g,l,a,n;try{const i=new FormData,r=t,{blogImages:w}=r,y=B(r,["blogImages"]),h=Object.fromEntries(Object.entries(y).filter(([u,b])=>b!=null));i.append("data",JSON.stringify(h)),(w==null?void 0:w.length)>0&&w.forEach(u=>{const b=new File([u.originFileObj],u.name,{type:u.type});i.append("blogImages",b,b.name)});const m=yield d.postForm("/blogs",i);return m.data.blog||m.data}catch(i){if(console.error("createBlog error",((e=i.response)==null?void 0:e.data)||i),((s=i.response)==null?void 0:s.status)===402){const w=(p=(o=i.response)==null?void 0:o.data)==null?void 0:p.neededCredits,y=w?`Insufficient credits. You need ${w} credits to create this blog.`:((l=(g=i.response)==null?void 0:g.data)==null?void 0:l.message)||"Insufficient credits to create blog",h=new Error(y);throw h.status=402,h.neededCredits=w,h}throw new Error(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to create blog")}}),v=t=>c(null,null,function*(){var r,e,s,o,p,g,l;try{return(yield d.post("/blogs/xyz",t)).data.insertedBlogs}catch(a){if(console.error("createBlogMultiple",a),((r=a.response)==null?void 0:r.status)===402){const n=(s=(e=a.response)==null?void 0:e.data)==null?void 0:s.neededCredits,i=n?`Insufficient credits. You need ${n} credits to create these blogs.`:((p=(o=a.response)==null?void 0:o.data)==null?void 0:p.message)||"Insufficient credits to create blogs",w=new Error(i);throw w.status=402,w.neededCredits=n,w}throw new Error(((l=(g=a.response)==null?void 0:g.data)==null?void 0:l.message)||"Failed to create blog")}}),A=(...r)=>c(null,[...r],function*(t={}){var e,s;try{return(yield d.get("/blogs",{params:t})).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch blogs")}}),P=t=>c(null,null,function*(){var r,e;try{return(yield d.get(`/blogs/${t}`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to fetch blog")}}),S=(t,r)=>c(null,null,function*(){var e,s;try{return(yield d.put(`/blogs/update/${t}`,r)).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to update blog")}}),Y=(t,r)=>c(null,null,function*(){try{return yield d.post(`/blogs/${t}/rewrite`,r)}catch(e){throw console.error(e),new Error(e||"Failed to retry")}}),k=()=>c(null,null,function*(){var t,r;try{return(yield d.delete("/blogs")).data}catch(e){throw new Error(((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete blogs")}}),N=t=>c(null,null,function*(){var r,e;try{return(yield d.patch(`/blogs/restore/${t}`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to restore blog")}}),T=t=>c(null,null,function*(){var r,e;try{return(yield d.patch(`/blogs/archive/${t}`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to archive blog")}}),q=(e,...s)=>c(null,[e,...s],function*(t,r={createNew:!1}){var o,p;try{return(yield d.post(`/blogs/${t}/retry`,r)).data}catch(g){throw new Error(((p=(o=g.response)==null?void 0:o.data)==null?void 0:p.message)||"Failed to retry blog")}}),z=t=>c(null,null,function*(){return(yield d.get(`/blogs/${t}/stats`)).data}),G=t=>c(null,null,function*(){return(yield d.post("/generate/title",t)).data}),J=t=>c(null,null,function*(){var r,e;try{return(yield d.post("/blogs/new",t)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to create blog")}}),L=()=>c(null,null,function*(){try{return(yield d.get("/blogs/all")).data}catch(t){throw new Error(t||"Failed to fetch blogs")}}),Q=(t,r)=>c(null,null,function*(){var e,s;try{return yield d.post(`/blogs/${t}/prompt`,{prompt:r})}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch blog prompt")}}),R=t=>c(null,null,function*(){var r,e;try{return(yield d.get(`/blogs/postings/${t}`)).data.postings||[]}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to fetch blog postings")}}),U=(s,...o)=>c(null,[s,...o],function*(t,{type:r="pdf",withImages:e=!1}={}){var p,g;try{const l=yield d.get(`/blogs/${t}/export`,{params:{type:r,withImages:e?"true":"false"},responseType:"blob"}),a=l.headers["content-disposition"];let n=`blog.${r}`;if(a){const i=a.match(/filename="?(.+)"?/);i&&(n=i[1])}return{data:l.data,filename:n}}catch(l){throw new Error(((g=(p=l.response)==null?void 0:p.data)==null?void 0:g.message)||`Failed to export ${r.toUpperCase()}`)}});export{T as archiveBlogById,j as createBlog,v as createBlogMultiple,O as createQuickBlog,J as createSimpleBlog,k as deleteAllBlogs,U as exportBlog,A as getAllBlogs,P as getBlogById,R as getBlogPostings,Q as getBlogPrompt,z as getBlogStatsById,L as getBlogs,G as getGeneratedTitles,N as restoreBlogById,q as retryBlogById,Y as sendRetryLines,S as updateBlog};
