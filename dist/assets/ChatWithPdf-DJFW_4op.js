var j=(p,r,o)=>new Promise((n,i)=>{var u=s=>{try{l(o.next(s))}catch(c){i(c)}},x=s=>{try{l(o.throw(s))}catch(c){i(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,x);l((o=o.apply(p,r)).next())});import{c as k,u as U,a as z,r as m,W as f,j as e,H as P,B as v,A as R,m as g,el as q,em as I}from"./index-C4g81RTn.js";import{F as E}from"./file-text-P2bgQ7WA.js";import{T}from"./trash-2-Bib6eZEr.js";import{U as $}from"./upload-CWNdfH6V.js";import{U as S}from"./index-x7q5Rb9m.js";import{U as B}from"./user-DPvRze6o.js";import{I as H}from"./index-BCiBUUHJ.js";import{L as K}from"./loader-circle-Do42ofku.js";import{A as L}from"./arrow-right-BpMJXCvX.js";import"./collapse-BbEVqHco.js";import"./DownloadOutlined-DTidZHln.js";import"./progress-BjJJgmbZ.js";import"./useForceUpdate-C0zH0ZAr.js";import"./Input--hXjyRUq.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-B0e2vH7j.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],N=k("brain-circuit",W);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],V=k("file",_),{Dragger:O}=S,{TextArea:Z}=H,xe=()=>{const p=U(),{loading:r,cacheKey:o,error:n}=z(t=>t.tools.pdfChat),[i,u]=m.useState(null),[x,l]=m.useState([{id:1,role:"model",content:"Hi! Upload a PDF and I'll analyze it for you. Then you can ask me anything about it.",timestamp:new Date}]),[s,c]=m.useState(""),b=m.useRef(null),F=()=>{var t;(t=b.current)==null||t.scrollIntoView({behavior:"smooth"})};m.useEffect(()=>{F()},[x,r]),m.useEffect(()=>{n&&f.error((n==null?void 0:n.message)||"An error occurred")},[n]);const D=t=>{const{status:a}=t.file;if(a==="done"){const h=t.file.originFileObj;u(h),f.success(`${h.name} uploaded successfully!`),l([{id:1,role:"model",content:`I've analyzed "${h.name}". What would you like to know?`,timestamp:new Date}])}else a==="error"&&f.error(`${t.file.name} file upload failed.`)},M=({onSuccess:t})=>{setTimeout(()=>{t("ok")},0)},w=()=>j(null,null,function*(){if(!s.trim()||!i)return;const t={id:Date.now(),role:"user",content:s,timestamp:new Date};l(a=>[...a,t]),c("");try{let a;if(o){const d=x.slice(-10).map(y=>({role:y.role,content:y.content}));a={cacheKey:o,messages:d,question:t.content}}else{const d=new FormData;d.append("file",i),d.append("question",t.content),a=d}const h=yield p(I(a)).unwrap();l(d=>[...d,{id:Date.now()+1,role:"model",content:h.text,timestamp:new Date}])}catch(a){f.error((a==null?void 0:a.message)||"Failed to get response")}}),C=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),w())},A=()=>{u(null),p(q()),l([{id:1,role:"model",content:"Hi! Upload a PDF and I'll analyze it for you. Then you can ask me anything about it.",timestamp:new Date}])};return e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC]",children:[e.jsx(P,{children:e.jsx("title",{children:"Chat with PDF | GenWrite"})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 lg:p-8 h-screen flex flex-col gap-6",children:[e.jsxs("header",{className:"flex items-center justify-between bg-white/80 backdrop-blur-xl p-4 rounded-2xl border border-white/20 shadow-sm sticky top-0 z-10 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 text-white transform hover:scale-105 transition-transform duration-300",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"Chat with PDF"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Research Assistant"})]})]}),i&&e.jsxs(v,{danger:!0,type:"text",className:"hover:bg-red-50 text-red-600 rounded-xl font-medium flex items-center gap-2",onClick:A,children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"End Session"})]})]}),e.jsx("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:e.jsx(R,{mode:"wait",children:i?e.jsxs(g.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex flex-col h-full bg-white rounded-3xl shadow-xl shadow-slate-200/40 border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"h-14 bg-white border-b border-slate-100 flex items-center justify-between px-6 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-50 p-1.5 rounded text-red-500",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-semibold text-slate-700 truncate max-w-[200px] md:max-w-md",children:i.name})})]}),e.jsxs("div",{className:"text-xs font-mono text-slate-400 bg-slate-100 px-2 py-1 rounded",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-8 bg-slate-50/30 scroll-smooth",children:[x.map((t,a)=>e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-4 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role==="model"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-violet-600 flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-500/20 text-white mt-1",children:e.jsx(N,{className:"w-4 h-4"})}),e.jsx("div",{className:`
                        max-w-[85%] md:max-w-[75%] p-4 md:p-6 rounded-2xl text-[15px] leading-relaxed shadow-sm
                        ${t.role==="user"?"bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-tr-none":"bg-white text-slate-700 border border-slate-100 rounded-tl-none"}
                      `,children:t.content}),t.role==="user"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx(B,{className:"w-4 h-4 text-slate-500"})})]},t.id)),r&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-violet-600 flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-500/20 text-white mt-1",children:e.jsx(N,{className:"w-4 h-4"})}),e.jsxs("div",{className:"bg-white px-6 py-4 rounded-2xl rounded-tl-none border border-slate-100 shadow-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce delay-100"}),e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce delay-200"})]})]}),e.jsx("div",{ref:b})]}),e.jsxs("div",{className:"p-4 md:p-6 bg-white border-t border-slate-100",children:[e.jsxs("div",{className:"max-w-4xl mx-auto relative group",children:[e.jsx(Z,{value:s,onChange:t=>c(t.target.value),onKeyPress:C,placeholder:"Ask a question about your document...",autoSize:{minRows:1,maxRows:6},className:"!pr-14 !pl-6 !py-4 !rounded-2xl !bg-slate-50 !border-slate-200 focus:!bg-white focus:!border-indigo-500 hover:!border-indigo-300 !text-slate-800 !text-base !resize-none !shadow-inner transition-all",disabled:r}),e.jsx(v,{type:"primary",shape:"circle",size:"large",icon:r?e.jsx(K,{className:"w-5 h-5 animate-spin"}):e.jsx(L,{className:"w-5 h-5"}),onClick:w,disabled:!s.trim()||r,className:`absolute right-2 bottom-2 !flex !items-center !justify-center !w-10 !h-10 !border-0 !shadow-lg ${!s.trim()||r?"!bg-slate-200 !text-slate-400":"!bg-gradient-to-r !from-indigo-600 !to-violet-600 !text-white hover:!scale-110"} transition-all duration-300`})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("p",{className:"text-xs text-slate-400",children:"AI can assist with key findings, summaries, and data extraction."})})]})]},"chat-interface"):e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"items-center justify-center",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 inset-x-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),e.jsxs("div",{className:"p-4 md:p-8 h-[35rem]",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-bounce-slow",children:e.jsx($,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Upload your PDF"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Up to 10MB â€¢ Auto-OCR included"})]}),e.jsx("div",{className:"relative group",children:e.jsx(O,{accept:".pdf",customRequest:M,onChange:D,showUploadList:!1,className:"!border-0 !bg-transparent w-full",style:{padding:0},children:e.jsxs("div",{className:`border-2 border-dashed border-slate-200 rounded-2xl p-10 bg-slate-50/50 
                group-hover:bg-indigo-50/30 group-hover:border-indigo-400 
                transition-all cursor-pointer text-center h-[20rem]
                flex flex-col items-center justify-center`,children:[e.jsx("p",{className:"text-indigo-600 font-medium mb-2",children:"Click to browse"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"or drag and drop here"})]})})})]})]})})},"upload-view")})})]}),e.jsx("style",{children:`
        .ant-upload-wrapper .ant-upload-drag {
           background: transparent !important;
           border: 0 !important;
        }
        .ant-upload-wrapper .ant-upload-drag .ant-upload {
           padding: 0 !important;
        }
      `})]})};export{xe as default};
