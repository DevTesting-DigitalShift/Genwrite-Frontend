import{aG as j,j as s,y as $}from"./index-Dc2dnry2.js";import{m as N,p as T}from"./marked.esm-B5OBOYgH.js";import{b as p}from"./chunk-tiptap-B3wovghF.js";import{C as g}from"./index-pkRO0Vge.js";import"./EllipsisOutlined-DkXL98IW.js";import"./Overflow-BvuASa81.js";const{Title:C,Text:h}=$;function b(n){const l=n.trim().split(/\s+/).length;return`${Math.ceil(l/200)} min read`}function v(n){const l=n.split(`
`),a=new Set,r=[];let o=!1;for(const c of l)if(/^## /.test(c)){o=!0;let e=c.replace(/^## /,"").trim();e=e.replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/[*_~`]+/g,"").replace(/<[^>]*>/g,"").trim();const t=e.toLowerCase().replace(/[^\w]+/g,"-").replace(/^-+|-+$/g,"");a.has(t)||(a.add(t),r.push({text:e,id:t,level:2}))}else if(/^### /.test(c)&&!o){let e=c.replace(/^### /,"").trim();e=e.replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/[*_~`]+/g,"").replace(/<[^>]*>/g,"").trim();const t=e.toLowerCase().replace(/[^\w]+/g,"-").replace(/^-+|-+$/g,"");a.has(t)||(a.add(t),r.push({text:e,id:t,level:3}))}return r}function L(n){return n.replace(/^(#{2,3}) (.+)$/gm,(l,a,r)=>{const o=r.toLowerCase().replace(/[^\w]+/g,"-");return`${a} <a id="${o}"></a>${r}`})}function k(){const n=j(),[l,a]=p.useState(""),[r,o]=p.useState([]),c=typeof window<"u";p.useEffect(()=>{if(n&&c){const{title:m,content:i}=n,d=L(i),w=N.parse(d),y=T.sanitize(w);a(y),o(v(i)),document.title=m}},[n]);const{title:e,author:t,createdAt:u,content:f}=n,x=b(f);return s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-10 scroll-smooth",children:s.jsxs(g,{className:"rounded-lg shadow-lg",children:[s.jsxs("header",{className:"mb-6 text-right",children:[s.jsx(C,{level:1,className:"mb-2 text-center text-pretty ",children:e}),s.jsxs(h,{type:"secondary",children:["By ",s.jsx(h,{strong:!0,children:t==null?void 0:t.name}),"  · ",new Date(u).toLocaleDateString("en-US",{month:"long",day:"2-digit",year:"numeric"})," · ",x]})]}),r.length>0&&s.jsx(g,{type:"inner",title:"Table of Contents",className:"mb-6",children:s.jsx("ul",{className:"pl-4 space-y-1",children:r.map(({text:m,id:i,level:d})=>s.jsx("li",{className:`ml-${d===3?"4":"0"} list-disc`,children:s.jsx("a",{href:`#${i}`,className:"link no-underline hover:underline",children:m})},i))})}),s.jsx("article",{className:"blog-content prose max-w-none",dangerouslySetInnerHTML:{__html:l}})]})})}export{k as default};
