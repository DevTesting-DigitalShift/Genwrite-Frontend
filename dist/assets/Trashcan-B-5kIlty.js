import{a0 as D,j as e,H as R,m as b,P as u,T as A,Q as B,b as h,B as o}from"./index-CniRpELv.js";import{b as g}from"./chunk-tiptap-DryasWDK.js";import{b as E}from"./SkeletonLoader-CJyYLrkM.js";import{R as P,T as I}from"./trash-2-DaRinYdg.js";import{B as L}from"./index-CvJXhY5e.js";import{P as $}from"./index-BtZhshJQ.js";import{R as F}from"./QuestionCircleOutlined-CVHqNsKA.js";import"./index-DSGAgWL2.js";const Y=()=>{const[a,p]=g.useState([]),[j,f]=g.useState(!0),{handlePopup:y}=D(),n=async()=>{var s,t;try{f(!0);const l=(await h.get("/blogs/")).data.filter(c=>c.isArchived);p(l)}catch(r){console.error("Error fetching trashed blogs:",((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch trashed blogs")}finally{f(!1)}};g.useEffect(()=>{n()},[]);const N=async s=>{try{(await h.patch(`/blogs/restore/${s}`)).status===200?(p([]),o.success("Blog restored successfully!")):o.error("Failed to restore blog.")}catch(t){o.error("Failed to restore blog."),console.error("Error restoring blog:",t.response&&t.response.data&&t.response.data.message||"Failed to restore blog")}},v=async()=>{var s;try{const t=await h.delete("/blogs"),r=((s=t==null?void 0:t.data)==null?void 0:s.deletedCount)||0;t.status===200?(o.success(`${r||0} ${r===1?"blog":"blogs"} deleted successfully`),n()):o.error("Cant delete")}catch{console.error("Error restoring blog:")}},w=async()=>{await n()};return e.jsxs("div",{className:"p-5",children:[e.jsx(R,{children:e.jsx("title",{children:"Trashcan | GenWrite"})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(b.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl md:text-4xl font-bold bg-blue-600 bg-clip-text text-transparent",children:"Trashcan"}),a.length!==0&&e.jsxs("div",{className:"flex justify-end",children:[e.jsx(u,{type:"button",className:"p-2 hover:!border-yellow-500 hover:text-yellow-500",onClick:()=>w(),children:e.jsx(P,{})}),e.jsx(u,{type:"button",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>y({title:"Delete All",description:e.jsxs("span",{className:"my-2",children:["All selected blogs will be ",e.jsx("b",{children:"permanently deleted"}),". This action cannot be undone."]}),confirmText:"Delete",onConfirm:()=>{v()},confirmProps:{type:"undefined",className:"border-red-500 hover:bg-red-500 hover:text-white"},cancelProps:{danger:!1}}),children:e.jsx(I,{})})]})]}),e.jsx(b.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-gray-600 max-w-xl mt-2",children:"Restore valuable work or permanently delete clutter."}),a.length!==0&&e.jsx("p",{className:"text-yellow-500 font-semibold mb-4",children:"Warning: Trashed items will be permanently deleted after 7 days."}),j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"bg-white shadow-md rounded-xl p-4",children:e.jsx(E,{})},t))}):a.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 250px)"},children:[e.jsx("img",{src:"Images/trash-can.png",alt:"Trash",style:{width:"8rem"}}),e.jsx("p",{className:"text-xl mt-5",children:"No trashed blogs available."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 p-2",children:a==null?void 0:a.map(s=>{const{_id:t,title:r,status:l,createdAt:c,content:T,aiModel:C,focusKeywords:d,updatedAt:G,wordpress:i,archiveDate:k}=s,m=/gemini/gi.test(C);return e.jsx(L.Ribbon,{text:e.jsxs("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide",children:[e.jsx("img",{src:`./Images/${m?"gemini":"chatgpt"}.png`,alt:"",width:20,height:20,loading:"lazy",className:"bg-white"}),m?"Gemini-1.5-flash":"Chatgpt-4o-mini"]}),className:"absolute top-0",color:m?"#4796E3":"#74AA9C",children:e.jsxs("div",{className:`bg-white shadow-md  hover:shadow-xl  transition-all duration-300 rounded-xl p-4 min-h-[180px] min-w-[390px] relative
                                  ${(l==="failed"?"border-red-500":l!=="complete"&&"border-yellow-500")+" border-2"}
                                `,title:r,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(c).toLocaleDateString("en-US",{dateStyle:"medium"})}),e.jsx(A,{color:l==="complete"?"black":l==="failed"?"red":"orange",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{const{status:x}=s;x==="complete"&&handleBlogClick(s)},children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2 ",children:[e.jsx("h3",{className:"text-lg capitalize font-semibold text-gray-900 !text-left max-w-76",children:r}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:T||""})]})})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:d==null?void 0:d.map((x,S)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:x},S))}),e.jsx($,{title:"Restore Blog",description:"Are you sure to restore the blog ?",icon:e.jsx(F,{style:{color:"red"}}),okText:"Yes",cancelText:"No",onConfirm:()=>N(t),children:e.jsx("img",{src:"Images/restore.svg",alt:"Restore",width:"20",height:"20",className:"cursor-pointer restore-icon"})})]}),e.jsxs("div",{className:"mt-3 mb-2 flex justify-end text-xs text-right text-gray-500 font-medium",children:[(i==null?void 0:i.postedOn)&&e.jsxs("span",{className:"",children:["Posted on : Â ",new Date(i.postedOn).toLocaleDateString("en-US",{dateStyle:"medium"})]}),e.jsxs("span",{className:"block -mb-2 text-sm text-right",children:["Archive Date:"," ",new Date(k).toLocaleDateString("en-US",{dateStyle:"medium"})]})]})]})},t)})}),e.jsx(B,{}),e.jsx("style",{children:`
          .restore-icon {
            transition: filter 0.2s, filter 0.2s;
          }
          .restore-icon:hover {
            filter: invert(18%) sepia(99%) saturate(7482%) hue-rotate(357deg) brightness(97%) contrast(119%);
          }
        `})]})};export{Y as default};
