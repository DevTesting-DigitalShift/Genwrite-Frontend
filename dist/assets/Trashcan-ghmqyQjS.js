import{G as I,u as L,j as e,H,m as y,B as w,T as U,aB as z,a_ as $,a$ as F}from"./index-CXBRdXcE.js";import{b as o}from"./chunk-tiptap-Diw-eXXG.js";import{b as O}from"./SkeletonLoader-D2RtoF0H.js";import{R as W}from"./refresh-ccw-BHj60Jgi.js";import{T as M,B as Y}from"./index-207XCDsd.js";import{P as Z}from"./index-sNhBP6OR.js";import{R as q}from"./QuestionCircleOutlined-CZsi_U7b.js";import{P as J}from"./Pagination-BPjnBdb7.js";import"./createLucideIcon-C5jW9RxN.js";import"./index-C8YbbX8p.js";import"./LeftOutlined-7kyxeL8N.js";import"./Overflow-BlSwON9F.js";import"./move-C80XFKt5.js";import"./useIcons-BPMfLcU2.js";import"./SearchOutlined-B9MaVB6h.js";const me=()=>{const[i,h]=o.useState([]),[N,p]=o.useState(!0),[n,c]=o.useState(1),{handlePopup:v}=I(),f=L(),T=85,l=15;o.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[n]);const u=async()=>{try{p(!0);const s=(await z()).filter(r=>r.isArchived);h(s)}catch(t){console.error("Error fetching trashed blogs:",t.message)}finally{p(!1)}};o.useEffect(()=>{u()},[]);const B=(t,s=T)=>t?t.length>s?t.substring(0,s)+"...":t:"",C=async t=>{await f(F(t)),h(s=>{const r=s.filter(a=>a._id!==t);return r.length<=(n-1)*l&&n>1&&c(a=>a-1),r})},S=async()=>{await f($()),h([]),c(1)},P=async()=>{await u(),c(1)},b=i.length,j=(n-1)*l,k=i.slice(j,j+l),A=t=>t.replace(/[#=~`*_\-]+/g,"").trim();return e.jsxs("div",{className:"p-5",children:[e.jsx(H,{children:e.jsx("title",{children:"Trashcan | GenWrite"})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(y.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl md:text-4xl font-bold bg-blue-600 bg-clip-text text-transparent",children:"Trashcan"}),i.length!==0&&e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(w,{type:"button",className:"p-2 hover:!border-yellow-500 hover:text-yellow-500",onClick:P,children:e.jsx(W,{})}),e.jsx(w,{type:"button",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>v({title:"Delete All",description:e.jsxs("span",{className:"my-2",children:["All selected blogs will be ",e.jsx("b",{children:"permanently deleted"}),". This action cannot be undone."]}),confirmText:"Delete",onConfirm:S,confirmProps:{type:"undefined",className:"border-red-500 hover:bg-red-500 hover:text-white"},cancelProps:{danger:!1}}),children:e.jsx(M,{})})]})]}),e.jsx(y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-gray-600 max-w-xl mt-2",children:"Restore valuable work or permanently delete clutter."}),i.length!==0&&e.jsx("p",{className:"text-yellow-500 font-semibold mb-4",children:"Warning: Trashed items will be permanently deleted after 7 days."}),N?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(l)].map((t,s)=>e.jsx("div",{className:"bg-white shadow-md rounded-xl p-4",children:e.jsx(O,{})},s))}):i.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 250px)"},children:[e.jsx("img",{src:"Images/trash-can.png",alt:"Trash",style:{width:"8rem"}}),e.jsx("p",{className:"text-xl mt-5",children:"No trashed blogs available."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 p-2",children:k.map(t=>{const{_id:s,title:r,status:a,createdAt:D,content:R,aiModel:d,focusKeywords:x,wordpress:m,archiveDate:E}=t,g=/gemini/gi.test(d);return e.jsx(Y.Ribbon,{text:e.jsxs("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide",children:[e.jsx("img",{src:`./Images/${g?"gemini":d==="claude"?"claude":"chatgpt"}.png`,alt:"",width:20,height:20,loading:"lazy",className:"bg-white"}),g?"Gemini-1.5-flash":d==="claude"?"Claude-3-Haiku":"ChatGPT-4o-mini"]}),className:"absolute top-0",color:g?"#4796E3":d==="claude"?"#9368F8":"#74AA9C",children:e.jsxs("div",{className:`bg-white shadow-md hover:shadow-xl transition-all duration-300 rounded-xl p-4 min-h-[180px] min-w-[390px] relative
                      ${(a==="failed"?"border-red-500":a==="complete"?"border-green-500":"border-yellow-500")+" border-2"}
                    `,title:r,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(D).toLocaleDateString("en-US",{dateStyle:"medium"})}),e.jsx(U,{color:a==="complete"?"black":a==="failed"?"red":"orange",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{a==="complete"&&handleBlogClick(t)},children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg capitalize font-semibold text-gray-900 !text-left max-w-76",children:r}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:B(A(R))})]})})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:x==null?void 0:x.map((G,_)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:G},_))}),e.jsx(Z,{title:"Restore Blog",description:"Are you sure to restore the blog?",icon:e.jsx(q,{style:{color:"red"}}),okText:"Yes",cancelText:"No",onConfirm:()=>C(s),children:e.jsx("img",{src:"Images/restore.svg",alt:"Restore",width:"20",height:"20",className:"cursor-pointer restore-icon"})})]}),e.jsxs("div",{className:"mt-3 mb-2 flex justify-end text-xs text-right text-gray-500 font-medium",children:[(m==null?void 0:m.postedOn)&&e.jsxs("span",{children:["Posted on:",new Date(m.postedOn).toLocaleDateString("en-US",{dateStyle:"medium"})]}),e.jsxs("span",{className:"block -mb-2 text-sm text-right",children:["Archive Date:"," ",new Date(E).toLocaleDateString("en-US",{dateStyle:"medium"})]})]})]})},s)})}),b>l&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(J,{current:n,pageSize:l,total:b,onChange:t=>c(t),showSizeChanger:!1,responsive:!0})})]}),e.jsx("style",{children:`
          .restore-icon {
            transition: filter 0.2s;
          }
          .restore-icon:hover {
            filter: invert(18%) sepia(99%) saturate(7482%) hue-rotate(357deg) brightness(97%) contrast(119%);
          }
        `})]})};export{me as default};
