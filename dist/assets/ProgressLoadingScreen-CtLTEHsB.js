import{r as t,j as s}from"./index-DPgM0DFJ.js";const E=({maxDuration:y=6e4,onTimeout:o,message:u,delay:i=200,isYouTube:r=!1})=>{const[m,p]=t.useState(0),[P,w]=t.useState(!1),[S,N]=t.useState(i===0),f=t.useRef(null),g=t.useRef(null),I=t.useRef(Date.now());return t.useEffect(()=>(i>0&&(g.current=setTimeout(()=>{N(!0)},i)),()=>{g.current&&clearTimeout(g.current)}),[i]),t.useEffect(()=>(f.current=setTimeout(()=>{console.warn("ProgressLoadingScreen: Maximum duration exceeded."),w(!0),o==null||o()},y),()=>{f.current&&clearTimeout(f.current);const c=Date.now()-I.current;c>5e3&&console.info(`ProgressLoadingScreen: Was displayed for ${(c/1e3).toFixed(1)}s`)}),[y,o]),t.useEffect(()=>{const c=[1,2,3,15,20,25,30,40];let d=0,h=0,n=null;const j=r?2e3:500,l=()=>{p(e=>{if(e>=98)return 98;if(d<c.length){const a=c[d];d++;const x=r?j+d*300:j;return n=setTimeout(l,x),a}if(e>=40&&e<70)return n=setTimeout(l,r?3e3:800),Math.min(e+6,70);if(e>=70&&e<85){const a=h>1e4?2:3;return n=setTimeout(l,r?4e3:1200),Math.min(e+a,85)}if(e>=85&&e<95){const a=h>2e4?.5:1;return n=setTimeout(l,r?5e3:1500),Math.min(e+a,95)}return e>=95&&e<98?(n=setTimeout(l,r?6e3:2e3),Math.min(e+.3,98)):e})},M=setInterval(()=>{h+=100},100);return l(),()=>{clearInterval(M),n&&clearTimeout(n)}},[r]),S?s.jsx("div",{className:"progress-loading-screen",role:"status","aria-live":"polite","aria-busy":"true","aria-label":u||`Loading content, please wait... ${Math.floor(m)}%`,children:s.jsxs("div",{className:"progress-loading-content",children:[s.jsxs("div",{className:"progress-container-wrapper",children:[s.jsxs("div",{className:"progress-percentage",children:[s.jsx("span",{className:"percentage-number",children:Math.floor(m)}),s.jsx("span",{className:"percentage-symbol",children:"%"})]}),s.jsx("div",{className:"modern-progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})})]}),u&&s.jsx("p",{className:"loading-message-text",children:u})]})}):null};export{E as P};
