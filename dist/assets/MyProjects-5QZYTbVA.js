import{c as _,aN as E,aS as I,j as e,ab as M,au as $,aJ as v,aT as h}from"./index-D86GYfJ-.js";import{b as o}from"./chunk-tiptap-JX9QK0Ia.js";import{S as D}from"./SkeletonLoader-DYkXCvIr.js";import{B as L}from"./index-DL0lO3Ns.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F=_("trash-2",T),V=()=>{const[g,x]=o.useState([]),[p,y]=o.useState(1),[n,c]=o.useState(5),[j,u]=o.useState(!0),w=E(),{handlePopup:N}=I(),P=async()=>{var s,t;try{u(!0);const m=(await v.get("/blogs/")).data.filter(r=>!r.isArchived).sort((r,l)=>new Date(l.createdAt)-new Date(r.createdAt));x(m)}catch(a){console.error("Error fetching blogs:",((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch blogs")}finally{u(!1)}};o.useEffect(()=>{P()},[]),o.useEffect(()=>{const s=()=>{window.innerWidth>=1024?c(15):window.innerWidth>=768?c(12):c(6)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const B=s=>{w(`/toolbox/${s._id}`,{state:{blog:s}})},d=Math.ceil(g.length/n),f=(p-1)*n,b=g.slice(f,f+n),k=s=>{y(s)},A=async s=>{try{(await v.patch(`/blogs/archive/${s}`)).status===200?(x(a=>a.filter(i=>i._id!==s)),h.success("Blog archived successfully!")):h.error("Failed to archive blog.")}catch(t){h.error("Failed to archive blog."),console.error("Error archiving blog:",t.response&&t.response.data&&t.response.data.message||"Failed to archive blog")}};return e.jsxs("div",{className:"max-w-7xl mx-auto",style:{overflowY:"auto"},children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Blogs Generated"}),j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(n)].map((s,t)=>e.jsx("div",{className:"bg-white shadow-md rounded-xl p-4",children:e.jsx(D,{})},t))}):b.length===0?e.jsx("p",{children:"No blogs available."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 place-items-center p-2",children:b.map(s=>{const{_id:t,title:a,content:i,focusKeywords:m,status:r,aiModel:l}=s;return e.jsx(L.Ribbon,{text:e.jsxs("span",{className:"flex items-center justify-center gap-1 p-1 font-medium",children:[e.jsx("img",{src:"./Images/gemini.png",alt:"",width:16,height:16,loading:"lazy",className:"bg-white"}),l?l.charAt(0).toUpperCase()+l.slice(1):"Gemini"]}),className:"absolute top-0",children:e.jsxs("div",{className:`bg-white shadow-md  hover:shadow-xl  transition-all duration-300 rounded-xl p-4 min-h-[180px] min-w-[390px] relative
                        ${(r==="failed"?"border-red-500":r!=="complete"&&"border-yellow-500")+" border-2"}
                      `,title:a,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(s.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}),e.jsx(M,{title:r==="complete"?a:`Blog generation is ${r}`,color:r==="complete"?"black":r==="failed"?"red":"orange",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{r==="complete"&&B(s)},children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2 ",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 !text-left max-w-76",children:a}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:i||""})]})})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((C,S)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:C},S))}),e.jsx($,{type:"undefined",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>N({title:"Move to Trash",description:e.jsxs("span",{className:"my-2",children:["Blog ",e.jsx("b",{children:s.title})," will be moved to trash. You can restore it later."]}),confirmText:"Archieve",onConfirm:()=>{console.log("Trashing blog:",s._id),A(s._id)},confirmProps:{type:"undefined",className:"border-red-500 hover:bg-red-500 hover:text-white"},cancelProps:{danger:!1}}),children:e.jsx(F,{})})]})]})},t)})}),d>1&&e.jsx("div",{className:"flex justify-center mt-8 self-end",children:e.jsx("nav",{className:"inline-flex rounded-md shadow",children:e.jsx("ul",{className:"flex",children:Array.from({length:d},(s,t)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>k(t+1),className:`px-4 py-2 border-r border-gray-200 text-sm font-medium ${p===t+1?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} ${t===0?"rounded-l-md":""} ${t===d-1?"rounded-r-md border-r-0":""}`,children:t+1})},t))})})})]})]})};export{V as default};
