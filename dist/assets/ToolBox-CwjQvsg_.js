var TE=Object.defineProperty,kE=Object.defineProperties;var SE=Object.getOwnPropertyDescriptors;var Ha=Object.getOwnPropertySymbols;var Eh=Object.prototype.hasOwnProperty,Th=Object.prototype.propertyIsEnumerable;var bl=Math.pow,yh=(e,t,n)=>t in e?TE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))Eh.call(t,n)&&yh(e,n,t[n]);if(Ha)for(var n of Ha(t))Th.call(t,n)&&yh(e,n,t[n]);return e},re=(e,t)=>kE(e,SE(t));var ln=(e,t)=>{var n={};for(var r in e)Eh.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ha)for(var r of Ha(e))t.indexOf(r)<0&&Th.call(e,r)&&(n[r]=e[r]);return n};var Je=(e,t,n)=>new Promise((r,i)=>{var s=u=>{try{o(n.next(u))}catch(l){i(l)}},a=u=>{try{o(n.throw(u))}catch(l){i(l)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,a);o((n=n.apply(e,t)).next())});import{ae as a1,a0 as ka,r as B,af as Xn,j as g,ag as wE,ah as o1,ai as kh,z as Md,a1 as u1,a as pi,y as l1,u as Ru,Y as ie,m as Ge,L as Ac,T as Fe,X as mr,B as Bt,aj as c1,ak as CE,A as Io,al as AE,am as NE,an as IE,Z as OE,ao as vE,a4 as Sh,v as _E,H as LE,ap as wh,aq as Ch,ar as RE}from"./index-DEEnX9rt.js";import{m as Yi,p as ME}from"./marked.esm-BFQzAr0N.js";import{I as Hr}from"./index-RF9LaIIx.js";import{c as mt}from"./createLucideIcon-DiZyOWyW.js";import{I as ni}from"./image-BubmwXza.js";import{T as DE}from"./trash-2-BH9uwGXW.js";import{R as Ah}from"./rotate-ccw-CaCa89e5.js";import{C as PE}from"./copy-0xzH9rVc.js";import{R as BE}from"./ReloadOutlined-C8mpFHE7.js";import{U as FE}from"./upload-DHPie0uw.js";import{S as fr}from"./index-Fdt7_obj.js";import{E as HE,a as Dd}from"./eye-BsvmmJf0.js";import{g as UE,C as d1,E as Nh}from"./getEstimatedCost-CLxWjD5J.js";import{o as jE}from"./UpgardePopUp-CfTaFpaT.js";import{X as Oo}from"./x-CsFiGIxr.js";import{P as vo}from"./plus-CFnvXUQt.js";import{M as xl,D as zE}from"./index-10ktmWe_.js";import{D as $E}from"./download-MJ_-Vsu1.js";import{T as Ua}from"./trending-up-SUAsaAXp.js";import{C as Ih}from"./crown-SUtbcPxm.js";import{S as f1}from"./sparkles-Bh6MCTIP.js";import{F as ho}from"./file-text-C7TZa4Kh.js";import{Z as VE}from"./zap-BGadzwB5.js";import{B as Oh}from"./index-B--E3BnR.js";import{T as vh}from"./index-BEIXe6N7.js";import{C as qE}from"./circle-alert-C3pkFWwx.js";import{C as WE}from"./circle-check-big-DSxC0C6G.js";import{C as YE,p as yl}from"./templates-LxyhAbY_.js";import{S as KE}from"./index-1986_9OF.js";import{R as GE}from"./refresh-ccw-CnzEaWwi.js";import{R as QE}from"./refresh-cw-e7BKavgd.js";import{L as XE}from"./loader-circle-D_S1UwsT.js";import"./Input-P0sBv5An.js";import"./Overflow-De28JD2L.js";import"./index-CXwZDoNU.js";import"./LeftOutlined-TA1B6rV7.js";import"./EllipsisOutlined-DFcSoihP.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ZE=mt("align-center",JE);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],tT=mt("align-left",eT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],rT=mt("align-right",nT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ja=mt("bold",iT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_h=mt("chart-column",sT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],oT=mt("heading-1",aT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Lh=mt("heading-2",uT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],cT=mt("heading-3",lT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],za=mt("italic",dT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],$a=mt("lightbulb",fT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Cs=mt("link",hT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],mT=mt("list-ordered",pT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],bT=mt("list",gT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],yT=mt("maximize-2",xT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],TT=mt("minimize-2",ET);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],ST=mt("redo-2",kT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],CT=mt("save",wT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],h1=mt("sliders-horizontal",AT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IT=mt("target",NT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],vT=mt("underline",OT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],LT=mt("undo-2",_T);var El={exports:{}},Tl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh;function RT(){if(Rh)return Tl;Rh=1;var e=a1();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function o(d,h){var f=h(),m=r({inst:{value:f,getSnapshot:h}}),b=m[0].inst,y=m[1];return s(function(){b.value=f,b.getSnapshot=h,u(b)&&y({inst:b})},[d,f,h]),i(function(){return u(b)&&y({inst:b}),d(function(){u(b)&&y({inst:b})})},[d]),a(f),f}function u(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch(m){return!0}}function l(d,h){return h()}var c=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?l:o;return Tl.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,Tl}var Mh;function p1(){return Mh||(Mh=1,El.exports=RT()),El.exports}var m1=p1();function _t(e){this.content=e}_t.prototype={constructor:_t,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new _t(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new _t(n)},addToStart:function(e,t){return new _t([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new _t(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new _t(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=_t.from(e),e.size?new _t(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=_t.from(e),e.size?new _t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=_t.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};_t.from=function(e){if(e instanceof _t)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new _t(t)};function g1(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){let a=g1(i.content,s.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function b1(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let a=e.child(--i),o=t.child(--s),u=a.nodeSize;if(a==o){n-=u,r-=u;continue}if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let l=0,c=Math.min(a.text.length,o.text.length);for(;l<c&&a.text[a.text.length-l-1]==o.text[o.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let l=b1(a.content,o.content,n-1,r-1);if(l)return l}n-=u,r-=u}}class q{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let a=0,o=0;o<n;a++){let u=this.content[a],l=o+u.nodeSize;if(l>t&&r(u,i+o,s||null,a)!==!1&&u.content.size){let c=o+1;u.nodesBetween(Math.max(0,t-c),Math.min(u.content.size,n-c),r,i+c)}o=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",a=!0;return this.nodesBetween(t,n,(o,u)=>{let l=o.isText?o.text.slice(Math.max(t,u)-u,n-u):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&r&&(a?a=!1:s+=r),s+=l},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new q(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,a=0;a<n;s++){let o=this.content[s],u=a+o.nodeSize;u>t&&((a<t||u>n)&&(o.isText?o=o.cut(Math.max(0,t-a),Math.min(o.text.length,n-a)):o=o.cut(Math.max(0,t-a-1),Math.min(o.content.size,n-a-1))),r.push(o),i+=o.nodeSize),a=u}return new q(r,i)}cutByIndex(t,n){return t==n?q.empty:t==0&&n==this.content.length?this:new q(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new q(i,s)}addToStart(t){return new q([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new q(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return g1(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return b1(this,t,n,r)}findIndex(t){if(t==0)return Va(0,t);if(t==this.size)return Va(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Va(n+1,s):Va(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new q(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return q.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new q(n||t,r)}static from(t){if(!t)return q.empty;if(t instanceof q)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new q([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}q.empty=new q([],0);const kl={index:0,offset:0};function Va(e,t){return kl.index=e,kl.offset=t,kl}function _o(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!_o(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!_o(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let $e=class Nc{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&_o(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Nc.none;if(t instanceof Nc)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};$e.none=[];class Lo extends Error{}class se{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=y1(this.content,t+this.openStart,n);return r&&new se(r,this.openStart,this.openEnd)}removeBetween(t,n){return new se(x1(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return se.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new se(q.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new se(t,r,i)}}se.empty=new se(q.empty,0,0);function x1(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:a,offset:o}=e.findIndex(n);if(i==t||s.isText){if(o!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(x1(s.content,t-i-1,n-i-1)))}function y1(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=y1(a.content,t-s-1,n,a);return o&&e.replaceChild(i,a.copy(o))}function MT(e,t,n){if(n.openStart>e.depth)throw new Lo("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Lo("Inconsistent open depths");return E1(e,t,n,0)}function E1(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=E1(e,t,n,r+1);return s.copy(s.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let a=e.parent,o=a.content;return gi(a,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}else{let{start:a,end:o}=DT(n,e);return gi(s,k1(e,a,o,t,r))}else return gi(s,Ro(e,t,r))}function T1(e,t){if(!t.type.compatibleContent(e.type))throw new Lo("Cannot join "+t.type.name+" onto "+e.type.name)}function Ic(e,t,n){let r=e.node(n);return T1(r,t.node(n)),r}function mi(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Hs(e,t,n,r){let i=(t||e).node(n),s=0,a=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(mi(e.nodeAfter,r),s++));for(let o=s;o<a;o++)mi(i.child(o),r);t&&t.depth==n&&t.textOffset&&mi(t.nodeBefore,r)}function gi(e,t){return e.type.checkContent(t),e.copy(t)}function k1(e,t,n,r,i){let s=e.depth>i&&Ic(e,t,i+1),a=r.depth>i&&Ic(n,r,i+1),o=[];return Hs(null,e,i,o),s&&a&&t.index(i)==n.index(i)?(T1(s,a),mi(gi(s,k1(e,t,n,r,i+1)),o)):(s&&mi(gi(s,Ro(e,t,i+1)),o),Hs(t,n,i,o),a&&mi(gi(a,Ro(n,r,i+1)),o)),Hs(r,null,i,o),new q(o)}function Ro(e,t,n){let r=[];if(Hs(null,e,n,r),e.depth>n){let i=Ic(e,t,n+1);mi(gi(i,Ro(e,t,n+1)),r)}return Hs(t,null,n,r),new q(r)}function DT(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(q.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class ia{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return $e.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let o=r;r=i,i=o}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Mo(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let a=t;;){let{index:o,offset:u}=a.content.findIndex(s),l=s-u;if(r.push(a,o,i+u),!l||(a=a.child(o),a.isText))break;s=l-1,i+=u+1}return new ia(n,r,s)}static resolveCached(t,n){let r=Dh.get(t);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else Dh.set(t,r=new PT);let i=r.elts[r.i]=ia.resolve(t,n);return r.i=(r.i+1)%BT,i}}class PT{constructor(){this.elts=[],this.i=0}}const BT=12,Dh=new WeakMap;class Mo{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const FT=Object.create(null);let Vr=class Oc{constructor(t,n,r,i=$e.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&_o(this.attrs,n||t.defaultAttrs||FT)&&$e.sameSet(this.marks,r||$e.none)}copy(t=null){return t==this.content?this:new Oc(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Oc(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return se.empty;let i=this.resolve(t),s=this.resolve(n),a=r?0:i.sharedDepth(n),o=i.start(a),l=i.node(a).content.cut(i.pos-o,s.pos-o);return new se(l,i.depth-a,s.depth-a)}replace(t,n,r){return MT(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return ia.resolveCached(this,t)}resolveNoCache(t){return ia.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),S1(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=q.empty,i=0,s=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,s),o=a&&a.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=$e.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!$e.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=q.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Vr.prototype.text=void 0;class Do extends Vr{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):S1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Do(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Do(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function S1(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Ti{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new HT(t,n);if(r.next==null)return Ti.empty;let i=w1(r);r.next&&r.err("Unexpected trailing text");let s=WT(qT(i));return YT(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(a,o){let u=a.matchFragment(t,r);if(u&&(!n||u.validEnd))return q.from(o.map(l=>l.createAndFill()));for(let l=0;l<a.next.length;l++){let{type:c,next:d}=a.next[l];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,o.concat(c));if(h)return h}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let a=[];for(let o=i;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:o,next:u}=s.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||u.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return s}).join(`
`)}}Ti.empty=new Ti(!0);class HT{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function w1(e){let t=[];do t.push(UT(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function UT(e){let t=[];do t.push(jT(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function jT(e){let t=VT(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=zT(e,t);else break;return t}function Ph(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function zT(e,t){let n=Ph(e),r=n;return e.eat(",")&&(e.next!="}"?r=Ph(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function $T(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let a=n[s];a.isInGroup(t)&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function VT(e){if(e.eat("(")){let t=w1(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=$T(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function qT(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(a,o,u){let l={term:u,to:o};return t[a].push(l),l}function i(a,o){a.forEach(u=>u.to=o)}function s(a,o){if(a.type=="choice")return a.exprs.reduce((u,l)=>u.concat(s(l,o)),[]);if(a.type=="seq")for(let u=0;;u++){let l=s(a.exprs[u],o);if(u==a.exprs.length-1)return l;i(l,o=n())}else if(a.type=="star"){let u=n();return r(o,u),i(s(a.expr,u),u),[r(u)]}else if(a.type=="plus"){let u=n();return i(s(a.expr,o),u),i(s(a.expr,u),u),[r(u)]}else{if(a.type=="opt")return[r(o)].concat(s(a.expr,o));if(a.type=="range"){let u=o;for(let l=0;l<a.min;l++){let c=n();i(s(a.expr,u),c),u=c}if(a.max==-1)i(s(a.expr,u),u);else for(let l=a.min;l<a.max;l++){let c=n();r(u,c),i(s(a.expr,u),c),u=c}return[r(u)]}else{if(a.type=="name")return[r(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function C1(e,t){return t-e}function Bh(e,t){let n=[];return r(t),n.sort(C1);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let a=0;a<s.length;a++){let{term:o,to:u}=s[a];!o&&n.indexOf(u)==-1&&r(u)}}}function WT(e){let t=Object.create(null);return n(Bh(e,0));function n(r){let i=[];r.forEach(a=>{e[a].forEach(({term:o,to:u})=>{if(!o)return;let l;for(let c=0;c<i.length;c++)i[c][0]==o&&(l=i[c][1]);Bh(e,u).forEach(c=>{l||i.push([o,l=[]]),l.indexOf(c)==-1&&l.push(c)})})});let s=t[r.join(",")]=new Ti(r.indexOf(e.length-1)>-1);for(let a=0;a<i.length;a++){let o=i[a][1].sort(C1);s.next.push({type:i[a][0],next:t[o.join(",")]||n(o)})}return s}}function YT(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,a=[];for(let o=0;o<i.next.length;o++){let{type:u,next:l}=i.next[o];a.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(l)==-1&&r.push(l)}s&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function A1(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function N1(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function I1(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function O1(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new GT(e,r,t[r]);return n}let Fh=class v1{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=O1(t,r.attrs),this.defaultAttrs=A1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ti.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:N1(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vr(this,this.computeAttrs(t),q.from(n),$e.setFrom(r))}createChecked(t=null,n,r){return n=q.from(n),this.checkContent(n),new Vr(this,this.computeAttrs(t),n,$e.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=q.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(q.empty,!0);return s?new Vr(this,t,n.append(s),$e.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){I1(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:$e.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,a)=>r[s]=new v1(s,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function KT(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class GT{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?KT(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Mu{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=O1(t,i.attrs),this.excluded=null;let s=A1(this.attrs);this.instance=s?new $e(this,s):null}create(t=null){return!t&&this.instance?this.instance:new $e(this,N1(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,a)=>r[s]=new Mu(s,i++,n,a)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){I1(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let _1=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=_t.from(t.nodes),n.marks=_t.from(t.marks||{}),this.nodes=Fh.compile(this.spec.nodes,this),this.marks=Mu.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",o=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ti.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=o=="_"?null:o?Hh(this,o.split(" ")):o==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:Hh(this,a.split(" "))}this.nodeFromJSON=i=>Vr.fromJSON(this,i),this.markFromJSON=i=>$e.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Fh){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Do(r,r.defaultAttrs,t,$e.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function Hh(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],a=s;if(s)n.push(s);else for(let o in e.marks){let u=e.marks[o];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function QT(e){return e.tag!=null}function XT(e){return e.style!=null}let Us=class vc{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(QT(i))this.tags.push(i);else if(XT(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new jh(this,n,!1);return r.addAll(t,$e.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new jh(this,n,!0);return r.addAll(t,$e.none,n.from,n.to),se.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(e3(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],o=a.style;if(!(o.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=n))){if(a.getAttrs){let u=a.getAttrs(n);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let o=n[a];if((o.priority==null?50:o.priority)<s)break}n.splice(a,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=zh(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=zh(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new vc(t,vc.schemaRules(t)))}};const L1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},JT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},R1={ol:!0,ul:!0},sa=1,_c=2,js=4;function Uh(e,t,n){return t!=null?(t?sa:0)|(t==="full"?_c:0):e&&e.whitespace=="pre"?sa|_c:n&~js}class qa{constructor(t,n,r,i,s,a){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=$e.none,this.match=s||(a&js?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(q.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&sa)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=q.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!L1.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class jh{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,a=Uh(null,n.preserveWhitespace,0)|(r?js:0);i?s=new qa(i.type,i.attrs,$e.none,!0,n.topMatch||i.type.contentMatch,a):r?s=new qa(null,null,$e.none,!0,null,a):s=new qa(t.schema.topNodeType,null,$e.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&_c?"full":this.localPreserveWS||(i.options&sa)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],o=t.previousSibling;(!a||o&&o.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),o;R1.hasOwnProperty(a)&&this.parser.normalizeLists&&ZT(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,r));e:if(u?u.ignore:JT.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let l,c=this.needsBlock;if(L1.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),l=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=u&&u.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),l&&this.sync(s),this.needsBlock=c}else{let l=this.readStyles(t,n);l&&this.addElementByRule(t,u,l,u.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let o=void 0;;){let u=this.parser.matchStyle(s,a,this,o);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(l=>!u.clearMark(l)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)o=u;else break}}return n}addElementByRule(t,n,r,i){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(a,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(o)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let a=r?t.childNodes[r]:t.firstChild,o=i==null?null:t.childNodes[i];a!=o;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let a=this.open,o=0;a>=0;a--){let u=this.nodes[a],l=u.findWrapping(t);if(l&&(!i||i.length>l.length+o)&&(i=l,s=u,!l.length))break;if(u.solid){if(r)break;o+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let a=$e.none;for(let o of i.concat(t.marks))(s.type?s.type.allowsMarkType(o.type):$h(o.type,t.type))&&(a=o.addToSet(a));return s.content.push(t.mark(a)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let o=Uh(t,s,a.options);a.options&js&&a.content.length==0&&(o|=js);let u=$e.none;return r=r.filter(l=>(a.type?a.type.allowsMarkType(l.type):$h(l.type,t))?(u=l.addToSet(u),!1):!0),this.nodes.push(new qa(t,n,u,i,null,o)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=sa)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(o,u)=>{for(;o>=0;o--){let l=n[o];if(l==""){if(o==n.length-1||o==0)continue;for(;u>=s;u--)if(a(o-1,u))return!0;return!1}else{let c=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!c||c.name!=l&&!c.isInGroup(l))return!1;u--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ZT(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&R1.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function e3(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function zh(e){let t={};for(let n in e)t[n]=e[n];return t}function $h(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],a=o=>{s.push(o);for(let u=0;u<o.edgeCount;u++){let{type:l,next:c}=o.edge(u);if(l==t||s.indexOf(c)<0&&a(c))return!0}};if(a(i.contentMatch))return!0}}class Ni{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=Sl(n).createDocumentFragment());let i=r,s=[];return t.forEach(a=>{if(s.length||a.marks.length){let o=0,u=0;for(;o<s.length&&u<a.marks.length;){let l=a.marks[u];if(!this.marks[l.type.name]){u++;continue}if(!l.eq(s[o][0])||l.type.spec.spanning===!1)break;o++,u++}for(;o<s.length;)i=s.pop()[1];for(;u<a.marks.length;){let l=a.marks[u++],c=this.serializeMark(l,a.isInline,n);c&&(s.push([l,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=po(Sl(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&po(Sl(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return po(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ni(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=Vh(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return Vh(t.marks)}}function Vh(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Sl(e){return e.document||window.document}const qh=new WeakMap;function t3(e){let t=qh.get(e);return t===void 0&&qh.set(e,t=n3(e)),t}function n3(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function po(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=t3(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let o,u=n?e.createElementNS(n,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let d in l)if(l[d]!=null){let h=d.indexOf(" ");h>0?u.setAttributeNS(d.slice(0,h),d.slice(h+1),l[d]):d=="style"&&u.style?u.style.cssText=l[d]:u.setAttribute(d,l[d])}}for(let d=c;d<t.length;d++){let h=t[d];if(h===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:f,contentDOM:m}=po(e,h,n,r);if(u.appendChild(f),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:u,contentDOM:o}}const M1=65535,D1=Math.pow(2,16);function r3(e,t){return e+t*D1}function Wh(e){return e&M1}function i3(e){return(e-(e&M1))/D1}const P1=1,B1=2,mo=4,F1=8;class Lc{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&F1)>0}get deletedBefore(){return(this.delInfo&(P1|mo))>0}get deletedAfter(){return(this.delInfo&(B1|mo))>0}get deletedAcross(){return(this.delInfo&mo)>0}}class fn{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&fn.empty)return fn.empty}recover(t){let n=0,r=Wh(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+i3(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let u=this.ranges[o]-(this.inverted?i:0);if(u>t)break;let l=this.ranges[o+s],c=this.ranges[o+a],d=u+l;if(t<=d){let h=l?t==u?-1:t==d?1:n:n,f=u+i+(h<0?0:c);if(r)return f;let m=t==(n<0?u:d)?null:r3(o/3,t-u),b=t==u?B1:t==d?P1:mo;return(n<0?t!=u:t!=d)&&(b|=F1),new Lc(f,b,m)}i+=c-l}return r?t+i:new Lc(t+i,0,null)}touches(t,n){let r=0,i=Wh(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let u=this.ranges[o]-(this.inverted?r:0);if(u>t)break;let l=this.ranges[o+s],c=u+l;if(t<=c&&o==i*3)return!0;r+=this.ranges[o+a]-l}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],o=a-(this.inverted?s:0),u=a+(this.inverted?0:s),l=this.ranges[i+n],c=this.ranges[i+r];t(o,o+l,u,u+c),s+=c-l}}invert(){return new fn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?fn.empty:new fn(t<0?[0,-t,0]:[0,0,t])}}fn.empty=new fn([]);class aa{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new aa(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new aa;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],o=a.mapResult(t,n);if(o.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return r?t:new Lc(t,i,null)}}const wl=Object.create(null);class jt{getMap(){return fn.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wl[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in wl)throw new RangeError("Duplicate use of step JSON ID "+t);return wl[t]=n,n.prototype.jsonID=t,n}}class yt{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new yt(t,null)}static fail(t){return new yt(null,t)}static fromReplace(t,n,r,i){try{return yt.ok(t.replace(n,r,i))}catch(s){if(s instanceof Lo)return yt.fail(s.message);throw s}}}function Pd(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(Pd(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return q.fromArray(r)}class Ur extends jt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new se(Pd(n.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return yt.fromReplace(t,this.from,this.to,s)}invert(){return new vn(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ur(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ur&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ur(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ur(n.from,n.to,t.markFromJSON(n.mark))}}jt.jsonID("addMark",Ur);class vn extends jt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new se(Pd(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return yt.fromReplace(t,this.from,this.to,r)}invert(){return new Ur(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new vn(n.pos,r.pos,this.mark)}merge(t){return t instanceof vn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new vn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new vn(n.from,n.to,t.markFromJSON(n.mark))}}jt.jsonID("removeMark",vn);class jr extends jt{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return yt.fromReplace(t,this.pos,this.pos+1,new se(q.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new jr(this.pos,n.marks[i]);return new jr(this.pos,this.mark)}}return new ki(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new jr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new jr(n.pos,t.markFromJSON(n.mark))}}jt.jsonID("addNodeMark",jr);class ki extends jt{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return yt.fromReplace(t,this.pos,this.pos+1,new se(q.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new jr(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ki(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ki(n.pos,t.markFromJSON(n.mark))}}jt.jsonID("removeNodeMark",ki);class At extends jt{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Rc(t,this.from,this.to)?yt.fail("Structure replace would overwrite content"):yt.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new fn([this.from,this.to-this.from,this.slice.size])}invert(t){return new At(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new At(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof At)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?se.empty:new se(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new At(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?se.empty:new se(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new At(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new At(n.from,n.to,se.fromJSON(t,n.slice),!!n.structure)}}jt.jsonID("replace",At);class Ot extends jt{constructor(t,n,r,i,s,a,o=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=o}apply(t){if(this.structure&&(Rc(t,this.from,this.gapFrom)||Rc(t,this.gapTo,this.to)))return yt.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return yt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?yt.fromReplace(t,this.from,this.to,r):yt.fail("Content does not fit in gap")}getMap(){return new fn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ot(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ot(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ot(n.from,n.to,n.gapFrom,n.gapTo,se.fromJSON(t,n.slice),n.insert,!!n.structure)}}jt.jsonID("replaceAround",Ot);function Rc(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function s3(e,t,n,r){let i=[],s=[],a,o;e.doc.nodesBetween(t,n,(u,l,c)=>{if(!u.isInline)return;let d=u.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let h=Math.max(l,t),f=Math.min(l+u.nodeSize,n),m=r.addToSet(d);for(let b=0;b<d.length;b++)d[b].isInSet(m)||(a&&a.to==h&&a.mark.eq(d[b])?a.to=f:i.push(a=new vn(h,f,d[b])));o&&o.to==h?o.to=f:s.push(o=new Ur(h,f,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function a3(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(a,o)=>{if(!a.isInline)return;s++;let u=null;if(r instanceof Mu){let l=a.marks,c;for(;c=r.isInSet(l);)(u||(u=[])).push(c),l=c.removeFromSet(l)}else r?r.isInSet(a.marks)&&(u=[r]):u=a.marks;if(u&&u.length){let l=Math.min(o+a.nodeSize,n);for(let c=0;c<u.length;c++){let d=u[c],h;for(let f=0;f<i.length;f++){let m=i[f];m.step==s-1&&d.eq(i[f].style)&&(h=m)}h?(h.to=l,h.step=s):i.push({style:d,from:Math.max(o,t),to:l,step:s})}}}),i.forEach(a=>e.step(new vn(a.from,a.to,a.style)))}function Bd(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),a=[],o=t+1;for(let u=0;u<s.childCount;u++){let l=s.child(u),c=o+l.nodeSize,d=r.matchType(l.type);if(!d)a.push(new At(o,c,se.empty));else{r=d;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||e.step(new vn(o,c,l.marks[h]));if(i&&l.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,m;for(;h=f.exec(l.text);)m||(m=new se(q.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new At(o+h.index,o+h.index+h[0].length,m))}}o=c}if(!r.validEnd){let u=r.fillBefore(q.empty,!0);e.replace(o,o,new se(u,0,0))}for(let u=a.length-1;u>=0;u--)e.step(a[u])}function o3(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function ps(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,a,n))return r;if(r==0||i.type.spec.isolating||!o3(i,s,a))break}return null}function u3(e,t,n){let{$from:r,$to:i,depth:s}=t,a=r.before(s+1),o=i.after(s+1),u=a,l=o,c=q.empty,d=0;for(let m=s,b=!1;m>n;m--)b||r.index(m)>0?(b=!0,c=q.from(r.node(m).copy(c)),d++):u--;let h=q.empty,f=0;for(let m=s,b=!1;m>n;m--)b||i.after(m+1)<i.end(m)?(b=!0,h=q.from(i.node(m).copy(h)),f++):l++;e.step(new Ot(u,l,a,o,new se(c.append(h),d,f),c.size-d,!0))}function Fd(e,t,n=null,r=e){let i=l3(e,t),s=i&&c3(r,t);return s?i.map(Yh).concat({type:t,attrs:n}).concat(s.map(Yh)):null}function Yh(e){return{type:e,attrs:null}}function l3(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return n.canReplaceWith(r,i,a)?s:null}function c3(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let u=(a.length?a[a.length-1]:t).contentMatch;for(let l=r;u&&l<i;l++)u=u.matchType(n.child(l).type);return!u||!u.validEnd?null:a}function d3(e,t,n){let r=q.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let o=n[a].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=q.from(n[a].type.create(n[a].attrs,r))}let i=t.start,s=t.end;e.step(new Ot(i,s,i,s,new se(r,0,0),n.length,!0))}function f3(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(a,o)=>{let u=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,u)&&h3(e.doc,e.mapping.slice(s).map(o),r)){let l=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!m?l=!1:!f&&m&&(l=!0)}l===!1&&U1(e,a,o,s),Bd(e,e.mapping.slice(s).map(o,1),r,void 0,l===null);let c=e.mapping.slice(s),d=c.map(o,1),h=c.map(o+a.nodeSize,1);return e.step(new Ot(d,h,d+1,h-1,new se(q.from(r.create(u,null,a.marks)),0,0),1,!0)),l===!0&&H1(e,a,o,s),!1}})}function H1(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+a.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function U1(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=e.mapping.slice(r).map(n+1+s);e.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function h3(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function p3(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ot(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new se(q.from(a),0,0),1,!0))}function xr(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,c=n-2;l>s;l--,c--){let d=i.node(l),h=i.index(l);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),m=r&&r[c+1];m&&(f=f.replaceChild(0,m.type.create(m.attrs)));let b=r&&r[c]||d;if(!d.canReplace(h+1,d.childCount)||!b.type.validContent(f))return!1}let o=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(o,o,u?u.type:i.node(s+1).type)}function m3(e,t,n=1,r){let i=e.doc.resolve(t),s=q.empty,a=q.empty;for(let o=i.depth,u=i.depth-n,l=n-1;o>u;o--,l--){s=q.from(i.node(o).copy(s));let c=r&&r[l];a=q.from(c?c.type.create(c.attrs,a):i.node(o).copy(a))}e.step(new At(t,t,new se(s.append(a),n,n),!0))}function Xr(e,t){let n=e.resolve(t),r=n.index();return j1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function g3(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),a=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function j1(e,t){return!!(e&&t&&!e.isLeaf&&g3(e,t))}function Du(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,a,o=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(i+1),o++,a=r.node(i).maybeChild(o)):(s=r.node(i).maybeChild(o-1),a=r.node(i+1)),s&&!s.isTextblock&&j1(s,a)&&r.node(i).canReplace(o,o+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function b3(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),a=s.node().type;if(i&&a.inlineContent){let c=a.whitespace=="pre",d=!!a.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let o=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);U1(e,c.node(),c.before(),o)}a.inlineContent&&Bd(e,t+n-1,a,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(o),l=u.map(t-n);if(e.step(new At(l,u.map(t+n,-1),se.empty,!0)),r===!0){let c=e.doc.resolve(l);H1(e,c.node(),c.before(),e.steps.length)}return e}function x3(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function z1(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let o=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(o>0?1:0),l=r.node(a),c=!1;if(s==1)c=l.canReplace(u,u,i);else{let d=l.contentMatchAt(u).findWrapping(i.firstChild.type);c=d&&l.canReplaceWith(u,u,d[0])}if(c)return o==0?r.pos:o<0?r.before(a+1):r.after(a+1)}return null}function Pu(e,t,n=t,r=se.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return $1(i,s,r)?new At(t,n,r):new y3(i,s,r).fit()}function $1(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class y3{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=q.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=q.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,a=r.depth,o=i.depth;for(;a&&o&&s.childCount==1;)s=s.firstChild.content,a--,o--;let u=new se(s,a,o);return t>-1?new Ot(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new At(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Cl(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:u,match:l}=this.frontier[o],c,d=null;if(n==1&&(a?l.matchType(a.type)||(d=l.fillBefore(q.from(a),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:o,parent:s,inject:d};if(n==2&&a&&(c=l.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:o,parent:s,wrap:c};if(s&&l.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Cl(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new se(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Cl(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new se(Ms(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new se(Ms(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let a=this.unplaced,o=r?r.content:a.content,u=a.openStart-t,l=0,c=[],{match:d,type:h}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)c.push(i.child(b));d=d.matchFragment(i)}let f=o.size+t-(a.content.size-a.openEnd);for(;l<o.childCount;){let b=o.child(l),y=d.matchType(b.type);if(!y)break;l++,(l>1||u==0||b.content.size)&&(d=y,c.push(V1(b.mark(h.allowedMarks(b.marks)),l==1?u:0,l==o.childCount?f:-1)))}let m=l==o.childCount;m||(f=-1),this.placed=Ds(this.placed,n,q.from(c)),this.frontier[n].match=d,m&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,y=o;b<f;b++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=m?t==0?se.empty:new se(Ms(a.content,t-1,1),t-1,f<0?a.openEnd:t-1):new se(Ms(a.content,t,l),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Al(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=Al(t,n,i,r,s);if(a){for(let o=n-1;o>=0;o--){let{match:u,type:l}=this.frontier[o],c=Al(t,o,l,u,!0);if(!c||c.childCount)continue e}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ds(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Ds(this.placed,this.depth,q.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(q.empty,!0);n.childCount&&(this.placed=Ds(this.placed,this.frontier.length,n))}}function Ms(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Ms(e.firstChild.content,t-1,n)))}function Ds(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ds(e.lastChild.content,t-1,n)))}function Cl(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function V1(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,V1(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(q.empty,!0)))),e.copy(r)}function Al(e,t,n,r,i){let s=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let o=r.fillBefore(s.content,!0,a);return o&&!E3(n,s.content,a)?o:null}function E3(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function T3(e){return e.spec.defining||e.spec.definingForContent}function k3(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if($1(i,s,r))return e.step(new At(t,n,r));let a=W1(i,e.doc.resolve(n));a[a.length-1]==0&&a.pop();let o=-(i.depth+1);a.unshift(o);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let m=i.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(h)>-1?o=h:i.before(h)==f&&a.splice(1,0,-h)}let u=a.indexOf(o),l=[],c=r.openStart;for(let h=r.content,f=0;;f++){let m=h.firstChild;if(l.push(m),f==r.openStart)break;h=m.content}for(let h=c-1;h>=0;h--){let f=l[h],m=T3(f.type);if(m&&!f.sameMarkup(i.node(Math.abs(o)-1)))c=h;else if(m||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+c+1)%(r.openStart+1),m=l[f];if(m)for(let b=0;b<a.length;b++){let y=a[(b+u)%a.length],x=!0;y<0&&(x=!1,y=-y);let E=i.node(y-1),T=i.index(y-1);if(E.canReplaceWith(T,T,m.type,m.marks))return e.replace(i.before(y),x?s.after(y):n,new se(q1(r.content,0,r.openStart,f),f,r.openEnd))}}let d=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let f=a[h];f<0||(t=i.before(f),n=s.after(f))}}function q1(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(q1(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(q.empty,!0))}return e}function S3(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=x3(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new se(q.from(r),0,0))}function w3(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=W1(r,i);for(let a=0;a<s.length;a++){let o=s[a],u=a==s.length-1;if(u&&o==0||r.node(o).type.contentMatch.validEnd)return e.delete(r.start(o),i.end(o));if(o>0&&(u||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return e.delete(r.before(o),i.after(o))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}function W1(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Ki extends jt{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return yt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return yt.fromReplace(t,this.pos,this.pos+1,new se(q.from(i),0,n.isLeaf?0:1))}getMap(){return fn.empty}invert(t){return new Ki(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ki(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ki(n.pos,n.attr,n.value)}}jt.jsonID("attr",Ki);class oa extends jt{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return yt.ok(r)}getMap(){return fn.empty}invert(t){return new oa(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new oa(n.attr,n.value)}}jt.jsonID("docAttr",oa);let Zi=class extends Error{};Zi=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Zi.prototype=Object.create(Error.prototype);Zi.prototype.constructor=Zi;Zi.prototype.name="TransformError";class Y1{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new aa}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Zi(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=se.empty){let i=Pu(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new se(q.from(r),0,0))}delete(t,n){return this.replace(t,n,se.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return k3(this,t,n,r),this}replaceRangeWith(t,n,r){return S3(this,t,n,r),this}deleteRange(t,n){return w3(this,t,n),this}lift(t,n){return u3(this,t,n),this}join(t,n=1){return b3(this,t,n),this}wrap(t,n){return d3(this,t,n),this}setBlockType(t,n=t,r,i=null){return f3(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return p3(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Ki(t,n,r)),this}setDocAttribute(t,n){return this.step(new oa(t,n)),this}addNodeMark(t,n){return this.step(new jr(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof $e)n.isInSet(r.marks)&&this.step(new ki(t,n));else{let i=r.marks,s,a=[];for(;s=n.isInSet(i);)a.push(new ki(t,s)),i=s.removeFromSet(i);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(t,n=1,r){return m3(this,t,n,r),this}addMark(t,n,r){return s3(this,t,n,r),this}removeMark(t,n,r){return a3(this,t,n,r),this}clearIncompatible(t,n,r){return Bd(this,t,n,r),this}}const Nl=Object.create(null);class be{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new K1(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=se.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let s=t.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:u,$to:l}=a[o],c=t.mapping.slice(s);t.replaceRange(c.map(u.pos),c.map(l.pos),o?se.empty:n),o==0&&Qh(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:o}=i[s],u=t.mapping.slice(r),l=u.map(a.pos),c=u.map(o.pos);s?t.deleteRange(l,c):(t.replaceRangeWith(l,c,n),Qh(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Te(t):Hi(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let a=n<0?Hi(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Hi(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(a)return a}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new hn(t.node(0))}static atStart(t){return Hi(t,t,0,0,1)||new hn(t)}static atEnd(t){return Hi(t,t,t.content.size,t.childCount,-1)||new hn(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Nl[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Nl)throw new RangeError("Duplicate use of selection JSON ID "+t);return Nl[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Te.between(this.$anchor,this.$head).getBookmark()}}be.prototype.visible=!0;class K1{constructor(t,n){this.$from=t,this.$to=n}}let Kh=!1;function Gh(e){!Kh&&!e.parent.inlineContent&&(Kh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Te extends be{constructor(t,n=t){Gh(t),Gh(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return be.near(r);let i=t.resolve(n.map(this.anchor));return new Te(i.parent.inlineContent?i:r,r)}replace(t,n=se.empty){if(super.replace(t,n),n==se.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Te&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Bu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Te(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=be.findFrom(n,r,!0)||be.findFrom(n,-r,!0);if(s)n=s.$head;else return be.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(be.findFrom(t,-r,!0)||be.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Te(t,n)}}be.jsonID("text",Te);class Bu{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Bu(t.map(this.anchor),t.map(this.head))}resolve(t){return Te.between(t.resolve(this.anchor),t.resolve(this.head))}}class he extends be{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?be.near(s):new he(s)}content(){return new se(q.from(this.node),0,0)}eq(t){return t instanceof he&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hd(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(t.resolve(n.anchor))}static create(t,n){return new he(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}he.prototype.visible=!1;be.jsonID("node",he);class Hd{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Bu(r,r):new Hd(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&he.isSelectable(r)?new he(n):be.near(n)}}class hn extends be{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=se.empty){if(n==se.empty){t.delete(0,t.doc.content.size);let r=be.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new hn(t)}map(t){return new hn(t)}eq(t){return t instanceof hn}getBookmark(){return C3}}be.jsonID("all",hn);const C3={map(){return this},resolve(e){return new hn(e)}};function Hi(e,t,n,r,i,s=!1){if(t.inlineContent)return Te.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let o=t.child(a);if(o.isAtom){if(!s&&he.isSelectable(o))return he.create(e,n-(i<0?o.nodeSize:0))}else{let u=Hi(e,o,n+i,i<0?o.childCount:0,i,s);if(u)return u}n+=o.nodeSize*i}return null}function Qh(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof At||i instanceof Ot))return;let s=e.mapping.maps[r],a;s.forEach((o,u,l,c)=>{a==null&&(a=c)}),e.setSelection(be.near(e.doc.resolve(a),n))}const Xh=1,Wa=2,Jh=4;class A3 extends Y1{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xh)&~Wa,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xh)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Wa,this}ensureMarks(t){return $e.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Wa)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Wa,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||$e.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(be.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Jh,this}get scrolledIntoView(){return(this.updated&Jh)>0}}function Zh(e,t){return!t||!e?e:e.bind(t)}class Ps{constructor(t,n,r){this.name=t,this.init=Zh(n.init,r),this.apply=Zh(n.apply,r)}}const N3=[new Ps("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Ps("selection",{init(e,t){return e.selection||be.atStart(t.doc)},apply(e){return e.selection}}),new Ps("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Ps("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Il{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=N3.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ps(r.key,r.spec.state,r))})}}class qi{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let u=i?i[a].n:0,l=i?i[a].state:this,c=u<n.length&&o.spec.appendTransaction.call(o,u?n.slice(u):n,l,r);if(c&&r.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<a?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new qi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new A3(this)}static create(t){let n=new Il(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new qi(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Il(this.schema,t.plugins),r=n.fields,i=new qi(n);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Il(t.schema,t.plugins),s=new qi(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=Vr.fromJSON(t.schema,n.doc);else if(a.name=="selection")s.selection=be.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let o in r){let u=r[o],l=u.spec.state;if(u.key==a.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){s[a.name]=l.fromJSON.call(u,t,n[o],s);return}}s[a.name]=a.init(t,s)}}),s}}function G1(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=G1(i,t,{})),n[r]=i}return n}class Xe{constructor(t){this.spec=t,this.props={},t.props&&G1(t.props,this,this.props),this.key=t.key?t.key.key:Q1("plugin")}getState(t){return t[this.key]}}const Ol=Object.create(null);function Q1(e){return e in Ol?e+"$"+ ++Ol[e]:(Ol[e]=0,e+"$")}class nt{constructor(t="key"){this.key=Q1(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Lt=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},es=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Mc=null;const dr=function(e,t,n){let r=Mc||(Mc=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},I3=function(){Mc=null},Si=function(e,t,n,r){return n&&(e0(e,t,n,r,-1)||e0(e,t,n,r,1))},O3=/^(img|br|input|textarea|hr)$/i;function e0(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Cn(e))){let a=e.parentNode;if(!a||a.nodeType!=1||Sa(e)||O3.test(e.nodeName)||e.contentEditable=="false")return!1;t=Lt(e)+(i<0?0:1),e=a}else if(e.nodeType==1){let a=e.childNodes[t+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=a,t=i<0?Cn(e):0}else return!1}}function Cn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function v3(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Cn(e)}else if(e.parentNode&&!Sa(e))t=Lt(e),e=e.parentNode;else return null}}function _3(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Sa(e))t=Lt(e)+1,e=e.parentNode;else return null}}function L3(e,t,n){for(let r=t==0,i=t==Cn(e);r||i;){if(e==n)return!0;let s=Lt(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Cn(e)}}function Sa(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Fu=function(e){return e.focusNode&&Si(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ai(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function R3(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function M3(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Cn(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Cn(r.startContainer),r.startOffset)}}}const Jn=typeof navigator!="undefined"?navigator:null,t0=typeof document!="undefined"?document:null,Jr=Jn&&Jn.userAgent||"",Dc=/Edge\/(\d+)/.exec(Jr),X1=/MSIE \d/.exec(Jr),Pc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jr),rn=!!(X1||Pc||Dc),qr=X1?document.documentMode:Pc?+Pc[1]:Dc?+Dc[1]:0,Mn=!rn&&/gecko\/(\d+)/i.test(Jr);Mn&&+(/Firefox\/(\d+)/.exec(Jr)||[0,0])[1];const Bc=!rn&&/Chrome\/(\d+)/.exec(Jr),Ft=!!Bc,J1=Bc?+Bc[1]:0,Qt=!rn&&!!Jn&&/Apple Computer/.test(Jn.vendor),ts=Qt&&(/Mobile\/\w+/.test(Jr)||!!Jn&&Jn.maxTouchPoints>2),kn=ts||(Jn?/Mac/.test(Jn.platform):!1),D3=Jn?/Win/.test(Jn.platform):!1,gr=/Android \d/.test(Jr),wa=!!t0&&"webkitFontSmoothing"in t0.documentElement.style,P3=wa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function B3(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function sr(e,t){return typeof e=="number"?e:e[t]}function F3(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function n0(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=n||e.dom;a;){if(a.nodeType!=1){a=es(a);continue}let o=a,u=o==s.body,l=u?B3(s):F3(o),c=0,d=0;if(t.top<l.top+sr(r,"top")?d=-(l.top-t.top+sr(i,"top")):t.bottom>l.bottom-sr(r,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+sr(i,"top")-l.top:t.bottom-l.bottom+sr(i,"bottom")),t.left<l.left+sr(r,"left")?c=-(l.left-t.left+sr(i,"left")):t.right>l.right-sr(r,"right")&&(c=t.right-l.right+sr(i,"right")),c||d)if(u)s.defaultView.scrollBy(c,d);else{let f=o.scrollLeft,m=o.scrollTop;d&&(o.scrollTop+=d),c&&(o.scrollLeft+=c);let b=o.scrollLeft-f,y=o.scrollTop-m;t={left:t.left-b,top:t.top-y,right:t.right-b,bottom:t.bottom-y}}let h=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(h))break;a=h=="absolute"?a.offsetParent:es(a)}}function H3(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){let o=e.root.elementFromPoint(s,a);if(!o||o==e.dom||!e.dom.contains(o))continue;let u=o.getBoundingClientRect();if(u.top>=n-20){r=o,i=u.top;break}}return{refDOM:r,refTop:i,stack:Z1(e.dom)}}function Z1(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=es(r));return t}function U3({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;eg(n,r==0?0:r-t)}function eg(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Mi=null;function j3(e){if(e.setActive)return e.setActive();if(Mi)return e.focus(Mi);let t=Z1(e);e.focus(Mi==null?{get preventScroll(){return Mi={preventScroll:!0},!0}}:void 0),Mi||(Mi=!1,eg(t,0))}function tg(e,t){let n,r=2e8,i,s=0,a=t.top,o=t.top,u,l;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=dr(c).getClientRects();else continue;for(let f=0;f<h.length;f++){let m=h[f];if(m.top<=a&&m.bottom>=o){a=Math.max(m.bottom,a),o=Math.min(m.top,o);let b=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(b<r){n=c,r=b,i=b&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,c.nodeType==1&&b&&(s=d+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!u&&m.left<=t.left&&m.right>=t.left&&(u=c,l={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(s=d+1)}}return!n&&u&&(n=u,i=l,r=0),n&&n.nodeType==3?z3(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:tg(n,i)}function z3(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=_r(r,1);if(s.top!=s.bottom&&Ud(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function Ud(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function $3(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function V3(e,t,n){let{node:r,offset:i}=tg(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function q3(e,t,n,r){let i=-1;for(let s=t,a=!1;s!=e.dom;){let o=e.docView.nearestDesc(s,!0),u;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((u=o.dom.getBoundingClientRect()).width||u.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&u.left>r.left||u.top>r.top?i=o.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(i=o.posAfter),a=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?o.posBefore:o.posAfter;s=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function ng(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let a=e.childNodes[s];if(a.nodeType==1){let o=a.getClientRects();for(let u=0;u<o.length;u++){let l=o[u];if(Ud(t,l))return ng(a,t,l)}}if((s=(s+1)%r)==i)break}return e}function W3(e,t){let n=e.dom.ownerDocument,r,i=0,s=M3(n,t.left,t.top);s&&({node:r,offset:i}=s);let a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),o;if(!a||!e.dom.contains(a.nodeType!=1?a.parentNode:a)){let l=e.dom.getBoundingClientRect();if(!Ud(t,l)||(a=ng(e.dom,t,l),!a))return null}if(Qt)for(let l=a;r&&l;l=es(l))l.draggable&&(r=void 0);if(a=$3(a,t),r){if(Mn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let l;wa&&i&&r.nodeType==1&&(l=r.childNodes[i-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=q3(e,r,i,t))}o==null&&(o=V3(e,a,t));let u=e.docView.nearestDesc(a,!0);return{pos:o,inside:u?u.posAtStart-u.border:-1}}function r0(e){return e.top<e.bottom||e.left<e.right}function _r(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(r0(r))return r}return Array.prototype.find.call(n,r0)||e.getBoundingClientRect()}const Y3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rg(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),a=wa||Mn;if(r.nodeType==3)if(a&&(Y3.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=_r(dr(r,i,i),n);if(Mn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let l=_r(dr(r,i-1,i-1),-1);if(l.top==u.top){let c=_r(dr(r,i,i+1),-1);if(c.top!=u.top)return As(c,c.left<l.left)}}return u}else{let u=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==r.nodeValue.length?(u--,c=1):n<0?u--:l++,As(_r(dr(r,u,l),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Cn(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return vl(u.getBoundingClientRect(),!1)}if(s==null&&i<Cn(r)){let u=r.childNodes[i];if(u.nodeType==1)return vl(u.getBoundingClientRect(),!0)}return vl(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Cn(r))){let u=r.childNodes[i-1],l=u.nodeType==3?dr(u,Cn(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(l)return As(_r(l,1),!1)}if(s==null&&i<Cn(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let l=u?u.nodeType==3?dr(u,0,a?0:1):u.nodeType==1?u:null:null;if(l)return As(_r(l,-1),!0)}return As(_r(r.nodeType==3?dr(r):r,-n),n>=0)}function As(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function vl(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function ig(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function K3(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return ig(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(s,!0);if(!o)break;if(o.node.isBlock){s=o.contentDOM||o.dom;break}s=o.dom.parentNode}let a=rg(e,i.pos,1);for(let o=s.firstChild;o;o=o.nextSibling){let u;if(o.nodeType==1)u=o.getClientRects();else if(o.nodeType==3)u=dr(o,0,o.nodeValue.length).getClientRects();else continue;for(let l=0;l<u.length;l++){let c=u[l];if(c.bottom>c.top+1&&(n=="up"?a.top-c.top>(c.bottom-a.top)*2:c.bottom-a.bottom>(a.bottom-c.top)*2))return!1}}return!0})}const G3=/[\u0590-\u08ac]/;function Q3(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,o=e.domSelection();return o?!G3.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?s:a:ig(e,t,()=>{let{focusNode:u,focusOffset:l,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),h=o.caretBidiLevel;o.modify("move",n,"character");let f=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:b}=e.domSelectionRange(),y=m&&!f.contains(m.nodeType==1?m:m.parentNode)||u==m&&l==b;try{o.collapse(c,d),u&&(u!=c||l!=d)&&o.extend&&o.extend(u,l)}catch(x){}return h!=null&&(o.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let i0=null,s0=null,a0=!1;function X3(e,t,n){return i0==t&&s0==n?a0:(i0=t,s0=n,a0=n=="up"||n=="down"?K3(e,t,n):Q3(e,t,n))}const An=0,o0=1,ci=2,Zn=3;class Ca{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=An,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,a;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Lt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let o=i.children[a];if(o.size){i=o;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.size;if(o>t||a instanceof ag){i=t-s;break}s=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof sg&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Lt(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Lt(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,o=0;;o++){let u=this.children[o],l=a+u.size;if(i==-1&&t<=l){let c=a+u.border;if(t>=c&&n<=l-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,c);t=a;for(let d=o;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Lt(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(l>n||o==this.children.length-1)){n=l;for(let c=o+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Lt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=l}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),a=Math.max(t,n);for(let f=0,m=0;f<this.children.length;f++){let b=this.children[f],y=m+b.size;if(s>m&&a<y)return b.setSelection(t-m-b.border,n-m-b.border,r,i);m=y}let o=this.domFromPos(t,t?-1:1),u=n==t?o:this.domFromPos(n,n?-1:1),l=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Mn||Qt)&&t==n){let{node:f,offset:m}=o;if(f.nodeType==3){if(d=!!(m&&f.nodeValue[m-1]==`
`),d&&m==f.nodeValue.length)for(let b=f,y;b;b=b.parentNode){if(y=b.nextSibling){y.nodeName=="BR"&&(o=u={node:y.parentNode,offset:Lt(y)+1});break}let x=b.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let b=f.childNodes[m-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Mn&&c.focusNode&&c.focusNode!=u.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&Qt)&&Si(o.node,o.offset,c.anchorNode,c.anchorOffset)&&Si(u.node,u.offset,c.focusNode,c.focusOffset))return;let h=!1;if((l.extend||t==n)&&!d){l.collapse(o.node,o.offset);try{t!=n&&l.extend(u.node,u.offset),h=!0}catch(f){}}if(!h){if(t>n){let m=o;o=u,u=m}let f=document.createRange();f.setEnd(u.node,u.offset),f.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?t<=a&&n>=r:t<a&&n>r){let o=r+s.border,u=a-s.border;if(t>=o&&n<=u){this.dirty=t==r||n==a?ci:o0,t==o&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Zn:s.markDirty(t-o,n-o);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ci:Zn}r=a}this.dirty=ci}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?ci:o0;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class sg extends Ca{constructor(t,n,r,i){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==An&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class J3 extends Ca{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class wi extends Ca{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return(!a||!a.dom)&&(a=Ni.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new wi(t,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Zn&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=An){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=An}}slice(t,n,r){let i=wi.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=Hc(s,n,a,r)),t>0&&(s=Hc(s,0,t,r));for(let o=0;o<s.length;o++)s[o].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Wr extends Ca{constructor(t,n,r,i,s,a,o,u,l){super(t,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(t,n,r,i,s,a){let o=s.nodeViews[n.type.name],u,l=o&&o(n,s,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},r,i),c=l&&l.dom,d=l&&l.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Ni.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let h=c;return c=lg(c,r,n),l?u=new Z3(t,n,r,i,c,d||null,h,l,s,a+1):n.isText?new Hu(t,n,r,i,c,h,s):new Wr(t,n,r,i,c,d||null,h,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>q.empty)}return t}matchesNode(t,n,r){return this.dirty==An&&t.eq(this.node)&&Po(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,a=s&&s.pos>-1?s:null,o=s&&s.pos<0,u=new tk(this,a&&a.node,t);ik(this.node,this.innerDeco,(l,c,d)=>{l.spec.marks?u.syncToMarks(l.spec.marks,r,t):l.type.side>=0&&!d&&u.syncToMarks(c==this.node.childCount?$e.none:this.node.child(c).marks,r,t),u.placeWidget(l,t,i)},(l,c,d,h)=>{u.syncToMarks(l.marks,r,t);let f;u.findNodeMatch(l,c,d,h)||o&&t.state.selection.from>i&&t.state.selection.to<i+l.nodeSize&&(f=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(l,c,d,f,t)||u.updateNextNode(l,c,d,t,h,i)||u.addNode(l,c,d,t,i),i+=l.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==ci)&&(a&&this.protectLocalComposition(t,a),og(this.contentDOM,this.children,t),ts&&sk(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Te)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,o=ak(this.node.content,a,r-n,i-n);return o<0?null:{node:s,pos:o,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new J3(this,s,n,i);t.input.compositionNodes.push(a),this.children=Hc(this.children,r,r+i.length,t,a)}update(t,n,r,i){return this.dirty==Zn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=An}updateOuterDeco(t){if(Po(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ug(this.dom,this.nodeDOM,Fc(this.outerDeco,this.node,n),Fc(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function u0(e,t,n,r,i){lg(r,t,e);let s=new Wr(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Hu extends Wr{constructor(t,n,r,i,s,a,o){super(t,n,r,i,s,null,a,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==Zn||this.dirty!=An&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=An||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=An,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new Hu(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(t){return this.node.text==t}}class ag extends Ca{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==An&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Z3 extends Wr{constructor(t,n,r,i,s,a,o,u,l,c){super(t,n,r,i,s,a,o,l,c),this.spec=u}update(t,n,r,i){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function og(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let a=t[s],o=a.dom;if(o.parentNode==e){for(;o!=r;)r=l0(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(o,r);if(a instanceof wi){let u=r?r.previousSibling:e.lastChild;og(a.contentDOM,a.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=l0(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const zs=function(e){e&&(this.nodeName=e)};zs.prototype=Object.create(null);const di=[new zs];function Fc(e,t,n){if(e.length==0)return di;let r=n?di[0]:new zs,i=[r];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a){a.nodeName&&i.push(r=new zs(a.nodeName));for(let o in a){let u=a[o];u!=null&&(n&&i.length==1&&i.push(r=new zs(t.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+u:o=="style"?r.style=(r.style?r.style+";":"")+u:o!="nodeName"&&(r[o]=u))}}}return i}function ug(e,t,n,r){if(n==di&&r==di)return t;let i=t;for(let s=0;s<r.length;s++){let a=r[s],o=n[s];if(s){let u;o&&o.nodeName==a.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(i),o=di[0]),i=u}ek(i,o||di[0],a)}return i}function ek(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function lg(e,t,n){return ug(e,e,di,Fc(t,n,e.nodeType!=1))}function Po(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function l0(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class tk{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=nk(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,a=Math.min(s,t.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=An,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let l=this.top.children[u];if(l.matchesMark(t[s])&&!this.isLocked(l.dom)){o=u;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let u=wi.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))s=this.top.children.indexOf(a,this.index);else for(let o=this.index,u=Math.min(this.top.children.length,o+5);o<u;o++){let l=this.top.children[o];if(l.matchesNode(t,n,r)&&!this.preMatch.matched.has(l)){s=o;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let a=this.top.children[i];return a.dirty==Zn&&a.dom==a.contentDOM&&(a.dirty=ci),a.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,a){for(let o=this.index;o<this.top.children.length;o++){let u=this.top.children[o];if(u instanceof Wr){let l=this.preMatch.matched.get(u);if(l!=null&&l!=s)return!1;let c=u.dom,d,h=this.isLocked(c)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=Zn&&Po(n,u.outerDeco));if(!h&&u.update(t,n,r,i))return this.destroyBetween(this.index,o),u.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(u,t,n,r,i,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ci,d.updateChildren(i,a+1),d.dirty=An),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Po(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=Wr.create(this.top,n,r,i,s,a);if(o.contentDOM){o.children=t.children,t.children=[];for(let u of o.children)u.parent=o}return t.destroy(),o}addNode(t,n,r,i,s){let a=Wr.create(this.top,t,n,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new sg(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof wi;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Hu)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Qt||Ft)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ag(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function nk(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,a=[];e:for(;i>0;){let o;for(;;)if(r){let l=n.children[r-1];if(l instanceof wi)n=l,r=l.children.length;else{o=l,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=o.node;if(u){if(u!=e.child(i-1))break;--i,s.set(o,i),a.push(o)}}return{index:i,matched:s,matches:a.reverse()}}function rk(e,t){return e.type.side-t.type.side}function ik(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let l=0;l<e.childCount;l++){let c=e.child(l);r(c,i,t.forChild(s,c),l),s+=c.nodeSize}return}let a=0,o=[],u=null;for(let l=0;;){let c,d;for(;a<i.length&&i[a].to==s;){let y=i[a++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(rk);for(let y=0;y<d.length;y++)n(d[y],l,!!u)}else n(c,l,!!u);let h,f;if(u)f=-1,h=u,u=null;else if(l<e.childCount)f=l,h=e.child(l++);else break;for(let y=0;y<o.length;y++)o[y].to<=s&&o.splice(y--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)o.push(i[a++]);let m=s+h.nodeSize;if(h.isText){let y=m;a<i.length&&i[a].from<y&&(y=i[a].from);for(let x=0;x<o.length;x++)o[x].to<y&&(y=o[x].to);y<m&&(u=h.cut(y-s),h=h.cut(0,y-s),m=y,f=-1)}else for(;a<i.length&&i[a].to<m;)a++;let b=h.isInline&&!h.isLeaf?o.filter(y=>!y.inline):o.slice();r(h,b,t.forChild(s,h),f),s=m}}function sk(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function ak(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let a=e.child(i++),o=s;if(s+=a.nodeSize,!a.isText)continue;let u=a.text;for(;i<e.childCount;){let l=e.child(i++);if(s+=l.nodeSize,!l.isText)break;u+=l.text}if(s>=n){if(s>=r&&u.slice(r-t.length-o,r-o)==t)return r-t.length;let l=o<r?u.lastIndexOf(t,r-o-1):-1;if(l>=0&&l+t.length+o>=n)return o+l;if(n==r&&u.length>=r+t.length-o&&u.slice(r-o,r-o+t.length)==t)return r}}return-1}function Hc(e,t,n,r,i){let s=[];for(let a=0,o=0;a<e.length;a++){let u=e[a],l=o,c=o+=u.size;l>=n||c<=t?s.push(u):(l<t&&s.push(u.slice(0,t-l,r)),i&&(s.push(i),i=void 0),c>n&&s.push(u.slice(n-l,u.size,r)))}return s}function jd(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o=r.resolve(a),u,l;if(Fu(n)){for(u=a;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&he.isSelectable(d)&&i.parent&&!(d.isInline&&L3(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;l=new he(a==h?o:r.resolve(h))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=a,h=a;for(let f=0;f<n.rangeCount;f++){let m=n.getRangeAt(f);d=Math.min(d,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[u,a]=h==e.state.selection.anchor?[h,d]:[d,h],o=r.resolve(a)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let c=r.resolve(u);if(!l){let d=t=="pointer"||e.state.selection.head<o.pos&&!s?1:-1;l=zd(e,c,o,d)}return l}function cg(e){return e.editable?e.hasFocus():fg(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function yr(e,t=!1){let n=e.state.selection;if(dg(e,n),!!cg(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Ft){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Si(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)uk(e);else{let{anchor:r,head:i}=n,s,a;c0&&!(n instanceof Te)&&(n.$from.parent.inlineContent||(s=d0(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=d0(e,n.to))),e.docView.setSelection(r,i,e,t),c0&&(s&&f0(s),a&&f0(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ok(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const c0=Qt||Ft&&J1<63;function d0(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Qt&&i&&i.contentEditable=="false")return _l(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return _l(i);if(s)return _l(s)}}function _l(e){return e.contentEditable="true",Qt&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function f0(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ok(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!cg(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function uk(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Lt(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&rn&&qr<=11&&(r.disabled=!0,r.disabled=!1)}function dg(e,t){if(t instanceof he){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(h0(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else h0(e)}function h0(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function zd(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Te.between(t,n,r)}function p0(e){return e.editable&&!e.hasFocus()?!1:fg(e)}function fg(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function lk(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Si(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Uc(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&be.findFrom(s,t)}function Mr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function m0(e,t,n){let r=e.state.selection;if(r instanceof Te)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Mr(e,new Te(r.$anchor,a))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Uc(e.state,t);return i&&i instanceof he?Mr(e,i):!1}else if(!(kn&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let o=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=e.docView.descAt(o))&&!a.contentDOM?he.isSelectable(s)?Mr(e,new he(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):wa?Mr(e,new Te(e.state.doc.resolve(t<0?o:o+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof he&&r.node.isInline)return Mr(e,new Te(t>0?r.$to:r.$from));{let i=Uc(e.state,t);return i?Mr(e,i):!1}}}function Bo(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function $s(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Di(e,t){return t<0?ck(e):dk(e)}function ck(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,a=!1;for(Mn&&n.nodeType==1&&r<Bo(n)&&$s(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if($s(o,-1))i=n,s=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(hg(n))break;{let o=n.previousSibling;for(;o&&$s(o,-1);)i=n.parentNode,s=Lt(o),o=o.previousSibling;if(o)n=o,r=Bo(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?jc(e,n,r):i&&jc(e,i,s)}function dk(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Bo(n),s,a;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if($s(o,1))s=n,a=++r;else break}else{if(hg(n))break;{let o=n.nextSibling;for(;o&&$s(o,1);)s=o.parentNode,a=Lt(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=Bo(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&jc(e,s,a)}function hg(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function fk(e,t){for(;e&&t==e.childNodes.length&&!Sa(e);)t=Lt(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function hk(e,t){for(;e&&!t&&!Sa(e);)t=Lt(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function jc(e,t,n){if(t.nodeType!=3){let s,a;(a=fk(t,n))?(t=a,n=0):(s=hk(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Fu(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&yr(e)},50)}function g0(e,t){let n=e.state.doc.resolve(t);if(!(Ft||D3)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function b0(e,t,n){let r=e.state.selection;if(r instanceof Te&&!r.empty||n.indexOf("s")>-1||kn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let a=Uc(e.state,t);if(a&&a instanceof he)return Mr(e,a)}if(!i.parent.inlineContent){let a=t<0?i:s,o=r instanceof hn?be.near(a,t):be.findFrom(a,t);return o?Mr(e,o):!1}return!1}function x0(e,t){if(!(e.state.selection instanceof Te))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function y0(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function pk(e){if(!Qt||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;y0(e,r,"true"),setTimeout(()=>y0(e,r,"false"),20)}return!1}function mk(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function gk(e,t){let n=t.keyCode,r=mk(t);if(n==8||kn&&n==72&&r=="c")return x0(e,-1)||Di(e,-1);if(n==46&&!t.shiftKey||kn&&n==68&&r=="c")return x0(e,1)||Di(e,1);if(n==13||n==27)return!0;if(n==37||kn&&n==66&&r=="c"){let i=n==37?g0(e,e.state.selection.from)=="ltr"?-1:1:-1;return m0(e,i,r)||Di(e,i)}else if(n==39||kn&&n==70&&r=="c"){let i=n==39?g0(e,e.state.selection.from)=="ltr"?1:-1:1;return m0(e,i,r)||Di(e,i)}else{if(n==38||kn&&n==80&&r=="c")return b0(e,-1,r)||Di(e,-1);if(n==40||kn&&n==78&&r=="c")return pk(e)||b0(e,1,r)||Di(e,1);if(r==(kn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function $d(e,t){e.someProp("transformCopied",f=>{t=f(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let a=e.someProp("clipboardSerializer")||Ni.fromSchema(e.state.schema),o=yg(),u=o.createElement("div");u.appendChild(a.serializeFragment(r,{document:o}));let l=u.firstChild,c,d=0;for(;l&&l.nodeType==1&&(c=xg[l.nodeName.toLowerCase()]);){for(let f=c.length-1;f>=0;f--){let m=o.createElement(c[f]);for(;u.firstChild;)m.appendChild(u.firstChild);u.appendChild(m),d++}l=u.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",f=>f(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:h,slice:t}}function pg(e,t,n,r,i){let s=i.parent.type.spec.code,a,o;if(!n&&!t)return null;let u=t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",h=>{t=h(t,s||r,e)}),s)return t?new se(q.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):se.empty;let d=e.someProp("clipboardTextParser",h=>h(t,i,r,e));if(d)o=d;else{let h=i.marks(),{schema:f}=e.state,m=Ni.fromSchema(f);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(b=>{let y=a.appendChild(document.createElement("p"));b&&y.appendChild(m.serializeNode(f.text(b,h)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),a=Ek(n),wa&&Tk(a);let l=a&&a.querySelector("[data-pm-slice]"),c=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let h=a.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;a=h}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||Us.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||c),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!bk.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)o=kk(E0(o,+c[1],+c[2]),c[4]);else if(o=se.maxOpen(xk(o.content,i),!0),o.openStart||o.openEnd){let d=0,h=0;for(let f=o.content.firstChild;d<o.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=o.content.lastChild;h<o.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);o=E0(o,d,h)}return e.someProp("transformPasted",d=>{o=d(o,e)}),o}const bk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xk(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,a=[];if(e.forEach(o=>{if(!a)return;let u=i.findWrapping(o.type),l;if(!u)return a=null;if(l=a.length&&s.length&&gg(u,s,o,a[a.length-1],0))a[a.length-1]=l;else{a.length&&(a[a.length-1]=bg(a[a.length-1],s.length));let c=mg(o,u);a.push(c),i=i.matchType(c.type),s=u}}),a)return q.from(a)}return e}function mg(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,q.from(e));return e}function gg(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=gg(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(q.from(mg(n,e,i+1))))}}function bg(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,bg(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(q.empty,!0);return e.copy(n.append(r))}function zc(e,t,n,r,i,s){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(s=0),i<r-1&&(o=zc(o,t,n,r,i+1,s)),i>=n&&(o=t<0?a.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(q.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function E0(e,t,n){return t<e.openStart&&(e=new se(zc(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new se(zc(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const xg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let T0=null;function yg(){return T0||(T0=document.implementation.createHTMLDocument("title"))}let Ll=null;function yk(e){let t=window.trustedTypes;return t?(Ll||(Ll=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Ll.createHTML(e)):e}function Ek(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=yg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&xg[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=yk(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Tk(e){let t=e.querySelectorAll(Ft?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function kk(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch(o){return e}let{content:i,openStart:s,openEnd:a}=e;for(let o=r.length-2;o>=0;o-=2){let u=n.nodes[r[o]];if(!u||u.hasRequiredAttrs())break;i=q.from(u.create(r[o+1],i)),s++,a++}return new se(i,s,a)}const Xt={},Jt={},Sk={touchstart:!0,touchmove:!0};class wk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ck(e){for(let t in Xt){let n=Xt[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Nk(e,r)&&!Vd(e,r)&&(e.editable||!(r.type in Jt))&&n(e,r)},Sk[t]?{passive:!0}:void 0)}Qt&&e.dom.addEventListener("input",()=>null),$c(e)}function zr(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Ak(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function $c(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>Vd(e,r))})}function Vd(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Nk(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Ik(e,t){!Vd(e,t)&&Xt[t.type]&&(e.editable||!(t.type in Jt))&&Xt[t.type](e,t)}Jt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!Tg(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(gr&&Ft&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),ts&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,ai(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||gk(e,n)?n.preventDefault():zr(e,"key")};Jt.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Jt.keypress=(e,t)=>{let n=t;if(Tg(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||kn&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Te)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",a=>a(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Uu(e){return{left:e.clientX,top:e.clientY}}function Ok(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function qd(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(e.someProp(t,o=>a>s.depth?o(e,n,s.nodeAfter,s.before(a),i,!0):o(e,n,s.node(a),s.before(a),i,!1)))return!0;return!1}function Gi(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function vk(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&he.isSelectable(r)?(Gi(e,new he(n)),!0):!1}function _k(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof he&&(r=n.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a);if(he.isSelectable(o)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(a);break}}return i!=null?(Gi(e,he.create(e.state.doc,i)),!0):!1}function Lk(e,t,n,r,i){return qd(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?_k(e,n):vk(e,n))}function Rk(e,t,n,r){return qd(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function Mk(e,t,n,r){return qd(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||Dk(e,n,r)}function Dk(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Gi(e,Te.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),o=i.before(s);if(a.inlineContent)Gi(e,Te.create(r,o+1,o+1+a.content.size));else if(he.isSelectable(a))Gi(e,he.create(r,o));else continue;return!0}}function Wd(e){return Fo(e)}const Eg=kn?"metaKey":"ctrlKey";Xt.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Wd(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Ok(n,e.input.lastClick)&&!n[Eg]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=e.posAtCoords(Uu(n));a&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Pk(e,a,n,!!r)):(s=="doubleClick"?Rk:Mk)(e,a.pos,a.inside,n)?n.preventDefault():zr(e,"pointer"))};class Pk{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[Eg],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,a=c.depth?c.before():0}const o=i?null:r.target,u=o?t.docView.nearestDesc(o,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:l}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||l instanceof he&&l.from<=a&&l.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),zr(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yr(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Uu(t))),this.updateAllowDefault(t),this.allowDefault||!n?zr(this.view,"pointer"):Lk(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ft&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Gi(this.view,be.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):zr(this.view,"pointer")}move(t){this.updateAllowDefault(t),zr(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Xt.touchstart=e=>{e.input.lastTouch=Date.now(),Wd(e),zr(e,"pointer")};Xt.touchmove=e=>{e.input.lastTouch=Date.now(),zr(e,"pointer")};Xt.contextmenu=e=>Wd(e);function Tg(e,t){return e.composing?!0:Qt&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Bk=gr?5e3:-1;Jt.compositionstart=Jt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Te&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Fo(e,!0),e.markCursor=null;else if(Fo(e,!t.selection.empty),Mn&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let o=e.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}e.input.composing=!0}kg(e,Bk)};Jt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,kg(e,20))};function kg(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Fo(e),t))}function Sg(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Hk());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Fk(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=v3(t.focusNode,t.focusOffset),r=_3(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function Hk(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Fo(e,t=!1){if(!(gr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Sg(e),t||e.docView&&e.docView.dirty){let n=jd(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function Uk(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const ua=rn&&qr<15||ts&&P3<604;Xt.copy=Jt.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=ua?null:n.clipboardData,a=r.content(),{dom:o,text:u}=$d(e,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",u)):Uk(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function jk(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function zk(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?la(e,r.value,null,i,t):la(e,r.textContent,r.innerHTML,i,t)},50)}function la(e,t,n,r,i){let s=pg(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||se.empty)))return!0;if(!s)return!1;let a=jk(s),o=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(s);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wg(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Jt.paste=(e,t)=>{let n=t;if(e.composing&&!gr)return;let r=ua?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&la(e,wg(r),r.getData("text/html"),i,n)?n.preventDefault():zk(e,n)};class Cg{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const $k=kn?"altKey":"ctrlKey";function Ag(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n!=null?n:!t[$k]}Xt.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Uu(n)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof he?i.to-1:i.to))){if(r&&r.mightDrag)a=he.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(a=he.create(e.state.doc,d.posBefore))}}let o=(a||e.state.selection).content(),{dom:u,text:l,slice:c}=$d(e,o);(!n.dataTransfer.files.length||!Ft||J1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ua?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",ua||n.dataTransfer.setData("text/plain",l),e.dragging=new Cg(c,Ag(e,n),a)};Xt.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Jt.dragover=Jt.dragenter=(e,t)=>t.preventDefault();Jt.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Uu(n));if(!i)return;let s=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e)}):a=pg(e,wg(n.dataTransfer),ua?null:n.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&Ag(e,n));if(e.someProp("handleDrop",m=>m(e,n,a||se.empty,o))){n.preventDefault();return}if(!a)return;n.preventDefault();let u=a?z1(e.state.doc,s.pos,a):s.pos;u==null&&(u=s.pos);let l=e.state.tr;if(o){let{node:m}=r;m?m.replace(l):l.deleteSelection()}let c=l.mapping.map(u),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&he.isSelectable(a.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new he(f));else{let m=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach((b,y,x,E)=>m=E),l.setSelection(zd(e,f,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))};Xt.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&yr(e)},20))};Xt.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Xt.beforeinput=(e,t)=>{if(Ft&&gr&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,ai(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Jt)Xt[e]=Jt[e];function ca(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Ho{constructor(t,n){this.toDOM=t,this.spec=n||bi,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:a}=t.mapResult(n.from+i,this.side<0?-1:1);return a?null:new Ht(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Ho&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ca(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Yr{constructor(t,n){this.attrs=t,this.spec=n||bi}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Ht(s,a,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Yr&&ca(this.attrs,t.attrs)&&ca(this.spec,t.spec)}static is(t){return t.type instanceof Yr}destroy(){}}class Yd{constructor(t,n){this.attrs=t,this.spec=n||bi}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Ht(s.pos-r,a.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof Yd&&ca(this.attrs,t.attrs)&&ca(this.spec,t.spec)}destroy(){}}class Ht{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Ht(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Ht(t,t,new Ho(n,r))}static inline(t,n,r,i){return new Ht(t,n,new Yr(r,i))}static node(t,n,r,i){return new Ht(t,n,new Yd(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yr}get widget(){return this.type instanceof Ho}}const Ui=[],bi={};class tt{constructor(t,n){this.local=t.length?t:Ui,this.children=n.length?n:Ui}static create(t,n){return n.length?Uo(n,t,0,bi):Pt}find(t,n,r){let i=[];return this.findInner(t==null?0:t,n==null?1e9:n,i,0,r),i}findInner(t,n,r,i,s){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=n&&o.to>=t&&(!s||s(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>t){let o=this.children[a]+1;this.children[a+2].findInner(t-o,n-o,r,i+o,s)}}map(t,n,r){return this==Pt||t.maps.length==0?this:this.mapInner(t,n,0,0,r||bi)}mapInner(t,n,r,i,s){let a;for(let o=0;o<this.local.length;o++){let u=this.local[o].map(t,r,i);u&&u.type.valid(n,u)?(a||(a=[])).push(u):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?Vk(this.children,a||[],t,n,r,i,s):a?new tt(a.sort(xi),Ui):Pt}add(t,n){return n.length?this==Pt?tt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((o,u)=>{let l=u+r,c;if(c=Ig(n,o,l)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(o,c,l+1):i.splice(s,0,u,u+o.nodeSize,Uo(c,o,l+1,bi)),s+=3}});let a=Ng(s?Og(n):n,-r);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||a.splice(o--,1);return new tt(a.length?this.local.concat(a).sort(xi):this.local,i||this.children)}remove(t){return t.length==0||this==Pt?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,o=r[s]+n,u=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>o&&d.to<u&&(t[c]=null,(a||(a=[])).push(d));if(!a)continue;r==this.children&&(r=this.children.slice());let l=r[s+2].removeInner(a,o+1);l!=Pt?r[s+2]=l:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<t.length;s++)if(a=t[s])for(let o=0;o<i.length;o++)i[o].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new tt(i,r):Pt}forChild(t,n){if(this==Pt)return this;if(n.isLeaf)return tt.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}let s=t+1,a=s+n.content.size;for(let o=0;o<this.local.length;o++){let u=this.local[o];if(u.from<a&&u.to>s&&u.type instanceof Yr){let l=Math.max(s,u.from)-s,c=Math.min(a,u.to)-s;l<c&&(i||(i=[])).push(u.copy(l,c))}}if(i){let o=new tt(i.sort(xi),Ui);return r?new Br([o,r]):o}return r||Pt}eq(t){if(this==t)return!0;if(!(t instanceof tt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return Kd(this.localsInner(t))}localsInner(t){if(this==Pt)return Ui;if(t.inlineContent||!this.local.some(Yr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yr||n.push(this.local[r]);return n}forEachSet(t){t(this)}}tt.empty=new tt([],[]);tt.removeOverlap=Kd;const Pt=tt.empty;class Br{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,bi));return Br.from(r)}forChild(t,n){if(n.isLeaf)return tt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Pt&&(s instanceof Br?r=r.concat(s.members):r.push(s))}return Br.from(r)}eq(t){if(!(t instanceof Br)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?Kd(r?n:n.sort(xi)):Ui}static from(t){switch(t.length){case 0:return Pt;case 1:return t[0];default:return new Br(t.every(n=>n instanceof tt)?t:t.reduce((n,r)=>n.concat(r instanceof tt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function Vk(e,t,n,r,i,s,a){let o=e.slice();for(let l=0,c=s;l<n.maps.length;l++){let d=0;n.maps[l].forEach((h,f,m,b)=>{let y=b-m-(f-h);for(let x=0;x<o.length;x+=3){let E=o[x+1];if(E<0||h>E+c-d)continue;let T=o[x]+c-d;f>=T?o[x+1]=h<=T?-2:-1:h>=c&&y&&(o[x]+=y,o[x+1]+=y)}d+=y}),c=n.maps[l].map(c,-1)}let u=!1;for(let l=0;l<o.length;l+=3)if(o[l+1]<0){if(o[l+1]==-2){u=!0,o[l+1]=-1;continue}let c=n.map(e[l]+s),d=c-i;if(d<0||d>=r.content.size){u=!0;continue}let h=n.map(e[l+1]+s,-1),f=h-i,{index:m,offset:b}=r.content.findIndex(d),y=r.maybeChild(m);if(y&&b==d&&b+y.nodeSize==f){let x=o[l+2].mapInner(n,y,c+1,e[l]+s+1,a);x!=Pt?(o[l]=d,o[l+1]=f,o[l+2]=x):(o[l+1]=-2,u=!0)}else u=!0}if(u){let l=qk(o,e,t,n,i,s,a),c=Uo(l,r,0,a);t=c.local;for(let d=0;d<o.length;d+=3)o[d+1]<0&&(o.splice(d,3),d-=3);for(let d=0,h=0;d<c.children.length;d+=3){let f=c.children[d];for(;h<o.length&&o[h]<f;)h+=3;o.splice(h,0,c.children[d],c.children[d+1],c.children[d+2])}}return new tt(t.sort(xi),o)}function Ng(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Ht(i.from+t,i.to+t,i.type))}return n}function qk(e,t,n,r,i,s,a){function o(u,l){for(let c=0;c<u.local.length;c++){let d=u.local[c].map(r,i,l);d?n.push(d):a.onRemove&&a.onRemove(u.local[c].spec)}for(let c=0;c<u.children.length;c+=3)o(u.children[c+2],u.children[c]+l+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&o(e[u+2],t[u]+s+1);return n}function Ig(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,a;s<e.length;s++)(a=e[s])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[s]=null);return i}function Og(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Uo(e,t,n,r){let i=[],s=!1;t.forEach((o,u)=>{let l=Ig(e,o,u+n);if(l){s=!0;let c=Uo(l,o,n+u+1,r);c!=Pt&&i.push(u,u+o.nodeSize,c)}});let a=Ng(s?Og(e):e,-n).sort(xi);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||i.length?new tt(a,i):Pt}function xi(e,t){return e.from-t.from||e.to-t.to}function Kd(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),k0(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),k0(t,i,r.copy(s.from,r.to)));break}}}return t}function k0(e,t,n){for(;t<e.length&&xi(n,e[t])>0;)t++;e.splice(t,0,n)}function Rl(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Pt&&t.push(r)}),e.cursorWrapper&&t.push(tt.create(e.state.doc,[e.cursorWrapper.deco])),Br.from(t)}const Wk={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Yk=rn&&qr<=11;class Kk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Gk{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Kk,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);rn&&qr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Yk&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Wk)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(p0(this.view)){if(this.suppressingSelectionUpdates)return yr(this.view);if(rn&&qr<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Si(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=es(s))n.add(s);for(let s=t.anchorNode;s;s=es(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&p0(t)&&!this.ignoreSelectionChange(r),s=-1,a=-1,o=!1,u=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],u);d&&(s=s<0?d.from:Math.min(d.from,s),a=a<0?d.to:Math.max(d.to,a),d.typeOver&&(o=!0))}if(Mn&&u.length){let c=u.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,h]=c;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of c){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||Jk(t,d)!=f)&&h.remove()}}}let l=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Fu(r)&&(l=jd(t))&&l.eq(be.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,yr(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,a),Qk(t)),this.handleDOMChange(s,a,o,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||yr(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(rn&&qr<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:h}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h)}let a=i&&i.parentNode==t.target?Lt(i)+1:0,o=r.localPosFromDOM(t.target,a,-1),u=s&&s.parentNode==t.target?Lt(s):t.target.childNodes.length,l=r.localPosFromDOM(t.target,u,1);return{from:o,to:l}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let S0=new WeakMap,w0=!1;function Qk(e){if(!S0.has(e)&&(S0.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Mn,w0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),w0=!0}}function C0(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return Si(a.node,a.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Xk(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return C0(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?C0(e,n):null}function Jk(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Zk(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:a,to:o}=e.docView.parseRange(t,n),u=e.domSelectionRange(),l,c=u.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(l=[{node:c,offset:u.anchorOffset}],Fu(u)||l.push({node:u.focusNode,offset:u.focusOffset})),Ft&&e.input.lastKeyCode===8)for(let y=s;y>i;y--){let x=r.childNodes[y-1],E=x.pmViewDesc;if(x.nodeName=="BR"&&!E){s=y;break}if(!E||E.size)break}let d=e.state.doc,h=e.someProp("domParser")||Us.fromSchema(e.state.schema),f=d.resolve(a),m=null,b=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:e6,context:f});if(l&&l[0].pos!=null){let y=l[0].pos,x=l[1]&&l[1].pos;x==null&&(x=y),m={anchor:y+a,head:x+a}}return{doc:b,sel:m,from:a,to:o}}function e6(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Qt&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Qt&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const t6=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function n6(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let P=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,U=jd(e,P);if(U&&!e.state.selection.eq(U)){if(Ft&&gr&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",j=>j(e,ai(13,"Enter"))))return;let _=e.state.tr.setSelection(U);P=="pointer"?_.setMeta("pointer",!0):P=="key"&&_.scrollIntoView(),s&&_.setMeta("composition",s),e.dispatch(_)}return}let a=e.state.doc.resolve(t),o=a.sharedDepth(n);t=a.before(o+1),n=e.state.doc.resolve(n).after(o+1);let u=e.state.selection,l=Zk(e,t,n),c=e.state.doc,d=c.slice(l.from,l.to),h,f;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(h=e.state.selection.to,f="end"):(h=e.state.selection.from,f="start"),e.input.lastKeyCode=null;let m=s6(d.content,l.doc.content,l.from,h,f);if(m&&e.input.domChangeCount++,(ts&&e.input.lastIOSEnter>Date.now()-225||gr)&&i.some(P=>P.nodeType==1&&!t6.test(P.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",P=>P(e,ai(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&u instanceof Te&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))m={start:u.from,endA:u.to,endB:u.to};else{if(l.sel){let P=A0(e,e.state.doc,l.sel);if(P&&!P.eq(e.state.selection)){let U=e.state.tr.setSelection(P);s&&U.setMeta("composition",s),e.dispatch(U)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Te&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),rn&&qr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>l.from&&l.doc.textBetween(m.start-l.from-1,m.start-l.from+1)==" "&&(m.start--,m.endA--,m.endB--);let b=l.doc.resolveNoCache(m.start-l.from),y=l.doc.resolveNoCache(m.endB-l.from),x=c.resolve(m.start),E=b.sameParent(y)&&b.parent.inlineContent&&x.end()>=m.endA,T;if((ts&&e.input.lastIOSEnter>Date.now()-225&&(!E||i.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!E&&b.pos<l.doc.content.size&&(!b.sameParent(y)||!b.parent.inlineContent)&&!/\S/.test(l.doc.textBetween(b.pos,y.pos,"",""))&&(T=be.findFrom(l.doc.resolve(b.pos+1),1,!0))&&T.head>b.pos)&&e.someProp("handleKeyDown",P=>P(e,ai(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&i6(c,m.start,m.endA,b,y)&&e.someProp("handleKeyDown",P=>P(e,ai(8,"Backspace")))){gr&&Ft&&e.domObserver.suppressSelectionUpdates();return}Ft&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),gr&&!E&&b.start()!=y.start()&&y.parentOffset==0&&b.depth==y.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==m.endA&&(m.endB-=2,y=l.doc.resolveNoCache(m.endB-l.from),setTimeout(()=>{e.someProp("handleKeyDown",function(P){return P(e,ai(13,"Enter"))})},20));let v=m.start,C=m.endA,w=P=>{let U=P||e.state.tr.replace(v,C,l.doc.slice(m.start-l.from,m.endB-l.from));if(l.sel){let _=A0(e,U.doc,l.sel);_&&!(Ft&&e.composing&&_.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(_.head==v||_.head==U.mapping.map(C)-1)||rn&&_.empty&&_.head==v)&&U.setSelection(_)}return s&&U.setMeta("composition",s),U.scrollIntoView()},M;if(E){if(b.pos==y.pos){rn&&qr<=11&&b.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>yr(e),20));let P=w(e.state.tr.delete(v,C)),U=c.resolve(m.start).marksAcross(c.resolve(m.endA));U&&P.ensureMarks(U),e.dispatch(P)}else if(m.endA==m.endB&&(M=r6(b.parent.content.cut(b.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let P=w(e.state.tr);M.type=="add"?P.addMark(v,C,M.mark):P.removeMark(v,C,M.mark),e.dispatch(P)}else if(b.parent.child(b.index()).isText&&b.index()==y.index()-(y.textOffset?0:1)){let P=b.parent.textBetween(b.parentOffset,y.parentOffset),U=()=>w(e.state.tr.insertText(P,v,C));e.someProp("handleTextInput",_=>_(e,v,C,P,U))||e.dispatch(U())}}else e.dispatch(w())}function A0(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:zd(e,t.resolve(n.anchor),t.resolve(n.head))}function r6(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,a,o,u;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)o=i[0],a="add",u=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&s.length==1)o=s[0],a="remove",u=c=>c.mark(o.removeFromSet(c.marks));else return null;let l=[];for(let c=0;c<t.childCount;c++)l.push(u(t.child(c)));if(q.from(l).eq(e))return{mark:o,type:a}}function i6(e,t,n,r,i){if(n-t<=i.pos-r.pos||Ml(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let o=s.nodeAfter;return o!=null&&n==t+o.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(Ml(s,!0,!0));return!a.parent.isTextblock||a.pos>n||Ml(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Ml(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function s6(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(a,o));r-=a+u-s}if(a<s&&e.size<t.size){let u=r<=s&&r>=a?s-r:0;s-=u,s&&s<t.size&&N0(t.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-a),a=s}else if(o<s){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<e.size&&N0(e.textBetween(s-1,s+1))&&(s+=u?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}function N0(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class vg{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new wk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(L0),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=v0(this),O0(this),this.nodeViews=_0(this),this.docView=u0(this.state.doc,I0(this),Rl(this),this.dom,this),this.domObserver=new Gk(this,(r,i,s,a)=>n6(this,r,i,s,a)),this.domObserver.start(),Ck(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&$c(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(L0),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(Sg(this),a=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=_0(this);o6(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&$c(this),this.editable=v0(this),O0(this);let u=Rl(this),l=I0(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,l,u);(d||!t.selection.eq(i.selection))&&(a=!0);let h=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&H3(this);if(a){this.domObserver.stop();let f=d&&(rn||Ft)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&a6(i.selection,t.selection);if(d){let m=Ft?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Fk(this)),(s||!this.docView.update(t.doc,l,u,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=u0(t.doc,l,u,this.dom,this)),m&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&lk(this))?yr(this,f):(dg(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&U3(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof he){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&n0(this,n.getBoundingClientRect(),t)}else n0(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Cg(t.slice,t.move,i<0?void 0:he.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[t];if(o!=null&&(i=n?n(o):o))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let o=s[a].props[t];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(rn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&j3(this.dom),yr(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return W3(this,t)}coordsAtPos(t,n=1){return rg(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return X3(this,n||this.state,t)}pasteHTML(t,n){return la(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return la(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return $d(this,t)}destroy(){this.docView&&(Ak(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Rl(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,I3())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Ik(this,t)}domSelectionRange(){let t=this.domSelection();return t?Qt&&this.root.nodeType===11&&R3(this.dom.ownerDocument)==this.dom&&Xk(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}vg.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function I0(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Ht.node(0,e.state.doc.content.size,t)]}function O0(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ht.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function v0(e){return!e.someProp("editable",t=>t(e.state)===!1)}function a6(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function _0(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function o6(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function L0(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Kr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},u6=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),l6=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rt=0;Rt<10;Rt++)Kr[48+Rt]=Kr[96+Rt]=String(Rt);for(var Rt=1;Rt<=24;Rt++)Kr[Rt+111]="F"+Rt;for(var Rt=65;Rt<=90;Rt++)Kr[Rt]=String.fromCharCode(Rt+32),jo[Rt]=String.fromCharCode(Rt);for(var Dl in Kr)jo.hasOwnProperty(Dl)||(jo[Dl]=Kr[Dl]);function c6(e){var t=u6&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||l6&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?jo:Kr)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const d6=typeof navigator!="undefined"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),f6=typeof navigator!="undefined"&&/Win/.test(navigator.platform);function h6(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o++){let u=t[o];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))d6?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function p6(e){let t=Object.create(null);for(let n in e)t[h6(n)]=e[n];return t}function Pl(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function m6(e){return new Xe({props:{handleKeyDown:Gd(e)}})}function Gd(e){let t=p6(e);return function(n,r){let i=c6(r),s,a=t[Pl(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=t[Pl(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(f6&&r.ctrlKey&&r.altKey)&&(s=Kr[r.keyCode])&&s!=i){let o=t[Pl(s,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const Qd=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function _g(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Lg=(e,t,n)=>{let r=_g(e,n);if(!r)return!1;let i=Xd(r);if(!i){let a=r.blockRange(),o=a&&ps(a);return o==null?!1:(t&&t(e.tr.lift(a,o).scrollIntoView()),!0)}let s=i.nodeBefore;if(jg(e,i,t,-1))return!0;if(r.parent.content.size==0&&(ns(s,"end")||he.isSelectable(s)))for(let a=r.depth;;a--){let o=Pu(e.doc,r.before(a),r.after(a),se.empty);if(o&&o.slice.size<o.to-o.from){if(t){let u=e.tr.step(o);u.setSelection(ns(s,"end")?be.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):he.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},g6=(e,t,n)=>{let r=_g(e,n);if(!r)return!1;let i=Xd(r);return i?Rg(e,i,t):!1},b6=(e,t,n)=>{let r=Dg(e,n);if(!r)return!1;let i=Jd(r);return i?Rg(e,i,t):!1};function Rg(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let a=t.nodeAfter,o=a,u=t.pos+1;for(;!o.isTextblock;u++){if(o.type.spec.isolating)return!1;let c=o.firstChild;if(!c)return!1;o=c}let l=Pu(e.doc,s,u,se.empty);if(!l||l.from!=s||l instanceof At&&l.slice.size>=u-s)return!1;if(n){let c=e.tr.step(l);c.setSelection(Te.create(c.doc,s)),n(c.scrollIntoView())}return!0}function ns(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Mg=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=Xd(r)}let a=s&&s.nodeBefore;return!a||!he.isSelectable(a)?!1:(t&&t(e.tr.setSelection(he.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Xd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Dg(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Pg=(e,t,n)=>{let r=Dg(e,n);if(!r)return!1;let i=Jd(r);if(!i)return!1;let s=i.nodeAfter;if(jg(e,i,t,1))return!0;if(r.parent.content.size==0&&(ns(s,"start")||he.isSelectable(s))){let a=Pu(e.doc,r.before(),r.after(),se.empty);if(a&&a.slice.size<a.to-a.from){if(t){let o=e.tr.step(a);o.setSelection(ns(s,"start")?be.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):he.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Bg=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=Jd(r)}let a=s&&s.nodeAfter;return!a||!he.isSelectable(a)?!1:(t&&t(e.tr.setSelection(he.create(e.doc,s.pos)).scrollIntoView()),!0)};function Jd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const x6=(e,t)=>{let n=e.selection,r=n instanceof he,i;if(r){if(n.node.isTextblock||!Xr(e.doc,n.from))return!1;i=n.from}else if(i=Du(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(he.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},y6=(e,t)=>{let n=e.selection,r;if(n instanceof he){if(n.node.isTextblock||!Xr(e.doc,n.to))return!1;r=n.to}else if(r=Du(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},E6=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&ps(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},Fg=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Zd(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const T6=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=Zd(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let o=n.after(),u=e.tr.replaceWith(o,o,a.createAndFill());u.setSelection(be.near(u.doc.resolve(o),1)),t(u.scrollIntoView())}return!0},Hg=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof hn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Zd(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(a,s.createAndFill());o.setSelection(Te.create(o.doc,a+1)),t(o.scrollIntoView())}return!0},Ug=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(xr(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ps(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function k6(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof he&&t.selection.node.isBlock)return!r.parentOffset||!xr(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,o,u=!1,l=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){u=r.end(f)==r.pos+(r.depth-f),l=r.start(f)==r.pos-(r.depth-f),o=Zd(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(u&&o?{type:o}:null),a=f;break}else{if(f==1)return!1;s.unshift(null)}let c=t.tr;(t.selection instanceof Te||t.selection instanceof hn)&&c.deleteSelection();let d=c.mapping.map(r.pos),h=xr(c.doc,d,s.length,s);if(h||(s[0]=o?{type:o}:null,h=xr(c.doc,d,s.length,s)),!h)return!1;if(c.split(d,s.length,s),!u&&l&&r.node(a).type!=o){let f=c.mapping.map(r.before(a)),m=c.doc.resolve(f);o&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(a)),o)}return n&&n(c.scrollIntoView()),!0}}const S6=k6(),w6=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(he.create(e.doc,i))),!0)};function C6(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Xr(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function jg(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,a,o,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&C6(e,t,n))return!0;let l=!u&&t.parent.canReplace(t.index(),t.index()+1);if(l&&(a=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(a[0]||s.type).validEnd){if(n){let f=t.pos+s.nodeSize,m=q.empty;for(let x=a.length-1;x>=0;x--)m=q.from(a[x].create(null,m));m=q.from(i.copy(m));let b=e.tr.step(new Ot(t.pos-1,f,t.pos,f,new se(m,1,0),a.length,!0)),y=b.doc.resolve(f+2*a.length);y.nodeAfter&&y.nodeAfter.type==i.type&&Xr(b.doc,y.pos)&&b.join(y.pos),n(b.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&u?null:be.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),h=d&&ps(d);if(h!=null&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(l&&ns(s,"start",!0)&&ns(i,"end")){let f=i,m=[];for(;m.push(f),!f.isTextblock;)f=f.lastChild;let b=s,y=1;for(;!b.isTextblock;b=b.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,b.content)){if(n){let x=q.empty;for(let T=m.length-1;T>=0;T--)x=q.from(m[T].copy(x));let E=e.tr.step(new Ot(t.pos-m.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new se(x,m.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function zg(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Te.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const A6=zg(-1),N6=zg(1);function I6(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s),o=a&&Fd(a,e,t);return o?(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0):!1}}function R0(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[s];n.doc.nodesBetween(a,o,(u,l)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let c=n.doc.resolve(l),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:u}}=n.selection.ranges[a];s.setBlockType(o,u,e,t)}r(s.scrollIntoView())}return!0}}function ef(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}ef(Qd,Lg,Mg);ef(Qd,Pg,Bg);ef(Fg,Hg,Ug,S6);typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform&&os.platform()=="darwin";function O6(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let o=r?n.tr:null;return v6(o,a,e,t)?(r&&r(o.scrollIntoView()),!0):!1}}function v6(e,t,n,r=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=a.resolve(t.start-2);s=new Mo(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Mo(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=Fd(s,n,r,t);return o?(e&&_6(e,t,o,i,n),!0):!1}function _6(e,t,n,r,i){let s=q.empty;for(let c=n.length-1;c>=0;c--)s=q.from(n[c].type.create(n[c].attrs,s));e.step(new Ot(t.start-(r?2:0),t.end,t.start,t.end,new se(s,0,0),n.length,!0));let a=0;for(let c=0;c<n.length;c++)n[c].type==i&&(a=c+1);let o=n.length-a,u=t.start+n.length-(r?2:0),l=t.parent;for(let c=t.startIndex,d=t.endIndex,h=!0;c<d;c++,h=!1)!h&&xr(e.doc,u,o)&&(e.split(u,o),u+=2*o),u+=l.child(c).nodeSize;return e}function L6(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?R6(t,n,e,s):M6(t,n,s):!0:!1}}function R6(e,t,n,r){let i=e.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Ot(s-1,a,s,a,new se(q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Mo(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const o=ps(r);if(o==null)return!1;i.lift(r,o);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return Xr(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function M6(e,t,n){let r=e.tr,i=n.parent;for(let f=n.end,m=n.endIndex-1,b=n.startIndex;m>b;m--)f-=i.child(m).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,u=n.endIndex==i.childCount,l=s.node(-1),c=s.index(-1);if(!l.canReplace(c+(o?0:1),c+1,a.content.append(u?q.empty:q.from(i))))return!1;let d=s.pos,h=d+a.nodeSize;return r.step(new Ot(d-(o?1:0),h+(u?1:0),d+1,h-1,new se((o?q.empty:q.from(i.copy(q.empty))).append(u?q.empty:q.from(i.copy(q.empty))),o?0:1,u?0:1),o?0:1)),t(r.scrollIntoView()),!0}function D6(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let o=s.parent,u=o.child(a-1);if(u.type!=e)return!1;if(n){let l=u.lastChild&&u.lastChild.type==o.type,c=q.from(l?e.create():null),d=new se(q.from(e.create(null,q.from(o.type.create(null,c)))),l?3:1,0),h=s.start,f=s.end;n(t.tr.step(new Ot(h-(l?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}var P6=Object.defineProperty,$g=(e,t)=>{for(var n in t)P6(e,n,{get:t[n],enumerable:!0})};function ju(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return re(I({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}})}var zu=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,o])=>[a,(...l)=>{const c=o(...l)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a=[],o=!!e,u=e||i.tr,l=()=>(!o&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),c=re(I({},Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...m)=>{const b=this.buildProps(u,t),y=h(...m)(b);return a.push(y),c}]))),{run:l});return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r),a=Object.fromEntries(Object.entries(t).map(([o,u])=>[o,(...l)=>u(...l)(re(I({},s),{dispatch:void 0}))]));return re(I({},a),{chain:()=>this.createChain(i,r)})}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a={tr:e,editor:r,view:s,state:ju({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([o,u])=>[o,(...l)=>u(...l)(a)]))}};return a}},B6=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function Vg(e,t){const n=new Y1(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var qg=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&qg(r)}return e};function Ya(e){if(typeof window=="undefined")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return qg(n)}function da(e,t,n){if(e instanceof Vr||e instanceof q)return e;n=I({slice:!0,parseOptions:{}},n);const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return q.fromArray(e.map(o=>t.nodeFromJSON(o)));const a=t.nodeFromJSON(e);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),da("",t,n)}if(i){if(n.errorOnInvalidContent){let a=!1,o="";const u=new _1({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(a=!0,o=typeof l=="string"?l:l.outerHTML,null)}]}})});if(n.slice?Us.fromSchema(u).parseSlice(Ya(e),n.parseOptions):Us.fromSchema(u).parse(Ya(e),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const s=Us.fromSchema(t);return n.slice?s.parseSlice(Ya(e),n.parseOptions).content:s.parse(Ya(e),n.parseOptions)}return da("",t,n)}function Vc(e,t,n={},r={}){return da(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function F6(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function H6(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function U6(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function $u(e){return t=>U6(t.$from,e)}function fe(e,t,n){return e.config[t]===void 0&&e.parent?fe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind(re(I({},n),{parent:e.parent?fe(e.parent,t,n):null})):e.config[t]}function tf(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=fe(t,"addExtensions",n);return r?[t,...tf(r())]:t}).flat(10)}function nf(e,t){const n=Ni.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function Wg(e){return typeof e=="function"}function Ue(e,t=void 0,...n){return Wg(e)?t?e.bind(t)(...n):e(...n):e}function j6(e={}){return Object.keys(e).length===0&&e.constructor===Object}function fa(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Yg(e){const t=[],{nodeExtensions:n,markExtensions:r}=fa(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:i},u=fe(a,"addGlobalAttributes",o);if(!u)return;u().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([h,f])=>{t.push({type:d,name:h,attribute:I(I({},s),f)})})})})}),i.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},u=fe(a,"addAttributes",o);if(!u)return;const l=u();Object.entries(l).forEach(([c,d])=>{const h=I(I({},s),d);typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,t.push({type:a.name,name:c,attribute:h})})}),t}function pt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r=I({},t);return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const o=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],l=o.filter(c=>!u.includes(c));r[i]=[...u,...l].join(" ")}else if(i==="style"){const o=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],l=new Map;u.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());l.set(d,h)}),o.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());l.set(d,h)}),r[i]=Array.from(l.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function zo(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>pt(n,r),{})}function z6(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function M0(e,t){return"style"in e?e:re(I({},e),{getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(n):z6(n.getAttribute(a.name));return o==null?s:re(I({},s),{[a.name]:o})},{});return I(I({},r),i)}})}function D0(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&j6(n)?!1:n!=null))}function $6(e,t){var n;const r=Yg(e),{nodeExtensions:i,markExtensions:s}=fa(e),a=(n=i.find(l=>fe(l,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(l=>{const c=r.filter(x=>x.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:t},h=e.reduce((x,E)=>{const T=fe(E,"extendNodeSchema",d);return I(I({},x),T?T(l):{})},{}),f=D0(re(I({},h),{content:Ue(fe(l,"content",d)),marks:Ue(fe(l,"marks",d)),group:Ue(fe(l,"group",d)),inline:Ue(fe(l,"inline",d)),atom:Ue(fe(l,"atom",d)),selectable:Ue(fe(l,"selectable",d)),draggable:Ue(fe(l,"draggable",d)),code:Ue(fe(l,"code",d)),whitespace:Ue(fe(l,"whitespace",d)),linebreakReplacement:Ue(fe(l,"linebreakReplacement",d)),defining:Ue(fe(l,"defining",d)),isolating:Ue(fe(l,"isolating",d)),attrs:Object.fromEntries(c.map(x=>{var E,T;return[x.name,{default:(E=x==null?void 0:x.attribute)==null?void 0:E.default,validate:(T=x==null?void 0:x.attribute)==null?void 0:T.validate}]}))})),m=Ue(fe(l,"parseHTML",d));m&&(f.parseDOM=m.map(x=>M0(x,c)));const b=fe(l,"renderHTML",d);b&&(f.toDOM=x=>b({node:x,HTMLAttributes:zo(x,c)}));const y=fe(l,"renderText",d);return y&&(f.toText=y),[l.name,f]})),u=Object.fromEntries(s.map(l=>{const c=r.filter(y=>y.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:t},h=e.reduce((y,x)=>{const E=fe(x,"extendMarkSchema",d);return I(I({},y),E?E(l):{})},{}),f=D0(re(I({},h),{inclusive:Ue(fe(l,"inclusive",d)),excludes:Ue(fe(l,"excludes",d)),group:Ue(fe(l,"group",d)),spanning:Ue(fe(l,"spanning",d)),code:Ue(fe(l,"code",d)),attrs:Object.fromEntries(c.map(y=>{var x,E;return[y.name,{default:(x=y==null?void 0:y.attribute)==null?void 0:x.default,validate:(E=y==null?void 0:y.attribute)==null?void 0:E.validate}]}))})),m=Ue(fe(l,"parseHTML",d));m&&(f.parseDOM=m.map(y=>M0(y,c)));const b=fe(l,"renderHTML",d);return b&&(f.toDOM=y=>b({mark:y,HTMLAttributes:zo(y,c)})),[l.name,f]}));return new _1({topNode:a,nodes:o,marks:u})}function V6(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function rf(e){return e.sort((n,r)=>{const i=fe(n,"priority")||100,s=fe(r,"priority")||100;return i>s?-1:i<s?1:0})}function Kg(e){const t=rf(tf(e)),n=V6(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function Gg(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let o="";return e.nodesBetween(r,i,(u,l,c,d)=>{var h;u.isBlock&&l>r&&(o+=s);const f=a==null?void 0:a[u.type.name];if(f)return c&&(o+=f({node:u,pos:l,parent:c,index:d,range:t})),!1;u.isText&&(o+=(h=u==null?void 0:u.text)==null?void 0:h.slice(Math.max(r,l)-l,i-l))}),o}function Qg(e,t){const n={from:0,to:e.content.size};return Gg(e,n,t)}function sf(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function Er(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Xg(e,t){const n=Er(t,e.schema),{from:r,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{a.push(...u.marks)});const o=a.find(u=>u.type.name===n.name);return o?I({},o.attrs):{}}function Et(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function q6(e,t){const n=Et(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,o=>{s.push(o)});const a=s.reverse().find(o=>o.type.name===n.name);return a?I({},a.attrs):{}}function Vu(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Jg(e,t){const n=Vu(typeof t=="string"?t:t.name,e.schema);return n==="node"?q6(e,t):n==="mark"?Xg(e,t):{}}function W6(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Y6(e){const t=W6(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Zg(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((o,u)=>{a.push({from:o,to:u})});else{const{from:o,to:u}=n[s];if(o===void 0||u===void 0)return;a.push({from:o,to:u})}a.forEach(({from:o,to:u})=>{const l=t.slice(s).map(o,-1),c=t.slice(s).map(u),d=t.invert().map(l,-1),h=t.invert().map(c);r.push({oldRange:{from:d,to:h},newRange:{from:l,to:c}})})}),Y6(r)}function af(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function $o(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:af(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function eb(e,t,n={}){return e.find(r=>r.type===t&&$o(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function P0(e,t,n={}){return!!eb(e,t,n)}function of(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!eb([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,u=a+1,l=o+i.node.nodeSize;for(;a>0&&P0([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;u<e.parent.childCount&&P0([...e.parent.child(u).marks],t,n);)l+=e.parent.child(u).nodeSize,u+=1;return{from:o,to:l}}function uf(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),a=of(s,i.type);a&&r.push(I({mark:i},a))}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var K6=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,a=null;for(;s>0&&a===null;){const o=i.node(s);(o==null?void 0:o.type.name)===t?a=o:s-=1}return[a,s]};function Bl(e,t){return t.nodes[e]||t.marks[e]||null}function go(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var G6=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,a,o)=>{var u,l;const c=((l=(u=i.type.spec).toText)==null?void 0:l.call(u,{node:i,pos:s,parent:a,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function qc(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Er(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>$o(d.attrs,n,{strict:!1}));let a=0;const o=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,m=h.pos;e.doc.nodesBetween(f,m,(b,y)=>{if(!b.isText&&!b.marks.length)return;const x=Math.max(f,y),E=Math.min(m,y+b.nodeSize),T=E-x;a+=T,o.push(...b.marks.map(v=>({mark:v,from:x,to:E})))})}),a===0)return!1;const u=o.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>$o(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),l=o.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(u>0?u+l:u)>=a}function Gr(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,a=t?Et(t,e.schema):null,o=[];e.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),m=Math.min(i,h+d.nodeSize);o.push({node:d,from:f,to:m})});const u=i-r,l=o.filter(d=>a?a.name===d.node.type.name:!0).filter(d=>$o(d.node.attrs,n,{strict:!1}));return s?!!l.length:l.reduce((d,h)=>d+h.to-h.from,0)>=u}function Q6(e,t,n={}){if(!t)return Gr(e,null,n)||qc(e,null,n);const r=Vu(t,e.schema);return r==="node"?Gr(e,t,n):r==="mark"?qc(e,t,n):!1}var X6=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=$u(o=>o.type.name===t)(e.selection);if(!s)return!1;const a=e.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},J6=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function B0(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function F0(e,t){const{nodeExtensions:n}=fa(t),r=n.find(a=>a.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ue(fe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function qu(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(qu(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function tb(e){return e instanceof he}function lf(e){return e instanceof Te}function br(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function nb(e,t,n){const i=e.state.doc.content.size,s=br(t,0,i),a=br(n,0,i),o=e.coordsAtPos(s),u=e.coordsAtPos(a,-1),l=Math.min(o.top,u.top),c=Math.max(o.bottom,u.bottom),d=Math.min(o.left,u.left),h=Math.max(o.right,u.right),f=h-d,m=c-l,x={top:l,bottom:c,left:d,right:h,width:f,height:m,x:d,y:l};return re(I({},x),{toJSON:()=>x})}function rb(e,t=null){if(!t)return null;const n=be.atStart(e),r=be.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Te.create(e,br(0,i,s),br(e.content.size,i,s)):Te.create(e,br(t,i,s),br(t,i,s))}function Z6(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof At||i instanceof Ot))return;const s=e.mapping.maps[r];let a=0;s.forEach((o,u,l,c)=>{a===0&&(a=c)}),e.setSelection(be.near(e.doc.resolve(a),n))}var Wu=class{constructor(e){this.find=e.find,this.handler=e.handler}},eS=(e,t)=>{if(af(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ka(e){var t;const{editor:n,from:r,to:i,text:s,rules:a,plugin:o}=e,{view:u}=n;if(u.composing)return!1;const l=u.state.doc.resolve(r);if(l.parent.type.spec.code||(t=l.nodeBefore||l.nodeAfter)!=null&&t.marks.find(h=>h.type.spec.code))return!1;let c=!1;const d=G6(l)+s;return a.forEach(h=>{if(c)return;const f=eS(d,h.find);if(!f)return;const m=u.state.tr,b=ju({state:u.state,transaction:m}),y={from:r-(f[0].length-s.length),to:i},{commands:x,chain:E,can:T}=new zu({editor:n,state:b});h.handler({state:b,range:y,match:f,commands:x,chain:E,can:T})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:s}),u.dispatch(m),c=!0)}),c}function tS(e){const{editor:t,rules:n}=e,r=new Xe({state:{init(){return null},apply(i,s,a){const o=i.getMeta(r);if(o)return o;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:c}=u;typeof c=="string"?c=c:c=nf(q.from(c),a.schema);const{from:d}=u,h=d+c.length;Ka({editor:t,from:d,to:h,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,o){return Ka({editor:t,from:s,to:a,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ka({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Ka({editor:t,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function nS(e){return Object.prototype.toString.call(e).slice(8,-1)}function Ga(e){return nS(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ib(e,t){const n=I({},e);return Ga(e)&&Ga(t)&&Object.keys(t).forEach(r=>{Ga(t[r])&&Ga(e[r])?n[r]=ib(e[r],t[r]):n[r]=t[r]}),n}var cf=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config=I(I({},this.config),e),this.name=this.config.name}get options(){return I({},Ue(fe(this,"addOptions",{name:this.name}))||{})}get storage(){return I({},Ue(fe(this,"addStorage",{name:this.name,options:this.options}))||{})}configure(e={}){const t=this.extend(re(I({},this.config),{addOptions:()=>ib(this.options,e)}));return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor(I(I({},this.config),e));return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ii=class sb extends cf{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new sb(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(l=>(l==null?void 0:l.type.name)===n.name))return!1;const u=a.find(l=>(l==null?void 0:l.type.name)===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function rS(e){return typeof e=="number"}var iS=class{constructor(e){this.find=e.find,this.handler=e.handler}},sS=(e,t,n)=>{if(af(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function aS(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:a,dropEvent:o}=e,{commands:u,chain:l,can:c}=new zu({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,m)=>{if(!f.isTextblock||f.type.spec.code)return;const b=Math.max(r,m),y=Math.min(i,m+f.content.size),x=f.textBetween(b-m,y-m,void 0,"");sS(x,s.find,a).forEach(T=>{if(T.index===void 0)return;const v=b+T.index+1,C=v+T[0].length,w={from:n.tr.mapping.map(v),to:n.tr.mapping.map(C)},M=s.handler({state:n,range:w,match:T,commands:u,chain:l,can:c,pasteEvent:a,dropEvent:o});d.push(M)})}),d.every(f=>f!==null)}var Qa=null,oS=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function uS(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(c){o=null}const u=({state:c,from:d,to:h,rule:f,pasteEvt:m})=>{const b=c.tr,y=ju({state:c,transaction:b});if(!(!aS({editor:t,state:y,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:m,dropEvent:o})||!b.steps.length)){try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(E){o=null}return a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,b}};return n.map(c=>new Xe({view(d){const h=m=>{var b;r=(b=d.dom.parentElement)!=null&&b.contains(m.target)?d.dom.parentElement:null,r&&(Qa=t)},f=()=>{Qa&&(Qa=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,o=h,!s){const f=Qa;f!=null&&f.isEditable&&setTimeout(()=>{const m=f.state.selection;m&&f.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var f;const m=(f=h.clipboardData)==null?void 0:f.getData("text/html");return a=h,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const m=d[0],b=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!s,x=m.getMeta("applyPasteRules"),E=!!x;if(!b&&!y&&!E)return;if(E){let{text:C}=x;typeof C=="string"?C=C:C=nf(q.from(C),f.schema);const{from:w}=x,M=w+C.length,P=oS(C);return u({rule:c,state:f,from:w,to:{b:M},pasteEvt:P})}const T=h.doc.content.findDiffStart(f.doc.content),v=h.doc.content.findDiffEnd(f.doc.content);if(!(!rS(T)||!v||T===v.b))return u({rule:c,state:f,from:T,to:v,pasteEvt:a})}}))}var Yu=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Kg(e),this.schema=$6(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Bl(t.name,this.schema)},r=fe(t,"addCommands",n);return r?I(I({},e),r()):e},{})}get plugins(){const{editor:e}=this,t=rf([...this.extensions].reverse()),n=[],r=[],i=t.map(s=>{const a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Bl(s.name,this.schema)},o=[],u=fe(s,"addKeyboardShortcuts",a);let l={};if(s.type==="mark"&&fe(s,"exitable",a)&&(l.ArrowRight=()=>Ii.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([b,y])=>[b,()=>y({editor:e})]));l=I(I({},l),m)}const c=m6(l);o.push(c);const d=fe(s,"addInputRules",a);B0(s,e.options.enableInputRules)&&d&&n.push(...d());const h=fe(s,"addPasteRules",a);B0(s,e.options.enablePasteRules)&&h&&r.push(...h());const f=fe(s,"addProseMirrorPlugins",a);if(f){const m=f();o.push(...m)}return o}).flat();return[tS({editor:e,rules:n}),...uS({editor:e,rules:r}),...i]}get attributes(){return Yg(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=fa(this.extensions);return Object.fromEntries(t.filter(n=>!!fe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Et(n.name,this.schema)},s=fe(n,"addNodeView",i);if(!s)return[];const a=(o,u,l,c,d)=>{const h=zo(o,r);return s()({node:o,view:u,getPos:l,decorations:c,innerDecorations:d,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=fa(this.extensions);return Object.fromEntries(t.filter(n=>!!fe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Er(n.name,this.schema)},s=fe(n,"addMarkView",i);if(!s)return[];const a=(o,u,l)=>{const c=zo(o,r);return s()({mark:o,view:u,inline:l,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{Sw(o,e,d)}})};return[n.name,a]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Bl(t.name,this.schema)};t.type==="mark"&&((n=Ue(fe(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=fe(t,"onBeforeCreate",r),s=fe(t,"onCreate",r),a=fe(t,"onUpdate",r),o=fe(t,"onSelectionUpdate",r),u=fe(t,"onTransaction",r),l=fe(t,"onFocus",r),c=fe(t,"onBlur",r),d=fe(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),u&&this.editor.on("transaction",u),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};Yu.resolve=Kg;Yu.sort=rf;Yu.flatten=tf;var lS={};$g(lS,{ClipboardTextSerializer:()=>ob,Commands:()=>cb,Delete:()=>db,Drop:()=>fb,Editable:()=>hb,FocusEvents:()=>mb,Keymap:()=>gb,Paste:()=>bb,Tabindex:()=>xb,focusEventsPluginKey:()=>pb});var rt=class ab extends cf{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new ab(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},ob=rt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xe({key:new nt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,a=Math.min(...s.map(c=>c.$from.pos)),o=Math.max(...s.map(c=>c.$to.pos)),u=sf(n);return Gg(r,{from:a,to:o},re(I({},this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{}),{textSerializers:u}))}}})]}}),ub={};$g(ub,{blur:()=>cS,clearContent:()=>dS,clearNodes:()=>fS,command:()=>hS,createParagraphNear:()=>pS,cut:()=>mS,deleteCurrentNode:()=>gS,deleteNode:()=>bS,deleteRange:()=>xS,deleteSelection:()=>yS,enter:()=>ES,exitCode:()=>TS,extendMarkRange:()=>kS,first:()=>SS,focus:()=>CS,forEach:()=>AS,insertContent:()=>NS,insertContentAt:()=>OS,joinBackward:()=>LS,joinDown:()=>_S,joinForward:()=>RS,joinItemBackward:()=>MS,joinItemForward:()=>DS,joinTextblockBackward:()=>PS,joinTextblockForward:()=>BS,joinUp:()=>vS,keyboardShortcut:()=>HS,lift:()=>US,liftEmptyBlock:()=>jS,liftListItem:()=>zS,newlineInCode:()=>$S,resetAttributes:()=>VS,scrollIntoView:()=>qS,selectAll:()=>WS,selectNodeBackward:()=>YS,selectNodeForward:()=>KS,selectParentNode:()=>GS,selectTextblockEnd:()=>QS,selectTextblockStart:()=>XS,setContent:()=>JS,setMark:()=>ew,setMeta:()=>tw,setNode:()=>nw,setNodeSelection:()=>rw,setTextSelection:()=>iw,sinkListItem:()=>sw,splitBlock:()=>aw,splitListItem:()=>ow,toggleList:()=>uw,toggleMark:()=>lw,toggleNode:()=>cw,toggleWrap:()=>dw,undoInputRule:()=>fw,unsetAllMarks:()=>hw,unsetMark:()=>pw,updateAttributes:()=>mw,wrapIn:()=>gw,wrapInList:()=>bw});var cS=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),dS=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),fS=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:a})=>{e.doc.nodesBetween(s.pos,a.pos,(o,u)=>{if(o.type.isText)return;const{doc:l,mapping:c}=t,d=l.resolve(c.map(u)),h=l.resolve(c.map(u+o.nodeSize)),f=d.blockRange(h);if(!f)return;const m=ps(f);if(o.type.isTextblock){const{defaultType:b}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(f.start,b)}(m||m===0)&&t.lift(f,m)})}),!0},hS=e=>t=>e(t),pS=()=>({state:e,dispatch:t})=>Hg(e,t),mS=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const a=r.mapping.map(t);return r.insert(a,s.content),r.setSelection(new Te(r.doc.resolve(Math.max(a-1,0)))),!0},gS=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const o=i.before(s),u=i.after(s);e.delete(o,u).scrollIntoView()}return!0}return!1},bS=e=>({tr:t,state:n,dispatch:r})=>{const i=Et(e,n.schema),s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const u=s.before(a),l=s.after(a);t.delete(u,l).scrollIntoView()}return!0}return!1},xS=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},yS=()=>({state:e,dispatch:t})=>Qd(e,t),ES=()=>({commands:e})=>e.keyboardShortcut("Enter"),TS=()=>({state:e,dispatch:t})=>T6(e,t),kS=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Er(e,r.schema),{doc:a,selection:o}=n,{$from:u,from:l,to:c}=o;if(i){const d=of(u,s,t);if(d&&d.from<=l&&d.to>=c){const h=Te.create(a,d.from,d.to);n.setSelection(h)}}return!0},SS=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function wS(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function df(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var CS=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t=I({scrollIntoView:!0},t);const a=()=>{(df()||wS())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!lf(n.state.selection))return a(),!0;const o=rb(i.doc,e)||n.state.selection,u=n.state.selection.eq(o);return s&&(u||i.setSelection(o),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},AS=(e,t)=>n=>e.every((r,i)=>t(r,re(I({},n),{index:i}))),NS=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),IS=e=>!("type"in e),OS=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){n=I({parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);let o;const{selection:u}=s.state,l=x=>{s.emit("contentError",{editor:s,error:x,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c=I({preserveWhitespace:"full"},n.parseOptions);if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{da(t,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{o=da(t,s.schema,{parseOptions:c,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},f=!0,m=!0;if((IS(o)?o:[o]).forEach(x=>{x.check(),f=f?x.isText&&x.marks.length===0:!1,m=m?x.isBlock:!1}),d===h&&m){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,h+=1)}let y;if(f){if(Array.isArray(t))y=t.map(x=>x.text||"").join("");else if(t instanceof q){let x="";t.forEach(E=>{E.text&&(x+=E.text)}),y=x}else typeof t=="object"&&t&&t.text?y=t.text:y=t;r.insertText(y,d,h)}else{y=o;const x=u.$from.parentOffset===0,E=u.$from.node().isText||u.$from.node().isTextblock,T=u.$from.node().content.size>0;x&&E&&T&&(d=Math.max(0,d-1)),r.replaceWith(d,h,y)}n.updateSelection&&Z6(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:y})}return!0},vS=()=>({state:e,dispatch:t})=>x6(e,t),_S=()=>({state:e,dispatch:t})=>y6(e,t),LS=()=>({state:e,dispatch:t})=>Lg(e,t),RS=()=>({state:e,dispatch:t})=>Pg(e,t),MS=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Du(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch(r){return!1}},DS=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Du(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch(r){return!1}},PS=()=>({state:e,dispatch:t})=>g6(e,t),BS=()=>({state:e,dispatch:t})=>b6(e,t);function lb(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function FS(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o+=1){const u=t[o];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))df()||lb()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var HS=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=FS(e).split(/-(?!$)/),a=s.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,o))});return u==null||u.steps.forEach(l=>{const c=l.map(r.mapping);c&&i&&r.maybeStep(c)}),!0},US=(e,t={})=>({state:n,dispatch:r})=>{const i=Et(e,n.schema);return Gr(n,i,t)?E6(n,r):!1},jS=()=>({state:e,dispatch:t})=>Ug(e,t),zS=e=>({state:t,dispatch:n})=>{const r=Et(e,t.schema);return L6(r)(t,n)},$S=()=>({state:e,dispatch:t})=>Fg(e,t);function H0(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var VS=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=Vu(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Et(e,r.schema)),o==="mark"&&(a=Er(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(l,c)=>{s&&s===l.type&&n.setNodeMarkup(c,void 0,H0(l.attrs,t)),a&&l.marks.length&&l.marks.forEach(d=>{a===d.type&&n.addMark(c,c+l.nodeSize,a.create(H0(d.attrs,t)))})})}),!0):!1},qS=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),WS=()=>({tr:e,dispatch:t})=>{if(t){const n=new hn(e.doc);e.setSelection(n)}return!0},YS=()=>({state:e,dispatch:t})=>Mg(e,t),KS=()=>({state:e,dispatch:t})=>Bg(e,t),GS=()=>({state:e,dispatch:t})=>w6(e,t),QS=()=>({state:e,dispatch:t})=>N6(e,t),XS=()=>({state:e,dispatch:t})=>A6(e,t),JS=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:o})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const l=Vc(e,i.schema,r,{errorOnInvalidContent:t!=null?t:i.options.enableContentCheck});return a&&s.replaceWith(0,u.content.size,l).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t!=null?t:i.options.enableContentCheck})};function ZS(e,t,n){var r;const{selection:i}=t;let s=null;if(lf(i)&&(s=i.$cursor),s){const o=(r=e.storedMarks)!=null?r:s.marks();return!!n.isInSet(o)||!o.some(u=>u.type.excludes(n))}const{ranges:a}=i;return a.some(({$from:o,$to:u})=>{let l=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(o.pos,u.pos,(c,d,h)=>{if(l)return!1;if(c.isInline){const f=!h||h.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(b=>b.type.excludes(n));l=f&&m}return!l}),l})}var ew=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:a,ranges:o}=s,u=Er(e,r.schema);if(i)if(a){const l=Xg(r,u);n.addStoredMark(u.create(I(I({},l),t)))}else o.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(c,d,(h,f)=>{const m=Math.max(f,c),b=Math.min(f+h.nodeSize,d);h.marks.find(x=>x.type===u)?h.marks.forEach(x=>{u===x.type&&n.addMark(m,b,u.create(I(I({},x.attrs),t)))}):n.addMark(m,b,u.create(t))})});return ZS(r,n,u)},tw=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),nw=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Et(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:o})=>R0(s,I(I({},a),t))(n)?!0:o.clearNodes()).command(({state:o})=>R0(s,I(I({},a),t))(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},rw=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=br(e,0,r.content.size),s=he.create(r,i);t.setSelection(s)}return!0},iw=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,a=Te.atStart(r).from,o=Te.atEnd(r).to,u=br(i,a,o),l=br(s,a,o),c=Te.create(r,u,l);t.setSelection(c)}return!0},sw=e=>({state:t,dispatch:n})=>{const r=Et(e,t.schema);return D6(r)(t,n)};function U0(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var aw=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:a}=t,{$from:o,$to:u}=s,l=i.extensionManager.attributes,c=go(l,o.node().type.name,o.node().attrs);if(s instanceof he&&s.node.isBlock)return!o.parentOffset||!xr(a,o.pos)?!1:(r&&(e&&U0(n,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const d=u.parentOffset===u.parent.content.size,h=o.depth===0?void 0:F6(o.node(-1).contentMatchAt(o.indexAfter(-1)));let f=d&&h?[{type:h,attrs:c}]:void 0,m=xr(t.doc,t.mapping.map(o.pos),1,f);if(!f&&!m&&xr(t.doc,t.mapping.map(o.pos),1,h?[{type:h}]:void 0)&&(m=!0,f=h?[{type:h,attrs:c}]:void 0),r){if(m&&(s instanceof Te&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,f),h&&!d&&!o.parentOffset&&o.parent.type!==h)){const b=t.mapping.map(o.before()),y=t.doc.resolve(b);o.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&t.setNodeMarkup(t.mapping.map(o.before()),h)}e&&U0(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return m},ow=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var a;const o=Et(e,r.schema),{$from:u,$to:l}=r.selection,c=r.selection.node;if(c&&c.isBlock||u.depth<2||!u.sameParent(l))return!1;const d=u.node(-1);if(d.type!==o)return!1;const h=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==o||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let x=q.empty;const E=u.index(-1)?1:u.index(-2)?2:3;for(let P=u.depth-E;P>=u.depth-3;P-=1)x=q.from(u.node(P).copy(x));const T=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,v=I(I({},go(h,u.node().type.name,u.node().attrs)),t),C=((a=o.contentMatch.defaultType)==null?void 0:a.createAndFill(v))||void 0;x=x.append(q.from(o.createAndFill(null,C)||void 0));const w=u.before(u.depth-(E-1));n.replace(w,u.after(-T),new se(x,4-E,0));let M=-1;n.doc.nodesBetween(w,n.doc.content.size,(P,U)=>{if(M>-1)return!1;P.isTextblock&&P.content.size===0&&(M=U+1)}),M>-1&&n.setSelection(Te.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const f=l.pos===u.end()?d.contentMatchAt(0).defaultType:null,m=I(I({},go(h,d.type.name,d.attrs)),t),b=I(I({},go(h,u.node().type.name,u.node().attrs)),t);n.delete(u.pos,l.pos);const y=f?[{type:o,attrs:m},{type:f,attrs:b}]:[{type:o,attrs:m}];if(!xr(n.doc,u.pos,2))return!1;if(i){const{selection:x,storedMarks:E}=r,{splittableMarks:T}=s.extensionManager,v=E||x.$to.parentOffset&&x.$from.marks();if(n.split(u.pos,2,y).scrollIntoView(),!v||!i)return!0;const C=v.filter(w=>T.includes(w.type.name));n.ensureMarks(C)}return!0},Fl=(e,t)=>{const n=$u(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xr(e.doc,n.pos)&&e.join(n.pos),!0},Hl=(e,t)=>{const n=$u(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xr(e.doc,r)&&e.join(r),!0},uw=(e,t,n,r={})=>({editor:i,tr:s,state:a,dispatch:o,chain:u,commands:l,can:c})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=Et(e,a.schema),m=Et(t,a.schema),{selection:b,storedMarks:y}=a,{$from:x,$to:E}=b,T=x.blockRange(E),v=y||b.$to.parentOffset&&b.$from.marks();if(!T)return!1;const C=$u(w=>F0(w.type.name,d))(b);if(T.depth>=1&&C&&T.depth-C.depth<=1){if(C.node.type===f)return l.liftListItem(m);if(F0(C.node.type.name,d)&&f.validContent(C.node.content)&&o)return u().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>Fl(s,f)).command(()=>Hl(s,f)).run()}return!n||!v||!o?u().command(()=>c().wrapInList(f,r)?!0:l.clearNodes()).wrapInList(f,r).command(()=>Fl(s,f)).command(()=>Hl(s,f)).run():u().command(()=>{const w=c().wrapInList(f,r),M=v.filter(P=>h.includes(P.type.name));return s.ensureMarks(M),w?!0:l.clearNodes()}).wrapInList(f,r).command(()=>Fl(s,f)).command(()=>Hl(s,f)).run()},lw=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,a=Er(e,r.schema);return qc(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)},cw=(e,t,n={})=>({state:r,commands:i})=>{const s=Et(e,r.schema),a=Et(t,r.schema),o=Gr(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),o?i.setNode(a,u):i.setNode(s,I(I({},u),n))},dw=(e,t={})=>({state:n,commands:r})=>{const i=Et(e,n.schema);return Gr(n,i,t)?r.lift(i):r.wrapIn(i,t)},fw=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const a=e.tr,o=s.transform;for(let u=o.steps.length-1;u>=0;u-=1)a.step(o.steps[u].invert(o.docs[u]));if(s.text){const u=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else a.delete(s.from,s.to)}return!0}}return!1},hw=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},pw=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=t,{selection:o}=n,u=Er(e,r.schema),{$from:l,empty:c,ranges:d}=o;if(!i)return!0;if(c&&a){let{from:h,to:f}=o;const m=(s=l.marks().find(y=>y.type===u))==null?void 0:s.attrs,b=of(l,u,m);b&&(h=b.from,f=b.to),n.removeMark(h,f,u)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,u)});return n.removeStoredMark(u),!0},mw=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=Vu(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Et(e,r.schema)),o==="mark"&&(a=Er(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const l=u.$from.pos,c=u.$to.pos;let d,h,f,m;n.selection.empty?r.doc.nodesBetween(l,c,(b,y)=>{s&&s===b.type&&(f=Math.max(y,l),m=Math.min(y+b.nodeSize,c),d=y,h=b)}):r.doc.nodesBetween(l,c,(b,y)=>{y<l&&s&&s===b.type&&(f=Math.max(y,l),m=Math.min(y+b.nodeSize,c),d=y,h=b),y>=l&&y<=c&&(s&&s===b.type&&n.setNodeMarkup(y,void 0,I(I({},b.attrs),t)),a&&b.marks.length&&b.marks.forEach(x=>{if(a===x.type){const E=Math.max(y,l),T=Math.min(y+b.nodeSize,c);n.addMark(E,T,a.create(I(I({},x.attrs),t)))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,I(I({},h.attrs),t)),a&&h.marks.length&&h.marks.forEach(b=>{a===b.type&&n.addMark(f,m,a.create(I(I({},b.attrs),t)))}))}),!0):!1},gw=(e,t={})=>({state:n,dispatch:r})=>{const i=Et(e,n.schema);return I6(i,t)(n,r)},bw=(e,t={})=>({state:n,dispatch:r})=>{const i=Et(e,n.schema);return O6(i,t)(n,r)},cb=rt.create({name:"commands",addCommands(){return I({},ub)}}),db=rt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var a,o,u,l;if((l=(u=(o=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:o.filterTransaction)==null?void 0:u.call(o,e))!=null?l:e.getMeta("y-sync$"))return;const c=Vg(e.before,[e,...t]);Zg(c).forEach(f=>{c.mapping.mapResult(f.oldRange.from).deletedAfter&&c.mapping.mapResult(f.oldRange.to).deletedBefore&&c.before.nodesBetween(f.oldRange.from,f.oldRange.to,(m,b)=>{const y=b+m.nodeSize-2,x=f.oldRange.from<=b&&y<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:b,to:y,newFrom:c.mapping.map(b),newTo:c.mapping.map(y),deletedRange:f.oldRange,newRange:f.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const h=c.mapping;c.steps.forEach((f,m)=>{var b,y;if(f instanceof vn){const x=h.slice(m).map(f.from,-1),E=h.slice(m).map(f.to),T=h.invert().map(x,-1),v=h.invert().map(E),C=(b=c.doc.nodeAt(x-1))==null?void 0:b.marks.some(M=>M.eq(f.mark)),w=(y=c.doc.nodeAt(E))==null?void 0:y.marks.some(M=>M.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:T,to:v},newRange:{from:x,to:E},partial:!!(w||C),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),fb=rt.create({name:"drop",addProseMirrorPlugins(){return[new Xe({key:new nt("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),hb=rt.create({name:"editable",addProseMirrorPlugins(){return[new Xe({key:new nt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),pb=new nt("focusEvents"),mb=rt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Xe({key:pb,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),gb=rt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:u,doc:l}=o,{empty:c,$anchor:d}=u,{pos:h,parent:f}=d,m=d.parent.isTextblock&&h>0?o.doc.resolve(h-1):d,b=m.parent.type.spec.isolating,y=d.pos-d.parentOffset,x=b&&m.parent.childCount===1?y===d.pos:be.atStart(l).from===h;return!c||!f.type.isTextblock||f.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i=I({},r),s=re(I({},r),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return df()||lb()?s:i},addProseMirrorPlugins(){return[new Xe({key:new nt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(b=>b.getMeta("composition")))return;const r=e.some(b=>b.docChanged)&&!t.doc.eq(n.doc),i=e.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:o}=t.selection,u=be.atStart(t.doc).from,l=be.atEnd(t.doc).to;if(s||!(a===u&&o===l)||!qu(n.doc))return;const h=n.tr,f=ju({state:n,transaction:h}),{commands:m}=new zu({editor:this.editor,state:f});if(m.clearNodes(),!!h.steps.length)return h}})]}}),bb=rt.create({name:"paste",addProseMirrorPlugins(){return[new Xe({key:new nt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),xb=rt.create({name:"tabindex",addProseMirrorPlugins(){return[new Xe({key:new nt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),xw=class ji{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new ji(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ji(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ji(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!i&&o.depth<=this.depth)return;const u=new ji(o,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new ji(o,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,a=Object.keys(n);for(let o=0;o<a.length;o+=1){const u=a[o];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===t&&s.every(u=>n[u]===a.node.attrs[u])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,I(I({},this.node.attrs),t)),this.editor.view.dispatch(n)}},yw=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Ew(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var Tw=class extends B6{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document!="undefined"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=rb(t,this.options.autofocus);this.editorState=qi.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document=="undefined")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document!="undefined"&&(this.css=Ew(yw,this.options.injectNonce))}setOptions(e={}){this.options=I(I({},this.options),e),!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=Wg(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[hb,ob.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),cb,mb,gb,xb,fb,bb,db].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Yu(r,this)}createCommandManager(){this.commandManager=new zu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=Vc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=Vc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new vg(e,re(I({},this.options.editorProps),{attributes:I({role:"textbox"},(t=this.options.editorProps)==null?void 0:t.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState}));const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(l)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=n.findLast(l=>l.getMeta("focus")||l.getMeta("blur")),o=a==null?void 0:a.getMeta("focus"),u=a==null?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),u&&this.emit("blur",{editor:this,event:u.event,transaction:a}),!(e.getMeta("preventUpdate")||!n.some(l=>l.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return Jg(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return Q6(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Qg(this.state.doc,{blockSeparator:t,textSerializers:I(I({},sf(this.schema)),n)})}get isEmpty(){return qu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new xw(t,this)}get $doc(){return this.$pos(0)}};function rs(e){return new Wu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Ue(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],o=r[0];if(a){const u=o.search(/\S/),l=n.from+o.indexOf(a),c=l+a.length;if(uf(n.from,n.to,t.doc).filter(f=>f.mark.type.excluded.find(b=>b===e.type&&b!==f.mark.type)).filter(f=>f.to>l).length)return null;c<n.to&&s.delete(c,n.to),l>n.from&&s.delete(n.from+u,l);const h=n.from+u+a.length;s.addMark(n.from+u,h,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function yb(e){return new Wu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Ue(e.getAttributes,void 0,r)||{},{tr:s}=t,a=n.from;let o=n.to;const u=e.type.create(i);if(r[1]){const l=r[0].lastIndexOf(r[1]);let c=a+l;c>o?c=o:o=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,a+r[0].length-1),s.replaceWith(c,o,u)}else if(r[0]){const l=e.type.isInline?a:a-1;s.insert(l,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(o))}s.scrollIntoView()}})}function Wc(e){return new Wu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=Ue(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function is(e){return new Wu({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=Ue(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),u=a.doc.resolve(n.from).blockRange(),l=u&&Fd(u,e.type,s);if(!l)return null;if(a.wrap(u,l),e.keepMarks&&e.editor){const{selection:d,storedMarks:h}=t,{splittableMarks:f}=e.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const b=m.filter(y=>f.includes(y.type.name));a.ensureMarks(b)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=a.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Xr(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&a.join(n.from-1)}})}function kw(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof he){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function Sw(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,a=e;i.descendants((o,u)=>{const l=s.mapping.map(u),c=s.mapping.map(u)+o.nodeSize;let d=null;if(o.marks.forEach(f=>{if(f!==a)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=e.type.create(I(I({},e.attrs),n));s.removeMark(l,c,e.type),s.addMark(l,c,f)}}),s.docChanged&&t.view.dispatch(s)}var an=class Eb extends cf{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new Eb(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Ci(e){return new iS({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=Ue(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=t,o=r[r.length-1],u=r[0];let l=n.to;if(o){const c=u.search(/\S/),d=n.from+u.indexOf(o),h=d+o.length;if(uf(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(y=>y===e.type&&y!==m.mark.type)).filter(m=>m.to>d).length)return null;h<n.to&&a.delete(h,n.to),d>n.from&&a.delete(n.from+c,d),l=n.from+c+o.length,a.addMark(n.from+c,l,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}var Ul,j0;function ww(){return j0||(j0=1,Ul=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),Ul}var Cw=ww();const Aw=ka(Cw);var jl={exports:{}},zl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Nw(){if(z0)return zl;z0=1;var e=a1(),t=p1();function n(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,u=e.useDebugValue;return zl.useSyncExternalStoreWithSelector=function(l,c,d,h,f){var m=s(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=o(function(){function x(w){if(!E){if(E=!0,T=w,w=h(w),f!==void 0&&b.hasValue){var M=b.value;if(f(M,w))return v=M}return v=w}if(M=v,r(T,w))return M;var P=h(w);return f!==void 0&&f(M,P)?(T=w,M):(T=w,v=P)}var E=!1,T,v,C=d===void 0?null:d;return[function(){return x(c())},C===null?void 0:function(){return x(C())}]},[c,d,h,f]);var y=i(l,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=y},[y]),u(y),y},zl}var $0;function Iw(){return $0||($0=1,jl.exports=Nw()),jl.exports}var Ow=Iw(),vw=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},_w=({contentComponent:e})=>{const t=m1.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(t)})};function Lw(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t=re(I({},t),{[n]:wE.createPortal(r.reactElement,r.element,n)}),e.forEach(i=>i())},removeRenderer(n){const r=I({},t);delete r[n],t=r,e.forEach(i=>i())}}}var Rw=class extends Xn.Component{constructor(e){var t;super(e),this.editorContentRef=Xn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Lw(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!((e=t.options.element)!=null&&e.firstChild)))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const r=this.props,{editor:e,innerRef:t}=r,n=ln(r,["editor","innerRef"]);return g.jsxs(g.Fragment,{children:[g.jsx("div",I({ref:vw(t,this.editorContentRef)},n)),(e==null?void 0:e.contentComponent)&&g.jsx(_w,{contentComponent:e.contentComponent})]})}},Mw=B.forwardRef((e,t)=>{const n=Xn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Xn.createElement(Rw,I({key:n,innerRef:t},e))}),Dw=Xn.memo(Mw),Pw=typeof window!="undefined"?B.useLayoutEffect:B.useEffect,Bw=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Fw(e){var t;const[n]=B.useState(()=>new Bw(e.editor)),r=Ow.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:Aw);return Pw(()=>n.watch(e.editor),[e.editor,n]),B.useDebugValue(r),r}var Hw=!1,Yc=typeof window=="undefined",Uw=Yc||!!(typeof window!="undefined"&&window.next),jw=class Tb{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Yc||Uw?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t=re(I({},this.options.current),{onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}});return new Tw(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var a;return i===((a=n.extensions)==null?void 0:a[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?Tb.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions(re(I({},this.options.current),{editable:this.editor.isEditable})):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function zw(e={},t=[]){const n=B.useRef(e);n.current=e;const[r]=B.useState(()=>new jw(n)),i=m1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return B.useDebugValue(i),B.useEffect(r.onRender(t)),Fw({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var kb=B.createContext({editor:null});kb.Consumer;var Sb=()=>B.useContext(kb),$w=B.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Vw=()=>B.useContext($w);Xn.forwardRef((e,t)=>{const{onDragStart:n}=Vw(),r=e.as||"div";return g.jsx(r,re(I({},e),{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:I({whiteSpace:"normal"},e.style)}))});Xn.createContext({markViewContentRef:()=>{}});const wb=["top","right","bottom","left"],V0=["start","end"],q0=wb.reduce((e,t)=>e.concat(t,t+"-"+V0[0],t+"-"+V0[1]),[]),er=Math.min,Yt=Math.max,Vo=Math.round,Gn=e=>({x:e,y:e}),qw={left:"right",right:"left",bottom:"top",top:"bottom"},Ww={start:"end",end:"start"};function Kc(e,t,n){return Yt(e,er(t,n))}function Tr(e,t){return typeof e=="function"?e(t):e}function Nn(e){return e.split("-")[0]}function Ln(e){return e.split("-")[1]}function Cb(e){return e==="x"?"y":"x"}function ff(e){return e==="y"?"height":"width"}const Yw=new Set(["top","bottom"]);function Yn(e){return Yw.has(Nn(e))?"y":"x"}function hf(e){return Cb(Yn(e))}function Ab(e,t,n){n===void 0&&(n=!1);const r=Ln(e),i=hf(e),s=ff(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Wo(a)),[a,Wo(a)]}function Kw(e){const t=Wo(e);return[qo(e),t,qo(t)]}function qo(e){return e.replace(/start|end/g,t=>Ww[t])}const W0=["left","right"],Y0=["right","left"],Gw=["top","bottom"],Qw=["bottom","top"];function Xw(e,t,n){switch(e){case"top":case"bottom":return n?t?Y0:W0:t?W0:Y0;case"left":case"right":return t?Gw:Qw;default:return[]}}function Jw(e,t,n,r){const i=Ln(e);let s=Xw(Nn(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(qo)))),s}function Wo(e){return e.replace(/left|right|bottom|top/g,t=>qw[t])}function Zw(e){return I({top:0,right:0,bottom:0,left:0},e)}function pf(e){return typeof e!="number"?Zw(e):{top:e,right:e,bottom:e,left:e}}function ss(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function K0(e,t,n){let{reference:r,floating:i}=e;const s=Yn(t),a=hf(t),o=ff(a),u=Nn(t),l=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let f;switch(u){case"top":f={x:c,y:r.y-i.height};break;case"bottom":f={x:c,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Ln(t)){case"start":f[a]-=h*(n&&l?-1:1);break;case"end":f[a]+=h*(n&&l?-1:1);break}return f}const eC=(e,t,n)=>Je(null,null,function*(){const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),u=yield a.isRTL==null?void 0:a.isRTL(t);let l=yield a.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=K0(l,r,u),h=r,f={},m=0;for(let b=0;b<o.length;b++){const{name:y,fn:x}=o[b],{x:E,y:T,data:v,reset:C}=yield x({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:e,floating:t}});c=E!=null?E:c,d=T!=null?T:d,f=re(I({},f),{[y]:I(I({},f[y]),v)}),C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(l=C.rects===!0?yield a.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:c,y:d}=K0(l,h,u)),b=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}});function as(e,t){return Je(this,null,function*(){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Tr(t,e),m=pf(f),y=o[h?d==="floating"?"reference":"floating":d],x=ss(yield s.getClippingRect({element:(n=yield s.isElement==null?void 0:s.isElement(y))==null||n?y:y.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:u})),E=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,T=yield s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating),v=(yield s.isElement==null?void 0:s.isElement(T))?(yield s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},C=ss(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:E,offsetParent:T,strategy:u}):E);return{top:(x.top-C.top+m.top)/v.y,bottom:(C.bottom-x.bottom+m.bottom)/v.y,left:(x.left-C.left+m.left)/v.x,right:(C.right-x.right+m.right)/v.x}})}const tC=e=>({name:"arrow",options:e,fn(n){return Je(this,null,function*(){const{x:r,y:i,placement:s,rects:a,platform:o,elements:u,middlewareData:l}=n,{element:c,padding:d=0}=Tr(e,n)||{};if(c==null)return{};const h=pf(d),f={x:r,y:i},m=hf(s),b=ff(m),y=yield o.getDimensions(c),x=m==="y",E=x?"top":"left",T=x?"bottom":"right",v=x?"clientHeight":"clientWidth",C=a.reference[b]+a.reference[m]-f[m]-a.floating[b],w=f[m]-a.reference[m],M=yield o.getOffsetParent==null?void 0:o.getOffsetParent(c);let P=M?M[v]:0;(!P||!(yield o.isElement==null?void 0:o.isElement(M)))&&(P=u.floating[v]||a.floating[b]);const U=C/2-w/2,_=P/2-y[b]/2-1,j=er(h[E],_),F=er(h[T],_),K=j,G=P-y[b]-F,Z=P/2-y[b]/2+U,le=Kc(K,Z,G),ye=!l.arrow&&Ln(s)!=null&&Z!==le&&a.reference[b]/2-(Z<K?j:F)-y[b]/2<0,me=ye?Z<K?Z-K:Z-G:0;return{[m]:f[m]+me,data:I({[m]:le,centerOffset:Z-le-me},ye&&{alignmentOffset:me}),reset:ye}})}});function nC(e,t,n){return(e?[...n.filter(i=>Ln(i)===e),...n.filter(i=>Ln(i)!==e)]:n.filter(i=>Nn(i)===i)).filter(i=>e?Ln(i)===e||(t?qo(i)!==i:!1):!0)}const rC=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,fn(n){return Je(this,null,function*(){var r,i,s;const{rects:a,middlewareData:o,placement:u,platform:l,elements:c}=n,j=Tr(e,n),{crossAxis:d=!1,alignment:h,allowedPlacements:f=q0,autoAlignment:m=!0}=j,b=ln(j,["crossAxis","alignment","allowedPlacements","autoAlignment"]),y=h!==void 0||f===q0?nC(h||null,m,f):f,x=yield as(n,b),E=((r=o.autoPlacement)==null?void 0:r.index)||0,T=y[E];if(T==null)return{};const v=Ab(T,a,yield l.isRTL==null?void 0:l.isRTL(c.floating));if(u!==T)return{reset:{placement:y[0]}};const C=[x[Nn(T)],x[v[0]],x[v[1]]],w=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:T,overflows:C}],M=y[E+1];if(M)return{data:{index:E+1,overflows:w},reset:{placement:M}};const P=w.map(F=>{const K=Ln(F.placement);return[F.placement,K&&d?F.overflows.slice(0,2).reduce((G,Z)=>G+Z,0):F.overflows[0],F.overflows]}).sort((F,K)=>F[1]-K[1]),_=((s=P.filter(F=>F[2].slice(0,Ln(F[0])?2:3).every(K=>K<=0))[0])==null?void 0:s[0])||P[0][0];return _!==u?{data:{index:E+1,overflows:w},reset:{placement:_}}:{}})}}},iC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return Je(this,null,function*(){var r,i;const{placement:s,middlewareData:a,rects:o,initialPlacement:u,platform:l,elements:c}=n,Z=Tr(e,n),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0}=Z,x=ln(Z,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const E=Nn(s),T=Yn(u),v=Nn(u)===u,C=yield l.isRTL==null?void 0:l.isRTL(c.floating),w=f||(v||!y?[Wo(u)]:Kw(u)),M=b!=="none";!f&&M&&w.push(...Jw(u,y,b,C));const P=[u,...w],U=yield as(n,x),_=[];let j=((i=a.flip)==null?void 0:i.overflows)||[];if(d&&_.push(U[E]),h){const le=Ab(s,o,C);_.push(U[le[0]],U[le[1]])}if(j=[...j,{placement:s,overflows:_}],!_.every(le=>le<=0)){var F,K;const le=(((F=a.flip)==null?void 0:F.index)||0)+1,ye=P[le];if(ye&&(!(h==="alignment"?T!==Yn(ye):!1)||j.every(S=>Yn(S.placement)===T?S.overflows[0]>0:!0)))return{data:{index:le,overflows:j},reset:{placement:ye}};let me=(K=j.filter(z=>z.overflows[0]<=0).sort((z,S)=>z.overflows[1]-S.overflows[1])[0])==null?void 0:K.placement;if(!me)switch(m){case"bestFit":{var G;const z=(G=j.filter(S=>{if(M){const pe=Yn(S.placement);return pe===T||pe==="y"}return!0}).map(S=>[S.placement,S.overflows.filter(pe=>pe>0).reduce((pe,Ie)=>pe+Ie,0)]).sort((S,pe)=>S[1]-pe[1])[0])==null?void 0:G[0];z&&(me=z);break}case"initialPlacement":me=u;break}if(s!==me)return{reset:{placement:me}}}return{}})}}};function G0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Q0(e){return wb.some(t=>e[t]>=0)}const sC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return Je(this,null,function*(){const{rects:r}=n,a=Tr(e,n),{strategy:i="referenceHidden"}=a,s=ln(a,["strategy"]);switch(i){case"referenceHidden":{const o=yield as(n,re(I({},s),{elementContext:"reference"})),u=G0(o,r.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:Q0(u)}}}case"escaped":{const o=yield as(n,re(I({},s),{altBoundary:!0})),u=G0(o,r.floating);return{data:{escapedOffsets:u,escaped:Q0(u)}}}default:return{}}})}}};function Nb(e){const t=er(...e.map(s=>s.left)),n=er(...e.map(s=>s.top)),r=Yt(...e.map(s=>s.right)),i=Yt(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function aC(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>ss(Nb(i)))}const oC=function(e){return e===void 0&&(e={}),{name:"inline",options:e,fn(n){return Je(this,null,function*(){const{placement:r,elements:i,rects:s,platform:a,strategy:o}=n,{padding:u=2,x:l,y:c}=Tr(e,n),d=Array.from((yield a.getClientRects==null?void 0:a.getClientRects(i.reference))||[]),h=aC(d),f=ss(Nb(d)),m=pf(u);function b(){if(h.length===2&&h[0].left>h[1].right&&l!=null&&c!=null)return h.find(x=>l>x.left-m.left&&l<x.right+m.right&&c>x.top-m.top&&c<x.bottom+m.bottom)||f;if(h.length>=2){if(Yn(r)==="y"){const j=h[0],F=h[h.length-1],K=Nn(r)==="top",G=j.top,Z=F.bottom,le=K?j.left:F.left,ye=K?j.right:F.right,me=ye-le,z=Z-G;return{top:G,bottom:Z,left:le,right:ye,width:me,height:z,x:le,y:G}}const x=Nn(r)==="left",E=Yt(...h.map(j=>j.right)),T=er(...h.map(j=>j.left)),v=h.filter(j=>x?j.left===T:j.right===E),C=v[0].top,w=v[v.length-1].bottom,M=T,P=E,U=P-M,_=w-C;return{top:C,bottom:w,left:M,right:P,width:U,height:_,x:M,y:C}}return f}const y=yield a.getElementRects({reference:{getBoundingClientRect:b},floating:i.floating,strategy:o});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}})}}},uC=new Set(["left","top"]);function lC(e,t){return Je(this,null,function*(){const{placement:n,platform:r,elements:i}=e,s=yield r.isRTL==null?void 0:r.isRTL(i.floating),a=Nn(n),o=Ln(n),u=Yn(n)==="y",l=uC.has(a)?-1:1,c=s&&u?-1:1,d=Tr(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(f=o==="end"?m*-1:m),u?{x:f*c,y:h*l}:{x:h*l,y:f*c}})}const cC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return Je(this,null,function*(){var r,i;const{x:s,y:a,placement:o,middlewareData:u}=n,l=yield lC(n,e);return o===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:re(I({},l),{placement:o})}})}}},dC=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return Je(this,null,function*(){const{x:r,y:i,placement:s}=n,x=Tr(e,n),{mainAxis:a=!0,crossAxis:o=!1,limiter:u={fn:E=>{let{x:T,y:v}=E;return{x:T,y:v}}}}=x,l=ln(x,["mainAxis","crossAxis","limiter"]),c={x:r,y:i},d=yield as(n,l),h=Yn(Nn(s)),f=Cb(h);let m=c[f],b=c[h];if(a){const E=f==="y"?"top":"left",T=f==="y"?"bottom":"right",v=m+d[E],C=m-d[T];m=Kc(v,m,C)}if(o){const E=h==="y"?"top":"left",T=h==="y"?"bottom":"right",v=b+d[E],C=b-d[T];b=Kc(v,b,C)}const y=u.fn(re(I({},n),{[f]:m,[h]:b}));return re(I({},y),{data:{x:y.x-r,y:y.y-i,enabled:{[f]:a,[h]:o}}})})}}},fC=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return Je(this,null,function*(){var r,i;const{placement:s,rects:a,platform:o,elements:u}=n,j=Tr(e,n),{apply:l=()=>{}}=j,c=ln(j,["apply"]),d=yield as(n,c),h=Nn(s),f=Ln(s),m=Yn(s)==="y",{width:b,height:y}=a.floating;let x,E;h==="top"||h==="bottom"?(x=h,E=f===((yield o.isRTL==null?void 0:o.isRTL(u.floating))?"start":"end")?"left":"right"):(E=h,x=f==="end"?"top":"bottom");const T=y-d.top-d.bottom,v=b-d.left-d.right,C=er(y-d[x],T),w=er(b-d[E],v),M=!n.middlewareData.shift;let P=C,U=w;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(U=v),(i=n.middlewareData.shift)!=null&&i.enabled.y&&(P=T),M&&!f){const F=Yt(d.left,0),K=Yt(d.right,0),G=Yt(d.top,0),Z=Yt(d.bottom,0);m?U=b-2*(F!==0||K!==0?F+K:Yt(d.left,d.right)):P=y-2*(G!==0||Z!==0?G+Z:Yt(d.top,d.bottom))}yield l(re(I({},n),{availableWidth:U,availableHeight:P}));const _=yield o.getDimensions(u.floating);return b!==_.width||y!==_.height?{reset:{rects:!0}}:{}})}}};function Ku(){return typeof window!="undefined"}function ms(e){return Ib(e)?(e.nodeName||"").toLowerCase():"#document"}function pn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kr(e){var t;return(t=(Ib(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ib(e){return Ku()?e instanceof Node||e instanceof pn(e).Node:!1}function Dn(e){return Ku()?e instanceof Element||e instanceof pn(e).Element:!1}function tr(e){return Ku()?e instanceof HTMLElement||e instanceof pn(e).HTMLElement:!1}function X0(e){return!Ku()||typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof pn(e).ShadowRoot}const hC=new Set(["inline","contents"]);function Aa(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Pn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hC.has(i)}const pC=new Set(["table","td","th"]);function mC(e){return pC.has(ms(e))}const gC=[":popover-open",":modal"];function Gu(e){return gC.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const bC=["transform","translate","scale","rotate","perspective"],xC=["transform","translate","scale","rotate","perspective","filter"],yC=["paint","layout","strict","content"];function mf(e){const t=gf(),n=Dn(e)?Pn(e):e;return bC.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||xC.some(r=>(n.willChange||"").includes(r))||yC.some(r=>(n.contain||"").includes(r))}function EC(e){let t=Qr(e);for(;tr(t)&&!us(t);){if(mf(t))return t;if(Gu(t))return null;t=Qr(t)}return null}function gf(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TC=new Set(["html","body","#document"]);function us(e){return TC.has(ms(e))}function Pn(e){return pn(e).getComputedStyle(e)}function Qu(e){return Dn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qr(e){if(ms(e)==="html")return e;const t=e.assignedSlot||e.parentNode||X0(e)&&e.host||kr(e);return X0(t)?t.host:t}function Ob(e){const t=Qr(e);return us(t)?e.ownerDocument?e.ownerDocument.body:e.body:tr(t)&&Aa(t)?t:Ob(t)}function vb(e,t,n){var r;t===void 0&&(t=[]);const i=Ob(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=pn(i);return s?(Gc(a),t.concat(a,a.visualViewport||[],Aa(i)?i:[],[])):t.concat(i,vb(i,[]))}function Gc(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _b(e){const t=Pn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=tr(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=Vo(n)!==s||Vo(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Lb(e){return Dn(e)?e:e.contextElement}function Qi(e){const t=Lb(e);if(!tr(t))return Gn(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=_b(t);let a=(s?Vo(n.width):n.width)/r,o=(s?Vo(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const kC=Gn(0);function Rb(e){const t=pn(e);return!gf()||!t.visualViewport?kC:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function SC(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pn(e)?!1:t}function ha(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Lb(e);let a=Gn(1);t&&(r?Dn(r)&&(a=Qi(r)):a=Qi(e));const o=SC(s,n,r)?Rb(s):Gn(0);let u=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(s){const h=pn(s),f=r&&Dn(r)?pn(r):r;let m=h,b=Gc(m);for(;b&&r&&f!==m;){const y=Qi(b),x=b.getBoundingClientRect(),E=Pn(b),T=x.left+(b.clientLeft+parseFloat(E.paddingLeft))*y.x,v=x.top+(b.clientTop+parseFloat(E.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,d*=y.y,u+=T,l+=v,m=pn(b),b=Gc(m)}}return ss({width:c,height:d,x:u,y:l})}function bf(e,t){const n=Qu(e).scrollLeft;return t?t.left+n:ha(kr(e)).left+n}function Mb(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:bf(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function wC(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=kr(r),o=t?Gu(t.floating):!1;if(r===a||o&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Gn(1);const c=Gn(0),d=tr(r);if((d||!d&&!s)&&((ms(r)!=="body"||Aa(a))&&(u=Qu(r)),tr(r))){const f=ha(r);l=Qi(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}const h=a&&!d&&!s?Mb(a,u,!0):Gn(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+h.x,y:n.y*l.y-u.scrollTop*l.y+c.y+h.y}}function CC(e){return Array.from(e.getClientRects())}function AC(e){const t=kr(e),n=Qu(e),r=e.ownerDocument.body,i=Yt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Yt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+bf(e);const o=-n.scrollTop;return Pn(r).direction==="rtl"&&(a+=Yt(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function NC(e,t){const n=pn(e),r=kr(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;const l=gf();(!l||l&&t==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:o,y:u}}const IC=new Set(["absolute","fixed"]);function OC(e,t){const n=ha(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=tr(e)?Qi(e):Gn(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:a,height:o,x:u,y:l}}function J0(e,t,n){let r;if(t==="viewport")r=NC(e,n);else if(t==="document")r=AC(kr(e));else if(Dn(t))r=OC(t,n);else{const i=Rb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ss(r)}function Db(e,t){const n=Qr(e);return n===t||!Dn(n)||us(n)?!1:Pn(n).position==="fixed"||Db(n,t)}function vC(e,t){const n=t.get(e);if(n)return n;let r=vb(e,[]).filter(o=>Dn(o)&&ms(o)!=="body"),i=null;const s=Pn(e).position==="fixed";let a=s?Qr(e):e;for(;Dn(a)&&!us(a);){const o=Pn(a),u=mf(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&IC.has(i.position)||Aa(a)&&!u&&Db(e,a))?r=r.filter(c=>c!==a):i=o,a=Qr(a)}return t.set(e,r),r}function _C(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Gu(t)?[]:vC(t,this._c):[].concat(n),r],o=a[0],u=a.reduce((l,c)=>{const d=J0(t,c,i);return l.top=Yt(d.top,l.top),l.right=er(d.right,l.right),l.bottom=er(d.bottom,l.bottom),l.left=Yt(d.left,l.left),l},J0(t,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function LC(e){const{width:t,height:n}=_b(e);return{width:t,height:n}}function RC(e,t,n){const r=tr(t),i=kr(t),s=n==="fixed",a=ha(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const u=Gn(0);function l(){u.x=bf(i)}if(r||!r&&!s)if((ms(t)!=="body"||Aa(i))&&(o=Qu(t)),r){const f=ha(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&l();s&&!r&&i&&l();const c=i&&!r&&!s?Mb(i,o):Gn(0),d=a.left+o.scrollLeft-u.x-c.x,h=a.top+o.scrollTop-u.y-c.y;return{x:d,y:h,width:a.width,height:a.height}}function $l(e){return Pn(e).position==="static"}function Z0(e,t){if(!tr(e)||Pn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return kr(e)===n&&(n=n.ownerDocument.body),n}function Pb(e,t){const n=pn(e);if(Gu(e))return n;if(!tr(e)){let i=Qr(e);for(;i&&!us(i);){if(Dn(i)&&!$l(i))return i;i=Qr(i)}return n}let r=Z0(e,t);for(;r&&mC(r)&&$l(r);)r=Z0(r,t);return r&&us(r)&&$l(r)&&!mf(r)?n:r||EC(e)||n}const MC=function(e){return Je(this,null,function*(){const t=this.getOffsetParent||Pb,n=this.getDimensions,r=yield n(e.floating);return{reference:RC(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})};function DC(e){return Pn(e).direction==="rtl"}const PC={convertOffsetParentRelativeRectToViewportRelativeRect:wC,getDocumentElement:kr,getClippingRect:_C,getOffsetParent:Pb,getElementRects:MC,getClientRects:CC,getDimensions:LC,getScale:Qi,isElement:Dn,isRTL:DC},Bb=cC,Fb=rC,Hb=dC,Ub=iC,jb=fC,zb=sC,$b=tC,Vb=oC,qb=(e,t,n)=>{const r=new Map,i=I({platform:PC},n),s=re(I({},i.platform),{_c:r});return eC(e,t,re(I({},i),{platform:s}))};var Qc,Xc;if(typeof WeakMap!="undefined"){let e=new WeakMap;Qc=t=>e.get(t),Xc=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;Qc=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},Xc=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var hr=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,a=i+1;for(let o=1;s<this.width&&this.map[t+o]==n;o++)s++;for(let o=1;a<this.height&&this.map[t+this.width*o]==n;o++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:a}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:a,right:o,top:u,bottom:l}=this.findCell(t);return{left:Math.min(n,a),top:Math.min(i,u),right:Math.max(r,o),bottom:Math.max(s,l)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,a=this.map[s];n[a]||(n[a]=!0,!(i==e.left&&i&&this.map[s-1]==a||r==e.top&&r&&this.map[s-this.width]==a)&&t.push(a))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let a=t+e*this.width;const o=(e+1)*this.width;for(;a<o&&this.map[a]<i;)a++;return a==o?s-1:this.map[a]}i=s}}static get(e){return Qc(e)||Xc(e,BC(e))}};function BC(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=FC(e),n=e.childCount,r=[];let i=0,s=null;const a=[];for(let l=0,c=t*n;l<c;l++)r[l]=0;for(let l=0,c=0;l<n;l++){const d=e.child(l);c++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==d.childCount)break;const b=d.child(m),{colspan:y,rowspan:x,colwidth:E}=b.attrs;for(let T=0;T<x;T++){if(T+l>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:c,n:x-T});break}const v=i+T*t;for(let C=0;C<y;C++){r[v+C]==0?r[v+C]=c:(s||(s=[])).push({type:"collision",row:l,pos:c,n:y-C});const w=E&&E[C];if(w){const M=(v+C)%t*2,P=a[M];P==null||P!=w&&a[M+1]==1?(a[M]=w,a[M+1]=1):P==w&&a[M+1]++}}}i+=y,c+=b.nodeSize}const h=(l+1)*t;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:l,n:f}),c++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const o=new hr(t,n,r,s);let u=!1;for(let l=0;!u&&l<a.length;l+=2)a[l]!=null&&a[l+1]<n&&(u=!0);return u&&HC(o,a,e),o}function FC(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let a=0;a<r;a++){const o=e.child(a);for(let u=0;u<o.childCount;u++){const l=o.child(u);a+l.attrs.rowspan>r&&(s+=l.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const o=i.child(a);s+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function HC(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let o=null;const u=a.attrs;for(let l=0;l<u.colspan;l++){const c=(i+l)%e.width,d=t[c*2];d!=null&&(!u.colwidth||u.colwidth[l]!=d)&&((o||(o=UC(u)))[l]=d)}o&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:o})}}function UC(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function xf(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}new nt("selectingCells");function jC(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function Wb(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function zC(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=jC(t.$head)||$C(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function $C(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function ep(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Yb(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Kb(e,t,n){const r=e.node(-1),i=hr.get(r),s=e.start(-1),a=i.nextCell(e.pos-s,t,n);return a==null?null:e.node(0).resolve(s+a)}function tp(e,t,n=1){const r=re(I({},e),{colspan:e.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var Qn=class ur extends be{constructor(t,n=t){const r=t.node(-1),i=hr.get(r),s=t.start(-1),a=i.rectBetween(t.pos-s,n.pos-s),o=t.node(0),u=i.cellsInRect(a).filter(c=>c!=n.pos-s);u.unshift(n.pos-s);const l=u.map(c=>{const d=r.nodeAt(c);if(!d)throw RangeError(`No cell with offset ${c} found`);const h=s+c+1;return new K1(o.resolve(h),o.resolve(h+d.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(ep(r)&&ep(i)&&Yb(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?ur.rowSelection(r,i):s&&this.isColSelection()?ur.colSelection(r,i):new ur(r,i)}return Te.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=hr.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let u=i.top;u<i.bottom;u++){const l=[];for(let c=u*n.width+i.left,d=i.left;d<i.right;d++,c++){const h=n.map[c];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let m=t.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const b=i.left-f.left,y=f.right-i.right;if(b>0||y>0){let x=m.attrs;if(b>0&&(x=tp(x,0,b)),y>0&&(x=tp(x,x.colspan-y,y)),f.left<i.left){if(m=m.type.createAndFill(x),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(x)}`)}else m=m.type.create(x,m.content)}if(f.top<i.top||f.bottom>i.bottom){const x=re(I({},m.attrs),{rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)});f.top<i.top?m=m.type.createAndFill(x):m=m.type.create(x,m.content)}l.push(m)}a.push(t.child(u).copy(q.from(l)))}const o=this.isColSelection()&&this.isRowSelection()?t:a;return new se(q.from(o),1,1)}replace(t,n=se.empty){const r=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:o,$to:u}=i[a],l=t.mapping.slice(r);t.replace(l.map(o.pos),l.map(u.pos),a?se.empty:n)}const s=be.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new se(q.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=hr.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)t(n.nodeAt(s[a]),i+s[a])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=hr.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),u=t.node(0);return a.top<=o.top?(a.top>0&&(t=u.resolve(s+i.map[a.left])),o.bottom<i.height&&(n=u.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=u.resolve(s+i.map[o.left])),a.bottom<i.height&&(t=u.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new ur(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=hr.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,o=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,o)==n.width}eq(t){return t instanceof ur&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=hr.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),u=t.node(0);return a.left<=o.left?(a.left>0&&(t=u.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(n=u.resolve(s+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=u.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(t=u.resolve(s+i.map[i.width*(a.top+1)-1]))),new ur(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new ur(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new ur(t.resolve(n),t.resolve(r))}getBookmark(){return new VC(this.$anchorCell.pos,this.$headCell.pos)}};Qn.prototype.visible=!1;be.jsonID("cell",Qn);var VC=class Gb{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Gb(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Yb(n,r)?new Qn(n,r):be.near(r,1)}};new nt("fix-tables");function Qb(e){const t=e.selection,n=zC(e),r=n.node(-1),i=n.start(-1),s=hr.get(r),a=t instanceof Qn?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i);return re(I({},a),{tableStart:i,map:s,table:r})}function qC(e){return function(t,n){if(!Wb(t))return!1;if(n){const r=xf(t.schema),i=Qb(t),s=t.tr,a=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=a.map(u=>i.table.nodeAt(u));for(let u=0;u<a.length;u++)o[u].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[u],r.cell,o[u].attrs);if(s.steps.length==0)for(let u=0;u<a.length;u++)s.setNodeMarkup(i.tableStart+a[u],r.header_cell,o[u].attrs);n(s)}return!0}}function np(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const s=t.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function yf(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?qC(e):function(n,r){if(!Wb(n))return!1;if(r){const i=xf(n.schema),s=Qb(n),a=n.tr,o=np("row",s,i),u=np("column",s,i),c=(e==="column"?o:e==="row"?u:!1)?1:0,d=e=="column"?{left:0,top:c,right:1,bottom:s.map.height}:e=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,h=e=="column"?u?i.cell:i.header_cell:e=="row"?o?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(f=>{const m=f+s.tableStart,b=a.doc.nodeAt(m);b&&a.setNodeMarkup(m,h,b.attrs)}),r(a)}return!0}}yf("row",{useDeprecatedLogic:!0});yf("column",{useDeprecatedLogic:!0});yf("cell",{useDeprecatedLogic:!0});function Xa(e,t){const n=e.selection;if(!(n instanceof Qn))return!1;if(t){const r=e.tr,i=xf(e.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new se(i,0,0))}),r.docChanged&&t(r)}return!0}Gd({ArrowLeft:Ja("horiz",-1),ArrowRight:Ja("horiz",1),ArrowUp:Ja("vert",-1),ArrowDown:Ja("vert",1),"Shift-ArrowLeft":Za("horiz",-1),"Shift-ArrowRight":Za("horiz",1),"Shift-ArrowUp":Za("vert",-1),"Shift-ArrowDown":Za("vert",1),Backspace:Xa,"Mod-Backspace":Xa,Delete:Xa,"Mod-Delete":Xa});function bo(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ja(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Qn)return bo(n,r,be.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const a=Xb(i,e,t);if(a==null)return!1;if(e=="horiz")return bo(n,r,be.near(n.doc.resolve(s.head+t),t));{const o=n.doc.resolve(a),u=Kb(o,e,t);let l;return u?l=be.near(u,1):t<0?l=be.near(n.doc.resolve(o.before(-1)),-1):l=be.near(n.doc.resolve(o.after(-1)),1),bo(n,r,l)}}}function Za(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let a;if(s instanceof Qn)a=s;else{const u=Xb(i,e,t);if(u==null)return!1;a=new Qn(n.doc.resolve(u))}const o=Kb(a.$headCell,e,t);return o?bo(n,r,new Qn(a.$anchorCell,o)):!1}}function Xb(e,t,n){if(!(e.state.selection instanceof Te))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),u=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(u)?o:null}}return null}new nt("tableColumnResizing");function WC(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),i=Math.min(e.left,t.left),a=Math.max(e.right,t.right)-i,o=r-n,u=i,l=n;return new DOMRect(u,l,a,o)}var YC=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:s,appendTo:a,options:o}){this.preventHide=!1,this.isVisible=!1,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:l,from:c,to:d})=>{const{doc:h,selection:f}=l,{empty:m}=f,b=!h.textBetween(c,d).length&&lf(l.selection),y=this.element.contains(document.activeElement);return!(!(u.hasFocus()||y)||m||b||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var l;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((l=this.element.parentNode)!=null&&l.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,l)=>{const c=!(l!=null&&l.selection.eq(u.state.selection)),d=!(l!=null&&l.doc.eq(u.state.doc));!c&&!d||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,c,d,l)},this.updateDelay))},this.updateHandler=(u,l,c,d)=>{const{composing:h}=u;if(h||!l&&!c)return;if(!this.getShouldShow(d)){this.hide();return}this.updatePosition(),this.show()},this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=a,this.floatingUIOptions=I(I({},this.floatingUIOptions),o),this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),window.addEventListener("resize",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(Ub(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(Hb(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(Bb(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push($b(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(jb(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(Fb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(zb(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(Vb(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}updatePosition(){const{selection:e}=this.editor.state,t=nb(this.view,e.from,e.to);let n={getBoundingClientRect:()=>t,getClientRects:()=>[t]};if(e instanceof he){let r=this.view.nodeDOM(e.from);const i=r.dataset.nodeViewWrapper?r:r.querySelector("[data-node-view-wrapper]");i&&(r=i),r&&(n={getBoundingClientRect:()=>r.getBoundingClientRect(),getClientRects:()=>[r.getBoundingClientRect()]})}if(e instanceof Qn){const{$anchorCell:r,$headCell:i}=e,s=r?r.pos:i.pos,a=i?i.pos:r.pos,o=this.view.nodeDOM(s),u=this.view.nodeDOM(a);if(!o||!u)return;const l=o===u?o.getBoundingClientRect():WC(o.getBoundingClientRect(),u.getBoundingClientRect());n={getBoundingClientRect:()=>l,getClientRects:()=>[l]}}qb(n,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const i=!(t!=null&&t.selection.eq(e.state.selection)),s=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,i,s,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:s,to:a})}show(){var e,t;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(t=(e=this.appendTo)!=null?e:this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Jb=e=>new Xe({key:typeof e.pluginKey=="string"?new nt(e.pluginKey):e.pluginKey,view:t=>new YC(I({view:t},e))});rt.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Jb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var KC=class{constructor({editor:e,element:t,view:n,options:r,shouldShow:i}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:s,state:a})=>{const{selection:o}=a,{$anchor:u,empty:l}=o,c=u.depth===1,d=u.parent.isTextblock&&!u.parent.type.spec.code&&!u.parent.textContent&&u.parent.childCount===0&&!this.getTextContent(u.parent);return!(!s.hasFocus()||!l||!c||!d||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(s,a,o,u)=>{const{composing:l}=s;if(l||!a&&!o)return;if(!this.getShouldShow(u)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&((a=this.element.parentNode)!=null&&a.contains(s.relatedTarget))||(s==null?void 0:s.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.floatingUIOptions=I(I({},this.floatingUIOptions),r),this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}getTextContent(e){return Qg(e,{textSerializers:sf(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(Ub(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(Hb(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(Bb(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push($b(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(jb(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(Fb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(zb(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(Vb(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:s,to:a})}updatePosition(){const{selection:e}=this.editor.state,t=nb(this.view,e.from,e.to);qb({getBoundingClientRect:()=>t,getClientRects:()=>[t]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(t!=null&&t.selection.eq(e.state.selection)),r=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(e=this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Zb=e=>new Xe({key:typeof e.pluginKey=="string"?new nt(e.pluginKey):e.pluginKey,view:t=>new KC(I({view:t},e))});rt.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Zb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,shouldShow:this.options.shouldShow})]:[]}});var GC=Xn.forwardRef((l,u)=>{var c=l,{pluginKey:e="bubbleMenu",editor:t,updateDelay:n,resizeDelay:r,shouldShow:i=null,options:s,children:a}=c,o=ln(c,["pluginKey","editor","updateDelay","resizeDelay","shouldShow","options","children"]);const d=B.useRef(document.createElement("div"));typeof u=="function"?u(d.current):u&&(u.current=d.current);const{editor:h}=Sb();return B.useEffect(()=>{const f=d.current;if(f.style.visibility="hidden",f.style.position="absolute",t!=null&&t.isDestroyed||h!=null&&h.isDestroyed)return;const m=t||h;if(!m){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const b=Jb({updateDelay:n,resizeDelay:r,editor:m,element:f,pluginKey:e,shouldShow:i,options:s});return m.registerPlugin(b),()=>{m.unregisterPlugin(e),window.requestAnimationFrame(()=>{f.parentNode&&f.parentNode.removeChild(f)})}},[t,h]),o1.createPortal(g.jsx("div",re(I({},o),{children:a})),d.current)});Xn.forwardRef((o,a)=>{var u=o,{pluginKey:e="floatingMenu",editor:t,shouldShow:n=null,options:r,children:i}=u,s=ln(u,["pluginKey","editor","shouldShow","options","children"]);const l=B.useRef(document.createElement("div"));typeof a=="function"?a(l.current):a&&(a.current=l.current);const{editor:c}=Sb();return B.useEffect(()=>{const d=l.current;if(d.style.visibility="hidden",d.style.position="absolute",t!=null&&t.isDestroyed||c!=null&&c.isDestroyed)return;const h=t||c;if(!h){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const f=Zb({editor:h,element:d,pluginKey:e,shouldShow:n,options:r});return h.registerPlugin(f),()=>{h.unregisterPlugin(e),window.requestAnimationFrame(()=>{d.parentNode&&d.parentNode.removeChild(d)})}},[t,c]),o1.createPortal(g.jsx("div",re(I({},s),{children:i})),l.current)});var Yo=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const i=t!=null?t:{},{children:n}=i,r=ln(i,["children"]);if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},QC=/^\s*>\s$/,XC=an.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Yo("blockquote",re(I({},pt(this.options.HTMLAttributes,e)),{children:Yo("slot",{})}))},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[is({find:QC,type:this.type})]}}),JC=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ZC=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,eA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nA=Ii.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Yo("strong",re(I({},pt(this.options.HTMLAttributes,e)),{children:Yo("slot",{})}))},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rs({find:JC,type:this.type}),rs({find:eA,type:this.type})]},addPasteRules(){return[Ci({find:ZC,type:this.type}),Ci({find:tA,type:this.type})]}}),rA=/(^|[^`])`([^`]+)`(?!`)/,iA=/(^|[^`])`([^`]+)`(?!`)/g,sA=Ii.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rs({find:rA,type:this.type})]},addPasteRules(){return[Ci({find:iA,type:this.type})]}}),aA=/^```([a-z]+)?[\s\n]$/,oA=/^~~~([a-z]+)?[\s\n]$/,uA=an.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",pt(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:e.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?e.commands.command(({tr:l})=>(l.setSelection(be.near(r.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[Wc({find:aA,type:this.type,getAttributes:e=>({language:e[1]})}),Wc({find:oA,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Xe({key:new nt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:a,schema:o}=e.state,u=o.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},u)),a.selection.$from.parent.type!==this.type&&a.setSelection(Te.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),lA=an.create({name:"doc",topNode:!0,content:"block+"}),cA=an.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",pt(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:l,dispatch:c})=>{if(c&&u&&a){const d=u.filter(h=>o.includes(h.type.name));l.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dA=an.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>re(I({},e),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Wc({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),fA=an.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",pt(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!kw(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return tb(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var o;if(a){const{$to:u}=s.selection,l=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Te.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(he.create(s.doc,u.pos)):s.setSelection(Te.create(s.doc,u.pos));else{const c=(o=u.parent.type.contentMatch.defaultType)==null?void 0:o.create();c&&(s.insert(l,c),s.setSelection(Te.create(s.doc,l+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[yb({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),hA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,pA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,mA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,gA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bA=Ii.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rs({find:hA,type:this.type}),rs({find:mA,type:this.type})]},addPasteRules(){return[Ci({find:pA,type:this.type}),Ci({find:gA,type:this.type})]}});const xA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",yA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Jc="numeric",Zc="ascii",ed="alpha",Vs="asciinumeric",Bs="alphanumeric",td="domain",e2="emoji",EA="scheme",TA="slashscheme",Vl="whitespace";function kA(e,t){return e in t||(t[e]=[]),t[e]}function fi(e,t,n){t[Jc]&&(t[Vs]=!0,t[Bs]=!0),t[Zc]&&(t[Vs]=!0,t[ed]=!0),t[Vs]&&(t[Bs]=!0),t[ed]&&(t[Bs]=!0),t[Bs]&&(t[td]=!0),t[e2]&&(t[td]=!0);for(const r in t){const i=kA(r,n);i.indexOf(e)<0&&i.push(e)}}function SA(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function nn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}nn.groups={};nn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||nn.groups;let i;return t&&t.j?i=t:(i=new nn(t),n&&r&&fi(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(e[a]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||nn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let a,o=i.go(e);if(o?(a=new nn,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new nn,s){if(r)if(a.t&&typeof a.t=="string"){const u=Object.assign(SA(a.t,r),n);fi(s,u,r)}else n&&fi(s,n,r);a.t=s}return i.j[e]=a,a}};const _e=(e,t,n,r,i)=>e.ta(t,n,r,i),lt=(e,t,n,r,i)=>e.tr(t,n,r,i),rp=(e,t,n,r,i)=>e.ts(t,n,r,i),J=(e,t,n,r,i)=>e.tt(t,n,r,i),lr="WORD",nd="UWORD",t2="ASCIINUMERICAL",n2="ALPHANUMERICAL",pa="LOCALHOST",rd="TLD",id="UTLD",xo="SCHEME",zi="SLASH_SCHEME",Ef="NUM",sd="WS",Tf="NL",qs="OPENBRACE",Ws="CLOSEBRACE",Ko="OPENBRACKET",Go="CLOSEBRACKET",Qo="OPENPAREN",Xo="CLOSEPAREN",Jo="OPENANGLEBRACKET",Zo="CLOSEANGLEBRACKET",eu="FULLWIDTHLEFTPAREN",tu="FULLWIDTHRIGHTPAREN",nu="LEFTCORNERBRACKET",ru="RIGHTCORNERBRACKET",iu="LEFTWHITECORNERBRACKET",su="RIGHTWHITECORNERBRACKET",au="FULLWIDTHLESSTHAN",ou="FULLWIDTHGREATERTHAN",uu="AMPERSAND",lu="APOSTROPHE",cu="ASTERISK",Dr="AT",du="BACKSLASH",fu="BACKTICK",hu="CARET",Fr="COLON",kf="COMMA",pu="DOLLAR",Un="DOT",mu="EQUALS",Sf="EXCLAMATION",Tn="HYPHEN",Ys="PERCENT",gu="PIPE",bu="PLUS",xu="POUND",Ks="QUERY",wf="QUOTE",r2="FULLWIDTHMIDDLEDOT",Cf="SEMI",jn="SLASH",Gs="TILDE",yu="UNDERSCORE",i2="EMOJI",Eu="SYM";var s2=Object.freeze({__proto__:null,ALPHANUMERICAL:n2,AMPERSAND:uu,APOSTROPHE:lu,ASCIINUMERICAL:t2,ASTERISK:cu,AT:Dr,BACKSLASH:du,BACKTICK:fu,CARET:hu,CLOSEANGLEBRACKET:Zo,CLOSEBRACE:Ws,CLOSEBRACKET:Go,CLOSEPAREN:Xo,COLON:Fr,COMMA:kf,DOLLAR:pu,DOT:Un,EMOJI:i2,EQUALS:mu,EXCLAMATION:Sf,FULLWIDTHGREATERTHAN:ou,FULLWIDTHLEFTPAREN:eu,FULLWIDTHLESSTHAN:au,FULLWIDTHMIDDLEDOT:r2,FULLWIDTHRIGHTPAREN:tu,HYPHEN:Tn,LEFTCORNERBRACKET:nu,LEFTWHITECORNERBRACKET:iu,LOCALHOST:pa,NL:Tf,NUM:Ef,OPENANGLEBRACKET:Jo,OPENBRACE:qs,OPENBRACKET:Ko,OPENPAREN:Qo,PERCENT:Ys,PIPE:gu,PLUS:bu,POUND:xu,QUERY:Ks,QUOTE:wf,RIGHTCORNERBRACKET:ru,RIGHTWHITECORNERBRACKET:su,SCHEME:xo,SEMI:Cf,SLASH:jn,SLASH_SCHEME:zi,SYM:Eu,TILDE:Gs,TLD:rd,UNDERSCORE:yu,UTLD:id,UWORD:nd,WORD:lr,WS:sd});const ar=/[a-z]/,Ns=new RegExp("\\p{L}","u"),ql=new RegExp("\\p{Emoji}","u"),or=/\d/,Wl=/\s/,ip="\r",Yl=`
`,wA="",CA="",Kl="";let eo=null,to=null;function AA(e=[]){const t={};nn.groups=t;const n=new nn;eo==null&&(eo=sp(xA)),to==null&&(to=sp(yA)),J(n,"'",lu),J(n,"{",qs),J(n,"}",Ws),J(n,"[",Ko),J(n,"]",Go),J(n,"(",Qo),J(n,")",Xo),J(n,"<",Jo),J(n,">",Zo),J(n,"",eu),J(n,"",tu),J(n,"",nu),J(n,"",ru),J(n,"",iu),J(n,"",su),J(n,"",au),J(n,"",ou),J(n,"&",uu),J(n,"*",cu),J(n,"@",Dr),J(n,"`",fu),J(n,"^",hu),J(n,":",Fr),J(n,",",kf),J(n,"$",pu),J(n,".",Un),J(n,"=",mu),J(n,"!",Sf),J(n,"-",Tn),J(n,"%",Ys),J(n,"|",gu),J(n,"+",bu),J(n,"#",xu),J(n,"?",Ks),J(n,'"',wf),J(n,"/",jn),J(n,";",Cf),J(n,"~",Gs),J(n,"_",yu),J(n,"\\",du),J(n,"",r2);const r=lt(n,or,Ef,{[Jc]:!0});lt(r,or,r);const i=lt(r,ar,t2,{[Vs]:!0}),s=lt(r,Ns,n2,{[Bs]:!0}),a=lt(n,ar,lr,{[Zc]:!0});lt(a,or,i),lt(a,ar,a),lt(i,or,i),lt(i,ar,i);const o=lt(n,Ns,nd,{[ed]:!0});lt(o,ar),lt(o,or,s),lt(o,Ns,o),lt(s,or,s),lt(s,ar),lt(s,Ns,s);const u=J(n,Yl,Tf,{[Vl]:!0}),l=J(n,ip,sd,{[Vl]:!0}),c=lt(n,Wl,sd,{[Vl]:!0});J(n,Kl,c),J(l,Yl,u),J(l,Kl,c),lt(l,Wl,c),J(c,ip),J(c,Yl),lt(c,Wl,c),J(c,Kl,c);const d=lt(n,ql,i2,{[e2]:!0});J(d,"#"),lt(d,ql,d),J(d,wA,d);const h=J(d,CA);J(h,"#"),lt(h,ql,d);const f=[[ar,a],[or,i]],m=[[ar,null],[Ns,o],[or,s]];for(let b=0;b<eo.length;b++)Or(n,eo[b],rd,lr,f);for(let b=0;b<to.length;b++)Or(n,to[b],id,nd,m);fi(rd,{tld:!0,ascii:!0},t),fi(id,{utld:!0,alpha:!0},t),Or(n,"file",xo,lr,f),Or(n,"mailto",xo,lr,f),Or(n,"http",zi,lr,f),Or(n,"https",zi,lr,f),Or(n,"ftp",zi,lr,f),Or(n,"ftps",zi,lr,f),fi(xo,{scheme:!0,ascii:!0},t),fi(zi,{slashscheme:!0,ascii:!0},t),e=e.sort((b,y)=>b[0]>y[0]?1:-1);for(let b=0;b<e.length;b++){const y=e[b][0],E=e[b][1]?{[EA]:!0}:{[TA]:!0};y.indexOf("-")>=0?E[td]=!0:ar.test(y)?or.test(y)?E[Vs]=!0:E[Zc]=!0:E[Jc]=!0,rp(n,y,y,E)}return rp(n,"localhost",pa,{ascii:!0}),n.jd=new nn(Eu),{start:n,tokens:Object.assign({groups:t},s2)}}function a2(e,t){const n=NA(t.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let s=0,a=0;for(;a<r;){let o=e,u=null,l=0,c=null,d=-1,h=-1;for(;a<r&&(u=o.go(n[a]));)o=u,o.accepts()?(d=0,h=0,c=o):d>=0&&(d+=n[a].length,h++),l+=n[a].length,s+=n[a].length,a++;s-=d,a-=h,l-=d,i.push({t:c.t,v:t.slice(s-l,s),s:s-l,e:s})}return i}function NA(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,a=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}function Or(e,t,n,r,i){let s;const a=t.length;for(let o=0;o<a-1;o++){const u=t[o];e.j[u]?s=e.j[u]:(s=new nn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new nn(n),s.jr=i.slice(),e.j[t[a-1]]=s,s}function sp(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let a=parseInt(e.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(e[r]),r++}return t}const ma={defaultProtocol:"http",events:null,format:ap,formatHref:ap,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Af(e,t=null){let n=Object.assign({},ma);e&&(n=Object.assign(n,e instanceof Af?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}Af.prototype={o:ma,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:ma[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function ap(e){return e}function o2(e,t){this.t="token",this.v=e,this.tk=t}o2.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=ma.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),a={},o=e.get("className",n,t),u=e.get("target",n,t),l=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,o&&(a.class=o),u&&(a.target=u),l&&(a.rel=l),c&&Object.assign(a,c),{tagName:i,attributes:a,content:s,eventListeners:d}}};function Xu(e,t){class n extends o2{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const op=Xu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),up=Xu("text"),IA=Xu("nl"),no=Xu("url",{isLink:!0,toHref(e=ma.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==pa&&e[1].t===Fr}}),En=e=>new nn(e);function OA({groups:e}){const t=e.domain.concat([uu,cu,Dr,du,fu,hu,pu,mu,Tn,Ef,Ys,gu,bu,xu,jn,Eu,Gs,yu]),n=[lu,Fr,kf,Un,Sf,Ys,Ks,wf,Cf,Jo,Zo,qs,Ws,Go,Ko,Qo,Xo,eu,tu,nu,ru,iu,su,au,ou],r=[uu,lu,cu,du,fu,hu,pu,mu,Tn,qs,Ws,Ys,gu,bu,xu,Ks,jn,Eu,Gs,yu],i=En(),s=J(i,Gs);_e(s,r,s),_e(s,e.domain,s);const a=En(),o=En(),u=En();_e(i,e.domain,a),_e(i,e.scheme,o),_e(i,e.slashscheme,u),_e(a,r,s),_e(a,e.domain,a);const l=J(a,Dr);J(s,Dr,l),J(o,Dr,l),J(u,Dr,l);const c=J(s,Un);_e(c,r,s),_e(c,e.domain,s);const d=En();_e(l,e.domain,d),_e(d,e.domain,d);const h=J(d,Un);_e(h,e.domain,d);const f=En(op);_e(h,e.tld,f),_e(h,e.utld,f),J(l,pa,f);const m=J(d,Tn);J(m,Tn,m),_e(m,e.domain,d),_e(f,e.domain,d),J(f,Un,h),J(f,Tn,m);const b=J(f,Fr);_e(b,e.numeric,op);const y=J(a,Tn),x=J(a,Un);J(y,Tn,y),_e(y,e.domain,a),_e(x,r,s),_e(x,e.domain,a);const E=En(no);_e(x,e.tld,E),_e(x,e.utld,E),_e(E,e.domain,a),_e(E,r,s),J(E,Un,x),J(E,Tn,y),J(E,Dr,l);const T=J(E,Fr),v=En(no);_e(T,e.numeric,v);const C=En(no),w=En();_e(C,t,C),_e(C,n,w),_e(w,t,C),_e(w,n,w),J(E,jn,C),J(v,jn,C);const M=J(o,Fr),P=J(u,Fr),U=J(P,jn),_=J(U,jn);_e(o,e.domain,a),J(o,Un,x),J(o,Tn,y),_e(u,e.domain,a),J(u,Un,x),J(u,Tn,y),_e(M,e.domain,C),J(M,jn,C),J(M,Ks,C),_e(_,e.domain,C),_e(_,t,C),J(_,jn,C);const j=[[qs,Ws],[Ko,Go],[Qo,Xo],[Jo,Zo],[eu,tu],[nu,ru],[iu,su],[au,ou]];for(let F=0;F<j.length;F++){const[K,G]=j[F],Z=J(C,K);J(w,K,Z),J(Z,G,C);const le=En(no);_e(Z,t,le);const ye=En();_e(Z,n),_e(le,t,le),_e(le,n,ye),_e(ye,t,le),_e(ye,n,ye),J(le,G,C),J(ye,G,C)}return J(i,pa,E),J(i,Tf,IA),{start:i,tokens:s2}}function vA(e,t,n){let r=n.length,i=0,s=[],a=[];for(;i<r;){let o=e,u=null,l=null,c=0,d=null,h=-1;for(;i<r&&!(u=o.go(n[i].t));)a.push(n[i++]);for(;i<r&&(l=u||o.go(n[i].t));)u=null,o=l,o.accepts()?(h=0,d=o):h>=0&&h++,i++,c++;if(h<0)i-=c,i<r&&(a.push(n[i]),i++);else{a.length>0&&(s.push(Gl(up,t,a)),a=[]),i-=h,c-=h;const f=d.t,m=n.slice(i-c,i);s.push(Gl(f,t,m))}}return a.length>0&&s.push(Gl(up,t,a)),s}function Gl(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const _A=typeof console!="undefined"&&console&&console.warn||(()=>{}),LA="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Qe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function RA(){return nn.groups={},Qe.scanner=null,Qe.parser=null,Qe.tokenQueue=[],Qe.pluginQueue=[],Qe.customSchemes=[],Qe.initialized=!1,Qe}function lp(e,t=!1){if(Qe.initialized&&_A(`linkifyjs: already initialized - will not register custom scheme "${e}" ${LA}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Qe.customSchemes.push([e,t])}function MA(){Qe.scanner=AA(Qe.customSchemes);for(let e=0;e<Qe.tokenQueue.length;e++)Qe.tokenQueue[e][1]({scanner:Qe.scanner});Qe.parser=OA(Qe.scanner.tokens);for(let e=0;e<Qe.pluginQueue.length;e++)Qe.pluginQueue[e][1]({scanner:Qe.scanner,parser:Qe.parser});return Qe.initialized=!0,Qe}function Nf(e){return Qe.initialized||MA(),vA(Qe.parser.start,e,a2(Qe.scanner.start,e))}Nf.scan=a2;function u2(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new Af(n),i=Nf(e),s=[];for(let a=0;a<i.length;a++){const o=i[a];o.isLink&&(!t||o.t===t)&&r.check(o)&&s.push(o.toFormattedObject(r))}return s}var If="[\0- -\u2029]",DA=new RegExp(If),PA=new RegExp(`${If}$`),BA=new RegExp(If,"g");function FA(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function HA(e){return new Xe({key:new nt("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(l=>l.docChanged)&&!n.doc.eq(r.doc),s=t.some(l=>l.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,o=Vg(n.doc,[...t]);if(Zg(o).forEach(({newRange:l})=>{const c=H6(r.doc,l,f=>f.isTextblock);let d,h;if(c.length>1)d=c[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const f=r.doc.textBetween(l.from,l.to," "," ");if(!PA.test(f))return;d=c[0],h=r.doc.textBetween(d.pos,l.to,void 0," ")}if(d&&h){const f=h.split(DA).filter(Boolean);if(f.length<=0)return!1;const m=f[f.length-1],b=d.pos+h.lastIndexOf(m);if(!m)return!1;const y=Nf(m).map(x=>x.toObject(e.defaultProtocol));if(!FA(y))return!1;y.filter(x=>x.isLink).map(x=>re(I({},x),{from:b+x.start+1,to:b+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{uf(x.from,x.to,r.doc).some(E=>E.mark.type===e.type)||a.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function UA(e){return new Xe({key:new nt("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let c=r.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;a=d.find(h=>h.nodeName==="A")}if(!a)return!1;const o=Jg(t.state,e.type.name),u=(i=a==null?void 0:a.href)!=null?i:o.href,l=(s=a==null?void 0:a.target)!=null?s:o.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),a&&u?(window.open(u,l),!0):!1}}})}function jA(e){return new Xe({key:new nt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:a}=s;if(a)return!1;let o="";r.content.forEach(l=>{o+=l.textContent});const u=u2(o,{defaultProtocol:e.defaultProtocol}).find(l=>l.isLink&&l.value===o);return!o||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function ri(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(BA,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var l2=Ii.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){lp(e);return}lp(e.scheme,e.optionalSlashes)})},onDestroy(){RA()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ri(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ri(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",pt(this.options.HTMLAttributes,e),0]:["a",pt(this.options.HTMLAttributes,re(I({},e),{href:""})),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ri(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ri(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ci({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=u2(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!ri(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(HA({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ri(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(UA({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(jA({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),zA=l2,$A=Object.defineProperty,VA=(e,t)=>{for(var n in t)$A(e,n,{get:t[n],enumerable:!0})},qA="listItem",cp="textStyle",dp=/^\s*([-+*])\s$/,c2=an.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qA,this.editor.getAttributes(cp)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=is({find:dp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=is({find:dp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(cp),editor:this.editor})),[e]}}),d2=an.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",pt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),WA={};VA(WA,{findListItemPos:()=>Na,getNextListDepth:()=>Of,handleBackspace:()=>ad,handleDelete:()=>od,hasListBefore:()=>f2,hasListItemAfter:()=>YA,hasListItemBefore:()=>h2,listItemHasSubList:()=>p2,nextListIsDeeper:()=>m2,nextListIsHigher:()=>g2});var Na=(e,t)=>{const{$from:n}=t.selection,r=Et(e,t.schema);let i=null,s=n.depth,a=n.pos,o=null;for(;s>0&&o===null;)i=n.node(s),i.type===r?o=s:(s-=1,a-=1);return o===null?null:{$pos:t.doc.resolve(a),depth:o}},Of=(e,t)=>{const n=Na(e,t);if(!n)return!1;const[,r]=K6(t,e,n.$pos.pos+4);return r},f2=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},h2=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},p2=(e,t,n)=>{if(!n)return!1;const r=Et(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},ad=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Gr(e.state,t)&&f2(e.state,t,n)){const{$anchor:o}=e.state.selection,u=e.state.doc.resolve(o.before()-1),l=[];u.node().descendants((h,f)=>{h.type.name===t&&l.push({node:h,pos:f})});const c=l.at(-1);if(!c)return!1;const d=e.state.doc.resolve(u.start()+c.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},d.end()).joinForward().run()}if(!Gr(e.state,t)||!J6(e.state))return!1;const r=Na(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=p2(t,e.state,s);return h2(t,e.state)&&!a?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},m2=(e,t)=>{const n=Of(e,t),r=Na(e,t);return!r||!n?!1:n>r.depth},g2=(e,t)=>{const n=Of(e,t),r=Na(e,t);return!r||!n?!1:n<r.depth},od=(e,t)=>{if(!Gr(e.state,t)||!X6(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:m2(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():g2(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},YA=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},b2=rt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&od(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&od(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&ad(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&ad(e,n,r)&&(t=!0)}),t}}}}),KA="listItem",fp="textStyle",hp=/^(\d+)\.\s$/,x2=an.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const r=e,{start:t}=r,n=ln(r,["start"]);return t===1?["ol",pt(this.options.HTMLAttributes,n),0]:["ol",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KA,this.editor.getAttributes(fp)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=is({find:hp,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=is({find:hp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>I({start:+t[1]},this.editor.getAttributes(fp)),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),GA=/^\s*(\[([( |x])?\])\s$/,QA=an.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",pt(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?re(I({},e),{Tab:()=>this.editor.commands.sinkListItem(this.name)}):e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),u=document.createElement("div"),l=c=>{var d,h;o.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,c,o.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return l(e),s.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",c=>c.preventDefault()),o.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const m=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,re(I({},m==null?void 0:m.attrs),{checked:d})),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,d)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{i.setAttribute(c,d)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,s.append(o,a),i.append(s,u),Object.entries(t).forEach(([c,d])=>{i.setAttribute(c,d)}),{dom:i,contentDOM:u,update:c=>c.type!==this.type?!1:(i.dataset.checked=c.attrs.checked,o.checked=c.attrs.checked,l(c),!0)}}},addInputRules(){return[is({find:GA,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),XA=an.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",pt(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});rt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(c2.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(d2.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(b2.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(x2.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(QA.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(XA.configure(this.options.taskList)),e}});var JA=an.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ZA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,e4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,t4=Ii.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rs({find:ZA,type:this.type})]},addPasteRules(){return[Ci({find:e4,type:this.type})]}}),n4=an.create({name:"text",group:"inline"}),y2=Ii.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),r4=y2;function i4(e={}){return new Xe({view(t){return new s4(t,e)}})}class s4{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,o=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,h=t.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let m=f.getBoundingClientRect(),b=d?m.bottom:m.top;d&&h&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*o;r={left:m.left,right:m.right,top:b-y,bottom:b+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*a;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let l,c;if(!u||u==document.body&&getComputedStyle(u).position=="static")l=-pageXOffset,c=-pageYOffset;else{let d=u.getBoundingClientRect(),h=d.width/u.offsetWidth,f=d.height/u.offsetHeight;l=d.left-u.scrollLeft*h,c=d.top-u.scrollTop*f}this.element.style.left=(r.left-l)/a+"px",this.element.style.top=(r.top-c)/o+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=z1(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class ct extends be{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return ct.valid(r)?new ct(r):be.near(r)}content(){return se.empty}eq(t){return t instanceof ct&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ct(t.resolve(n.pos))}getBookmark(){return new vf(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!a4(t)||!o4(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&ct.valid(t))return t;let i=t.pos,s=null;for(let a=t.depth;;a--){let o=t.node(a);if(n>0?t.indexAfter(a)<o.childCount:t.index(a)>0){s=o.child(n>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=n;let u=t.doc.resolve(i);if(ct.valid(u))return u}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!he.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=a,i+=n;let o=t.doc.resolve(i);if(ct.valid(o))return o}return null}}}ct.prototype.visible=!1;ct.findFrom=ct.findGapCursorFrom;be.jsonID("gapcursor",ct);class vf{constructor(t){this.pos=t}map(t){return new vf(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return ct.valid(n)?new ct(n):be.near(n)}}function a4(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function o4(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function u4(){return new Xe({props:{decorations:f4,createSelectionBetween(e,t,n){return t.pos==n.pos&&ct.valid(n)?new ct(n):null},handleClick:c4,handleKeyDown:l4,handleDOMEvents:{beforeinput:d4}}})}const l4=Gd({ArrowLeft:ro("horiz",-1),ArrowRight:ro("horiz",1),ArrowUp:ro("vert",-1),ArrowDown:ro("vert",1)});function ro(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let a=r.selection,o=t>0?a.$to:a.$from,u=a.empty;if(a instanceof Te){if(!s.endOfTextblock(n)||o.depth==0)return!1;u=!1,o=r.doc.resolve(t>0?o.after():o.before())}let l=ct.findGapCursorFrom(o,t,u);return l?(i&&i(r.tr.setSelection(new ct(l))),!0):!1}}function c4(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!ct.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&he.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new ct(r))),!0)}function d4(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof ct))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=q.empty;for(let a=r.length-1;a>=0;a--)i=q.from(r[a].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new se(i,0,0));return s.setSelection(Te.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function f4(e){if(!(e.selection instanceof ct))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",tt.create(e.doc,[Ht.widget(e.selection.head,t,{key:"gapcursor"})])}var Tu=200,vt=function(){};vt.prototype.append=function(t){return t.length?(t=vt.from(t),!this.length&&t||t.length<Tu&&this.leafAppend(t)||this.length<Tu&&t.leafPrepend(this)||this.appendInner(t)):this};vt.prototype.prepend=function(t){return t.length?vt.from(t).append(this):this};vt.prototype.appendInner=function(t){return new h4(this,t)};vt.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?vt.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};vt.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};vt.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};vt.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(t(s,a))},n,r),i};vt.from=function(t){return t instanceof vt?t:t&&t.length?new E2(t):vt.empty};var E2=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,a,o){for(var u=s;u<a;u++)if(i(this.values[u],o+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,a,o){for(var u=s-1;u>=a;u--)if(i(this.values[u],o+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Tu)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Tu)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(vt);vt.empty=new E2([]);var h4=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,a){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),a)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,a+o)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,a){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,a+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(vt);const p4=500;class On{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=t.tr,o,u,l=[],c=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new zn(d.map));let f=d.step.map(i.slice(s)),m;f&&a.maybeStep(f).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],l.push(new zn(m,void 0,void 0,l.length+c.length))),s--,m&&i.appendMap(m,s)}else a.maybeStep(d.step);if(d.selection)return o=i?d.selection.map(i.slice(s)):d.selection,u=new On(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:o}}addTransform(t,n,r,i){let s=[],a=this.eventCount,o=this.items,u=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),h=new zn(t.mapping.maps[c],d,n),f;(f=u&&u.merge(h))&&(h=f,c?s.pop():o=o.slice(0,o.length-1)),s.push(h),n&&(a++,n=void 0),i||(u=h)}let l=a-r.depth;return l>g4&&(o=m4(o,l),a-=l),new On(o.append(s),a)}remapping(t,n){let r=new aa;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,n),r}addMaps(t){return this.eventCount==0?this:new On(this.items.append(t.map(n=>new zn(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,a=t.steps.length,o=this.eventCount;this.items.forEach(h=>{h.selection&&o--},i);let u=n;this.items.forEach(h=>{let f=s.getMirror(--u);if(f==null)return;a=Math.min(a,f);let m=s.maps[f];if(h.step){let b=t.steps[f].invert(t.docs[f]),y=h.selection&&h.selection.map(s.slice(u+1,f));y&&o++,r.push(new zn(m,b,y))}else r.push(new zn(m))},i);let l=[];for(let h=n;h<a;h++)l.push(new zn(s.maps[h]));let c=this.items.slice(0,i).append(l).append(r),d=new On(c,o);return d.emptyItemCount()>p4&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((a,o)=>{if(o>=t)i.push(a),a.selection&&s++;else if(a.step){let u=a.step.map(n.slice(r)),l=u&&u.getMap();if(r--,l&&n.appendMap(l,r),u){let c=a.selection&&a.selection.map(n.slice(r));c&&s++;let d=new zn(l.invert(),u,c),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else a.map&&r--},this.items.length,0),new On(vt.from(i.reverse()),s)}}On.empty=new On(vt.empty,0);function m4(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class zn{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new zn(n.getMap().invert(),n,this.selection)}}}class Pr{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const g4=20;function b4(e,t,n,r){let i=n.getMeta(yi),s;if(i)return i.historyState;n.getMeta(E4)&&(e=new Pr(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(yi))return a.getMeta(yi).redo?new Pr(e.done.addTransform(n,void 0,r,yo(t)),e.undone,pp(n.mapping.maps),e.prevTime,e.prevComposition):new Pr(e.done,e.undone.addTransform(n,void 0,r,yo(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),u=e.prevTime==0||!a&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!x4(n,e.prevRanges)),l=a?Ql(e.prevRanges,n.mapping):pp(n.mapping.maps);return new Pr(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,yo(t)),On.empty,l,n.time,o==null?e.prevComposition:o)}else return(s=n.getMeta("rebased"))?new Pr(e.done.rebased(n,s),e.undone.rebased(n,s),Ql(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Pr(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Ql(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function x4(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function pp(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,a)=>t.push(s,a));return t}function Ql(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function y4(e,t,n){let r=yo(t),i=yi.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Pr(n?o:s.remaining,n?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(yi,{redo:n,historyState:u})}let Xl=!1,mp=null;function yo(e){let t=e.plugins;if(mp!=t){Xl=!1,mp=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Xl=!0;break}}return Xl}const yi=new nt("history"),E4=new nt("closeHistory");function T4(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Xe({key:yi,state:{init(){return new Pr(On.empty,On.empty,null,0,-1)},apply(t,n,r){return b4(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?k2:r=="historyRedo"?S2:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function T2(e,t){return(n,r)=>{let i=yi.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=y4(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const k2=T2(!1,!0),S2=T2(!0,!0);rt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Xe({key:new nt("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,o=0,u=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const l=r.tr.deleteRange(o,u);return e=!0,l}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,u=s-r,l=o-u,c=o;return t.deleteRange(l,c),!(this.storage.characters({node:t.doc})>r)}})]}});var k4=rt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[i4(this.options)]}});rt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Xe({key:new nt("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return tt.create(e,[]);let a=0;this.options.mode==="deepest"&&e.descendants((u,l)=>{if(u.isText)return;if(!(i>=l&&i<=l+u.nodeSize-1))return!1;a+=1});let o=0;return e.descendants((u,l)=>{if(u.isText||!(i>=l&&i<=l+u.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&a-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";s.push(Ht.node(l,l+u.nodeSize,{class:this.options.className}))}),tt.create(e,s)}}})]}});var S4=rt.create({name:"gapCursor",addProseMirrorPlugins(){return[u4()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Ue(fe(e,"allowGapCursor",n)))!=null?t:null}}});rt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Xe({key:new nt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((a,o)=>{const u=r>=o&&r<=o+a.nodeSize,l=!a.isLeaf&&qu(a);if((u||!this.options.showOnlyCurrent)&&l){const c=[this.options.emptyNodeClass];s&&c.push(this.options.emptyEditorClass);const d=Ht.node(o,o+a.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:u}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),tt.create(e,i)}}})]}});rt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Xe({key:new nt("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||tb(n.selection)||e.view.dragging?null:tt.create(n.doc,[Ht.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function gp({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var w4=rt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new nt(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Xe({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:a,schema:o}=i,u=e.getState(i),l=s.content.size,c=o.nodes[this.options.node];if(u)return a.insert(l,c.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!gp({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!gp({node:i,types:t})}}})]}}),C4=rt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>k2(e,t),redo:()=>({state:e,dispatch:t})=>S2(e,t)}},addProseMirrorPlugins(){return[T4(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),A4=rt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(nA.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(XC.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(c2.configure(this.options.bulletList)),this.options.code!==!1&&i.push(sA.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(uA.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(lA.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(k4.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(S4.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(cA.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(dA.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(C4.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(fA.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(bA.configure(this.options.italic)),this.options.listItem!==!1&&i.push(d2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(b2.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(l2.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(x2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(JA.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(t4.configure(this.options.strike)),this.options.text!==!1&&i.push(n4.configure(this.options.text)),this.options.underline!==!1&&i.push(y2.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(w4.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),N4=A4,I4=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,O4=an.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",pt(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[yb({find:I4,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),v4=O4,_4=rt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),L4=_4;function bp(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const a=n.slice(i,r).trim();(a||!s)&&t.push(a),i=r+1,r=n.indexOf(",",i)}return t}function w2(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const R4=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,M4=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,D4={};function xp(e,t){return(D4.jsx?M4:R4).test(e)}const P4=/[ \t\n\f\r]/g;function B4(e){return typeof e=="object"?e.type==="text"?yp(e.value):!1:yp(e)}function yp(e){return e.replace(P4,"")===""}let Ia=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};Ia.prototype.normal={};Ia.prototype.property={};Ia.prototype.space=void 0;function C2(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ia(n,r,t)}function ga(e){return e.toLowerCase()}let on=class{constructor(t,n){this.attribute=n,this.property=t}};on.prototype.attribute="";on.prototype.booleanish=!1;on.prototype.boolean=!1;on.prototype.commaOrSpaceSeparated=!1;on.prototype.commaSeparated=!1;on.prototype.defined=!1;on.prototype.mustUseProperty=!1;on.prototype.number=!1;on.prototype.overloadedBoolean=!1;on.prototype.property="";on.prototype.spaceSeparated=!1;on.prototype.space=void 0;let F4=0;const Oe=Oi(),bt=Oi(),ud=Oi(),te=Oi(),Ye=Oi(),Xi=Oi(),cn=Oi();function Oi(){return bl(2,++F4)}const ld=Object.freeze(Object.defineProperty({__proto__:null,boolean:Oe,booleanish:bt,commaOrSpaceSeparated:cn,commaSeparated:Xi,number:te,overloadedBoolean:ud,spaceSeparated:Ye},Symbol.toStringTag,{value:"Module"})),Jl=Object.keys(ld);let _f=class extends on{constructor(t,n,r,i){let s=-1;if(super(t,n),Ep(this,"space",i),typeof r=="number")for(;++s<Jl.length;){const a=Jl[s];Ep(this,Jl[s],(r&ld[a])===ld[a])}}};_f.prototype.defined=!0;function Ep(e,t,n){n&&(e[t]=n)}function gs(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new _f(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[ga(r)]=r,n[ga(s.attribute)]=r}return new Ia(t,n,e.space)}const A2=gs({properties:{ariaActiveDescendant:null,ariaAtomic:bt,ariaAutoComplete:null,ariaBusy:bt,ariaChecked:bt,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:Ye,ariaCurrent:null,ariaDescribedBy:Ye,ariaDetails:null,ariaDisabled:bt,ariaDropEffect:Ye,ariaErrorMessage:null,ariaExpanded:bt,ariaFlowTo:Ye,ariaGrabbed:bt,ariaHasPopup:null,ariaHidden:bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ye,ariaLevel:te,ariaLive:null,ariaModal:bt,ariaMultiLine:bt,ariaMultiSelectable:bt,ariaOrientation:null,ariaOwns:Ye,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:bt,ariaReadOnly:bt,ariaRelevant:null,ariaRequired:bt,ariaRoleDescription:Ye,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:bt,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function N2(e,t){return t in e?e[t]:t}function I2(e,t){return N2(e,t.toLowerCase())}const H4=gs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xi,acceptCharset:Ye,accessKey:Ye,action:null,allow:null,allowFullScreen:Oe,allowPaymentRequest:Oe,allowUserMedia:Oe,alt:null,as:null,async:Oe,autoCapitalize:null,autoComplete:Ye,autoFocus:Oe,autoPlay:Oe,blocking:Ye,capture:null,charSet:null,checked:Oe,cite:null,className:Ye,cols:te,colSpan:null,content:null,contentEditable:bt,controls:Oe,controlsList:Ye,coords:te|Xi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Oe,defer:Oe,dir:null,dirName:null,disabled:Oe,download:ud,draggable:bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Oe,formTarget:null,headers:Ye,height:te,hidden:ud,high:te,href:null,hrefLang:null,htmlFor:Ye,httpEquiv:Ye,id:null,imageSizes:null,imageSrcSet:null,inert:Oe,inputMode:null,integrity:null,is:null,isMap:Oe,itemId:null,itemProp:Ye,itemRef:Ye,itemScope:Oe,itemType:Ye,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Oe,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:Oe,muted:Oe,name:null,nonce:null,noModule:Oe,noValidate:Oe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Oe,optimum:te,pattern:null,ping:Ye,placeholder:null,playsInline:Oe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Oe,referrerPolicy:null,rel:Ye,required:Oe,reversed:Oe,rows:te,rowSpan:te,sandbox:Ye,scope:null,scoped:Oe,seamless:Oe,selected:Oe,shadowRootClonable:Oe,shadowRootDelegatesFocus:Oe,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:Oe,useMap:null,value:bt,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ye,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Oe,declare:Oe,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:Oe,noHref:Oe,noShade:Oe,noWrap:Oe,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:bt,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Oe,disableRemotePlayback:Oe,prefix:null,property:null,results:te,security:null,unselectable:null},space:"html",transform:I2}),U4=gs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cn,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:Ye,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:Oe,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xi,g2:Xi,glyphName:Xi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ye,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cn,rev:cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cn,requiredFeatures:cn,requiredFonts:cn,requiredFormats:cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cn,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:N2}),O2=gs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),v2=gs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:I2}),_2=gs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),j4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},z4=/[A-Z]/g,Tp=/-[a-z]/g,$4=/^data[-\w.:]+$/i;function Lf(e,t){const n=ga(t);let r=t,i=on;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&$4.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Tp,q4);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Tp.test(s)){let a=s.replace(z4,V4);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=_f}return new i(r,t)}function V4(e){return"-"+e.toLowerCase()}function q4(e){return e.charAt(1).toUpperCase()}const Ju=C2([A2,H4,O2,v2,_2],"html"),bs=C2([A2,U4,O2,v2,_2],"svg");function kp(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function L2(e){return e.join(" ").trim()}var Pi={},Zl,Sp;function W4(){if(Sp)return Zl;Sp=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,l="/",c="*",d="",h="comment",f="declaration";Zl=function(b,y){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];y=y||{};var x=1,E=1;function T(K){var G=K.match(t);G&&(x+=G.length);var Z=K.lastIndexOf(u);E=~Z?K.length-Z:E+K.length}function v(){var K={line:x,column:E};return function(G){return G.position=new C(K),P(),G}}function C(K){this.start=K,this.end={line:x,column:E},this.source=y.source}C.prototype.content=b;function w(K){var G=new Error(y.source+":"+x+":"+E+": "+K);if(G.reason=K,G.filename=y.source,G.line=x,G.column=E,G.source=b,!y.silent)throw G}function M(K){var G=K.exec(b);if(G){var Z=G[0];return T(Z),b=b.slice(Z.length),G}}function P(){M(n)}function U(K){var G;for(K=K||[];G=_();)G!==!1&&K.push(G);return K}function _(){var K=v();if(!(l!=b.charAt(0)||c!=b.charAt(1))){for(var G=2;d!=b.charAt(G)&&(c!=b.charAt(G)||l!=b.charAt(G+1));)++G;if(G+=2,d===b.charAt(G-1))return w("End of comment missing");var Z=b.slice(2,G-2);return E+=2,T(Z),b=b.slice(G),E+=2,K({type:h,comment:Z})}}function j(){var K=v(),G=M(r);if(G){if(_(),!M(i))return w("property missing ':'");var Z=M(s),le=K({type:f,property:m(G[0].replace(e,d)),value:Z?m(Z[0].replace(e,d)):d});return M(a),le}}function F(){var K=[];U(K);for(var G;G=j();)G!==!1&&(K.push(G),U(K));return K}return P(),F()};function m(b){return b?b.replace(o,d):d}return Zl}var wp;function Y4(){if(wp)return Pi;wp=1;var e=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.default=n;var t=e(W4());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var a=(0,t.default)(r),o=typeof i=="function";return a.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;o?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return Pi}var Is={},Cp;function K4(){if(Cp)return Is;Cp=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(l){return!l||n.test(l)||e.test(l)},a=function(l,c){return c.toUpperCase()},o=function(l,c){return"".concat(c,"-")},u=function(l,c){return c===void 0&&(c={}),s(l)?l:(l=l.toLowerCase(),c.reactCompat?l=l.replace(i,o):l=l.replace(r,o),l.replace(t,a))};return Is.camelCase=u,Is}var Os,Ap;function G4(){if(Ap)return Os;Ap=1;var e=Os&&Os.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(Y4()),n=K4();function r(i,s){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(o,u){o&&u&&(a[(0,n.camelCase)(o,s)]=u)}),a}return r.default=r,Os=r,Os}var Q4=G4();const X4=ka(Q4),Zu=R2("end"),nr=R2("start");function R2(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function J4(e){const t=nr(e),n=Zu(e);if(t&&n)return{start:t,end:n}}function Qs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Np(e.position):"start"in e||"end"in e?Np(e):"line"in e||"column"in e?cd(e):""}function cd(e){return Ip(e&&e.line)+":"+Ip(e&&e.column)}function Np(e){return cd(e&&e.start)+"-"+cd(e&&e.end)}function Ip(e){return e&&typeof e=="number"?e:1}class zt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s=I({},n)),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Qs(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zt.prototype.file="";zt.prototype.name="";zt.prototype.reason="";zt.prototype.message="";zt.prototype.stack="";zt.prototype.column=void 0;zt.prototype.line=void 0;zt.prototype.ancestors=void 0;zt.prototype.cause=void 0;zt.prototype.fatal=void 0;zt.prototype.place=void 0;zt.prototype.ruleId=void 0;zt.prototype.source=void 0;const Rf={}.hasOwnProperty,Z4=new Map,eN=/[A-Z]/g,tN=new Set(["table","tbody","thead","tfoot","tr"]),nN=new Set(["td","th"]),M2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function rN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=dN(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=cN(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?bs:Ju,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=D2(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function D2(e,t,n){if(t.type==="element")return iN(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return sN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return oN(e,t,n);if(t.type==="mdxjsEsm")return aN(e,t);if(t.type==="root")return uN(e,t,n);if(t.type==="text")return lN(e,t)}function iN(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=bs,e.schema=i),e.ancestors.push(t);const s=B2(e,t.tagName,!1),a=fN(e,t);let o=Df(e,t);return tN.has(t.tagName)&&(o=o.filter(function(u){return typeof u=="string"?!B4(u):!0})),P2(e,a,s,t),Mf(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function sN(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ba(e,t.position)}function aN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ba(e,t.position)}function oN(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=bs,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:B2(e,t.name,!0),a=hN(e,t),o=Df(e,t);return P2(e,a,s,t),Mf(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function uN(e,t,n){const r={};return Mf(r,Df(e,t)),e.create(t,e.Fragment,r,n)}function lN(e,t){return t.value}function P2(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Mf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function cN(e,t,n){return r;function r(i,s,a,o){const l=Array.isArray(a.children)?n:t;return o?l(s,a,o):l(s,a)}}function dN(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),u=nr(r);return t(i,s,a,o,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function fN(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Rf.call(t.properties,i)){const s=pN(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&nN.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function hN(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else ba(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else ba(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Df(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Z4;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;a=u+"-"+l,i.set(u,l+1)}}const o=D2(e,s,a);o!==void 0&&n.push(o)}return n}function pN(e,t,n){const r=Lf(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?w2(n):L2(n)),r.property==="style"){let i=typeof n=="object"?n:mN(e,String(n));return e.stylePropertyNameCase==="css"&&(i=gN(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?j4[r.property]||r.property:r.attribute,n]}}function mN(e,t){try{return X4(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new zt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=M2+"#cannot-parse-style-attribute",i}}function B2(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=xp(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=xp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Rf.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ba(e)}function ba(e,t){const n=new zt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=M2+"#cannot-handle-mdx-estrees-without-createevaluater",n}function gN(e){const t={};let n;for(n in e)Rf.call(e,n)&&(t[bN(n)]=e[n]);return t}function bN(e){let t=e.replace(eN,xN);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function xN(e){return"-"+e.toLowerCase()}const ec={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yN={};function Pf(e,t){const n=yN,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return F2(e,r,i)}function F2(e,t,n){if(EN(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Op(e.children,t,n)}return Array.isArray(e)?Op(e,t,n):""}function Op(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=F2(e[i],t,n);return r.join("")}function EN(e){return!!(e&&typeof e=="object")}const vp=document.createElement("i");function Bf(e){const t="&"+e+";";vp.innerHTML=t;const n=vp.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function mn(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Sn(e,t){return e.length>0?(mn(e,e.length,0,t),e):t}const _p={}.hasOwnProperty;function H2(e){const t={};let n=-1;for(;++n<e.length;)TN(t,e[n]);return t}function TN(e,t){let n;for(n in t){const i=(_p.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){_p.call(i,a)||(i[a]=[]);const o=s[a];kN(i[a],Array.isArray(o)?o:o?[o]:[])}}}function kN(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mn(e,0,0,r)}function U2(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Rn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Kt=Zr(/[A-Za-z]/),Ut=Zr(/[\dA-Za-z]/),SN=Zr(/[#-'*+\--9=?A-Z^-~]/);function ku(e){return e!==null&&(e<32||e===127)}const dd=Zr(/\d/),wN=Zr(/[\dA-Fa-f]/),CN=Zr(/[!-/:-@[-`{-~]/);function ge(e){return e!==null&&e<-2}function Ve(e){return e!==null&&(e<0||e===32)}function Re(e){return e===-2||e===-1||e===32}const el=Zr(new RegExp("\\p{P}|\\p{S}","u")),Ai=Zr(/\s/);function Zr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function xs(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&Ut(e.charCodeAt(n+1))&&Ut(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function De(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(u){return Re(u)?(e.enter(n),o(u)):t(u)}function o(u){return Re(u)&&s++<i?(e.consume(u),o):(e.exit(n),t(u))}}const AN={tokenize:NN};function NN(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),De(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return ge(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const IN={tokenize:ON},Lp={tokenize:vN};function ON(e){const t=this,n=[];let r=0,i,s,a;return o;function o(T){if(r<n.length){const v=n[r];return t.containerState=v[1],e.attempt(v[0].continuation,u,l)(T)}return l(T)}function u(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&E();const v=t.events.length;let C=v,w;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){w=t.events[C][1].end;break}x(r);let M=v;for(;M<t.events.length;)t.events[M][1].end=I({},w),M++;return mn(t.events,C+1,0,t.events.slice(v)),t.events.length=M,l(T)}return o(T)}function l(T){if(r===n.length){if(!i)return h(T);if(i.currentConstruct&&i.currentConstruct.concrete)return m(T);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Lp,c,d)(T)}function c(T){return i&&E(),x(r),h(T)}function d(T){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(T)}function h(T){return t.containerState={},e.attempt(Lp,f,m)(T)}function f(T){return r++,n.push([t.currentConstruct,t.containerState]),h(T)}function m(T){if(T===null){i&&E(),x(0),e.consume(T);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(T)}function b(T){if(T===null){y(e.exit("chunkFlow"),!0),x(0),e.consume(T);return}return ge(T)?(e.consume(T),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(T),b)}function y(T,v){const C=t.sliceStream(T);if(v&&C.push(null),T.previous=s,s&&(s.next=T),s=T,i.defineSkip(T.start),i.write(C),t.parser.lazy[T.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<a&&(!i.events[w][1].end||i.events[w][1].end.offset>a))return;const M=t.events.length;let P=M,U,_;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(U){_=t.events[P][1].end;break}U=!0}for(x(r),w=M;w<t.events.length;)t.events[w][1].end=I({},_),w++;mn(t.events,P+1,0,t.events.slice(M)),t.events.length=w}}function x(T){let v=n.length;for(;v-- >T;){const C=n[v];t.containerState=C[1],C[0].exit.call(t,e)}n.length=T}function E(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function vN(e,t,n){return De(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ls(e){if(e===null||Ve(e)||Ai(e))return 1;if(el(e))return 2}function tl(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const fd={name:"attention",resolveAll:_N,tokenize:LN};function _N(e,t){let n=-1,r,i,s,a,o,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=I({},e[r][1].end),h=I({},e[n][1].start);Rp(d,-u),Rp(h,u),a={type:u>1?"strongSequence":"emphasisSequence",start:d,end:I({},e[r][1].end)},o={type:u>1?"strongSequence":"emphasisSequence",start:I({},e[n][1].start),end:h},s={type:u>1?"strongText":"emphasisText",start:I({},e[r][1].end),end:I({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:I({},a.start),end:I({},o.end)},e[r][1].end=I({},a.start),e[n][1].start=I({},o.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Sn(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Sn(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=Sn(l,tl(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Sn(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Sn(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mn(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function LN(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ls(r);let s;return a;function a(u){return s=u,e.enter("attentionSequence"),o(u)}function o(u){if(u===s)return e.consume(u),o;const l=e.exit("attentionSequence"),c=ls(u),d=!c||c===2&&i||n.includes(u),h=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?d:d&&(i||!h)),l._close=!!(s===42?h:h&&(c||!d)),t(u)}}function Rp(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const RN={name:"autolink",tokenize:MN};function MN(e,t,n){let r=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(f){return Kt(f)?(e.consume(f),a):f===64?n(f):l(f)}function a(f){return f===43||f===45||f===46||Ut(f)?(r=1,o(f)):l(f)}function o(f){return f===58?(e.consume(f),r=0,u):(f===43||f===45||f===46||Ut(f))&&r++<32?(e.consume(f),o):(r=0,l(f))}function u(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||ku(f)?n(f):(e.consume(f),u)}function l(f){return f===64?(e.consume(f),c):SN(f)?(e.consume(f),l):n(f)}function c(f){return Ut(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,c):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):h(f)}function h(f){if((f===45||Ut(f))&&r++<63){const m=f===45?h:d;return e.consume(f),m}return n(f)}}const Oa={partial:!0,tokenize:DN};function DN(e,t,n){return r;function r(s){return Re(s)?De(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||ge(s)?t(s):n(s)}}const j2={continuation:{tokenize:BN},exit:FN,name:"blockQuote",tokenize:PN};function PN(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Re(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function BN(e,t,n){const r=this;return i;function i(a){return Re(a)?De(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(j2,t,n)(a)}}function FN(e){e.exit("blockQuote")}const z2={name:"characterEscape",tokenize:HN};function HN(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return CN(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const $2={name:"characterReference",tokenize:UN};function UN(e,t,n){const r=this;let i=0,s,a;return o;function o(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=Ut,c(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=wN,c):(e.enter("characterReferenceValue"),s=7,a=dd,c(d))}function c(d){if(d===59&&i){const h=e.exit("characterReferenceValue");return a===Ut&&!Bf(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&i++<s?(e.consume(d),c):n(d)}}const Mp={partial:!0,tokenize:zN},Dp={concrete:!0,name:"codeFenced",tokenize:jN};function jN(e,t,n){const r=this,i={partial:!0,tokenize:C};let s=0,a=0,o;return u;function u(w){return l(w)}function l(w){const M=r.events[r.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,o=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===o?(a++,e.consume(w),c):a<3?n(w):(e.exit("codeFencedFenceSequence"),Re(w)?De(e,d,"whitespace")(w):d(w))}function d(w){return w===null||ge(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(Mp,b,v)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||ge(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):Re(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),De(e,f,"whitespace")(w)):w===96&&w===o?n(w):(e.consume(w),h)}function f(w){return w===null||ge(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||ge(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===o?n(w):(e.consume(w),m)}function b(w){return e.attempt(i,v,y)(w)}function y(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),x}function x(w){return s>0&&Re(w)?De(e,E,"linePrefix",s+1)(w):E(w)}function E(w){return w===null||ge(w)?e.check(Mp,b,v)(w):(e.enter("codeFlowValue"),T(w))}function T(w){return w===null||ge(w)?(e.exit("codeFlowValue"),E(w)):(e.consume(w),T)}function v(w){return e.exit("codeFenced"),t(w)}function C(w,M,P){let U=0;return _;function _(Z){return w.enter("lineEnding"),w.consume(Z),w.exit("lineEnding"),j}function j(Z){return w.enter("codeFencedFence"),Re(Z)?De(w,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):F(Z)}function F(Z){return Z===o?(w.enter("codeFencedFenceSequence"),K(Z)):P(Z)}function K(Z){return Z===o?(U++,w.consume(Z),K):U>=a?(w.exit("codeFencedFenceSequence"),Re(Z)?De(w,G,"whitespace")(Z):G(Z)):P(Z)}function G(Z){return Z===null||ge(Z)?(w.exit("codeFencedFence"),M(Z)):P(Z)}}}function zN(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const tc={name:"codeIndented",tokenize:VN},$N={partial:!0,tokenize:qN};function VN(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),De(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?u(l):ge(l)?e.attempt($N,a,u)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||ge(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function u(l){return e.exit("codeIndented"),t(l)}}function qN(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):ge(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):De(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):ge(a)?i(a):n(a)}}const WN={name:"codeText",previous:KN,resolve:YN,tokenize:GN};function YN(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function KN(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function GN(e,t,n){let r=0,i,s;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),o(d)}function o(d){return d===96?(e.consume(d),r++,o):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):ge(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||ge(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),l)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}class QN{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n==null?Number.POSITIVE_INFINITY:n;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&vs(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),vs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),vs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);vs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);vs(this.left,n.reverse())}}}function vs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function V2(e){const t={};let n=-1,r,i,s,a,o,u,l;const c=new QN(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,XN(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=c.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end=I({},c.get(i)[1].start),o=c.slice(i,n),o.unshift(r),c.splice(i,n-i+1,o))}}return mn(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function XN(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,u=[],l={};let c,d,h=-1,f=n,m=0,b=0;const y=[b];for(;f;){for(;e.get(++i)[1]!==f;);s.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(b=h+1,y.push(b),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const x=o.slice(y[h],y[h+1]),E=s.pop();u.push([E,E+x.length-1]),e.splice(E,2,x)}for(u.reverse(),h=-1;++h<u.length;)l[m+u[h][0]]=m+u[h][1],m+=u[h][1]-u[h][0]-1;return l}const JN={resolve:eI,tokenize:tI},ZN={partial:!0,tokenize:nI};function eI(e){return V2(e),e}function tI(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):ge(o)?e.check(ZN,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function nI(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),De(e,s,"linePrefix")}function s(a){if(a===null||ge(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function q2(e,t,n,r,i,s,a,o,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return x===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(x),e.exit(s),h):x===null||x===32||x===41||ku(x)?n(x):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),b(x))}function h(x){return x===62?(e.enter(s),e.consume(x),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===62?(e.exit("chunkString"),e.exit(o),h(x)):x===null||x===60||ge(x)?n(x):(e.consume(x),x===92?m:f)}function m(x){return x===60||x===62||x===92?(e.consume(x),f):f(x)}function b(x){return!c&&(x===null||x===41||Ve(x))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(x)):c<l&&x===40?(e.consume(x),c++,b):x===41?(e.consume(x),c--,b):x===null||x===32||x===40||ku(x)?n(x):(e.consume(x),x===92?y:b)}function y(x){return x===40||x===41||x===92?(e.consume(x),b):b(x)}}function W2(e,t,n,r,i,s){const a=this;let o=0,u;return l;function l(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(s),c}function c(f){return o>999||f===null||f===91||f===93&&!u||f===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(s),e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):ge(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||ge(f)||o++>999?(e.exit("chunkString"),c(f)):(e.consume(f),u||(u=!Re(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(e.consume(f),o++,d):d(f)}}function Y2(e,t,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,u):n(h)}function u(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(s),l(h))}function l(h){return h===a?(e.exit(s),u(a)):h===null?n(h):ge(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),De(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===a||h===null||ge(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?d:c)}function d(h){return h===a||h===92?(e.consume(h),c):c(h)}}function Xs(e,t){let n;return r;function r(i){return ge(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Re(i)?De(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const rI={name:"definition",tokenize:sI},iI={partial:!0,tokenize:aI};function sI(e,t,n){const r=this;let i;return s;function s(f){return e.enter("definition"),a(f)}function a(f){return W2.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return i=Rn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),u):n(f)}function u(f){return Ve(f)?Xs(e,l)(f):l(f)}function l(f){return q2(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return e.attempt(iI,d,d)(f)}function d(f){return Re(f)?De(e,h,"whitespace")(f):h(f)}function h(f){return f===null||ge(f)?(e.exit("definition"),r.parser.defined.push(i),t(f)):n(f)}}function aI(e,t,n){return r;function r(o){return Ve(o)?Xs(e,i)(o):n(o)}function i(o){return Y2(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Re(o)?De(e,a,"whitespace")(o):a(o)}function a(o){return o===null||ge(o)?t(o):n(o)}}const oI={name:"hardBreakEscape",tokenize:uI};function uI(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return ge(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const lI={name:"headingAtx",resolve:cI,tokenize:dI};function cI(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mn(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function dI(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(e.consume(c),a):c===null||Ve(c)?(e.exit("atxHeadingSequence"),o(c)):n(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||ge(c)?(e.exit("atxHeading"),t(c)):Re(c)?De(e,o,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),o(c))}function l(c){return c===null||c===35||Ve(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),l)}}const fI=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pp=["pre","script","style","textarea"],hI={concrete:!0,name:"htmlFlow",resolveTo:gI,tokenize:bI},pI={partial:!0,tokenize:yI},mI={partial:!0,tokenize:xI};function gI(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bI(e,t,n){const r=this;let i,s,a,o,u;return l;function l(O){return c(O)}function c(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),d}function d(O){return O===33?(e.consume(O),h):O===47?(e.consume(O),s=!0,b):O===63?(e.consume(O),i=3,r.interrupt?t:S):Kt(O)?(e.consume(O),a=String.fromCharCode(O),y):n(O)}function h(O){return O===45?(e.consume(O),i=2,f):O===91?(e.consume(O),i=5,o=0,m):Kt(O)?(e.consume(O),i=4,r.interrupt?t:S):n(O)}function f(O){return O===45?(e.consume(O),r.interrupt?t:S):n(O)}function m(O){const ke="CDATA[";return O===ke.charCodeAt(o++)?(e.consume(O),o===ke.length?r.interrupt?t:F:m):n(O)}function b(O){return Kt(O)?(e.consume(O),a=String.fromCharCode(O),y):n(O)}function y(O){if(O===null||O===47||O===62||Ve(O)){const ke=O===47,at=a.toLowerCase();return!ke&&!s&&Pp.includes(at)?(i=1,r.interrupt?t(O):F(O)):fI.includes(a.toLowerCase())?(i=6,ke?(e.consume(O),x):r.interrupt?t(O):F(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):s?E(O):T(O))}return O===45||Ut(O)?(e.consume(O),a+=String.fromCharCode(O),y):n(O)}function x(O){return O===62?(e.consume(O),r.interrupt?t:F):n(O)}function E(O){return Re(O)?(e.consume(O),E):_(O)}function T(O){return O===47?(e.consume(O),_):O===58||O===95||Kt(O)?(e.consume(O),v):Re(O)?(e.consume(O),T):_(O)}function v(O){return O===45||O===46||O===58||O===95||Ut(O)?(e.consume(O),v):C(O)}function C(O){return O===61?(e.consume(O),w):Re(O)?(e.consume(O),C):T(O)}function w(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),u=O,M):Re(O)?(e.consume(O),w):P(O)}function M(O){return O===u?(e.consume(O),u=null,U):O===null||ge(O)?n(O):(e.consume(O),M)}function P(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Ve(O)?C(O):(e.consume(O),P)}function U(O){return O===47||O===62||Re(O)?T(O):n(O)}function _(O){return O===62?(e.consume(O),j):n(O)}function j(O){return O===null||ge(O)?F(O):Re(O)?(e.consume(O),j):n(O)}function F(O){return O===45&&i===2?(e.consume(O),le):O===60&&i===1?(e.consume(O),ye):O===62&&i===4?(e.consume(O),pe):O===63&&i===3?(e.consume(O),S):O===93&&i===5?(e.consume(O),z):ge(O)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(pI,Ie,K)(O)):O===null||ge(O)?(e.exit("htmlFlowData"),K(O)):(e.consume(O),F)}function K(O){return e.check(mI,G,Ie)(O)}function G(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),Z}function Z(O){return O===null||ge(O)?K(O):(e.enter("htmlFlowData"),F(O))}function le(O){return O===45?(e.consume(O),S):F(O)}function ye(O){return O===47?(e.consume(O),a="",me):F(O)}function me(O){if(O===62){const ke=a.toLowerCase();return Pp.includes(ke)?(e.consume(O),pe):F(O)}return Kt(O)&&a.length<8?(e.consume(O),a+=String.fromCharCode(O),me):F(O)}function z(O){return O===93?(e.consume(O),S):F(O)}function S(O){return O===62?(e.consume(O),pe):O===45&&i===2?(e.consume(O),S):F(O)}function pe(O){return O===null||ge(O)?(e.exit("htmlFlowData"),Ie(O)):(e.consume(O),pe)}function Ie(O){return e.exit("htmlFlow"),t(O)}}function xI(e,t,n){const r=this;return i;function i(a){return ge(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function yI(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Oa,t,n)}}const EI={name:"htmlText",tokenize:TI};function TI(e,t,n){const r=this;let i,s,a;return o;function o(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),u}function u(S){return S===33?(e.consume(S),l):S===47?(e.consume(S),C):S===63?(e.consume(S),T):Kt(S)?(e.consume(S),P):n(S)}function l(S){return S===45?(e.consume(S),c):S===91?(e.consume(S),s=0,m):Kt(S)?(e.consume(S),E):n(S)}function c(S){return S===45?(e.consume(S),f):n(S)}function d(S){return S===null?n(S):S===45?(e.consume(S),h):ge(S)?(a=d,ye(S)):(e.consume(S),d)}function h(S){return S===45?(e.consume(S),f):d(S)}function f(S){return S===62?le(S):S===45?h(S):d(S)}function m(S){const pe="CDATA[";return S===pe.charCodeAt(s++)?(e.consume(S),s===pe.length?b:m):n(S)}function b(S){return S===null?n(S):S===93?(e.consume(S),y):ge(S)?(a=b,ye(S)):(e.consume(S),b)}function y(S){return S===93?(e.consume(S),x):b(S)}function x(S){return S===62?le(S):S===93?(e.consume(S),x):b(S)}function E(S){return S===null||S===62?le(S):ge(S)?(a=E,ye(S)):(e.consume(S),E)}function T(S){return S===null?n(S):S===63?(e.consume(S),v):ge(S)?(a=T,ye(S)):(e.consume(S),T)}function v(S){return S===62?le(S):T(S)}function C(S){return Kt(S)?(e.consume(S),w):n(S)}function w(S){return S===45||Ut(S)?(e.consume(S),w):M(S)}function M(S){return ge(S)?(a=M,ye(S)):Re(S)?(e.consume(S),M):le(S)}function P(S){return S===45||Ut(S)?(e.consume(S),P):S===47||S===62||Ve(S)?U(S):n(S)}function U(S){return S===47?(e.consume(S),le):S===58||S===95||Kt(S)?(e.consume(S),_):ge(S)?(a=U,ye(S)):Re(S)?(e.consume(S),U):le(S)}function _(S){return S===45||S===46||S===58||S===95||Ut(S)?(e.consume(S),_):j(S)}function j(S){return S===61?(e.consume(S),F):ge(S)?(a=j,ye(S)):Re(S)?(e.consume(S),j):U(S)}function F(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),i=S,K):ge(S)?(a=F,ye(S)):Re(S)?(e.consume(S),F):(e.consume(S),G)}function K(S){return S===i?(e.consume(S),i=void 0,Z):S===null?n(S):ge(S)?(a=K,ye(S)):(e.consume(S),K)}function G(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||Ve(S)?U(S):(e.consume(S),G)}function Z(S){return S===47||S===62||Ve(S)?U(S):n(S)}function le(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):n(S)}function ye(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),me}function me(S){return Re(S)?De(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):z(S)}function z(S){return e.enter("htmlTextData"),a(S)}}const Ff={name:"labelEnd",resolveAll:CI,resolveTo:AI,tokenize:NI},kI={tokenize:II},SI={tokenize:OI},wI={tokenize:vI};function CI(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&mn(e,0,e.length,n),e}function AI(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:I({},e[s][1].start),end:I({},e[e.length-1][1].end)},l={type:"label",start:I({},e[s][1].start),end:I({},e[a][1].end)},c={type:"labelText",start:I({},e[s+r+2][1].end),end:I({},e[a-2][1].start)};return o=[["enter",u,t],["enter",l,t]],o=Sn(o,e.slice(s+1,s+r+3)),o=Sn(o,[["enter",c,t]]),o=Sn(o,tl(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=Sn(o,[["exit",c,t],e[a-2],e[a-1],["exit",l,t]]),o=Sn(o,e.slice(a+1)),o=Sn(o,[["exit",u,t]]),mn(e,s,e.length,o),e}function NI(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?d(h):(a=r.parser.defined.includes(Rn(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),u):n(h)}function u(h){return h===40?e.attempt(kI,c,a?c:d)(h):h===91?e.attempt(SI,c,a?l:d)(h):a?c(h):d(h)}function l(h){return e.attempt(wI,c,d)(h)}function c(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function II(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Ve(d)?Xs(e,s)(d):s(d)}function s(d){return d===41?c(d):q2(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return Ve(d)?Xs(e,u)(d):c(d)}function o(d){return n(d)}function u(d){return d===34||d===39||d===40?Y2(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return Ve(d)?Xs(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function OI(e,t,n){const r=this;return i;function i(o){return W2.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Rn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function vI(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const _I={name:"labelStartImage",resolveAll:Ff.resolveAll,tokenize:LI};function LI(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const RI={name:"labelStartLink",resolveAll:Ff.resolveAll,tokenize:MI};function MI(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const nc={name:"lineEnding",tokenize:DI};function DI(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),De(e,t,"linePrefix")}}const Eo={name:"thematicBreak",tokenize:PI};function PI(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||ge(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Re(l)?De(e,o,"whitespace")(l):o(l))}}const tn={continuation:{tokenize:UI},exit:zI,name:"list",tokenize:HI},BI={partial:!0,tokenize:$I},FI={partial:!0,tokenize:jI};function HI(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:dd(f)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Eo,n,l)(f):l(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(f)}return n(f)}function u(f){return dd(f)&&++a<10?(e.consume(f),u):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),l(f)):n(f)}function l(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Oa,r.interrupt?n:c,e.attempt(BI,h,d))}function c(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function d(f){return Re(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function UI(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Oa,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,De(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!Re(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(FI,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,De(e,e.attempt(tn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function jI(e,t,n){const r=this;return De(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function zI(e){e.exit(this.containerState.type)}function $I(e,t,n){const r=this;return De(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Re(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Bp={name:"setextUnderline",resolveTo:VI,tokenize:qI};function VI(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:I({},e[r][1].start),end:I({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=I({},e[s][1].end)):e[r][1]=a,e.push(["exit",a,t]),e}function qI(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),Re(l)?De(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||ge(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const WI={tokenize:YI};function YI(e){const t=this,n=e.attempt(Oa,r,e.attempt(this.parser.constructs.flowInitial,i,De(e,e.attempt(this.parser.constructs.flow,i,e.attempt(JN,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const KI={resolveAll:G2()},GI=K2("string"),QI=K2("text");function K2(e){return{resolveAll:G2(e==="text"?XI:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(c){return l(c)?s(c):o(c)}function o(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const d=i[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function G2(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function XI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)u=!0,o++;else if(l!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const l={type:n===e.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:I({},r.end)};r.end=I({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const JI={42:tn,43:tn,45:tn,48:tn,49:tn,50:tn,51:tn,52:tn,53:tn,54:tn,55:tn,56:tn,57:tn,62:j2},ZI={91:rI},e5={[-2]:tc,[-1]:tc,32:tc},t5={35:lI,42:Eo,45:[Bp,Eo],60:hI,61:Bp,95:Eo,96:Dp,126:Dp},n5={38:$2,92:z2},r5={[-5]:nc,[-4]:nc,[-3]:nc,33:_I,38:$2,42:fd,60:[RN,EI],91:RI,92:[oI,z2],93:Ff,95:fd,96:WN},i5={null:[fd,KI]},s5={null:[42,95]},a5={null:[]},o5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:s5,contentInitial:ZI,disable:a5,document:JI,flow:t5,flowInitial:e5,insideSpan:i5,string:n5,text:r5},Symbol.toStringTag,{value:"Module"}));function u5(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const u={attempt:M(C),check:M(w),consume:E,enter:T,exit:v,interrupt:M(w,{interrupt:!0})},l={code:null,containerState:{},defineSkip:b,events:[],now:m,parser:e,previous:null,sliceSerialize:h,sliceStream:f,write:d};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function d(j){return a=Sn(a,j),y(),a[a.length-1]!==null?[]:(P(t,0),l.events=tl(s,l.events,l),l.events)}function h(j,F){return c5(f(j),F)}function f(j){return l5(a,j)}function m(){const{_bufferIndex:j,_index:F,line:K,column:G,offset:Z}=r;return{_bufferIndex:j,_index:F,line:K,column:G,offset:Z}}function b(j){i[j.line]=j.column,_()}function y(){let j;for(;r._index<a.length;){const F=a[r._index];if(typeof F=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<F.length;)x(F.charCodeAt(r._bufferIndex));else x(F)}}function x(j){c=c(j)}function E(j){ge(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,_()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=j}function T(j,F){const K=F||{};return K.type=j,K.start=m(),l.events.push(["enter",K,l]),o.push(K),K}function v(j){const F=o.pop();return F.end=m(),l.events.push(["exit",F,l]),F}function C(j,F){P(j,F.from)}function w(j,F){F.restore()}function M(j,F){return K;function K(G,Z,le){let ye,me,z,S;return Array.isArray(G)?Ie(G):"tokenize"in G?Ie([G]):pe(G);function pe(Se){return Tt;function Tt(gt){const St=gt!==null&&Se[gt],Mt=gt!==null&&Se.null,je=[...Array.isArray(St)?St:St?[St]:[],...Array.isArray(Mt)?Mt:Mt?[Mt]:[]];return Ie(je)(gt)}}function Ie(Se){return ye=Se,me=0,Se.length===0?le:O(Se[me])}function O(Se){return Tt;function Tt(gt){return S=U(),z=Se,Se.partial||(l.currentConstruct=Se),Se.name&&l.parser.constructs.disable.null.includes(Se.name)?at():Se.tokenize.call(F?Object.assign(Object.create(l),F):l,u,ke,at)(gt)}}function ke(Se){return j(z,S),Z}function at(Se){return S.restore(),++me<ye.length?O(ye[me]):le}}}function P(j,F){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&mn(l.events,F,l.events.length-F,j.resolve(l.events.slice(F),l)),j.resolveTo&&(l.events=j.resolveTo(l.events,l))}function U(){const j=m(),F=l.previous,K=l.currentConstruct,G=l.events.length,Z=Array.from(o);return{from:G,restore:le};function le(){r=j,l.previous=F,l.currentConstruct=K,l.events.length=G,o=Z,_()}}function _(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function l5(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function c5(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function d5(e){const r={constructs:H2([o5,...(e||{}).extensions||[]]),content:i(AN),defined:[],document:i(IN),flow:i(WI),lazy:{},string:i(GI),text:i(QI)};return r;function i(s){return a;function a(o){return u5(r,s,o)}}}function f5(e){for(;!V2(e););return e}const Fp=/[\0\t\n\r]/g;function h5(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const u=[];let l,c,d,h,f;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Fp.lastIndex=d,l=Fp.exec(s),h=l&&l.index!==void 0?l.index:s.length,f=s.charCodeAt(h),!l){t=s.slice(d);break}if(f===10&&d===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<h&&(u.push(s.slice(d,h)),e+=h-d),f){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return o&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const p5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function m5(e){return e.replace(p5,g5)}function g5(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return U2(n.slice(s?2:1),s?16:10)}return Bf(n)||e}const Q2={}.hasOwnProperty;function b5(e,t,n){return typeof t!="string"&&(n=t,t=void 0),x5(n)(f5(d5(n).document().write(h5()(e,t,!0))))}function x5(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(qt),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(Ar),blockQuote:s(Mt),characterEscape:U,characterReference:U,codeFenced:s(je),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(je,a),codeText:s(ot,a),codeTextData:U,data:U,codeFlowValue:U,definition:s(gn),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Cr),hardBreakEscape:s(bn),hardBreakTrailing:s(bn),htmlFlow:s(Dt,a),htmlFlowData:U,htmlText:s(Dt,a),htmlTextData:U,image:s(un),label:a,link:s(qt),listItem:s(Ee),listItemValue:h,listOrdered:s(Fn,d),listUnordered:s(Fn),paragraph:s(Me),reference:O,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Ar),strong:s(ut),thematicBreak:s(it)},exit:{atxHeading:u(),atxHeadingSequence:C,autolink:u(),autolinkEmail:St,autolinkProtocol:gt,blockQuote:u(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:Se,characterReference:Tt,codeFenced:u(y),codeFencedFence:b,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:_,codeIndented:u(x),codeText:u(Z),codeTextData:_,data:_,definition:u(),definitionDestinationString:v,definitionLabelString:E,definitionTitleString:T,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(K),htmlFlowData:_,htmlText:u(G),htmlTextData:_,image:u(ye),label:z,labelText:me,lineEnding:j,link:u(le),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ke,resourceDestinationString:S,resourceTitleString:pe,resource:Ie,setextHeading:u(P),setextHeadingLineSequence:M,setextHeadingText:w,strong:u(),thematicBreak:u()}};X2(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(D){let ee={type:"root",children:[]};const xe={stack:[ee],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:c,data:n},ce=[];let ve=-1;for(;++ve<D.length;)if(D[ve][1].type==="listOrdered"||D[ve][1].type==="listUnordered")if(D[ve][0]==="enter")ce.push(ve);else{const ft=ce.pop();ve=i(D,ft,ve)}for(ve=-1;++ve<D.length;){const ft=t[D[ve][0]];Q2.call(ft,D[ve][1].type)&&ft[D[ve][1].type].call(Object.assign({sliceSerialize:D[ve][2].sliceSerialize},xe),D[ve][1])}if(xe.tokenStack.length>0){const ft=xe.tokenStack[xe.tokenStack.length-1];(ft[1]||Hp).call(xe,void 0,ft[0])}for(ee.position={start:vr(D.length>0?D[0][1].start:{line:1,column:1,offset:0}),end:vr(D.length>0?D[D.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<t.transforms.length;)ee=t.transforms[ve](ee)||ee;return ee}function i(D,ee,xe){let ce=ee-1,ve=-1,ft=!1,xn,$,X,oe;for(;++ce<=xe;){const Ce=D[ce];switch(Ce[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ce[0]==="enter"?ve++:ve--,oe=void 0;break}case"lineEndingBlank":{Ce[0]==="enter"&&(xn&&!oe&&!ve&&!X&&(X=ce),oe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:oe=void 0}if(!ve&&Ce[0]==="enter"&&Ce[1].type==="listItemPrefix"||ve===-1&&Ce[0]==="exit"&&(Ce[1].type==="listUnordered"||Ce[1].type==="listOrdered")){if(xn){let Pe=ce;for($=void 0;Pe--;){const Be=D[Pe];if(Be[1].type==="lineEnding"||Be[1].type==="lineEndingBlank"){if(Be[0]==="exit")continue;$&&(D[$][1].type="lineEndingBlank",ft=!0),Be[1].type="lineEnding",$=Pe}else if(!(Be[1].type==="linePrefix"||Be[1].type==="blockQuotePrefix"||Be[1].type==="blockQuotePrefixWhitespace"||Be[1].type==="blockQuoteMarker"||Be[1].type==="listItemIndent"))break}X&&(!$||X<$)&&(xn._spread=!0),xn.end=Object.assign({},$?D[$][1].start:Ce[1].end),D.splice($||ce,0,["exit",xn,Ce[2]]),ce++,xe++}if(Ce[1].type==="listItemPrefix"){const Pe={type:"listItem",_spread:!1,start:Object.assign({},Ce[1].start),end:void 0};xn=Pe,D.splice(ce,0,["enter",Pe,Ce[2]]),ce++,xe++,X=void 0,oe=!0}}}return D[ee][1]._spread=ft,xe}function s(D,ee){return xe;function xe(ce){o.call(this,D(ce),ce),ee&&ee.call(this,ce)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(D,ee,xe){this.stack[this.stack.length-1].children.push(D),this.stack.push(D),this.tokenStack.push([ee,xe||void 0]),D.position={start:vr(ee.start),end:void 0}}function u(D){return ee;function ee(xe){D&&D.call(this,xe),l.call(this,xe)}}function l(D,ee){const xe=this.stack.pop(),ce=this.tokenStack.pop();if(ce)ce[0].type!==D.type&&(ee?ee.call(this,D,ce[0]):(ce[1]||Hp).call(this,D,ce[0]));else throw new Error("Cannot close `"+D.type+"` ("+Qs({start:D.start,end:D.end})+"): its not open");xe.position.end=vr(D.end)}function c(){return Pf(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(D){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(D),10),this.data.expectingFirstListItemValue=void 0}}function f(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=D}function m(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=D}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.value=D.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.value=D.replace(/(\r?\n|\r)$/g,"")}function E(D){const ee=this.resume(),xe=this.stack[this.stack.length-1];xe.label=ee,xe.identifier=Rn(this.sliceSerialize(D)).toLowerCase()}function T(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.title=D}function v(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.url=D}function C(D){const ee=this.stack[this.stack.length-1];if(!ee.depth){const xe=this.sliceSerialize(D).length;ee.depth=xe}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function M(D){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(D).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function U(D){const xe=this.stack[this.stack.length-1].children;let ce=xe[xe.length-1];(!ce||ce.type!=="text")&&(ce=dt(),ce.position={start:vr(D.start),end:void 0},xe.push(ce)),this.stack.push(ce)}function _(D){const ee=this.stack.pop();ee.value+=this.sliceSerialize(D),ee.position.end=vr(D.end)}function j(D){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=ee.children[ee.children.length-1];xe.position.end=vr(D.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ee.type)&&(U.call(this,D),_.call(this,D))}function F(){this.data.atHardBreak=!0}function K(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.value=D}function G(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.value=D}function Z(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.value=D}function le(){const D=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=ee,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function ye(){const D=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=ee,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function me(D){const ee=this.sliceSerialize(D),xe=this.stack[this.stack.length-2];xe.label=m5(ee),xe.identifier=Rn(ee).toLowerCase()}function z(){const D=this.stack[this.stack.length-1],ee=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const ce=D.children;xe.children=ce}else xe.alt=ee}function S(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.url=D}function pe(){const D=this.resume(),ee=this.stack[this.stack.length-1];ee.title=D}function Ie(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ke(D){const ee=this.resume(),xe=this.stack[this.stack.length-1];xe.label=ee,xe.identifier=Rn(this.sliceSerialize(D)).toLowerCase(),this.data.referenceType="full"}function at(D){this.data.characterReferenceType=D.type}function Se(D){const ee=this.sliceSerialize(D),xe=this.data.characterReferenceType;let ce;xe?(ce=U2(ee,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ce=Bf(ee);const ve=this.stack[this.stack.length-1];ve.value+=ce}function Tt(D){const ee=this.stack.pop();ee.position.end=vr(D.end)}function gt(D){_.call(this,D);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(D)}function St(D){_.call(this,D);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(D)}function Mt(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function ot(){return{type:"inlineCode",value:""}}function gn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Cr(){return{type:"emphasis",children:[]}}function Ar(){return{type:"heading",depth:0,children:[]}}function bn(){return{type:"break"}}function Dt(){return{type:"html",value:""}}function un(){return{type:"image",title:null,url:"",alt:null}}function qt(){return{type:"link",title:null,url:"",children:[]}}function Fn(D){return{type:"list",ordered:D.type==="listOrdered",start:null,spread:D._spread,children:[]}}function Ee(D){return{type:"listItem",spread:D._spread,checked:null,children:[]}}function Me(){return{type:"paragraph",children:[]}}function ut(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function it(){return{type:"thematicBreak"}}}function vr(e){return{line:e.line,column:e.column,offset:e.offset}}function X2(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?X2(e,r):y5(e,r)}}function y5(e,t){let n;for(n in t)if(Q2.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Hp(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Qs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Qs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Qs({start:t.start,end:t.end})+") is still open")}function E5(e){const t=this;t.parser=n;function n(r){return b5(r,re(I(I({},t.data("settings")),e),{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}function T5(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function k5(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function S5(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function w5(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function C5(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function A5(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=xs(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function N5(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function I5(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function J2(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function O5(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return J2(e,t);const i={src:xs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function v5(e,t){const n={src:xs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function _5(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function L5(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return J2(e,t);const i={href:xs(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function R5(e,t){const n={href:xs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function M5(e,t,n){const r=e.all(t),i=n?D5(n):Z2(t),s={},a=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?a.push(...c.children):a.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,l),e.applyData(t,l)}function D5(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Z2(n[r])}return t}function Z2(e){const t=e.spread;return t==null?e.children.length>1:t}function P5(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function B5(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function F5(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function H5(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function U5(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=nr(t.children[1]),u=Zu(t.children[t.children.length-1]);o&&u&&(a.position={start:o,end:u}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function j5(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let u=-1;const l=[];for(;++u<o;){const d=t.children[u],h={},f=a?a[u]:void 0;f&&(h.align=f);let m={type:"element",tagName:s,properties:h,children:[]};d&&(m.children=e.all(d),e.patch(d,m),m=e.applyData(d,m)),l.push(m)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function z5(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Up=9,jp=32;function $5(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(zp(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(zp(t.slice(i),i>0,!1)),s.join("")}function zp(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Up||s===jp;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Up||s===jp;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function V5(e,t){const n={type:"text",value:$5(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function q5(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const W5={blockquote:T5,break:k5,code:S5,delete:w5,emphasis:C5,footnoteReference:A5,heading:N5,html:I5,imageReference:O5,image:v5,inlineCode:_5,linkReference:L5,link:R5,listItem:M5,list:P5,paragraph:B5,root:F5,strong:H5,table:U5,tableCell:z5,tableRow:j5,text:V5,thematicBreak:q5,toml:io,yaml:io,definition:io,footnoteDefinition:io};function io(){}const ex=-1,nl=0,Js=1,Su=2,Hf=3,Uf=4,jf=5,zf=6,tx=7,nx=8,$p=typeof self=="object"?self:globalThis,Y5=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case nl:case ex:return n(a,i);case Js:{const o=n([],i);for(const u of a)o.push(r(u));return o}case Su:{const o=n({},i);for(const[u,l]of a)o[r(u)]=r(l);return o}case Hf:return n(new Date(a),i);case Uf:{const{source:o,flags:u}=a;return n(new RegExp(o,u),i)}case jf:{const o=n(new Map,i);for(const[u,l]of a)o.set(r(u),r(l));return o}case zf:{const o=n(new Set,i);for(const u of a)o.add(r(u));return o}case tx:{const{name:o,message:u}=a;return n(new $p[o](u),i)}case nx:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new $p[s](a),i)};return r},Vp=e=>Y5(new Map,e)(0),Bi="",{toString:K5}={},{keys:G5}=Object,_s=e=>{const t=typeof e;if(t!=="object"||!e)return[nl,t];const n=K5.call(e).slice(8,-1);switch(n){case"Array":return[Js,Bi];case"Object":return[Su,Bi];case"Date":return[Hf,Bi];case"RegExp":return[Uf,Bi];case"Map":return[jf,Bi];case"Set":return[zf,Bi];case"DataView":return[Js,n]}return n.includes("Array")?[Js,n]:n.includes("Error")?[tx,n]:[Su,n]},so=([e,t])=>e===nl&&(t==="function"||t==="symbol"),Q5=(e,t,n,r)=>{const i=(a,o)=>{const u=r.push(a)-1;return n.set(o,u),u},s=a=>{if(n.has(a))return n.get(a);let[o,u]=_s(a);switch(o){case nl:{let c=a;switch(u){case"bigint":o=nx,c=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([ex],a)}return i([o,c],a)}case Js:{if(u){let h=a;return u==="DataView"?h=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(h=new Uint8Array(a)),i([u,[...h]],a)}const c=[],d=i([o,c],a);for(const h of a)c.push(s(h));return d}case Su:{if(u)switch(u){case"BigInt":return i([u,a.toString()],a);case"Boolean":case"Number":case"String":return i([u,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const c=[],d=i([o,c],a);for(const h of G5(a))(e||!so(_s(a[h])))&&c.push([s(h),s(a[h])]);return d}case Hf:return i([o,a.toISOString()],a);case Uf:{const{source:c,flags:d}=a;return i([o,{source:c,flags:d}],a)}case jf:{const c=[],d=i([o,c],a);for(const[h,f]of a)(e||!(so(_s(h))||so(_s(f))))&&c.push([s(h),s(f)]);return d}case zf:{const c=[],d=i([o,c],a);for(const h of a)(e||!so(_s(h)))&&c.push(s(h));return d}}const{message:l}=a;return i([o,{name:u,message:l}],a)};return s},qp=(e,{json:t,lossy:n}={})=>{const r=[];return Q5(!(t||n),!!t,new Map,r)(e),r},cs=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Vp(qp(e,t)):structuredClone(e):(e,t)=>Vp(qp(e,t));function X5(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function J5(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Z5(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||X5,r=e.options.footnoteBackLabel||J5,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),d=String(l.identifier).toUpperCase(),h=xs(d.toLowerCase());let f=0;const m=[],b=e.footnoteCounts.get(d);for(;b!==void 0&&++f<=b;){m.length>0&&m.push({type:"text",value:" "});let E=typeof n=="string"?n:n(u,f);typeof E=="string"&&(E={type:"text",value:E}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,f),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const E=y.children[y.children.length-1];E&&E.type==="text"?E.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else c.push(...m);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(c,!0)};e.patch(l,x),o.push(x)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:re(I({},cs(a)),{id:"footnote-label"}),children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const rl=(function(e){if(e==null)return rO;if(typeof e=="function")return il(e);if(typeof e=="object")return Array.isArray(e)?eO(e):tO(e);if(typeof e=="string")return nO(e);throw new Error("Expected function, string, or object as test")});function eO(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=rl(e[n]);return il(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function tO(e){const t=e;return il(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function nO(e){return il(t);function t(n){return n&&n.type===e}}function il(e){return t;function t(n,r,i){return!!(iO(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function rO(){return!0}function iO(e){return e!==null&&typeof e=="object"&&"type"in e}const rx=[],sO=!0,hd=!1,aO="skip";function ix(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=rl(i),a=r?-1:1;o(e,void 0,[])();function o(u,l,c){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(u.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=rx,m,b,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(f=oO(n(u,c)),f[0]===hd))return f;if("children"in u&&u.children){const x=u;if(x.children&&f[0]!==aO)for(b=(r?x.children.length:-1)+a,y=c.concat(x);b>-1&&b<x.children.length;){const E=x.children[b];if(m=o(E,b,y)(),m[0]===hd)return m;b=typeof m[1]=="number"?m[1]:b+a}}return f}}}function oO(e){return Array.isArray(e)?e:typeof e=="number"?[sO,e]:e==null?rx:[e]}function sl(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),ix(e,s,o,i);function o(u,l){const c=l[l.length-1],d=c?c.children.indexOf(u):void 0;return a(u,d,c)}}const pd={}.hasOwnProperty,uO={};function lO(e,t){const n=t||uO,r=new Map,i=new Map,s=new Map,a=I(I({},W5),n.handlers),o={all:l,applyData:dO,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:u,options:n,patch:cO,wrap:hO};return sl(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,h=String(c.identifier).toUpperCase();d.has(h)||d.set(h,c)}}),o;function u(c,d){const h=c.type,f=o.handlers[h];if(pd.call(o.handlers,h)&&f)return f(o,c,d);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in c){const b=c,{children:y}=b,x=ln(b,["children"]),E=cs(x);return E.children=o.all(c),E}return cs(c)}return(o.options.unknownHandler||fO)(o,c,d)}function l(c){const d=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const m=o.one(h[f],c);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Wp(m.value)),!Array.isArray(m)&&m.type==="element")){const b=m.children[0];b&&b.type==="text"&&(b.value=Wp(b.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function cO(e,t){e.position&&(t.position=J4(e))}function dO(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,cs(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function fO(e,t){const n=t.data||{},r="value"in t&&!(pd.call(n,"hProperties")||pd.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function hO(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Wp(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Yp(e,t){const n=lO(e,t),r=n.one(e,void 0),i=Z5(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function pO(e,t){return e&&"run"in e?function(n,r){return Je(this,null,function*(){const i=Yp(n,I({file:r},t));yield e.run(i,r)})}:function(n,r){return Yp(n,I({file:r},e||t))}}function Kp(e){if(e)throw e}var rc,Gp;function mO(){if(Gp)return rc;Gp=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!d)return!1;var h;for(h in l);return typeof h=="undefined"||e.call(l,h)},a=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},o=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return rc=function u(){var l,c,d,h,f,m,b=arguments[0],y=1,x=arguments.length,E=!1;for(typeof b=="boolean"&&(E=b,b=arguments[1]||{},y=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});y<x;++y)if(l=arguments[y],l!=null)for(c in l)d=o(b,c),h=o(l,c),b!==h&&(E&&h&&(s(h)||(f=i(h)))?(f?(f=!1,m=d&&i(d)?d:[]):m=d&&s(d)?d:{},a(b,{name:c,newValue:u(E,m,h)})):typeof h!="undefined"&&a(b,{name:c,newValue:h}));return b},rc}var gO=mO();const ic=ka(gO);function md(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function bO(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(u,...l){const c=e[++s];let d=-1;if(u){a(u);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,c?xO(c,o)(...l):a(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function xO(e,t){let n;return r;function r(...a){const o=e.length>a.length;let u;o&&a.push(i);try{u=e.apply(this,a)}catch(l){const c=l;if(o&&n)throw c;return i(c)}o||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const $n={basename:yO,dirname:EO,extname:TO,join:kO,sep:"/"};function yO(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');va(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function EO(e){if(va(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function TO(e){va(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function kO(...e){let t=-1,n;for(;++t<e.length;)va(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":SO(n)}function SO(e){va(e);const t=e.codePointAt(0)===47;let n=wO(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wO(e,t){let n="",r=0,i=-1,s=0,a=-1,o,u;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function va(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CO={cwd:AO};function AO(){return"/"}function gd(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function NO(e){if(typeof e=="string")e=new URL(e);else if(!gd(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return IO(e)}function IO(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const sc=["history","path","basename","stem","extname","dirname"];class sx{constructor(t){let n;t?gd(t)?n={path:t}:typeof t=="string"||OO(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":CO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<sc.length;){const s=sc[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)sc.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?$n.basename(this.path):void 0}set basename(t){oc(t,"basename"),ac(t,"basename"),this.path=$n.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?$n.dirname(this.path):void 0}set dirname(t){Qp(this.basename,"dirname"),this.path=$n.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?$n.extname(this.path):void 0}set extname(t){if(ac(t,"extname"),Qp(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$n.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){gd(t)&&(t=NO(t)),oc(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?$n.basename(this.path,this.extname):void 0}set stem(t){oc(t,"stem"),ac(t,"stem"),this.path=$n.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new zt(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ac(e,t){if(e&&e.includes($n.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$n.sep+"`")}function oc(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Qp(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function OO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vO=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),_O={}.hasOwnProperty;class $f extends vO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=bO()}copy(){const t=new $f;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ic(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(cc("data",this.frozen),this.namespace[t]=n,this):_O.call(this.namespace,t)&&this.namespace[t]||void 0:t?(cc("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ao(t),r=this.parser||this.Parser;return uc("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),uc("process",this.parser||this.Parser),lc("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=ao(t),u=r.parse(o);r.run(u,o,function(c,d,h){if(c||!d||!h)return l(c);const f=d,m=r.stringify(f,h);MO(m)?h.value=m:h.result=m,l(c,h)});function l(c,d){c||!d?a(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),uc("processSync",this.parser||this.Parser),lc("processSync",this.compiler||this.Compiler),this.process(t,i),Jp("processSync","process",n),r;function i(s,a){n=!0,Kp(s),r=a}}run(t,n,r){Xp(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const u=ao(n);i.run(t,u,l);function l(c,d,h){const f=d||t;c?o(c):a?a(f):r(void 0,f,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Jp("runSync","run",r),i;function s(a,o){Kp(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=ao(n),i=this.compiler||this.Compiler;return lc("stringify",i),Xp(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(cc("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...d]=l;u(c,d)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=ic(!0,i.settings,l.settings))}function o(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const d=l[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===l){h=d;break}if(h===-1)r.push([l,...c]);else if(c.length>0){let[f,...m]=c;const b=r[h][1];md(b)&&md(f)&&(f=ic(!0,b,f)),r[h]=[l,f,...m]}}}}const LO=new $f().freeze();function uc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function lc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function cc(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Xp(e){if(!md(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Jp(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ao(e){return RO(e)?e:new sx(e)}function RO(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function MO(e){return typeof e=="string"||DO(e)}function DO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const PO="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Zp=[],em={allowDangerousHtml:!0},BO=/^(https?|ircs?|mailto|xmpp)$/i,FO=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function To(e){const t=HO(e),n=UO(e);return jO(t.runSync(t.parse(n),n),e)}function HO(e){const t=e.rehypePlugins||Zp,n=e.remarkPlugins||Zp,r=e.remarkRehypeOptions?I(I({},e.remarkRehypeOptions),em):em;return LO().use(E5).use(n).use(pO,r).use(t)}function UO(e){const t=e.children||"",n=new sx;return typeof t=="string"&&(n.value=t),n}function jO(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,u=t.urlTransform||zO;for(const c of FO)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+PO+c.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),sl(e,l),rN(e,{Fragment:g.Fragment,components:i,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function l(c,d,h){if(c.type==="raw"&&h&&typeof d=="number")return a?h.children.splice(d,1):h.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let f;for(f in ec)if(Object.hasOwn(ec,f)&&Object.hasOwn(c.properties,f)){const m=c.properties[f],b=ec[f];(b===null||b.includes(c.tagName))&&(c.properties[f]=u(String(m||""),f,c))}}if(c.type==="element"){let f=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(c,d,h)),f&&h&&typeof d=="number")return o&&c.children?h.children.splice(d,1,...c.children):h.children.splice(d,1),d}}}function zO(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||BO.test(e.slice(0,t))?e:""}function tm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function $O(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function VO(e,t,n){const i=rl((n||{}).ignore||[]),s=qO(t);let a=-1;for(;++a<s.length;)ix(e,"text",o);function o(l,c){let d=-1,h;for(;++d<c.length;){const f=c[d],m=h?h.children:void 0;if(i(f,m?m.indexOf(f):void 0,h))return;h=f}if(h)return u(l,c)}function u(l,c){const d=c[c.length-1],h=s[a][0],f=s[a][1];let m=0;const y=d.children.indexOf(l);let x=!1,E=[];h.lastIndex=0;let T=h.exec(l.value);for(;T;){const v=T.index,C={index:T.index,input:T.input,stack:[...c,l]};let w=f(...T,C);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?h.lastIndex=v+1:(m!==v&&E.push({type:"text",value:l.value.slice(m,v)}),Array.isArray(w)?E.push(...w):w&&E.push(w),m=v+T[0].length,x=!0),!h.global)break;T=h.exec(l.value)}return x?(m<l.value.length&&E.push({type:"text",value:l.value.slice(m)}),d.children.splice(y,1,...E)):E=[l],y+E.length}}function qO(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([WO(i[0]),YO(i[1])])}return t}function WO(e){return typeof e=="string"?new RegExp($O(e),"g"):e}function YO(e){return typeof e=="function"?e:function(){return e}}const dc="phrasing",fc=["autolink","link","image","label"];function KO(){return{transforms:[t8],enter:{literalAutolink:QO,literalAutolinkEmail:hc,literalAutolinkHttp:hc,literalAutolinkWww:hc},exit:{literalAutolink:e8,literalAutolinkEmail:ZO,literalAutolinkHttp:XO,literalAutolinkWww:JO}}}function GO(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:dc,notInConstruct:fc},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:dc,notInConstruct:fc},{character:":",before:"[ps]",after:"\\/",inConstruct:dc,notInConstruct:fc}]}}function QO(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function hc(e){this.config.enter.autolinkProtocol.call(this,e)}function XO(e){this.config.exit.autolinkProtocol.call(this,e)}function JO(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ZO(e){this.config.exit.autolinkEmail.call(this,e)}function e8(e){this.exit(e)}function t8(e){VO(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,n8],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),r8]],{ignore:["link","linkReference"]})}function n8(e,t,n,r,i){let s="";if(!ax(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!i8(n)))return!1;const a=s8(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function r8(e,t,n,r){return!ax(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function i8(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function s8(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=tm(e,"(");let s=tm(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function ax(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ai(n)||el(n))&&(!t||n!==47)}ox.peek=p8;function a8(){this.buffer()}function o8(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function u8(){this.buffer()}function l8(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function c8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function d8(e){this.exit(e)}function f8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Rn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function h8(e){this.exit(e)}function p8(){return"["}function ox(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function m8(){return{enter:{gfmFootnoteCallString:a8,gfmFootnoteCall:o8,gfmFootnoteDefinitionLabelString:u8,gfmFootnoteDefinition:l8},exit:{gfmFootnoteCallString:c8,gfmFootnoteCall:d8,gfmFootnoteDefinitionLabelString:f8,gfmFootnoteDefinition:h8}}}function g8(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:ox},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let u=o.move("[^");const l=s.enter("footnoteDefinition"),c=s.enter("label");return u+=o.move(s.safe(s.associationId(r),{before:u,after:"]"})),c(),u+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),u+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?ux:b8))),l(),u}}function b8(e,t,n){return t===0?e:ux(e,t,n)}function ux(e,t,n){return(n?"":"    ")+e}const x8=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];lx.peek=S8;function y8(){return{canContainEols:["delete"],enter:{strikethrough:T8},exit:{strikethrough:k8}}}function E8(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:x8}],handlers:{delete:lx}}}function T8(e){this.enter({type:"delete",children:[]},e)}function k8(e){this.exit(e)}function lx(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,re(I({},i.current()),{before:a,after:"~"})),a+=i.move("~~"),s(),a}function S8(){return"~"}function w8(e){return e.length}function C8(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||w8,s=[],a=[],o=[],u=[];let l=0,c=-1;for(;++c<e.length;){const b=[],y=[];let x=-1;for(e[c].length>l&&(l=e[c].length);++x<e[c].length;){const E=A8(e[c][x]);if(n.alignDelimiters!==!1){const T=i(E);y[x]=T,(u[x]===void 0||T>u[x])&&(u[x]=T)}b.push(E)}a[c]=b,o[c]=y}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<l;)s[d]=nm(r[d]);else{const b=nm(r);for(;++d<l;)s[d]=b}d=-1;const h=[],f=[];for(;++d<l;){const b=s[d];let y="",x="";b===99?(y=":",x=":"):b===108?y=":":b===114&&(x=":");let E=n.alignDelimiters===!1?1:Math.max(1,u[d]-y.length-x.length);const T=y+"-".repeat(E)+x;n.alignDelimiters!==!1&&(E=y.length+E+x.length,E>u[d]&&(u[d]=E),f[d]=E),h[d]=T}a.splice(1,0,h),o.splice(1,0,f),c=-1;const m=[];for(;++c<a.length;){const b=a[c],y=o[c];d=-1;const x=[];for(;++d<l;){const E=b[d]||"";let T="",v="";if(n.alignDelimiters!==!1){const C=u[d]-(y[d]||0),w=s[d];w===114?T=" ".repeat(C):w===99?C%2?(T=" ".repeat(C/2+.5),v=" ".repeat(C/2-.5)):(T=" ".repeat(C/2),v=T):v=" ".repeat(C)}n.delimiterStart!==!1&&!d&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||d)&&x.push(" "),n.alignDelimiters!==!1&&x.push(T),x.push(E),n.alignDelimiters!==!1&&x.push(v),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||d!==l-1)&&x.push("|")}m.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return m.join(`
`)}function A8(e){return e==null?"":String(e)}function nm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const rm={}.hasOwnProperty;function cx(e,t){const n=t||{};function r(i,...s){let a=r.invalid;const o=r.handlers;if(i&&rm.call(i,e)){const u=String(i[e]);a=rm.call(o,u)?o[u]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function N8(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),I8);return i(),a}function I8(e,t,n){return">"+(n?"":" ")+e}function O8(e,t){return im(e,t.inConstruct,!0)&&!im(e,t.notInConstruct,!1)}function im(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function sm(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&O8(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function v8(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function _8(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function L8(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function R8(e,t,n,r){const i=L8(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(_8(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,M8);return d(),h}const o=n.createTracker(r),u=i.repeat(Math.max(v8(s,i)+1,3)),l=n.enter("codeFenced");let c=o.move(u);if(e.lang){const d=n.enter(`codeFencedLang${a}`);c+=o.move(n.safe(e.lang,I({before:c,after:" ",encode:["`"]},o.current()))),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);c+=o.move(" "),c+=o.move(n.safe(e.meta,I({before:c,after:`
`,encode:["`"]},o.current()))),d()}return c+=o.move(`
`),s&&(c+=o.move(s+`
`)),c+=o.move(u),l(),c}function M8(e,t,n){return(n?"":"    ")+e}function Vf(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function D8(e,t,n,r){const i=Vf(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const u=n.createTracker(r);let l=u.move("[");return l+=u.move(n.safe(n.associationId(e),I({before:l,after:"]"},u.current()))),l+=u.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(n.safe(e.url,I({before:l,after:">"},u.current()))),l+=u.move(">")):(o=n.enter("destinationRaw"),l+=u.move(n.safe(e.url,I({before:l,after:e.title?" ":`
`},u.current())))),o(),e.title&&(o=n.enter(`title${s}`),l+=u.move(" "+i),l+=u.move(n.safe(e.title,I({before:l,after:i},u.current()))),l+=u.move(i),o()),a(),l}function P8(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function xa(e){return"&#x"+e.toString(16).toUpperCase()+";"}function wu(e,t,n){const r=ls(e),i=ls(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}dx.peek=B8;function dx(e,t,n,r){const i=P8(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let u=a.move(n.containerPhrasing(e,I({after:i,before:o},a.current())));const l=u.charCodeAt(0),c=wu(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=xa(l)+u.slice(1));const d=u.charCodeAt(u.length-1),h=wu(r.after.charCodeAt(0),d,i);h.inside&&(u=u.slice(0,-1)+xa(d));const f=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+u+f}function B8(e,t,n){return n.options.emphasis||"*"}function F8(e,t){let n=!1;return sl(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,hd}),!!((!e.depth||e.depth<3)&&Pf(e)&&(t.options.setext||n))}function H8(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(F8(e,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,re(I({},s.current()),{before:`
`,after:`
`}));return d(),c(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),u=n.enter("phrasing");s.move(a+" ");let l=n.containerPhrasing(e,I({before:"# ",after:`
`},s.current()));return/^[\t ]/.test(l)&&(l=xa(l.charCodeAt(0))+l.slice(1)),l=l?a+" "+l:a,n.options.closeAtx&&(l+=" "+a),u(),o(),l}fx.peek=U8;function fx(e){return e.value||""}function U8(){return"<"}hx.peek=j8;function hx(e,t,n,r){const i=Vf(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const u=n.createTracker(r);let l=u.move("![");return l+=u.move(n.safe(e.alt,I({before:l,after:"]"},u.current()))),l+=u.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(n.safe(e.url,I({before:l,after:">"},u.current()))),l+=u.move(">")):(o=n.enter("destinationRaw"),l+=u.move(n.safe(e.url,I({before:l,after:e.title?" ":")"},u.current())))),o(),e.title&&(o=n.enter(`title${s}`),l+=u.move(" "+i),l+=u.move(n.safe(e.title,I({before:l,after:i},u.current()))),l+=u.move(i),o()),l+=u.move(")"),a(),l}function j8(){return"!"}px.peek=z8;function px(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let u=o.move("![");const l=n.safe(e.alt,I({before:u,after:"]"},o.current()));u+=o.move(l+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),I({before:u,after:"]"},o.current()));return a(),n.stack=c,s(),i==="full"||!l||l!==d?u+=o.move(d+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function z8(){return"!"}mx.peek=$8;function mx(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let u;if(a.atBreak)for(;u=o.exec(r);){let l=u.index;r.charCodeAt(l)===10&&r.charCodeAt(l-1)===13&&l--,r=r.slice(0,l)+" "+r.slice(u.index+1)}}return i+r+i}function $8(){return"`"}function gx(e,t){const n=Pf(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}bx.peek=V8;function bx(e,t,n,r){const i=Vf(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,u;if(gx(e,n)){const c=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,I({before:d,after:">"},a.current()))),d+=a.move(">"),o(),n.stack=c,d}o=n.enter("link"),u=n.enter("label");let l=a.move("[");return l+=a.move(n.containerPhrasing(e,I({before:l,after:"]("},a.current()))),l+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(n.safe(e.url,I({before:l,after:">"},a.current()))),l+=a.move(">")):(u=n.enter("destinationRaw"),l+=a.move(n.safe(e.url,I({before:l,after:e.title?" ":")"},a.current())))),u(),e.title&&(u=n.enter(`title${s}`),l+=a.move(" "+i),l+=a.move(n.safe(e.title,I({before:l,after:i},a.current()))),l+=a.move(i),u()),l+=a.move(")"),o(),l}function V8(e,t,n){return gx(e,n)?"<":"["}xx.peek=q8;function xx(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let u=o.move("[");const l=n.containerPhrasing(e,I({before:u,after:"]"},o.current()));u+=o.move(l+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),I({before:u,after:"]"},o.current()));return a(),n.stack=c,s(),i==="full"||!l||l!==d?u+=o.move(d+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function q8(){return"["}function qf(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function W8(e){const t=qf(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Y8(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function yx(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function K8(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?Y8(n):qf(n);const o=e.ordered?a==="."?")":".":W8(n);let u=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),yx(n)===a&&c){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=o),n.bulletCurrent=a;const l=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),l}function G8(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Q8(e,t,n,r){const i=G8(n);let s=n.bulletCurrent||qf(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const u=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,o.current()),c);return u(),l;function c(d,h,f){return h?(f?"":" ".repeat(a))+d:(f?s:s+" ".repeat(a-s.length))+d}}function X8(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const J8=rl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Z8(e,t,n,r){return(e.children.some(function(a){return J8(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function ev(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Ex.peek=tv;function Ex(e,t,n,r){const i=ev(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let u=a.move(n.containerPhrasing(e,I({after:i,before:o},a.current())));const l=u.charCodeAt(0),c=wu(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=xa(l)+u.slice(1));const d=u.charCodeAt(u.length-1),h=wu(r.after.charCodeAt(0),d,i);h.inside&&(u=u.slice(0,-1)+xa(d));const f=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+u+f}function tv(e,t,n){return n.options.strong||"*"}function nv(e,t,n,r){return n.safe(e.value,r)}function rv(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function iv(e,t,n){const r=(yx(n)+(n.options.ruleSpaces?" ":"")).repeat(rv(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Tx={blockquote:N8,break:sm,code:R8,definition:D8,emphasis:dx,hardBreak:sm,heading:H8,html:fx,image:hx,imageReference:px,inlineCode:mx,link:bx,linkReference:xx,list:K8,listItem:Q8,paragraph:X8,root:Z8,strong:Ex,text:nv,thematicBreak:iv};function sv(){return{enter:{table:av,tableData:am,tableHeader:am,tableRow:uv},exit:{codeText:lv,table:ov,tableData:pc,tableHeader:pc,tableRow:pc}}}function av(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function ov(e){this.exit(e),this.data.inTable=void 0}function uv(e){this.enter({type:"tableRow",children:[]},e)}function pc(e){this.exit(e)}function am(e){this.enter({type:"tableCell",children:[]},e)}function lv(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,cv));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function cv(e,t){return t==="|"?t:e}function dv(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:u,tableRow:o}};function a(f,m,b,y){return l(c(f,b,y),f.align)}function o(f,m,b,y){const x=d(f,b,y),E=l([x]);return E.slice(0,E.indexOf(`
`))}function u(f,m,b,y){const x=b.enter("tableCell"),E=b.enter("phrasing"),T=b.containerPhrasing(f,re(I({},y),{before:s,after:s}));return E(),x(),T}function l(f,m){return C8(f,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function c(f,m,b){const y=f.children;let x=-1;const E=[],T=m.enter("table");for(;++x<y.length;)E[x]=d(y[x],m,b);return T(),E}function d(f,m,b){const y=f.children;let x=-1;const E=[],T=m.enter("tableRow");for(;++x<y.length;)E[x]=u(y[x],f,m,b);return T(),E}function h(f,m,b){let y=Tx.inlineCode(f,m,b);return b.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function fv(){return{exit:{taskListCheckValueChecked:om,taskListCheckValueUnchecked:om,paragraph:pv}}}function hv(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:mv}}}function om(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function pv(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function mv(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let u=Tx.listItem(e,t,n,I(I({},r),o.current()));return s&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),u;function l(c){return c+a}}function gv(){return[KO(),m8(),y8(),sv(),fv()]}function bv(e){return{extensions:[GO(),g8(e),E8(),dv(e),hv()]}}const xv={tokenize:wv,partial:!0},kx={tokenize:Cv,partial:!0},Sx={tokenize:Av,partial:!0},wx={tokenize:Nv,partial:!0},yv={tokenize:Iv,partial:!0},Cx={name:"wwwAutolink",tokenize:kv,previous:Nx},Ax={name:"protocolAutolink",tokenize:Sv,previous:Ix},Sr={name:"emailAutolink",tokenize:Tv,previous:Ox},rr={};function Ev(){return{text:rr}}let ii=48;for(;ii<123;)rr[ii]=Sr,ii++,ii===58?ii=65:ii===91&&(ii=97);rr[43]=Sr;rr[45]=Sr;rr[46]=Sr;rr[95]=Sr;rr[72]=[Sr,Ax];rr[104]=[Sr,Ax];rr[87]=[Sr,Cx];rr[119]=[Sr,Cx];function Tv(e,t,n){const r=this;let i,s;return a;function a(d){return!bd(d)||!Ox.call(r,r.previous)||Wf(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(d))}function o(d){return bd(d)?(e.consume(d),o):d===64?(e.consume(d),u):n(d)}function u(d){return d===46?e.check(yv,c,l)(d):d===45||d===95||Ut(d)?(s=!0,e.consume(d),u):c(d)}function l(d){return e.consume(d),i=!0,u}function c(d){return s&&i&&Kt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function kv(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!Nx.call(r,r.previous)||Wf(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(xv,e.attempt(kx,e.attempt(Sx,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function Sv(e,t,n){const r=this;let i="",s=!1;return a;function a(d){return(d===72||d===104)&&Ix.call(r,r.previous)&&!Wf(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),o):n(d)}function o(d){if(Kt(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),o;if(d===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(d),u}return n(d)}function u(d){return d===47?(e.consume(d),s?l:(s=!0,u)):n(d)}function l(d){return d===null||ku(d)||Ve(d)||Ai(d)||el(d)?n(d):e.attempt(kx,e.attempt(Sx,c),n)(d)}function c(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function wv(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function Cv(e,t,n){let r,i,s;return a;function a(l){return l===46||l===95?e.check(wx,u,o)(l):l===null||Ve(l)||Ai(l)||l!==45&&el(l)?u(l):(s=!0,e.consume(l),a)}function o(l){return l===95?r=!0:(i=r,r=void 0),e.consume(l),a}function u(l){return i||r||!s?n(l):t(l)}}function Av(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(wx,t,s)(a):a===null||Ve(a)||Ai(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function Nv(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||Ve(o)||Ai(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||Ve(o)||Ai(o)?t(o):r(o)}function s(o){return Kt(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):Kt(o)?(e.consume(o),a):n(o)}}function Iv(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Ut(s)?n(s):t(s)}}function Nx(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ve(e)}function Ix(e){return!Kt(e)}function Ox(e){return!(e===47||bd(e))}function bd(e){return e===43||e===45||e===46||e===95||Ut(e)}function Wf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Ov={tokenize:Bv,partial:!0};function vv(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Mv,continuation:{tokenize:Dv},exit:Pv}},text:{91:{name:"gfmFootnoteCall",tokenize:Rv},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:_v,resolveTo:Lv}}}}function _v(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return o;function o(u){if(!a||!a._balanced)return n(u);const l=Rn(r.sliceSerialize({start:a.end,end:r.now()}));return l.codePointAt(0)!==94||!s.includes(l.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function Lv(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function Rv(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),u}function u(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(d){if(s>999||d===93&&!a||d===null||d===91||Ve(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(Rn(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Ve(d)||(a=!0),s++,e.consume(d),d===92?c:l}function c(d){return d===91||d===92||d===93?(e.consume(d),s++,l):l(d)}}function Mv(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return u;function u(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(m)}function c(m){if(a>999||m===93&&!o||m===null||m===91||Ve(m))return n(m);if(m===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return s=Rn(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Ve(m)||(o=!0),a++,e.consume(m),m===92?d:c}function d(m){return m===91||m===92||m===93?(e.consume(m),a++,c):c(m)}function h(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),i.includes(s)||i.push(s),De(e,f,"gfmFootnoteDefinitionWhitespace")):n(m)}function f(m){return t(m)}}function Dv(e,t,n){return e.check(Oa,t,e.attempt(Ov,t,n))}function Pv(e){e.exit("gfmFootnoteDefinition")}function Bv(e,t,n){const r=this;return De(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function Fv(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let l=u;for(;l--;)if(a[l][0]==="exit"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[l][1].end.offset-a[l][1].start.offset){a[u][1].type="strikethroughSequence",a[l][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},a[l][1].start),end:Object.assign({},a[u][1].end)},d={type:"strikethroughText",start:Object.assign({},a[l][1].end),end:Object.assign({},a[u][1].start)},h=[["enter",c,o],["enter",a[l][1],o],["exit",a[l][1],o],["enter",d,o]],f=o.parser.constructs.insideSpan.null;f&&mn(h,h.length,0,tl(f,a.slice(l+1,u),o)),mn(h,h.length,0,[["exit",d,o],["enter",a[u][1],o],["exit",a[u][1],o],["exit",c,o]]),mn(a,l-1,u-l+3,h),u=l+h.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function s(a,o,u){const l=this.previous,c=this.events;let d=0;return h;function h(m){return l===126&&c[c.length-1][1].type!=="characterEscape"?u(m):(a.enter("strikethroughSequenceTemporary"),f(m))}function f(m){const b=ls(l);if(m===126)return d>1?u(m):(a.consume(m),d++,f);if(d<2&&!n)return u(m);const y=a.exit("strikethroughSequenceTemporary"),x=ls(m);return y._open=!x||x===2&&!!b,y._close=!b||b===2&&!!x,o(m)}}}class Hv{constructor(){this.map=[]}add(t,n,r){Uv(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function Uv(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function jv(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function zv(){return{flow:{null:{name:"table",tokenize:$v,resolveAll:Vv}}}}function $v(e,t,n){const r=this;let i=0,s=0,a;return o;function o(_){let j=r.events.length-1;for(;j>-1;){const G=r.events[j][1].type;if(G==="lineEnding"||G==="linePrefix")j--;else break}const F=j>-1?r.events[j][1].type:null,K=F==="tableHead"||F==="tableRow"?w:u;return K===w&&r.parser.lazy[r.now().line]?n(_):K(_)}function u(_){return e.enter("tableHead"),e.enter("tableRow"),l(_)}function l(_){return _===124||(a=!0,s+=1),c(_)}function c(_){return _===null?n(_):ge(_)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),f):n(_):Re(_)?De(e,c,"whitespace")(_):(s+=1,a&&(a=!1,i+=1),_===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),a=!0,c):(e.enter("data"),d(_)))}function d(_){return _===null||_===124||Ve(_)?(e.exit("data"),c(_)):(e.consume(_),_===92?h:d)}function h(_){return _===92||_===124?(e.consume(_),d):d(_)}function f(_){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(_):(e.enter("tableDelimiterRow"),a=!1,Re(_)?De(e,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):m(_))}function m(_){return _===45||_===58?y(_):_===124?(a=!0,e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),b):C(_)}function b(_){return Re(_)?De(e,y,"whitespace")(_):y(_)}function y(_){return _===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),x):_===45?(s+=1,x(_)):_===null||ge(_)?v(_):C(_)}function x(_){return _===45?(e.enter("tableDelimiterFiller"),E(_)):C(_)}function E(_){return _===45?(e.consume(_),E):_===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T(_))}function T(_){return Re(_)?De(e,v,"whitespace")(_):v(_)}function v(_){return _===124?m(_):_===null||ge(_)?!a||i!==s?C(_):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(_)):C(_)}function C(_){return n(_)}function w(_){return e.enter("tableRow"),M(_)}function M(_){return _===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),M):_===null||ge(_)?(e.exit("tableRow"),t(_)):Re(_)?De(e,M,"whitespace")(_):(e.enter("data"),P(_))}function P(_){return _===null||_===124||Ve(_)?(e.exit("data"),M(_)):(e.consume(_),_===92?U:P)}function U(_){return _===92||_===124?(e.consume(_),P):P(_)}}function Vv(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,u=0,l,c,d;const h=new Hv;for(;++n<e.length;){const f=e[n],m=f[1];f[0]==="enter"?m.type==="tableHead"?(o=!1,u!==0&&(um(h,t,u,l,c),c=void 0,u=0),l={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",l,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,c={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",c,t]])),i=m.type==="tableDelimiterRow"?2:c?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],d=oo(h,t,s,i,void 0,d),s=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],d=oo(h,t,s,i,void 0,d)),s=a,a=[s[1],n,0,0])):m.type==="tableHead"?(o=!0,u=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(u=n,s[1]!==0?(a[0]=a[1],d=oo(h,t,s,i,n,d)):a[1]!==0&&(d=oo(h,t,a,i,n,d)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&um(h,t,u,l,c),h.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=jv(t.events,n))}return e}function oo(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},$i(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const u=$i(t.events,n[1]);if(s={type:a,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const l=$i(t.events,n[2]),c=$i(t.events,n[3]),d={type:o,start:Object.assign({},l),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],f=t.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,b=n[3]-n[2]-1;e.add(m,b,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},$i(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function um(e,t,n,r,i){const s=[],a=$i(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function $i(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const qv={name:"tasklistCheck",tokenize:Yv};function Wv(){return{text:{91:qv}}}function Yv(e,t,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),s)}function s(u){return Ve(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(u)}function o(u){return ge(u)?t(u):Re(u)?e.check({tokenize:Kv},t,n)(u):n(u)}}function Kv(e,t,n){return De(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Gv(e){return H2([Ev(),vv(),Fv(e),zv(),Wv()])}const Qv={};function ko(e){const t=this,n=e||Qv,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Gv(n)),s.push(gv()),a.push(bv(n))}const lm=/[#.]/g;function Xv(e,t){const n=e||"",r={};let i=0,s,a;for(;i<n.length;){lm.lastIndex=i;const o=lm.exec(n),u=n.slice(i,o?o.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:a=u,i+=u.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||t||"div",properties:r,children:[]}}function vx(e,t,n){const r=n?t_(n):void 0;function i(s,a,...o){let u;if(s==null){u={type:"root",children:[]};const l=a;o.unshift(l)}else{u=Xv(s,t);const l=u.tagName.toLowerCase(),c=r?r.get(l):void 0;if(u.tagName=c||l,Jv(a))o.unshift(a);else for(const[d,h]of Object.entries(a))Zv(e,u.properties,d,h)}for(const l of o)xd(u.children,l);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function Jv(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Zv(e,t,n,r){const i=Lf(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=kp(r):i.commaSeparated?s=bp(r):i.commaOrSpaceSeparated?s=kp(bp(r).join(" ")):s=cm(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?e_(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(cm(i,i.property,o));s=a}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function xd(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)xd(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?xd(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function cm(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ga(n)===ga(t)))return!0}return n}function e_(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function t_(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const n_=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],r_=vx(Ju,"div"),i_=vx(bs,"g",n_);function s_(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const u=dm(t,n[a-1]);o=u===-1?t.length+1:u+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],u=dm(t,o),l=u===-1?t.length+1:u+1;if(o===l)break;n.push(l)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function dm(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const hi={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_x={}.hasOwnProperty,a_=Object.prototype;function o_(e,t){const n=t||{};return Yf({file:n.file||void 0,location:!1,schema:n.space==="svg"?bs:Ju,verbose:n.verbose||!1},e)}function Yf(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},So(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Lx(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),a=s_(s),o=a.toPoint(0),u=a.toPoint(s.length);n.position={start:o,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},So(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},So(e,r,n),n}default:return n=u_(e,t),n}}function Lx(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Yf(e,t[n]);r.push(i)}return r}function u_(e,t){const n=e.schema;e.schema=t.namespaceURI===hi.svg?bs:Ju;let r=-1;const i={};for(;++r<t.attrs.length;){const o=t.attrs[r],u=(o.prefix?o.prefix+":":"")+o.name;_x.call(a_,u)||(i[u]=o.value)}const a=(e.schema.space==="svg"?i_:r_)(t.tagName,i,Lx(e,t.childNodes));if(So(e,t,a),a.tagName==="template"){const o=t,u=o.sourceCodeLocation,l=u&&u.startTag&&Wi(u.startTag),c=u&&u.endTag&&Wi(u.endTag),d=Yf(e,o.content);l&&c&&e.file&&(d.position={start:l.end,end:c.start}),a.content=d}return e.schema=n,a}function So(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=l_(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function l_(e,t,n){const r=Wi(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)_x.call(n.attrs,a)&&(s[Lf(e.schema,a).property]=Wi(n.attrs[a]));n.startTag;const o=Wi(n.startTag),u=n.endTag?Wi(n.endTag):void 0,l={opening:o};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Wi(e){const t=fm({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=fm({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function fm(e){return e.line&&e.column?e:void 0}class _a{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}_a.prototype.property={};_a.prototype.normal={};_a.prototype.space=null;function Rx(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new _a(n,r,t)}function yd(e){return e.toLowerCase()}class In{constructor(t,n){this.property=t,this.attribute=n}}In.prototype.space=null;In.prototype.boolean=!1;In.prototype.booleanish=!1;In.prototype.overloadedBoolean=!1;In.prototype.number=!1;In.prototype.commaSeparated=!1;In.prototype.spaceSeparated=!1;In.prototype.commaOrSpaceSeparated=!1;In.prototype.mustUseProperty=!1;In.prototype.defined=!1;let c_=0;const Ne=vi(),xt=vi(),Mx=vi(),ne=vi(),Ke=vi(),Ji=vi(),dn=vi();function vi(){return bl(2,++c_)}const Ed=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ne,booleanish:xt,commaOrSpaceSeparated:dn,commaSeparated:Ji,number:ne,overloadedBoolean:Mx,spaceSeparated:Ke},Symbol.toStringTag,{value:"Module"})),mc=Object.keys(Ed);class Kf extends In{constructor(t,n,r,i){let s=-1;if(super(t,n),hm(this,"space",i),typeof r=="number")for(;++s<mc.length;){const a=mc[s];hm(this,mc[s],(r&Ed[a])===Ed[a])}}}Kf.prototype.defined=!0;function hm(e,t,n){n&&(e[t]=n)}const d_={}.hasOwnProperty;function ys(e){const t={},n={};let r;for(r in e.properties)if(d_.call(e.properties,r)){const i=e.properties[r],s=new Kf(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[yd(r)]=r,n[yd(s.attribute)]=r}return new _a(t,n,e.space)}const Dx=ys({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Px=ys({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Bx(e,t){return t in e?e[t]:t}function Fx(e,t){return Bx(e,t.toLowerCase())}const Hx=ys({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Fx,properties:{xmlns:null,xmlnsXLink:null}}),Ux=ys({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:xt,ariaAutoComplete:null,ariaBusy:xt,ariaChecked:xt,ariaColCount:ne,ariaColIndex:ne,ariaColSpan:ne,ariaControls:Ke,ariaCurrent:null,ariaDescribedBy:Ke,ariaDetails:null,ariaDisabled:xt,ariaDropEffect:Ke,ariaErrorMessage:null,ariaExpanded:xt,ariaFlowTo:Ke,ariaGrabbed:xt,ariaHasPopup:null,ariaHidden:xt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ke,ariaLevel:ne,ariaLive:null,ariaModal:xt,ariaMultiLine:xt,ariaMultiSelectable:xt,ariaOrientation:null,ariaOwns:Ke,ariaPlaceholder:null,ariaPosInSet:ne,ariaPressed:xt,ariaReadOnly:xt,ariaRelevant:null,ariaRequired:xt,ariaRoleDescription:Ke,ariaRowCount:ne,ariaRowIndex:ne,ariaRowSpan:ne,ariaSelected:xt,ariaSetSize:ne,ariaSort:null,ariaValueMax:ne,ariaValueMin:ne,ariaValueNow:ne,ariaValueText:null,role:null}}),f_=ys({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Fx,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ji,acceptCharset:Ke,accessKey:Ke,action:null,allow:null,allowFullScreen:Ne,allowPaymentRequest:Ne,allowUserMedia:Ne,alt:null,as:null,async:Ne,autoCapitalize:null,autoComplete:Ke,autoFocus:Ne,autoPlay:Ne,blocking:Ke,capture:null,charSet:null,checked:Ne,cite:null,className:Ke,cols:ne,colSpan:null,content:null,contentEditable:xt,controls:Ne,controlsList:Ke,coords:ne|Ji,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ne,defer:Ne,dir:null,dirName:null,disabled:Ne,download:Mx,draggable:xt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ne,formTarget:null,headers:Ke,height:ne,hidden:Ne,high:ne,href:null,hrefLang:null,htmlFor:Ke,httpEquiv:Ke,id:null,imageSizes:null,imageSrcSet:null,inert:Ne,inputMode:null,integrity:null,is:null,isMap:Ne,itemId:null,itemProp:Ke,itemRef:Ke,itemScope:Ne,itemType:Ke,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ne,low:ne,manifest:null,max:null,maxLength:ne,media:null,method:null,min:null,minLength:ne,multiple:Ne,muted:Ne,name:null,nonce:null,noModule:Ne,noValidate:Ne,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ne,optimum:ne,pattern:null,ping:Ke,placeholder:null,playsInline:Ne,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ne,referrerPolicy:null,rel:Ke,required:Ne,reversed:Ne,rows:ne,rowSpan:ne,sandbox:Ke,scope:null,scoped:Ne,seamless:Ne,selected:Ne,shadowRootClonable:Ne,shadowRootDelegatesFocus:Ne,shadowRootMode:null,shape:null,size:ne,sizes:null,slot:null,span:ne,spellCheck:xt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ne,step:null,style:null,tabIndex:ne,target:null,title:null,translate:null,type:null,typeMustMatch:Ne,useMap:null,value:xt,width:ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ke,axis:null,background:null,bgColor:null,border:ne,borderColor:null,bottomMargin:ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ne,declare:Ne,event:null,face:null,frame:null,frameBorder:null,hSpace:ne,leftMargin:ne,link:null,longDesc:null,lowSrc:null,marginHeight:ne,marginWidth:ne,noResize:Ne,noHref:Ne,noShade:Ne,noWrap:Ne,object:null,profile:null,prompt:null,rev:null,rightMargin:ne,rules:null,scheme:null,scrolling:xt,standby:null,summary:null,text:null,topMargin:ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ne,disableRemotePlayback:Ne,prefix:null,property:null,results:ne,security:null,unselectable:null}}),h_=ys({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Bx,properties:{about:dn,accentHeight:ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ne,amplitude:ne,arabicForm:null,ascent:ne,attributeName:null,attributeType:null,azimuth:ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ne,by:null,calcMode:null,capHeight:ne,className:Ke,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ne,diffuseConstant:ne,direction:null,display:null,dur:null,divisor:ne,dominantBaseline:null,download:Ne,dx:null,dy:null,edgeMode:null,editable:null,elevation:ne,enableBackground:null,end:null,event:null,exponent:ne,externalResourcesRequired:null,fill:null,fillOpacity:ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ji,g2:Ji,glyphName:Ji,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ne,horizOriginX:ne,horizOriginY:ne,id:null,ideographic:ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ne,k:ne,k1:ne,k2:ne,k3:ne,k4:ne,kernelMatrix:dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ne,overlineThickness:ne,paintOrder:null,panose1:null,path:null,pathLength:ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ke,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ne,pointsAtY:ne,pointsAtZ:ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:dn,rev:dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:dn,requiredFeatures:dn,requiredFonts:dn,requiredFormats:dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ne,specularExponent:ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ne,strikethroughThickness:ne,string:null,stroke:null,strokeDashArray:dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ne,strokeOpacity:ne,strokeWidth:null,style:null,surfaceScale:ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:dn,tabIndex:ne,tableValues:null,target:null,targetX:ne,targetY:ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ne,underlineThickness:ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ne,values:null,vAlphabetic:ne,vMathematical:ne,vectorEffect:null,vHanging:ne,vIdeographic:ne,version:null,vertAdvY:ne,vertOriginX:ne,vertOriginY:ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),p_=/^data[-\w.:]+$/i,pm=/-[a-z]/g,m_=/[A-Z]/g;function g_(e,t){const n=yd(t);let r=t,i=In;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&p_.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(pm,x_);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!pm.test(s)){let a=s.replace(m_,b_);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=Kf}return new i(r,t)}function b_(e){return"-"+e.toLowerCase()}function x_(e){return e.charAt(1).toUpperCase()}const y_=Rx([Px,Dx,Hx,Ux,f_],"html"),jx=Rx([Px,Dx,Hx,Ux,h_],"svg"),E_={},T_={}.hasOwnProperty,zx=cx("type",{handlers:{root:S_,element:I_,text:A_,comment:N_,doctype:C_}});function k_(e,t){const r=(t||E_).space;return zx(e,r==="svg"?jx:y_)}function S_(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Gf(e.children,n,t),Es(e,n),n}function w_(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Gf(e.children,n,t),Es(e,n),n}function C_(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Es(e,t),t}function A_(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Es(e,t),t}function N_(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Es(e,t),t}function I_(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=jx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&T_.call(e.properties,s)){const u=O_(r,s,e.properties[s]);u&&i.push(u)}}const a=r.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:hi[a],childNodes:[],parentNode:null};return o.childNodes=Gf(e.children,o,r),Es(e,o),e.tagName==="template"&&e.content&&(o.content=w_(e.content,r)),o}function O_(e,t,n){const r=g_(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?w2(n):L2(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=hi[r.space]}return i}function Gf(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=zx(e[r],n);s.parentNode=t,i.push(s)}return i}function Es(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const v_=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],__=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ze="";var k;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(k||(k={}));const Zt={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function $x(e){return e>=55296&&e<=57343}function L_(e){return e>=56320&&e<=57343}function R_(e,t){return(e-55296)*1024+9216+t}function Vx(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function qx(e){return e>=64976&&e<=65007||__.has(e)}var H;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(H||(H={}));const M_=65536;class D_{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=M_,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:s}=this,a=i+n,o=s+n;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(L_(n))return this.pos++,this._addGap(),R_(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,k.EOF;return this._err(H.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,k.EOF;const r=this.html.charCodeAt(n);return r===k.CARRIAGE_RETURN?k.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,k.EOF;let t=this.html.charCodeAt(this.pos);return t===k.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,k.LINE_FEED):t===k.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,$x(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===k.LINE_FEED||t===k.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Vx(t)?this._err(H.controlCharacterInInputStream):qx(t)&&this._err(H.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Le;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Le||(Le={}));function Wx(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const P_=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),B_=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function F_(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=B_.get(e))!==null&&t!==void 0?t:e}var Nt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Nt||(Nt={}));const H_=32;var $r;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})($r||($r={}));function Td(e){return e>=Nt.ZERO&&e<=Nt.NINE}function U_(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_F||e>=Nt.LOWER_A&&e<=Nt.LOWER_F}function j_(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_Z||e>=Nt.LOWER_A&&e<=Nt.LOWER_Z||Td(e)}function z_(e){return e===Nt.EQUALS||j_(e)}var wt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(wt||(wt={}));var pr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(pr||(pr={}));let $_=class{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=wt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=pr.Strict}startEntity(t){this.decodeMode=t,this.state=wt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case wt.EntityStart:return t.charCodeAt(n)===Nt.NUM?(this.state=wt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=wt.NamedEntity,this.stateNamedEntity(t,n));case wt.NumericStart:return this.stateNumericStart(t,n);case wt.NumericDecimal:return this.stateNumericDecimal(t,n);case wt.NumericHex:return this.stateNumericHex(t,n);case wt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|H_)===Nt.LOWER_X?(this.state=wt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=wt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Td(i)||U_(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Td(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Nt.SEMI)this.consumed+=1;else if(this.decodeMode===pr.Strict)return 0;return this.emitCodePoint(F_(this.result),this.consumed),this.errors&&(t!==Nt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&$r.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=V_(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===pr.Attribute&&(s===0||z_(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&$r.VALUE_LENGTH)>>14,s!==0){if(a===Nt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==pr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&$r.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~$r.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case wt.NamedEntity:return this.result!==0&&(this.decodeMode!==pr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case wt.NumericDecimal:return this.emitNumericEntity(0,2);case wt.NumericHex:return this.emitNumericEntity(0,3);case wt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case wt.EntityStart:return 0}}};function V_(e,t,n,r){const i=(t&$r.BRANCH_LENGTH)>>7,s=t&$r.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let a=n,o=a+i-1;for(;a<=o;){const u=a+o>>>1,l=e[u];if(l<r)a=u+1;else if(l>r)o=u-1;else return e[u+i]}return-1}var Y;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Y||(Y={}));var Ei;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Ei||(Ei={}));var wn;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(wn||(wn={}));var R;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(R||(R={}));var p;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(p||(p={}));const q_=new Map([[R.A,p.A],[R.ADDRESS,p.ADDRESS],[R.ANNOTATION_XML,p.ANNOTATION_XML],[R.APPLET,p.APPLET],[R.AREA,p.AREA],[R.ARTICLE,p.ARTICLE],[R.ASIDE,p.ASIDE],[R.B,p.B],[R.BASE,p.BASE],[R.BASEFONT,p.BASEFONT],[R.BGSOUND,p.BGSOUND],[R.BIG,p.BIG],[R.BLOCKQUOTE,p.BLOCKQUOTE],[R.BODY,p.BODY],[R.BR,p.BR],[R.BUTTON,p.BUTTON],[R.CAPTION,p.CAPTION],[R.CENTER,p.CENTER],[R.CODE,p.CODE],[R.COL,p.COL],[R.COLGROUP,p.COLGROUP],[R.DD,p.DD],[R.DESC,p.DESC],[R.DETAILS,p.DETAILS],[R.DIALOG,p.DIALOG],[R.DIR,p.DIR],[R.DIV,p.DIV],[R.DL,p.DL],[R.DT,p.DT],[R.EM,p.EM],[R.EMBED,p.EMBED],[R.FIELDSET,p.FIELDSET],[R.FIGCAPTION,p.FIGCAPTION],[R.FIGURE,p.FIGURE],[R.FONT,p.FONT],[R.FOOTER,p.FOOTER],[R.FOREIGN_OBJECT,p.FOREIGN_OBJECT],[R.FORM,p.FORM],[R.FRAME,p.FRAME],[R.FRAMESET,p.FRAMESET],[R.H1,p.H1],[R.H2,p.H2],[R.H3,p.H3],[R.H4,p.H4],[R.H5,p.H5],[R.H6,p.H6],[R.HEAD,p.HEAD],[R.HEADER,p.HEADER],[R.HGROUP,p.HGROUP],[R.HR,p.HR],[R.HTML,p.HTML],[R.I,p.I],[R.IMG,p.IMG],[R.IMAGE,p.IMAGE],[R.INPUT,p.INPUT],[R.IFRAME,p.IFRAME],[R.KEYGEN,p.KEYGEN],[R.LABEL,p.LABEL],[R.LI,p.LI],[R.LINK,p.LINK],[R.LISTING,p.LISTING],[R.MAIN,p.MAIN],[R.MALIGNMARK,p.MALIGNMARK],[R.MARQUEE,p.MARQUEE],[R.MATH,p.MATH],[R.MENU,p.MENU],[R.META,p.META],[R.MGLYPH,p.MGLYPH],[R.MI,p.MI],[R.MO,p.MO],[R.MN,p.MN],[R.MS,p.MS],[R.MTEXT,p.MTEXT],[R.NAV,p.NAV],[R.NOBR,p.NOBR],[R.NOFRAMES,p.NOFRAMES],[R.NOEMBED,p.NOEMBED],[R.NOSCRIPT,p.NOSCRIPT],[R.OBJECT,p.OBJECT],[R.OL,p.OL],[R.OPTGROUP,p.OPTGROUP],[R.OPTION,p.OPTION],[R.P,p.P],[R.PARAM,p.PARAM],[R.PLAINTEXT,p.PLAINTEXT],[R.PRE,p.PRE],[R.RB,p.RB],[R.RP,p.RP],[R.RT,p.RT],[R.RTC,p.RTC],[R.RUBY,p.RUBY],[R.S,p.S],[R.SCRIPT,p.SCRIPT],[R.SEARCH,p.SEARCH],[R.SECTION,p.SECTION],[R.SELECT,p.SELECT],[R.SOURCE,p.SOURCE],[R.SMALL,p.SMALL],[R.SPAN,p.SPAN],[R.STRIKE,p.STRIKE],[R.STRONG,p.STRONG],[R.STYLE,p.STYLE],[R.SUB,p.SUB],[R.SUMMARY,p.SUMMARY],[R.SUP,p.SUP],[R.TABLE,p.TABLE],[R.TBODY,p.TBODY],[R.TEMPLATE,p.TEMPLATE],[R.TEXTAREA,p.TEXTAREA],[R.TFOOT,p.TFOOT],[R.TD,p.TD],[R.TH,p.TH],[R.THEAD,p.THEAD],[R.TITLE,p.TITLE],[R.TR,p.TR],[R.TRACK,p.TRACK],[R.TT,p.TT],[R.U,p.U],[R.UL,p.UL],[R.SVG,p.SVG],[R.VAR,p.VAR],[R.WBR,p.WBR],[R.XMP,p.XMP]]);function Ts(e){var t;return(t=q_.get(e))!==null&&t!==void 0?t:p.UNKNOWN}const Q=p,W_={[Y.HTML]:new Set([Q.ADDRESS,Q.APPLET,Q.AREA,Q.ARTICLE,Q.ASIDE,Q.BASE,Q.BASEFONT,Q.BGSOUND,Q.BLOCKQUOTE,Q.BODY,Q.BR,Q.BUTTON,Q.CAPTION,Q.CENTER,Q.COL,Q.COLGROUP,Q.DD,Q.DETAILS,Q.DIR,Q.DIV,Q.DL,Q.DT,Q.EMBED,Q.FIELDSET,Q.FIGCAPTION,Q.FIGURE,Q.FOOTER,Q.FORM,Q.FRAME,Q.FRAMESET,Q.H1,Q.H2,Q.H3,Q.H4,Q.H5,Q.H6,Q.HEAD,Q.HEADER,Q.HGROUP,Q.HR,Q.HTML,Q.IFRAME,Q.IMG,Q.INPUT,Q.LI,Q.LINK,Q.LISTING,Q.MAIN,Q.MARQUEE,Q.MENU,Q.META,Q.NAV,Q.NOEMBED,Q.NOFRAMES,Q.NOSCRIPT,Q.OBJECT,Q.OL,Q.P,Q.PARAM,Q.PLAINTEXT,Q.PRE,Q.SCRIPT,Q.SECTION,Q.SELECT,Q.SOURCE,Q.STYLE,Q.SUMMARY,Q.TABLE,Q.TBODY,Q.TD,Q.TEMPLATE,Q.TEXTAREA,Q.TFOOT,Q.TH,Q.THEAD,Q.TITLE,Q.TR,Q.TRACK,Q.UL,Q.WBR,Q.XMP]),[Y.MATHML]:new Set([Q.MI,Q.MO,Q.MN,Q.MS,Q.MTEXT,Q.ANNOTATION_XML]),[Y.SVG]:new Set([Q.TITLE,Q.FOREIGN_OBJECT,Q.DESC]),[Y.XLINK]:new Set,[Y.XML]:new Set,[Y.XMLNS]:new Set},kd=new Set([Q.H1,Q.H2,Q.H3,Q.H4,Q.H5,Q.H6]);R.STYLE,R.SCRIPT,R.XMP,R.IFRAME,R.NOEMBED,R.NOFRAMES,R.PLAINTEXT;var A;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(A||(A={}));const ht={DATA:A.DATA,RCDATA:A.RCDATA,RAWTEXT:A.RAWTEXT,SCRIPT_DATA:A.SCRIPT_DATA,PLAINTEXT:A.PLAINTEXT,CDATA_SECTION:A.CDATA_SECTION};function Y_(e){return e>=k.DIGIT_0&&e<=k.DIGIT_9}function Fs(e){return e>=k.LATIN_CAPITAL_A&&e<=k.LATIN_CAPITAL_Z}function K_(e){return e>=k.LATIN_SMALL_A&&e<=k.LATIN_SMALL_Z}function Lr(e){return K_(e)||Fs(e)}function mm(e){return Lr(e)||Y_(e)}function uo(e){return e+32}function Yx(e){return e===k.SPACE||e===k.LINE_FEED||e===k.TABULATION||e===k.FORM_FEED}function gm(e){return Yx(e)||e===k.SOLIDUS||e===k.GREATER_THAN_SIGN}function G_(e){return e===k.NULL?H.nullCharacterReference:e>1114111?H.characterReferenceOutsideUnicodeRange:$x(e)?H.surrogateCharacterReference:qx(e)?H.noncharacterCharacterReference:Vx(e)||e===k.CARRIAGE_RETURN?H.controlCharacterReference:null}let Q_=class{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=A.DATA,this.returnState=A.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new D_(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new $_(P_,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(H.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(H.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=G_(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Le.START_TAG,tagName:"",tagID:p.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Le.END_TAG,tagName:"",tagID:p.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Le.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Le.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Wx(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(H.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Ts(t.tagName),t.type===Le.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(H.endTagWithAttributes),t.selfClosing&&this._err(H.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Le.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Le.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Le.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Le.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Yx(t)?Le.WHITESPACE_CHARACTER:t===k.NULL?Le.NULL_CHARACTER:Le.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Le.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=A.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?pr.Attribute:pr.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===A.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===A.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===A.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case A.DATA:{this._stateData(t);break}case A.RCDATA:{this._stateRcdata(t);break}case A.RAWTEXT:{this._stateRawtext(t);break}case A.SCRIPT_DATA:{this._stateScriptData(t);break}case A.PLAINTEXT:{this._statePlaintext(t);break}case A.TAG_OPEN:{this._stateTagOpen(t);break}case A.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case A.TAG_NAME:{this._stateTagName(t);break}case A.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case A.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case A.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case A.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case A.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case A.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case A.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case A.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case A.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case A.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case A.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case A.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case A.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case A.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case A.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case A.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case A.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case A.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case A.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case A.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case A.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case A.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case A.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case A.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case A.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case A.BOGUS_COMMENT:{this._stateBogusComment(t);break}case A.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case A.COMMENT_START:{this._stateCommentStart(t);break}case A.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case A.COMMENT:{this._stateComment(t);break}case A.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case A.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case A.COMMENT_END:{this._stateCommentEnd(t);break}case A.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case A.DOCTYPE:{this._stateDoctype(t);break}case A.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case A.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case A.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case A.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case A.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case A.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case A.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case A.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case A.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case A.CDATA_SECTION:{this._stateCdataSection(t);break}case A.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case A.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case A.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case A.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.TAG_OPEN;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitCodePoint(t);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case k.AMPERSAND:{this._startCharacterReference();break}case k.LESS_THAN_SIGN:{this.state=A.RCDATA_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.RAWTEXT_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Lr(t))this._createStartTagToken(),this.state=A.TAG_NAME,this._stateTagName(t);else switch(t){case k.EXCLAMATION_MARK:{this.state=A.MARKUP_DECLARATION_OPEN;break}case k.SOLIDUS:{this.state=A.END_TAG_OPEN;break}case k.QUESTION_MARK:{this._err(H.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t);break}case k.EOF:{this._err(H.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(H.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=A.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Lr(t))this._createEndTagToken(),this.state=A.TAG_NAME,this._stateTagName(t);else switch(t){case k.GREATER_THAN_SIGN:{this._err(H.missingEndTagName),this.state=A.DATA;break}case k.EOF:{this._err(H.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(H.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.SOLIDUS:{this.state=A.SELF_CLOSING_START_TAG;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentTagToken();break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.tagName+=Ze;break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Fs(t)?uo(t):t)}}_stateRcdataLessThanSign(t){t===k.SOLIDUS?this.state=A.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=A.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Lr(t)?(this.state=A.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=A.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=A.BEFORE_ATTRIBUTE_NAME,!1;case k.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=A.SELF_CLOSING_START_TAG,!1;case k.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=A.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===k.SOLIDUS?this.state=A.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Lr(t)?(this.state=A.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case k.SOLIDUS:{this.state=A.SCRIPT_DATA_END_TAG_OPEN;break}case k.EXCLAMATION_MARK:{this.state=A.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=A.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Lr(t)?(this.state=A.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===k.HYPHEN_MINUS?(this.state=A.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===k.HYPHEN_MINUS?(this.state=A.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_ESCAPED,this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case k.HYPHEN_MINUS:{this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.GREATER_THAN_SIGN:{this.state=A.SCRIPT_DATA,this._emitChars(">");break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_ESCAPED,this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===k.SOLIDUS?this.state=A.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Lr(t)?(this._emitChars("<"),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Lr(t)?(this.state=A.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Zt.SCRIPT,!1)&&gm(this.preprocessor.peek(Zt.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Zt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.NULL:{this._err(H.unexpectedNullCharacter),this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case k.HYPHEN_MINUS:{this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.GREATER_THAN_SIGN:{this.state=A.SCRIPT_DATA,this._emitChars(">");break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ze);break}case k.EOF:{this._err(H.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===k.SOLIDUS?(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Zt.SCRIPT,!1)&&gm(this.preprocessor.peek(Zt.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Zt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=A.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.SOLIDUS:case k.GREATER_THAN_SIGN:case k.EOF:{this.state=A.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case k.EQUALS_SIGN:{this._err(H.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=A.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=A.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:case k.SOLIDUS:case k.GREATER_THAN_SIGN:case k.EOF:{this._leaveAttrName(),this.state=A.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case k.EQUALS_SIGN:{this._leaveAttrName(),this.state=A.BEFORE_ATTRIBUTE_VALUE;break}case k.QUOTATION_MARK:case k.APOSTROPHE:case k.LESS_THAN_SIGN:{this._err(H.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.currentAttr.name+=Ze;break}default:this.currentAttr.name+=String.fromCodePoint(Fs(t)?uo(t):t)}}_stateAfterAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.SOLIDUS:{this.state=A.SELF_CLOSING_START_TAG;break}case k.EQUALS_SIGN:{this.state=A.BEFORE_ATTRIBUTE_VALUE;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=A.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{this.state=A.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this.state=A.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(H.missingAttributeValue),this.state=A.DATA,this.emitCurrentTagToken();break}default:this.state=A.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.currentAttr.value+=Ze;break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case k.APOSTROPHE:{this.state=A.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.currentAttr.value+=Ze;break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this._leaveAttrValue(),this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=A.DATA,this.emitCurrentTagToken();break}case k.NULL:{this._err(H.unexpectedNullCharacter),this.currentAttr.value+=Ze;break}case k.QUOTATION_MARK:case k.APOSTROPHE:case k.LESS_THAN_SIGN:case k.EQUALS_SIGN:case k.GRAVE_ACCENT:{this._err(H.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this._leaveAttrValue(),this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.SOLIDUS:{this._leaveAttrValue(),this.state=A.SELF_CLOSING_START_TAG;break}case k.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this._err(H.missingWhitespaceBetweenAttributes),this.state=A.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case k.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(H.eofInTag),this._emitEOFToken();break}default:this._err(H.unexpectedSolidusInTag),this.state=A.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.data+=Ze;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Zt.DASH_DASH,!0)?(this._createCommentToken(Zt.DASH_DASH.length+1),this.state=A.COMMENT_START):this._consumeSequenceIfMatch(Zt.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Zt.DOCTYPE.length+1),this.state=A.DOCTYPE):this._consumeSequenceIfMatch(Zt.CDATA_START,!0)?this.inForeignNode?this.state=A.CDATA_SECTION:(this._err(H.cdataInHtmlContent),this._createCommentToken(Zt.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=A.BOGUS_COMMENT):this._ensureHibernation()||(this._err(H.incorrectlyOpenedComment),this._createCommentToken(2),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_START_DASH;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptClosingOfEmptyComment),this.state=A.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=A.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptClosingOfEmptyComment),this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this._err(H.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=A.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END_DASH;break}case k.LESS_THAN_SIGN:{n.data+="<",this.state=A.COMMENT_LESS_THAN_SIGN;break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.data+=Ze;break}case k.EOF:{this._err(H.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case k.EXCLAMATION_MARK:{n.data+="!",this.state=A.COMMENT_LESS_THAN_SIGN_BANG;break}case k.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=A.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===k.HYPHEN_MINUS?this.state=A.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=A.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===k.HYPHEN_MINUS?this.state=A.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=A.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==k.GREATER_THAN_SIGN&&t!==k.EOF&&this._err(H.nestedComment),this.state=A.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END;break}case k.EOF:{this._err(H.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=A.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentComment(n);break}case k.EXCLAMATION_MARK:{this.state=A.COMMENT_END_BANG;break}case k.HYPHEN_MINUS:{n.data+="-";break}case k.EOF:{this._err(H.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=A.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{n.data+="--!",this.state=A.COMMENT_END_DASH;break}case k.GREATER_THAN_SIGN:{this._err(H.incorrectlyClosedComment),this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this._err(H.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=A.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this.state=A.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case k.EOF:{this._err(H.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingWhitespaceBeforeDoctypeName),this.state=A.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Fs(t))this._createDoctypeToken(String.fromCharCode(uo(t))),this.state=A.DOCTYPE_NAME;else switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.NULL:{this._err(H.unexpectedNullCharacter),this._createDoctypeToken(Ze),this.state=A.DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this._err(H.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=A.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.AFTER_DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.name+=Ze;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Fs(t)?uo(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Zt.PUBLIC,!1)?this.state=A.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Zt.SYSTEM,!1)?this.state=A.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(H.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.QUOTATION_MARK:{this._err(H.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(H.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(H.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(H.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.publicId+=Ze;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case k.APOSTROPHE:{this.state=A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.publicId+=Ze;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.QUOTATION_MARK:{this._err(H.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(H.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.QUOTATION_MARK:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.QUOTATION_MARK:{this._err(H.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(H.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(H.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(H.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.systemId+=Ze;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case k.APOSTROPHE:{this.state=A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.NULL:{this._err(H.unexpectedNullCharacter),n.systemId+=Ze;break}case k.GREATER_THAN_SIGN:{this._err(H.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(H.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(H.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.NULL:{this._err(H.unexpectedNullCharacter);break}case k.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case k.RIGHT_SQUARE_BRACKET:{this.state=A.CDATA_SECTION_BRACKET;break}case k.EOF:{this._err(H.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===k.RIGHT_SQUARE_BRACKET?this.state=A.CDATA_SECTION_END:(this._emitChars("]"),this.state=A.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA;break}case k.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=A.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(k.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&mm(this.preprocessor.peek(1))?A.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){mm(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===k.SEMICOLON&&this._err(H.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}};const Kx=new Set([p.DD,p.DT,p.LI,p.OPTGROUP,p.OPTION,p.P,p.RB,p.RP,p.RT,p.RTC]),bm=new Set([...Kx,p.CAPTION,p.COLGROUP,p.TBODY,p.TD,p.TFOOT,p.TH,p.THEAD,p.TR]),Cu=new Set([p.APPLET,p.CAPTION,p.HTML,p.MARQUEE,p.OBJECT,p.TABLE,p.TD,p.TEMPLATE,p.TH]),X_=new Set([...Cu,p.OL,p.UL]),J_=new Set([...Cu,p.BUTTON]),xm=new Set([p.ANNOTATION_XML,p.MI,p.MN,p.MO,p.MS,p.MTEXT]),ym=new Set([p.DESC,p.FOREIGN_OBJECT,p.TITLE]),Z_=new Set([p.TR,p.TEMPLATE,p.HTML]),eL=new Set([p.TBODY,p.TFOOT,p.THEAD,p.TEMPLATE,p.HTML]),tL=new Set([p.TABLE,p.TEMPLATE,p.HTML]),nL=new Set([p.TD,p.TH]);class rL{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=p.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===p.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Y.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Y.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(kd,Y.HTML)}popUntilTableCellPopped(){this.popUntilPopped(nL,Y.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(tL,Y.HTML)}clearBackToTableBodyContext(){this.clearBackTo(eL,Y.HTML)}clearBackToTableRowContext(){this.clearBackTo(Z_,Y.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===p.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===p.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Y.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case Y.SVG:{if(ym.has(i))return!1;break}case Y.MATHML:{if(xm.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Cu)}hasInListItemScope(t){return this.hasInDynamicScope(t,X_)}hasInButtonScope(t){return this.hasInDynamicScope(t,J_)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case Y.HTML:{if(kd.has(n))return!0;if(Cu.has(n))return!1;break}case Y.SVG:{if(ym.has(n))return!1;break}case Y.MATHML:{if(xm.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Y.HTML)switch(this.tagIDs[n]){case t:return!0;case p.TABLE:case p.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Y.HTML)switch(this.tagIDs[t]){case p.TBODY:case p.THEAD:case p.TFOOT:return!0;case p.TABLE:case p.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Y.HTML)switch(this.tagIDs[n]){case t:return!0;case p.OPTION:case p.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Kx.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&bm.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&bm.has(this.currentTagId);)this.pop()}}const gc=3;var Vn;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Vn||(Vn={}));const Em={type:Vn.Marker};class iL{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const u=this.entries[o];if(u.type===Vn.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===a){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:o,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<gc)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<gc)return;const i=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<r.length;a++){const o=r[a];o.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=gc&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(Em)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Vn.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Vn.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Em);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Vn.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Vn.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Vn.Element&&n.element===t)}}const Rr={createDocument(){return{nodeName:"#document",mode:wn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Rr.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Rr.isTextNode(n)){n.value+=t;return}}Rr.appendChild(e,Rr.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Rr.isTextNode(r)?r.value+=t:Rr.insertBefore(e,Rr.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation=I(I({},e.sourceCodeLocation),t)}},Gx="html",sL="about:legacy-compat",aL="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Qx=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],oL=[...Qx,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],uL=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Xx=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],lL=[...Xx,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Tm(e,t){return t.some(n=>e.startsWith(n))}function cL(e){return e.name===Gx&&e.publicId===null&&(e.systemId===null||e.systemId===sL)}function dL(e){if(e.name!==Gx)return wn.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===aL)return wn.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),uL.has(n))return wn.QUIRKS;let r=t===null?oL:Qx;if(Tm(n,r))return wn.QUIRKS;if(r=t===null?Xx:lL,Tm(n,r))return wn.LIMITED_QUIRKS}return wn.NO_QUIRKS}const km={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},fL="definitionurl",hL="definitionURL",pL=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),mL=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Y.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Y.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Y.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Y.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Y.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Y.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Y.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Y.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Y.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Y.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Y.XMLNS}]]),gL=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),bL=new Set([p.B,p.BIG,p.BLOCKQUOTE,p.BODY,p.BR,p.CENTER,p.CODE,p.DD,p.DIV,p.DL,p.DT,p.EM,p.EMBED,p.H1,p.H2,p.H3,p.H4,p.H5,p.H6,p.HEAD,p.HR,p.I,p.IMG,p.LI,p.LISTING,p.MENU,p.META,p.NOBR,p.OL,p.P,p.PRE,p.RUBY,p.S,p.SMALL,p.SPAN,p.STRONG,p.STRIKE,p.SUB,p.SUP,p.TABLE,p.TT,p.U,p.UL,p.VAR]);function xL(e){const t=e.tagID;return t===p.FONT&&e.attrs.some(({name:r})=>r===Ei.COLOR||r===Ei.SIZE||r===Ei.FACE)||bL.has(t)}function Jx(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===fL){e.attrs[t].name=hL;break}}function Zx(e){for(let t=0;t<e.attrs.length;t++){const n=pL.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Qf(e){for(let t=0;t<e.attrs.length;t++){const n=mL.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function yL(e){const t=gL.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Ts(e.tagName))}function EL(e,t){return t===Y.MATHML&&(e===p.MI||e===p.MO||e===p.MN||e===p.MS||e===p.MTEXT)}function TL(e,t,n){if(t===Y.MATHML&&e===p.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Ei.ENCODING){const i=n[r].value.toLowerCase();return i===km.TEXT_HTML||i===km.APPLICATION_XML}}return t===Y.SVG&&(e===p.FOREIGN_OBJECT||e===p.DESC||e===p.TITLE)}function kL(e,t,n,r){return(!r||r===Y.HTML)&&TL(e,t,n)||(!r||r===Y.MATHML)&&EL(e,t)}const SL="hidden",wL=8,CL=3;var N;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(N||(N={}));const AL={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},ey=new Set([p.TABLE,p.TBODY,p.TFOOT,p.THEAD,p.TR]),Sm={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Rr,onParseError:null};let wm=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=N.INITIAL,this.originalInsertionMode=N.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=I(I({},Sm),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n!=null?n:this.treeAdapter.createDocument(),this.tokenizer=new Q_(this.options,this),this.activeFormattingElements=new iL(this.treeAdapter),this.fragmentContextID=r?Ts(this.treeAdapter.getTagName(r)):p.UNKNOWN,this._setContextModes(r!=null?r:this.document,this.fragmentContextID),this.openElements=new rL(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r=I(I({},Sm),n);t!=null||(t=r.treeAdapter.createElement(R.TEMPLATE,Y.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Y.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===p.TEMPLATE&&s.tmplInsertionModeStack.unshift(N.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:AL,a={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===Y.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Y.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=N.TEXT}switchToPlaintextParsing(){this.insertionMode=N.TEXT,this.originalInsertionMode=N.IN_BODY,this.tokenizer.state=ht.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===R.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Y.HTML))switch(this.fragmentContextID){case p.TITLE:case p.TEXTAREA:{this.tokenizer.state=ht.RCDATA;break}case p.STYLE:case p.XMP:case p.IFRAME:case p.NOEMBED:case p.NOFRAMES:case p.NOSCRIPT:{this.tokenizer.state=ht.RAWTEXT;break}case p.SCRIPT:{this.tokenizer.state=ht.SCRIPT_DATA;break}case p.PLAINTEXT:{this.tokenizer.state=ht.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&re(I({},n),{startTag:n});this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r!=null?r:this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Y.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Y.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(R.HTML,Y.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,p.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,a=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Le.END_TAG&&i===n.tagName?{endTag:I({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===p.SVG&&this.treeAdapter.getTagName(n)===R.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Y.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===p.MGLYPH||t.tagID===p.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Y.HTML)}_processToken(t){switch(t.type){case Le.CHARACTER:{this.onCharacter(t);break}case Le.NULL_CHARACTER:{this.onNullCharacter(t);break}case Le.COMMENT:{this.onComment(t);break}case Le.DOCTYPE:{this.onDoctype(t);break}case Le.START_TAG:{this._processStartTag(t);break}case Le.END_TAG:{this.onEndTag(t);break}case Le.EOF:{this.onEof(t);break}case Le.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return kL(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Vn.Marker||this.openElements.contains(i.element)),r=n===-1?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=N.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(p.P),this.openElements.popUntilTagNamePopped(p.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case p.TR:{this.insertionMode=N.IN_ROW;return}case p.TBODY:case p.THEAD:case p.TFOOT:{this.insertionMode=N.IN_TABLE_BODY;return}case p.CAPTION:{this.insertionMode=N.IN_CAPTION;return}case p.COLGROUP:{this.insertionMode=N.IN_COLUMN_GROUP;return}case p.TABLE:{this.insertionMode=N.IN_TABLE;return}case p.BODY:{this.insertionMode=N.IN_BODY;return}case p.FRAMESET:{this.insertionMode=N.IN_FRAMESET;return}case p.SELECT:{this._resetInsertionModeForSelect(t);return}case p.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case p.HTML:{this.insertionMode=this.headElement?N.AFTER_HEAD:N.BEFORE_HEAD;return}case p.TD:case p.TH:{if(t>0){this.insertionMode=N.IN_CELL;return}break}case p.HEAD:{if(t>0){this.insertionMode=N.IN_HEAD;return}break}}this.insertionMode=N.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===p.TEMPLATE)break;if(r===p.TABLE){this.insertionMode=N.IN_SELECT_IN_TABLE;return}}this.insertionMode=N.IN_SELECT}_isElementCausesFosterParenting(t){return ey.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case p.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Y.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case p.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return W_[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nM(this,t);return}switch(this.insertionMode){case N.INITIAL:{Ls(this,t);break}case N.BEFORE_HTML:{Zs(this,t);break}case N.BEFORE_HEAD:{ea(this,t);break}case N.IN_HEAD:{ta(this,t);break}case N.IN_HEAD_NO_SCRIPT:{na(this,t);break}case N.AFTER_HEAD:{ra(this,t);break}case N.IN_BODY:case N.IN_CAPTION:case N.IN_CELL:case N.IN_TEMPLATE:{ny(this,t);break}case N.TEXT:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{bc(this,t);break}case N.IN_TABLE_TEXT:{uy(this,t);break}case N.IN_COLUMN_GROUP:{Au(this,t);break}case N.AFTER_BODY:{Nu(this,t);break}case N.AFTER_AFTER_BODY:{wo(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){tM(this,t);return}switch(this.insertionMode){case N.INITIAL:{Ls(this,t);break}case N.BEFORE_HTML:{Zs(this,t);break}case N.BEFORE_HEAD:{ea(this,t);break}case N.IN_HEAD:{ta(this,t);break}case N.IN_HEAD_NO_SCRIPT:{na(this,t);break}case N.AFTER_HEAD:{ra(this,t);break}case N.TEXT:{this._insertCharacters(t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{bc(this,t);break}case N.IN_COLUMN_GROUP:{Au(this,t);break}case N.AFTER_BODY:{Nu(this,t);break}case N.AFTER_AFTER_BODY:{wo(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Sd(this,t);return}switch(this.insertionMode){case N.INITIAL:case N.BEFORE_HTML:case N.BEFORE_HEAD:case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:case N.IN_BODY:case N.IN_TABLE:case N.IN_CAPTION:case N.IN_COLUMN_GROUP:case N.IN_TABLE_BODY:case N.IN_ROW:case N.IN_CELL:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:case N.IN_TEMPLATE:case N.IN_FRAMESET:case N.AFTER_FRAMESET:{Sd(this,t);break}case N.IN_TABLE_TEXT:{Rs(this,t);break}case N.AFTER_BODY:{RL(this,t);break}case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{ML(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case N.INITIAL:{DL(this,t);break}case N.BEFORE_HEAD:case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:{this._err(t,H.misplacedDoctype);break}case N.IN_TABLE_TEXT:{Rs(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,H.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?rM(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case N.INITIAL:{Ls(this,t);break}case N.BEFORE_HTML:{PL(this,t);break}case N.BEFORE_HEAD:{FL(this,t);break}case N.IN_HEAD:{Bn(this,t);break}case N.IN_HEAD_NO_SCRIPT:{jL(this,t);break}case N.AFTER_HEAD:{$L(this,t);break}case N.IN_BODY:{$t(this,t);break}case N.IN_TABLE:{ds(this,t);break}case N.IN_TABLE_TEXT:{Rs(this,t);break}case N.IN_CAPTION:{HR(this,t);break}case N.IN_COLUMN_GROUP:{Zf(this,t);break}case N.IN_TABLE_BODY:{ul(this,t);break}case N.IN_ROW:{ll(this,t);break}case N.IN_CELL:{zR(this,t);break}case N.IN_SELECT:{dy(this,t);break}case N.IN_SELECT_IN_TABLE:{VR(this,t);break}case N.IN_TEMPLATE:{WR(this,t);break}case N.AFTER_BODY:{KR(this,t);break}case N.IN_FRAMESET:{GR(this,t);break}case N.AFTER_FRAMESET:{XR(this,t);break}case N.AFTER_AFTER_BODY:{ZR(this,t);break}case N.AFTER_AFTER_FRAMESET:{eM(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?iM(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case N.INITIAL:{Ls(this,t);break}case N.BEFORE_HTML:{BL(this,t);break}case N.BEFORE_HEAD:{HL(this,t);break}case N.IN_HEAD:{UL(this,t);break}case N.IN_HEAD_NO_SCRIPT:{zL(this,t);break}case N.AFTER_HEAD:{VL(this,t);break}case N.IN_BODY:{ol(this,t);break}case N.TEXT:{OR(this,t);break}case N.IN_TABLE:{ya(this,t);break}case N.IN_TABLE_TEXT:{Rs(this,t);break}case N.IN_CAPTION:{UR(this,t);break}case N.IN_COLUMN_GROUP:{jR(this,t);break}case N.IN_TABLE_BODY:{wd(this,t);break}case N.IN_ROW:{cy(this,t);break}case N.IN_CELL:{$R(this,t);break}case N.IN_SELECT:{fy(this,t);break}case N.IN_SELECT_IN_TABLE:{qR(this,t);break}case N.IN_TEMPLATE:{YR(this,t);break}case N.AFTER_BODY:{py(this,t);break}case N.IN_FRAMESET:{QR(this,t);break}case N.AFTER_FRAMESET:{JR(this,t);break}case N.AFTER_AFTER_BODY:{wo(this,t);break}}}onEof(t){switch(this.insertionMode){case N.INITIAL:{Ls(this,t);break}case N.BEFORE_HTML:{Zs(this,t);break}case N.BEFORE_HEAD:{ea(this,t);break}case N.IN_HEAD:{ta(this,t);break}case N.IN_HEAD_NO_SCRIPT:{na(this,t);break}case N.AFTER_HEAD:{ra(this,t);break}case N.IN_BODY:case N.IN_TABLE:case N.IN_CAPTION:case N.IN_COLUMN_GROUP:case N.IN_TABLE_BODY:case N.IN_ROW:case N.IN_CELL:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:{ay(this,t);break}case N.TEXT:{vR(this,t);break}case N.IN_TABLE_TEXT:{Rs(this,t);break}case N.IN_TEMPLATE:{hy(this,t);break}case N.AFTER_BODY:case N.IN_FRAMESET:case N.AFTER_FRAMESET:case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{Jf(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===k.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:case N.TEXT:case N.IN_COLUMN_GROUP:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:case N.IN_FRAMESET:case N.AFTER_FRAMESET:{this._insertCharacters(t);break}case N.IN_BODY:case N.IN_CAPTION:case N.IN_CELL:case N.IN_TEMPLATE:case N.AFTER_BODY:case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{ty(this,t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{bc(this,t);break}case N.IN_TABLE_TEXT:{oy(this,t);break}}}};function NL(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):sy(e,t),n}function IL(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function OL(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,a=i;a!==n;s++,a=i){i=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),u=o&&s>=CL;!o||u?(u&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=vL(e,o),r===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function vL(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function _L(e,t,n){const r=e.treeAdapter.getTagName(t),i=Ts(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===p.TEMPLATE&&s===Y.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function LL(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function Xf(e,t){for(let n=0;n<wL;n++){const r=NL(e,t);if(!r)break;const i=IL(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=OL(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),a&&_L(e,a,s),LL(e,i,r)}}function Sd(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function RL(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ML(e,t){e._appendCommentNode(t,e.document)}function Jf(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function DL(e,t){e._setDocumentType(t);const n=t.forceQuirks?wn.QUIRKS:dL(t);cL(t)||e._err(t,H.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=N.BEFORE_HTML}function Ls(e,t){e._err(t,H.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,wn.QUIRKS),e.insertionMode=N.BEFORE_HTML,e._processToken(t)}function PL(e,t){t.tagID===p.HTML?(e._insertElement(t,Y.HTML),e.insertionMode=N.BEFORE_HEAD):Zs(e,t)}function BL(e,t){const n=t.tagID;(n===p.HTML||n===p.HEAD||n===p.BODY||n===p.BR)&&Zs(e,t)}function Zs(e,t){e._insertFakeRootElement(),e.insertionMode=N.BEFORE_HEAD,e._processToken(t)}function FL(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.HEAD:{e._insertElement(t,Y.HTML),e.headElement=e.openElements.current,e.insertionMode=N.IN_HEAD;break}default:ea(e,t)}}function HL(e,t){const n=t.tagID;n===p.HEAD||n===p.BODY||n===p.HTML||n===p.BR?ea(e,t):e._err(t,H.endTagWithoutMatchingOpenElement)}function ea(e,t){e._insertFakeElement(R.HEAD,p.HEAD),e.headElement=e.openElements.current,e.insertionMode=N.IN_HEAD,e._processToken(t)}function Bn(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:{e._appendElement(t,Y.HTML),t.ackSelfClosing=!0;break}case p.TITLE:{e._switchToTextParsing(t,ht.RCDATA);break}case p.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ht.RAWTEXT):(e._insertElement(t,Y.HTML),e.insertionMode=N.IN_HEAD_NO_SCRIPT);break}case p.NOFRAMES:case p.STYLE:{e._switchToTextParsing(t,ht.RAWTEXT);break}case p.SCRIPT:{e._switchToTextParsing(t,ht.SCRIPT_DATA);break}case p.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=N.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(N.IN_TEMPLATE);break}case p.HEAD:{e._err(t,H.misplacedStartTagForHeadElement);break}default:ta(e,t)}}function UL(e,t){switch(t.tagID){case p.HEAD:{e.openElements.pop(),e.insertionMode=N.AFTER_HEAD;break}case p.BODY:case p.BR:case p.HTML:{ta(e,t);break}case p.TEMPLATE:{_i(e,t);break}default:e._err(t,H.endTagWithoutMatchingOpenElement)}}function _i(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==p.TEMPLATE&&e._err(t,H.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(p.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,H.endTagWithoutMatchingOpenElement)}function ta(e,t){e.openElements.pop(),e.insertionMode=N.AFTER_HEAD,e._processToken(t)}function jL(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.BASEFONT:case p.BGSOUND:case p.HEAD:case p.LINK:case p.META:case p.NOFRAMES:case p.STYLE:{Bn(e,t);break}case p.NOSCRIPT:{e._err(t,H.nestedNoscriptInHead);break}default:na(e,t)}}function zL(e,t){switch(t.tagID){case p.NOSCRIPT:{e.openElements.pop(),e.insertionMode=N.IN_HEAD;break}case p.BR:{na(e,t);break}default:e._err(t,H.endTagWithoutMatchingOpenElement)}}function na(e,t){const n=t.type===Le.EOF?H.openElementsLeftAfterEof:H.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=N.IN_HEAD,e._processToken(t)}function $L(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.BODY:{e._insertElement(t,Y.HTML),e.framesetOk=!1,e.insertionMode=N.IN_BODY;break}case p.FRAMESET:{e._insertElement(t,Y.HTML),e.insertionMode=N.IN_FRAMESET;break}case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:case p.NOFRAMES:case p.SCRIPT:case p.STYLE:case p.TEMPLATE:case p.TITLE:{e._err(t,H.abandonedHeadElementChild),e.openElements.push(e.headElement,p.HEAD),Bn(e,t),e.openElements.remove(e.headElement);break}case p.HEAD:{e._err(t,H.misplacedStartTagForHeadElement);break}default:ra(e,t)}}function VL(e,t){switch(t.tagID){case p.BODY:case p.HTML:case p.BR:{ra(e,t);break}case p.TEMPLATE:{_i(e,t);break}default:e._err(t,H.endTagWithoutMatchingOpenElement)}}function ra(e,t){e._insertFakeElement(R.BODY,p.BODY),e.insertionMode=N.IN_BODY,al(e,t)}function al(e,t){switch(t.type){case Le.CHARACTER:{ny(e,t);break}case Le.WHITESPACE_CHARACTER:{ty(e,t);break}case Le.COMMENT:{Sd(e,t);break}case Le.START_TAG:{$t(e,t);break}case Le.END_TAG:{ol(e,t);break}case Le.EOF:{ay(e,t);break}}}function ty(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function ny(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function qL(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function WL(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function YL(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_FRAMESET)}function KL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML)}function GL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&kd.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Y.HTML)}function QL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function XL(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML),n||(e.formElement=e.openElements.current))}function JL(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===p.LI&&i===p.LI||(n===p.DD||n===p.DT)&&(i===p.DD||i===p.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==p.ADDRESS&&i!==p.DIV&&i!==p.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML)}function ZL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML),e.tokenizer.state=ht.PLAINTEXT}function eR(e,t){e.openElements.hasInScope(p.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML),e.framesetOk=!1}function tR(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(R.A);n&&(Xf(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function nR(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function rR(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(p.NOBR)&&(Xf(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Y.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function iR(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function sR(e,t){e.treeAdapter.getDocumentMode(e.document)!==wn.QUIRKS&&e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,Y.HTML),e.framesetOk=!1,e.insertionMode=N.IN_TABLE}function ry(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Y.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function iy(e){const t=Wx(e,Ei.TYPE);return t!=null&&t.toLowerCase()===SL}function aR(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Y.HTML),iy(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function oR(e,t){e._appendElement(t,Y.HTML),t.ackSelfClosing=!0}function uR(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._appendElement(t,Y.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function lR(e,t){t.tagName=R.IMG,t.tagID=p.IMG,ry(e,t)}function cR(e,t){e._insertElement(t,Y.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ht.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=N.TEXT}function dR(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ht.RAWTEXT)}function fR(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ht.RAWTEXT)}function Cm(e,t){e._switchToTextParsing(t,ht.RAWTEXT)}function hR(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===N.IN_TABLE||e.insertionMode===N.IN_CAPTION||e.insertionMode===N.IN_TABLE_BODY||e.insertionMode===N.IN_ROW||e.insertionMode===N.IN_CELL?N.IN_SELECT_IN_TABLE:N.IN_SELECT}function pR(e,t){e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML)}function mR(e,t){e.openElements.hasInScope(p.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Y.HTML)}function gR(e,t){e.openElements.hasInScope(p.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(p.RTC),e._insertElement(t,Y.HTML)}function bR(e,t){e._reconstructActiveFormattingElements(),Jx(t),Qf(t),t.selfClosing?e._appendElement(t,Y.MATHML):e._insertElement(t,Y.MATHML),t.ackSelfClosing=!0}function xR(e,t){e._reconstructActiveFormattingElements(),Zx(t),Qf(t),t.selfClosing?e._appendElement(t,Y.SVG):e._insertElement(t,Y.SVG),t.ackSelfClosing=!0}function Am(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Y.HTML)}function $t(e,t){switch(t.tagID){case p.I:case p.S:case p.B:case p.U:case p.EM:case p.TT:case p.BIG:case p.CODE:case p.FONT:case p.SMALL:case p.STRIKE:case p.STRONG:{nR(e,t);break}case p.A:{tR(e,t);break}case p.H1:case p.H2:case p.H3:case p.H4:case p.H5:case p.H6:{GL(e,t);break}case p.P:case p.DL:case p.OL:case p.UL:case p.DIV:case p.DIR:case p.NAV:case p.MAIN:case p.MENU:case p.ASIDE:case p.CENTER:case p.FIGURE:case p.FOOTER:case p.HEADER:case p.HGROUP:case p.DIALOG:case p.DETAILS:case p.ADDRESS:case p.ARTICLE:case p.SEARCH:case p.SECTION:case p.SUMMARY:case p.FIELDSET:case p.BLOCKQUOTE:case p.FIGCAPTION:{KL(e,t);break}case p.LI:case p.DD:case p.DT:{JL(e,t);break}case p.BR:case p.IMG:case p.WBR:case p.AREA:case p.EMBED:case p.KEYGEN:{ry(e,t);break}case p.HR:{uR(e,t);break}case p.RB:case p.RTC:{mR(e,t);break}case p.RT:case p.RP:{gR(e,t);break}case p.PRE:case p.LISTING:{QL(e,t);break}case p.XMP:{dR(e,t);break}case p.SVG:{xR(e,t);break}case p.HTML:{qL(e,t);break}case p.BASE:case p.LINK:case p.META:case p.STYLE:case p.TITLE:case p.SCRIPT:case p.BGSOUND:case p.BASEFONT:case p.TEMPLATE:{Bn(e,t);break}case p.BODY:{WL(e,t);break}case p.FORM:{XL(e,t);break}case p.NOBR:{rR(e,t);break}case p.MATH:{bR(e,t);break}case p.TABLE:{sR(e,t);break}case p.INPUT:{aR(e,t);break}case p.PARAM:case p.TRACK:case p.SOURCE:{oR(e,t);break}case p.IMAGE:{lR(e,t);break}case p.BUTTON:{eR(e,t);break}case p.APPLET:case p.OBJECT:case p.MARQUEE:{iR(e,t);break}case p.IFRAME:{fR(e,t);break}case p.SELECT:{hR(e,t);break}case p.OPTION:case p.OPTGROUP:{pR(e,t);break}case p.NOEMBED:case p.NOFRAMES:{Cm(e,t);break}case p.FRAMESET:{YL(e,t);break}case p.TEXTAREA:{cR(e,t);break}case p.NOSCRIPT:{e.options.scriptingEnabled?Cm(e,t):Am(e,t);break}case p.PLAINTEXT:{ZL(e,t);break}case p.COL:case p.TH:case p.TD:case p.TR:case p.HEAD:case p.FRAME:case p.TBODY:case p.TFOOT:case p.THEAD:case p.CAPTION:case p.COLGROUP:break;default:Am(e,t)}}function yR(e,t){if(e.openElements.hasInScope(p.BODY)&&(e.insertionMode=N.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function ER(e,t){e.openElements.hasInScope(p.BODY)&&(e.insertionMode=N.AFTER_BODY,py(e,t))}function TR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function kR(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(p.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(p.FORM):n&&e.openElements.remove(n))}function SR(e){e.openElements.hasInButtonScope(p.P)||e._insertFakeElement(R.P,p.P),e._closePElement()}function wR(e){e.openElements.hasInListItemScope(p.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(p.LI),e.openElements.popUntilTagNamePopped(p.LI))}function CR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function AR(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function NR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function IR(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(R.BR,p.BR),e.openElements.pop(),e.framesetOk=!1}function sy(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==p.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,a))break}}function ol(e,t){switch(t.tagID){case p.A:case p.B:case p.I:case p.S:case p.U:case p.EM:case p.TT:case p.BIG:case p.CODE:case p.FONT:case p.NOBR:case p.SMALL:case p.STRIKE:case p.STRONG:{Xf(e,t);break}case p.P:{SR(e);break}case p.DL:case p.UL:case p.OL:case p.DIR:case p.DIV:case p.NAV:case p.PRE:case p.MAIN:case p.MENU:case p.ASIDE:case p.BUTTON:case p.CENTER:case p.FIGURE:case p.FOOTER:case p.HEADER:case p.HGROUP:case p.DIALOG:case p.ADDRESS:case p.ARTICLE:case p.DETAILS:case p.SEARCH:case p.SECTION:case p.SUMMARY:case p.LISTING:case p.FIELDSET:case p.BLOCKQUOTE:case p.FIGCAPTION:{TR(e,t);break}case p.LI:{wR(e);break}case p.DD:case p.DT:{CR(e,t);break}case p.H1:case p.H2:case p.H3:case p.H4:case p.H5:case p.H6:{AR(e);break}case p.BR:{IR(e);break}case p.BODY:{yR(e,t);break}case p.HTML:{ER(e,t);break}case p.FORM:{kR(e);break}case p.APPLET:case p.OBJECT:case p.MARQUEE:{NR(e,t);break}case p.TEMPLATE:{_i(e,t);break}default:sy(e,t)}}function ay(e,t){e.tmplInsertionModeStack.length>0?hy(e,t):Jf(e,t)}function OR(e,t){var n;t.tagID===p.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function vR(e,t){e._err(t,H.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function bc(e,t){if(e.openElements.currentTagId!==void 0&&ey.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=N.IN_TABLE_TEXT,t.type){case Le.CHARACTER:{uy(e,t);break}case Le.WHITESPACE_CHARACTER:{oy(e,t);break}}else La(e,t)}function _R(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_CAPTION}function LR(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_COLUMN_GROUP}function RR(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(R.COLGROUP,p.COLGROUP),e.insertionMode=N.IN_COLUMN_GROUP,Zf(e,t)}function MR(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_TABLE_BODY}function DR(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(R.TBODY,p.TBODY),e.insertionMode=N.IN_TABLE_BODY,ul(e,t)}function PR(e,t){e.openElements.hasInTableScope(p.TABLE)&&(e.openElements.popUntilTagNamePopped(p.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function BR(e,t){iy(t)?e._appendElement(t,Y.HTML):La(e,t),t.ackSelfClosing=!0}function FR(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Y.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ds(e,t){switch(t.tagID){case p.TD:case p.TH:case p.TR:{DR(e,t);break}case p.STYLE:case p.SCRIPT:case p.TEMPLATE:{Bn(e,t);break}case p.COL:{RR(e,t);break}case p.FORM:{FR(e,t);break}case p.TABLE:{PR(e,t);break}case p.TBODY:case p.TFOOT:case p.THEAD:{MR(e,t);break}case p.INPUT:{BR(e,t);break}case p.CAPTION:{_R(e,t);break}case p.COLGROUP:{LR(e,t);break}default:La(e,t)}}function ya(e,t){switch(t.tagID){case p.TABLE:{e.openElements.hasInTableScope(p.TABLE)&&(e.openElements.popUntilTagNamePopped(p.TABLE),e._resetInsertionMode());break}case p.TEMPLATE:{_i(e,t);break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TBODY:case p.TD:case p.TFOOT:case p.TH:case p.THEAD:case p.TR:break;default:La(e,t)}}function La(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,al(e,t),e.fosterParentingEnabled=n}function oy(e,t){e.pendingCharacterTokens.push(t)}function uy(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Rs(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)La(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ly=new Set([p.CAPTION,p.COL,p.COLGROUP,p.TBODY,p.TD,p.TFOOT,p.TH,p.THEAD,p.TR]);function HR(e,t){const n=t.tagID;ly.has(n)?e.openElements.hasInTableScope(p.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_TABLE,ds(e,t)):$t(e,t)}function UR(e,t){const n=t.tagID;switch(n){case p.CAPTION:case p.TABLE:{e.openElements.hasInTableScope(p.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_TABLE,n===p.TABLE&&ya(e,t));break}case p.BODY:case p.COL:case p.COLGROUP:case p.HTML:case p.TBODY:case p.TD:case p.TFOOT:case p.TH:case p.THEAD:case p.TR:break;default:ol(e,t)}}function Zf(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.COL:{e._appendElement(t,Y.HTML),t.ackSelfClosing=!0;break}case p.TEMPLATE:{Bn(e,t);break}default:Au(e,t)}}function jR(e,t){switch(t.tagID){case p.COLGROUP:{e.openElements.currentTagId===p.COLGROUP&&(e.openElements.pop(),e.insertionMode=N.IN_TABLE);break}case p.TEMPLATE:{_i(e,t);break}case p.COL:break;default:Au(e,t)}}function Au(e,t){e.openElements.currentTagId===p.COLGROUP&&(e.openElements.pop(),e.insertionMode=N.IN_TABLE,e._processToken(t))}function ul(e,t){switch(t.tagID){case p.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_ROW;break}case p.TH:case p.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(R.TR,p.TR),e.insertionMode=N.IN_ROW,ll(e,t);break}case p.CAPTION:case p.COL:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE,ds(e,t));break}default:ds(e,t)}}function wd(e,t){const n=t.tagID;switch(t.tagID){case p.TBODY:case p.TFOOT:case p.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE);break}case p.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE,ya(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TD:case p.TH:case p.TR:break;default:ya(e,t)}}function ll(e,t){switch(t.tagID){case p.TH:case p.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Y.HTML),e.insertionMode=N.IN_CELL,e.activeFormattingElements.insertMarker();break}case p.CAPTION:case p.COL:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:case p.TR:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,ul(e,t));break}default:ds(e,t)}}function cy(e,t){switch(t.tagID){case p.TR:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY);break}case p.TABLE:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,wd(e,t));break}case p.TBODY:case p.TFOOT:case p.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(p.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,wd(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TD:case p.TH:break;default:ya(e,t)}}function zR(e,t){const n=t.tagID;ly.has(n)?(e.openElements.hasInTableScope(p.TD)||e.openElements.hasInTableScope(p.TH))&&(e._closeTableCell(),ll(e,t)):$t(e,t)}function $R(e,t){const n=t.tagID;switch(n){case p.TD:case p.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_ROW);break}case p.TABLE:case p.TBODY:case p.TFOOT:case p.THEAD:case p.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),cy(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:break;default:ol(e,t)}}function dy(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.OPTION:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e._insertElement(t,Y.HTML);break}case p.OPTGROUP:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Y.HTML);break}case p.HR:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Y.HTML),t.ackSelfClosing=!0;break}case p.INPUT:case p.KEYGEN:case p.TEXTAREA:case p.SELECT:{e.openElements.hasInSelectScope(p.SELECT)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),t.tagID!==p.SELECT&&e._processStartTag(t));break}case p.SCRIPT:case p.TEMPLATE:{Bn(e,t);break}}}function fy(e,t){switch(t.tagID){case p.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===p.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===p.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop();break}case p.OPTION:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop();break}case p.SELECT:{e.openElements.hasInSelectScope(p.SELECT)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode());break}case p.TEMPLATE:{_i(e,t);break}}}function VR(e,t){const n=t.tagID;n===p.CAPTION||n===p.TABLE||n===p.TBODY||n===p.TFOOT||n===p.THEAD||n===p.TR||n===p.TD||n===p.TH?(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),e._processStartTag(t)):dy(e,t)}function qR(e,t){const n=t.tagID;n===p.CAPTION||n===p.TABLE||n===p.TBODY||n===p.TFOOT||n===p.THEAD||n===p.TR||n===p.TD||n===p.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),e.onEndTag(t)):fy(e,t)}function WR(e,t){switch(t.tagID){case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:case p.NOFRAMES:case p.SCRIPT:case p.STYLE:case p.TEMPLATE:case p.TITLE:{Bn(e,t);break}case p.CAPTION:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:{e.tmplInsertionModeStack[0]=N.IN_TABLE,e.insertionMode=N.IN_TABLE,ds(e,t);break}case p.COL:{e.tmplInsertionModeStack[0]=N.IN_COLUMN_GROUP,e.insertionMode=N.IN_COLUMN_GROUP,Zf(e,t);break}case p.TR:{e.tmplInsertionModeStack[0]=N.IN_TABLE_BODY,e.insertionMode=N.IN_TABLE_BODY,ul(e,t);break}case p.TD:case p.TH:{e.tmplInsertionModeStack[0]=N.IN_ROW,e.insertionMode=N.IN_ROW,ll(e,t);break}default:e.tmplInsertionModeStack[0]=N.IN_BODY,e.insertionMode=N.IN_BODY,$t(e,t)}}function YR(e,t){t.tagID===p.TEMPLATE&&_i(e,t)}function hy(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(p.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Jf(e,t)}function KR(e,t){t.tagID===p.HTML?$t(e,t):Nu(e,t)}function py(e,t){var n;if(t.tagID===p.HTML){if(e.fragmentContext||(e.insertionMode=N.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===p.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else Nu(e,t)}function Nu(e,t){e.insertionMode=N.IN_BODY,al(e,t)}function GR(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.FRAMESET:{e._insertElement(t,Y.HTML);break}case p.FRAME:{e._appendElement(t,Y.HTML),t.ackSelfClosing=!0;break}case p.NOFRAMES:{Bn(e,t);break}}}function QR(e,t){t.tagID===p.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==p.FRAMESET&&(e.insertionMode=N.AFTER_FRAMESET))}function XR(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.NOFRAMES:{Bn(e,t);break}}}function JR(e,t){t.tagID===p.HTML&&(e.insertionMode=N.AFTER_AFTER_FRAMESET)}function ZR(e,t){t.tagID===p.HTML?$t(e,t):wo(e,t)}function wo(e,t){e.insertionMode=N.IN_BODY,al(e,t)}function eM(e,t){switch(t.tagID){case p.HTML:{$t(e,t);break}case p.NOFRAMES:{Bn(e,t);break}}}function tM(e,t){t.chars=Ze,e._insertCharacters(t)}function nM(e,t){e._insertCharacters(t),e.framesetOk=!1}function my(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Y.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function rM(e,t){if(xL(t))my(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Y.MATHML?Jx(t):r===Y.SVG&&(yL(t),Zx(t)),Qf(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function iM(e,t){if(t.tagID===p.P||t.tagID===p.BR){my(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Y.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}R.AREA,R.BASE,R.BASEFONT,R.BGSOUND,R.BR,R.COL,R.EMBED,R.FRAME,R.HR,R.IMG,R.INPUT,R.KEYGEN,R.LINK,R.META,R.PARAM,R.SOURCE,R.TRACK,R.WBR;const sM=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,aM=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Nm={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gy(e,t){const n=gM(e),r=cx("type",{handlers:{root:oM,element:uM,text:lM,comment:xy,doctype:cM,raw:fM},unknown:hM}),i={parser:n?new wm(Nm):wm.getFragmentParser(void 0,Nm),handle(o){r(o,i)},stitches:!1,options:t||{}};r(e,i),ks(i,nr());const s=n?i.parser.document:i.parser.getFragment(),a=o_(s,{file:i.options.file});return i.stitches&&sl(a,"comment",function(o,u,l){const c=o;if(c.value.stitch&&l&&u!==void 0){const d=l.children;return d[u]=c.value.stitch,u}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function by(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function oM(e,t){by(e.children,t)}function uM(e,t){pM(e,t),by(e.children,t),mM(e,t)}function lM(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Le.CHARACTER,chars:e.value,location:Ra(e)};ks(t,nr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function cM(e,t){const n={type:Le.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Ra(e)};ks(t,nr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function dM(e,t){t.stitches=!0;const n=bM(e);if("children"in e&&"children"in n){const r=gy({type:"root",children:e.children},t.options);n.children=r.children}xy({type:"comment",value:{stitch:n}},t)}function xy(e,t){const n=e.value,r={type:Le.COMMENT,data:n,location:Ra(e)};ks(t,nr(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function fM(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,yy(t,nr(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(sM,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function hM(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))dM(n,t);else{let r="";throw aM.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ks(e,t){yy(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ht.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function yy(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function pM(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ht.PLAINTEXT)return;ks(t,nr(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:hi.html;i===hi.html&&n==="svg"&&(i=hi.svg);const s=k_(re(I({},e),{children:[]}),{space:i===hi.svg?"svg":"html"}),a={type:Le.START_TAG,tagName:n,tagID:Ts(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Ra(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function mM(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&v_.includes(n)||t.parser.tokenizer.state===ht.PLAINTEXT)return;ks(t,Zu(e));const r={type:Le.END_TAG,tagName:n,tagID:Ts(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Ra(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ht.RCDATA||t.parser.tokenizer.state===ht.RAWTEXT||t.parser.tokenizer.state===ht.SCRIPT_DATA)&&(t.parser.tokenizer.state=ht.DATA)}function gM(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Ra(e){const t=nr(e)||{line:void 0,column:void 0,offset:void 0},n=Zu(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function bM(e){return"children"in e?cs(re(I({},e),{children:[]})):cs(e)}function Co(e){return function(t,n){return gy(t,re(I({},e),{file:n}))}}var xc={exports:{}},Im;function xM(){return Im||(Im=1,(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=(function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function E(T){return T instanceof u?new u(T.type,E(T.content),T.alias):Array.isArray(T)?T.map(E):T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(E){return Object.prototype.toString.call(E).slice(8,-1)},objId:function(E){return E.__id||Object.defineProperty(E,"__id",{value:++s}),E.__id},clone:function E(T,v){v=v||{};var C,w;switch(o.util.type(T)){case"Object":if(w=o.util.objId(T),v[w])return v[w];C={},v[w]=C;for(var M in T)T.hasOwnProperty(M)&&(C[M]=E(T[M],v));return C;case"Array":return w=o.util.objId(T),v[w]?v[w]:(C=[],v[w]=C,T.forEach(function(P,U){C[U]=E(P,v)}),C);default:return T}},getLanguage:function(E){for(;E;){var T=i.exec(E.className);if(T)return T[1].toLowerCase();E=E.parentElement}return"none"},setLanguage:function(E,T){E.className=E.className.replace(RegExp(i,"gi"),""),E.classList.add("language-"+T)},currentScript:function(){if(typeof document=="undefined")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var E=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(E){var T=document.getElementsByTagName("script");for(var v in T)if(T[v].src==E)return T[v]}return null}},isActive:function(E,T,v){for(var C="no-"+T;E;){var w=E.classList;if(w.contains(T))return!0;if(w.contains(C))return!1;E=E.parentElement}return!!v}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(E,T){var v=o.util.clone(o.languages[E]);for(var C in T)v[C]=T[C];return v},insertBefore:function(E,T,v,C){C=C||o.languages;var w=C[E],M={};for(var P in w)if(w.hasOwnProperty(P)){if(P==T)for(var U in v)v.hasOwnProperty(U)&&(M[U]=v[U]);v.hasOwnProperty(P)||(M[P]=w[P])}var _=C[E];return C[E]=M,o.languages.DFS(o.languages,function(j,F){F===_&&j!=E&&(this[j]=M)}),M},DFS:function E(T,v,C,w){w=w||{};var M=o.util.objId;for(var P in T)if(T.hasOwnProperty(P)){v.call(T,P,T[P],C||P);var U=T[P],_=o.util.type(U);_==="Object"&&!w[M(U)]?(w[M(U)]=!0,E(U,v,null,w)):_==="Array"&&!w[M(U)]&&(w[M(U)]=!0,E(U,v,P,w))}}},plugins:{},highlightAll:function(E,T){o.highlightAllUnder(document,E,T)},highlightAllUnder:function(E,T,v){var C={callback:v,container:E,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),o.hooks.run("before-all-elements-highlight",C);for(var w=0,M;M=C.elements[w++];)o.highlightElement(M,T===!0,C.callback)},highlightElement:function(E,T,v){var C=o.util.getLanguage(E),w=o.languages[C];o.util.setLanguage(E,C);var M=E.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(M,C);var P=E.textContent,U={element:E,language:C,grammar:w,code:P};function _(F){U.highlightedCode=F,o.hooks.run("before-insert",U),U.element.innerHTML=U.highlightedCode,o.hooks.run("after-highlight",U),o.hooks.run("complete",U),v&&v.call(U.element)}if(o.hooks.run("before-sanity-check",U),M=U.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!U.code){o.hooks.run("complete",U),v&&v.call(U.element);return}if(o.hooks.run("before-highlight",U),!U.grammar){_(o.util.encode(U.code));return}if(T&&r.Worker){var j=new Worker(o.filename);j.onmessage=function(F){_(F.data)},j.postMessage(JSON.stringify({language:U.language,code:U.code,immediateClose:!0}))}else _(o.highlight(U.code,U.grammar,U.language))},highlight:function(E,T,v){var C={code:E,grammar:T,language:v};if(o.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=o.tokenize(C.code,C.grammar),o.hooks.run("after-tokenize",C),u.stringify(o.util.encode(C.tokens),C.language)},tokenize:function(E,T){var v=T.rest;if(v){for(var C in v)T[C]=v[C];delete T.rest}var w=new d;return h(w,w.head,E),c(E,w,T,w.head,0),m(w)},hooks:{all:{},add:function(E,T){var v=o.hooks.all;v[E]=v[E]||[],v[E].push(T)},run:function(E,T){var v=o.hooks.all[E];if(!(!v||!v.length))for(var C=0,w;w=v[C++];)w(T)}},Token:u};r.Prism=o;function u(E,T,v,C){this.type=E,this.content=T,this.alias=v,this.length=(C||"").length|0}u.stringify=function E(T,v){if(typeof T=="string")return T;if(Array.isArray(T)){var C="";return T.forEach(function(_){C+=E(_,v)}),C}var w={type:T.type,content:E(T.content,v),tag:"span",classes:["token",T.type],attributes:{},language:v},M=T.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(w.classes,M):w.classes.push(M)),o.hooks.run("wrap",w);var P="";for(var U in w.attributes)P+=" "+U+'="'+(w.attributes[U]||"").replace(/"/g,"&quot;")+'"';return"<"+w.tag+' class="'+w.classes.join(" ")+'"'+P+">"+w.content+"</"+w.tag+">"};function l(E,T,v,C){E.lastIndex=T;var w=E.exec(v);if(w&&C&&w[1]){var M=w[1].length;w.index+=M,w[0]=w[0].slice(M)}return w}function c(E,T,v,C,w,M){for(var P in v)if(!(!v.hasOwnProperty(P)||!v[P])){var U=v[P];U=Array.isArray(U)?U:[U];for(var _=0;_<U.length;++_){if(M&&M.cause==P+","+_)return;var j=U[_],F=j.inside,K=!!j.lookbehind,G=!!j.greedy,Z=j.alias;if(G&&!j.pattern.global){var le=j.pattern.toString().match(/[imsuy]*$/)[0];j.pattern=RegExp(j.pattern.source,le+"g")}for(var ye=j.pattern||j,me=C.next,z=w;me!==T.tail&&!(M&&z>=M.reach);z+=me.value.length,me=me.next){var S=me.value;if(T.length>E.length)return;if(!(S instanceof u)){var pe=1,Ie;if(G){if(Ie=l(ye,z,E,K),!Ie||Ie.index>=E.length)break;var Se=Ie.index,O=Ie.index+Ie[0].length,ke=z;for(ke+=me.value.length;Se>=ke;)me=me.next,ke+=me.value.length;if(ke-=me.value.length,z=ke,me.value instanceof u)continue;for(var at=me;at!==T.tail&&(ke<O||typeof at.value=="string");at=at.next)pe++,ke+=at.value.length;pe--,S=E.slice(z,ke),Ie.index-=z}else if(Ie=l(ye,0,S,K),!Ie)continue;var Se=Ie.index,Tt=Ie[0],gt=S.slice(0,Se),St=S.slice(Se+Tt.length),Mt=z+S.length;M&&Mt>M.reach&&(M.reach=Mt);var je=me.prev;gt&&(je=h(T,je,gt),z+=gt.length),f(T,je,pe);var ot=new u(P,F?o.tokenize(Tt,F):Tt,Z,Tt);if(me=h(T,je,ot),St&&h(T,me,St),pe>1){var gn={cause:P+","+_,reach:Mt};c(E,T,v,me.prev,z,gn),M&&gn.reach>M.reach&&(M.reach=gn.reach)}}}}}}function d(){var E={value:null,prev:null,next:null},T={value:null,prev:E,next:null};E.next=T,this.head=E,this.tail=T,this.length=0}function h(E,T,v){var C=T.next,w={value:v,prev:T,next:C};return T.next=w,C.prev=w,E.length++,w}function f(E,T,v){for(var C=T.next,w=0;w<v&&C!==E.tail;w++)C=C.next;T.next=C,C.prev=T,E.length-=w}function m(E){for(var T=[],v=E.head.next;v!==E.tail;)T.push(v.value),v=v.next;return T}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(E){var T=JSON.parse(E.data),v=T.language,C=T.code,w=T.immediateClose;r.postMessage(o.highlight(C,o.languages[v],v)),w&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function y(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return o})(t);e.exports&&(e.exports=n),typeof kh!="undefined"&&(kh.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(b,y){return" Error "+b+" while fetching file: "+y},s=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",u="loading",l="loaded",c="failed",d="pre[data-src]:not(["+o+'="'+l+'"]):not(['+o+'="'+u+'"])';function h(b,y,x){var E=new XMLHttpRequest;E.open("GET",b,!0),E.onreadystatechange=function(){E.readyState==4&&(E.status<400&&E.responseText?y(E.responseText):E.status>=400?x(i(E.status,E.statusText)):x(s))},E.send(null)}function f(b){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(y){var x=Number(y[1]),E=y[2],T=y[3];return E?T?[x,Number(T)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+d}),n.hooks.add("before-sanity-check",function(b){var y=b.element;if(y.matches(d)){b.code="",y.setAttribute(o,u);var x=y.appendChild(document.createElement("CODE"));x.textContent=r;var E=y.getAttribute("data-src"),T=b.language;if(T==="none"){var v=(/\.(\w+)$/.exec(E)||[,"none"])[1];T=a[v]||v}n.util.setLanguage(x,T),n.util.setLanguage(y,T);var C=n.plugins.autoloader;C&&C.loadLanguages(T),h(E,function(w){y.setAttribute(o,l);var M=f(y.getAttribute("data-range"));if(M){var P=w.split(/\r\n?|\n/g),U=M[0],_=M[1]==null?P.length:M[1];U<0&&(U+=P.length),U=Math.max(0,Math.min(U-1,P.length)),_<0&&(_+=P.length),_=Math.max(0,Math.min(_,P.length)),w=P.slice(U,_).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(U+1))}x.textContent=w,n.highlightElement(x)},function(w){y.setAttribute(o,c),x.textContent=w})}}),n.plugins.fileHighlight={highlight:function(y){for(var x=(y||document).querySelectorAll(d),E=0,T;T=x[E++];)n.highlightElement(T)}};var m=!1;n.fileHighlight=function(){m||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),m=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(xc)),xc.exports}var yM=xM();const EM=ka(yM);function TM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function Cd(e,t){return Array(t+1).join(e)}function kM(e){return e.replace(/^\n*/,"")}function SM(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var wM=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function eh(e){return th(e,wM)}var Ey=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Ty(e){return th(e,Ey)}function CM(e){return Sy(e,Ey)}var ky=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function AM(e){return th(e,ky)}function NM(e){return Sy(e,ky)}function th(e,t){return t.indexOf(e.nodeName)>=0}function Sy(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var Vt={};Vt.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Vt.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}};Vt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var i=Cd(r===1?"=":"-",e.length);return`

`+e+`
`+i+`

`}else return`

`+Cd("#",r)+" "+e+`

`}};Vt.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Vt.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}};Vt.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",i=t.parentNode;if(i.nodeName==="OL"){var s=i.getAttribute("start"),a=Array.prototype.indexOf.call(i.children,t);r=(s?Number(s)+a:a+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Vt.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Vt.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",i=(r.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,a=n.fence.charAt(0),o=3,u=new RegExp("^"+a+"{3,}","gm"),l;l=u.exec(s);)l[0].length>=o&&(o=l[0].length+1);var c=Cd(a,o);return`

`+c+i+`
`+s.replace(/\n$/,"")+`
`+c+`

`}};Vt.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}};Vt.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=Iu(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+r+")"}};Vt.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),i=Iu(t.getAttribute("title"));i&&(i=' "'+i+'"');var s,a;switch(n.linkReferenceStyle){case"collapsed":s="["+e+"][]",a="["+e+"]: "+r+i;break;case"shortcut":s="["+e+"]",a="["+e+"]: "+r+i;break;default:var o=this.references.length+1;s="["+e+"]["+o+"]",a="["+o+"]: "+r+i}return this.references.push(a),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Vt.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}};Vt.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}};Vt.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}};Vt.image={filter:"img",replacement:function(e,t){var n=Iu(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=Iu(t.getAttribute("title")),s=i?' "'+i+'"':"";return r?"!["+n+"]("+r+s+")":""}};function Iu(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function wy(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}wy.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=yc(this.array,e,this.options))||(t=yc(this._keep,e,this.options))||(t=yc(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function yc(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(IM(i,t,n))return i}}function IM(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function OM(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(d){return d.nodeName==="PRE"};if(!(!t.firstChild||i(t))){for(var s=null,a=!1,o=null,u=Om(o,t,i);u!==t;){if(u.nodeType===3||u.nodeType===4){var l=u.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!a&&l[0]===" "&&(l=l.substr(1)),!l){u=Ec(u);continue}u.data=l,s=u}else if(u.nodeType===1)n(u)||u.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,a=!1):r(u)||i(u)?(s=null,a=!0):s&&(a=!1);else{u=Ec(u);continue}var c=Om(o,u,i);o=u,u=c}s&&(s.data=s.data.replace(/ $/,""),s.data||Ec(s))}}function Ec(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function Om(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var nh=typeof window!="undefined"?window:{};function vM(){var e=nh.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch(n){}return t}function _M(){var e=function(){};return LM()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function LM(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){nh.ActiveXObject&&(e=!0)}return e}var RM=vM()?nh.DOMParser:_M();function MM(e,t){var n;if(typeof e=="string"){var r=DM().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return OM({element:n,isBlock:eh,isVoid:Ty,isPre:t.preformattedCode?PM:null}),n}var Tc;function DM(){return Tc=Tc||new RM,Tc}function PM(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function BM(e,t){return e.isBlock=eh(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=FM(e),e.flankingWhitespace=HM(e,t),e}function FM(e){return!Ty(e)&&!AM(e)&&/^\s*$/i.test(e.textContent)&&!CM(e)&&!NM(e)}function HM(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=UM(e.textContent);return n.leadingAscii&&vm("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&vm("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function UM(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function vm(e,t,n){var r,i,s;return e==="left"?(r=t.previousSibling,i=/ $/):(r=t.nextSibling,i=/^ /),r&&(r.nodeType===3?s=i.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!eh(r)&&(s=i.test(r.textContent))),s}var jM=Array.prototype.reduce,zM=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ou(e){if(!(this instanceof Ou))return new Ou(e);var t={rules:Vt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=TM({},t,e),this.rules=new wy(this.options)}Ou.prototype={turndown:function(e){if(!qM(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=Cy.call(this,new MM(e,this.options));return $M.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return zM.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function Cy(e){var t=this;return jM.call(e.childNodes,function(n,r){r=new BM(r,t.options);var i="";return r.nodeType===3?i=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(i=VM.call(t,r)),Ay(n,i)},"")}function $M(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=Ay(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function VM(e){var t=this.rules.forNode(e),n=Cy.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function Ay(e,t){var n=SM(e),r=kM(t),i=Math.max(e.length-n.length,t.length-r.length),s=`

`.substring(0,i);return n+s+r}function qM(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}const WM=new nt("proofreading"),YM=rt.create({name:"proofreadingDecoration",addOptions(){return{suggestions:[]}},addProseMirrorPlugins(){return[new Xe({key:WM,props:{decorations:e=>{const t=[],{doc:n}=e,r=this.options.suggestions;return n.descendants((i,s)=>{if(!i.isText)return;const a=i.text||"";r.forEach(({original:o,change:u})=>{let l=0;for(;l<a.length;){const c=a.indexOf(o,l);if(c===-1)break;const d=s+c,h=d+o.length;t.push(Ht.inline(d,h,{class:"proofreading-mark",nodeName:"span","data-original":o,"data-suggestion":u,"data-from":d,"data-to":h})),l=c+o.length}})}),tt.create(n,t)}}})]}});function KM(e){const[t,n]=B.useState(null),r=B.useRef(null);return B.useEffect(()=>{if(!e)return;const a=o=>{const u=o.target.closest(".proofreading-mark");u&&u.dataset.suggestion?n(u):n(null)};return e.view.dom.addEventListener("mousedown",a),()=>e.view.dom.removeEventListener("mousedown",a)},[e]),{activeSpan:t,bubbleRef:r,applyChange:()=>{var c,d,h;if(!t||!e){console.error("Cannot apply change: activeSpan or editor is null");return}const a=Number(t.dataset.from),o=Number(t.dataset.to),u=t.dataset.suggestion,l=t.dataset.original;if(!u||isNaN(a)||isNaN(o)){console.error("Invalid data attributes:",{from:a,to:o,suggestion:u,original:l});return}try{e.chain().focus().deleteRange({from:a,to:o}).insertContent(u).run();const f=((h=(d=(c=e.extensionManager.extensions.find(b=>b.name==="proofreadingDecoration"))==null?void 0:c.options)==null?void 0:d.suggestions)==null?void 0:h.filter(b=>b.original!==l))||[],m=e.extensionManager.extensions.find(b=>b.name==="proofreadingDecoration");m&&(m.options.suggestions=f,e.view.dispatch(e.state.tr)),n(null)}catch(f){console.error("Error applying change:",f)}},rejectChange:()=>{var o,u,l;if(!t||!e){console.error("Cannot reject change: activeSpan or editor is null");return}const a=t.dataset.original;if(!a){console.error("No original data attribute found");return}try{const c=((l=(u=(o=e.extensionManager.extensions.find(h=>h.name==="proofreadingDecoration"))==null?void 0:o.options)==null?void 0:u.suggestions)==null?void 0:l.filter(h=>h.original!==a))||[],d=e.extensionManager.extensions.find(h=>h.name==="proofreadingDecoration");d&&(d.options.suggestions=c,e.view.dispatch(e.state.tr)),n(null)}catch(c){console.error("Error rejecting change:",c)}}}}Yi.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1});const _m=[{label:"Arial",value:"font-arial"},{label:"Georgia",value:"font-georgia"},{label:"Mono",value:"font-mono"},{label:"Comic Sans",value:"font-comic"}],GM=({blog:e,activeTab:t,setActiveTab:n,content:r,setContent:i,title:s,proofreadingResults:a,handleReplace:o,isSavingKeyword:u})=>{var gh,bh,xh;const[l,c]=B.useState(!0),[d,h]=B.useState(_m[0].value),[f,m]=B.useState(!1),[b,y]=B.useState(!1),[x,E]=B.useState(""),[T,v]=B.useState(""),[C,w]=B.useState(""),[M,P]=B.useState(!1),[U,_]=B.useState(!1),[j,F]=B.useState(null),[K,G]=B.useState(!1),[Z,le]=B.useState(null),[ye,me]=B.useState(null),[z,S]=B.useState({from:0,to:0}),[pe,Ie]=B.useState(!1),[O,ke]=B.useState(null),[at,Se]=B.useState(!1),[Tt,gt]=B.useState(null),[St,Mt]=B.useState(""),je=B.useRef(null),ot=B.useRef(null),gn=B.useRef(null),[Cr,Ar]=B.useState({top:0,left:0}),bn=Md(),{handlePopup:Dt}=u1(),un=pi(L=>L.auth.user),qt=(bh=un==null?void 0:un.plan)!=null?bh:(gh=un==null?void 0:un.subscription)==null?void 0:gh.plan,Fn=B.useRef(!1),Ee=l1(),Me=B.useRef(null),ut=Ee.pathname===`/blog-editor/${e==null?void 0:e._id}`,[dt,it]=B.useState(!1),[D,ee]=B.useState(null),xe=Ru(),ce=(xh=r!=null?r:e==null?void 0:e.content)!=null?xh:"",ve=B.useCallback(L=>{if(!L)return"<p></p>";try{const W=Yi.parse(L.replace(/!\[(["'""])(.*?)\1\]\((.*?)\)/g,(Ae,We,st,Wt)=>`![${st}](${Wt})`).replace(/'/g,"&apos;")),de=new DOMParser().parseFromString(W,"text/html");return de.querySelectorAll("script").forEach(Ae=>Ae.remove()),de.body.innerHTML}catch(W){return console.warn("Failed to parse markdown:",W),`<p>${L}</p>`}},[]),ft=B.useCallback(L=>{if(!L)return"";try{const ue=new DOMParser().parseFromString(L,"text/html");ue.querySelectorAll("script").forEach(st=>st.remove());const de=ue.body.innerHTML,Ae=new Ou({strongDelimiter:"**",emDelimiter:"*",headingStyle:"atx",bulletListMarker:"-",codeDelimiter:"```",fence:"```",hr:"---"});return Ae.addRule("heading",{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(st,Wt){const kt=parseInt(Wt.nodeName.charAt(1));return`
`+"#".repeat(kt)+" "+st+`

`}}),Ae.addRule("list",{filter:["ul","ol"],replacement:function(st,Wt){return`
`+st+`
`}}),Ae.addRule("listItem",{filter:"li",replacement:function(st,Wt){return(Wt.parentNode.nodeName==="OL"?"1. ":"- ")+st.trim()+`
`}}),Ae.turndown(L)}catch(W){return console.warn("Failed to convert HTML to markdown:",W),L}},[]),xn=B.useMemo(()=>ce?Yi.parse(ce,{gfm:!0}):"<p></p>",[ce]),$=zw({extensions:[N4.configure({heading:{levels:[1,2,3]},bold:{HTMLAttributes:{class:"font-bold"}}}),zA.configure({HTMLAttributes:{class:"text-blue-600 underline"}}),v4.configure({HTMLAttributes:{class:"rounded-lg mx-auto w-3/4 h-auto object-contain",style:"display: block;;"}}),r4,L4.configure({types:["heading","paragraph"]}),YM.configure({suggestions:a})],content:xn,onUpdate:({editor:L})=>{const W=L.getHTML(),ue=ft(W);ue!==ce&&(i(ue),Se(!0))},editorProps:{attributes:{class:`prose max-w-none focus:outline-none p-4 min-h-[400px] opacity-100 ${d} blog-content editor-container`}},onSelectionUpdate:({editor:L})=>{const{from:W,to:ue}=L.state.selection;S({from:W,to:ue})}},[d,a,ft,i]),{activeSpan:X,bubbleRef:oe,applyChange:Ce,rejectChange:Pe}=KM($);B.useEffect(()=>{(()=>{if(t==="Normal"&&$&&$.view){const W=$.view.dom;W&&(W.scrollTop=0)}else if(t==="Markdown"){const W=ot.current;W&&(W.scrollTop=0)}else if(t==="HTML"){const W=je.current;W&&(W.scrollTop=0)}})()},[t,$]),B.useEffect(()=>{c(!0);const L=setTimeout(()=>{c(!1),$&&t==="Normal"&&$.commands.focus()},300);return()=>clearTimeout(L)},[t,$]),B.useEffect(()=>{(e==null?void 0:e.status)==="failed"&&!Fn.current&&(ie.error("Your blog generation failed. You can write blog manually."),Fn.current=!0)},[e==null?void 0:e.status]),B.useEffect(()=>{const L=document.createElement("style");return L.id="text-editor-styles",L.textContent=`
      .font-arial { font-family: Arial, sans-serif; }
      .font-georgia { font-family: Georgia, serif; }
      .font-mono { font-family: 'SF Mono', monospace; }
      .font-comic { font-family: "Comic Sans MS", cursive; }
      .bubble-menu {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 0.25rem;
        display: flex;
        gap: 0.25rem;
        z-index: 50;
      }
      .suggestion-highlight {
        background: #fefcbf;
        cursor: pointer;
      }
      .editor-container {
        width: 100% !important;
        background: white;
      }
      .editor-container h1 {
        font-size: 1.5rem;
      }
      .editor-container h2 {
        font-size: 1.25rem;
      }
      .editor-container h3 {
        font-size: 1rem;
      }
      .editor-container ul, .editor-container ol {
        margin: 1rem 0;
        padding-left: 1.5rem;
      }
      .editor-container ul {
        list-style-type: disc;
      }
      .editor-container ol {
        list-style-type: decimal;
      }
      .editor-container li {
        margin: 0.5rem 0;
      }
      .editor-container p {
        color: #374151;
      }
      .editor-container strong {
        font-weight: bold;
        color: #1f2937;
      }
      .editor-container em {
        font-style: italic;
      }
      .editor-container a {
        color: #2563eb;
        text-decoration: underline;
        position: relative;
      }
      .editor-container a:hover {
        color: #1d4ed8;
      }
      .editor-container img {
        display: block;
        margin: 1.5rem auto;
        max-width: 100%;
        height: auto;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .editor-tab {
        padding: 0.75rem 1.5rem;
        font-weight: 500;
        border-bottom: 2px solid transparent;
        color: #6b7280;
        transition: all 0.2s ease;
        cursor: pointer;
      }
      .editor-tab:hover {
        color: #3b82f6;
        background: #f8fafc;
      }
      .editor-tab.active {
        color: #3b82f6;
        border-bottom-color: #3b82f6;
        background: white;
      }
      .code-textarea {
        font-family: 'SF Mono', monospace;
        font-size: 14px;
        border: none;
        outline: none;
        resize: none;
        background: #f8fafc;
        color: #1f2937;
        padding: 1.5rem;
        border-radius: 0.5rem;
        white-space: pre-wrap;
      }
      .code-textarea:focus {
        background: white;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
      }
      .suggestion-tooltip {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        padding: 0.75rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 60;
        max-width: 300px;
        font-size: 0.875rem;
      }
      .proof-ui-bubble {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        padding: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 60;
      }
    `,document.head.appendChild(L),()=>{const W=document.getElementById("text-editor-styles");W&&W.parentNode&&W.parentNode.removeChild(W)}},[]),B.useEffect(()=>{if($&&t==="Normal"&&!$.isDestroyed){const L=$.getHTML(),W=ve(ce);if(L!==W){const{from:ue,to:de}=$.state.selection;$.commands.setContent(W,!1),$.commands.setTextSelection({from:ue,to:de})}}},[ce,t,$,ve]),B.useEffect(()=>{if($){const L=$.extensionManager.extensions.find(W=>W.name==="proofreadingDecoration");L&&(L.options.suggestions=a,$.view.dispatch($.view.state.tr))}},[a,$]),B.useEffect(()=>{if($)return _(!0),()=>{$.isDestroyed||$.destroy()}},[$]),B.useEffect(()=>{t==="HTML"&&!M&&requestAnimationFrame(()=>EM.highlightAll())},[ce,t,M]),B.useEffect(()=>{var W;const L=(W=e==null?void 0:e.content)!=null?W:"";if(ce!==L&&i(L),$&&!$.isDestroyed&&t==="Normal"){const ue=L?Yi.parse(L.replace(/!\[(["'""])(.*?)\1\]\((.*?)\)/g,(de,Ae,We,st)=>`![${We}](${st})`).replace(/'/g,"&apos;"),{gfm:!0}):"<p></p>";if($.getHTML()!==ue){const{from:de,to:Ae}=$.state.selection;$.commands.setContent(ue,!1),$.commands.setTextSelection({from:de,to:Ae})}}},[e,$,t,i]),B.useEffect(()=>{t==="HTML"&&Mt(ve(ce).replace(/>\s*</g,`>
<`))},[ce,t,ve]),B.useEffect(()=>{const L=W=>{gn.current&&!gn.current.contains(W.target)&&setShowModelDropdown(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]),B.useLayoutEffect(()=>{if(X instanceof HTMLElement&&oe.current){const L=X.getBoundingClientRect(),W=oe.current.offsetHeight,ue=L.top+window.scrollY-W-8,de=L.left+window.scrollX;Ar({top:ue,left:de})}},[X]);const Be=()=>{Dt({title:"Upgrade Required",description:g.jsxs(g.Fragment,{children:[g.jsx("span",{children:"Editing blogs is only available for Pro and Enterprise users."}),g.jsx("br",{}),g.jsx("span",{children:"Upgrade your plan to unlock this feature."})]}),confirmText:"Buy Now",cancelText:"Cancel",onConfirm:()=>bn("/pricing")})},we=B.useCallback(L=>{if(qt==="free"||qt==="basic"){Be();return}L()},[qt,Dt,bn]),ir=B.useCallback(()=>{if(!$||$.state.selection.empty){ie.error("Select text to link.");return}we(()=>{E(""),m(!0)})},[$,we]),Ri=B.useCallback(()=>{we(()=>{v(""),w(""),y(!0)})},[we]),Nr=()=>{Dt(qt==="free"||qt==="basic"?{title:"Upgrade Required",description:"Rewrite is only available for Pro and Enterprise users.",confirmText:"Buy Now",cancelText:"Cancel",onConfirm:()=>bn("/pricing")}:{title:"Retry Blog Generation",description:`Are you sure you want to retry generating this blog?
It will be of 10 credits`,onConfirm:pl})},yn=B.useCallback(()=>{if(!x||!/https?:\/\//i.test(x)){ie.error("Enter a valid URL.");return}if($){const{from:L,to:W}=$.state.selection;$.chain().focus().setLink({href:x,target:"_blank",rel:"noopener noreferrer"}).setTextSelection({from:L,to:W}).run(),m(!1),ie.success("Link added.")}},[x,$]),qe=B.useCallback((L,W,ue)=>{const de=ue.current;if(!de)return;const Ae=de.selectionStart,We=de.selectionEnd,st=de.value.substring(Ae,We),Wt=`${L}${st}${W}`,kt=de.value.substring(0,Ae)+Wt+de.value.substring(We);i(kt),Se(!0),requestAnimationFrame(()=>{const ei=Ae+L.length+st.length;de.setSelectionRange(ei,ei),de.focus()})},[i]),hl=B.useCallback(()=>{if(!T||!/https?:\/\//i.test(T)){ie.error("Enter a valid image URL.");return}if(T.includes("<script")||T.includes("<\/script")){ie.error("Script tags are not allowed in image URLs.");return}if(t==="Normal"&&$){const{from:L}=$.state.selection;$.chain().focus().setImage({src:T,alt:C}).setTextSelection(L).run(),y(!1),ie.success("Image added.")}else if(t==="Markdown"){const L=`![${C}](${T})`;qe(L,"",ot),y(!1),ie.success("Image added.")}else if(t==="HTML"){const L=`<img src="${T}" alt="${C}" />`;qe(L,"",je),y(!1),ie.success("Image added.")}},[T,C,$,t,qe]),Hn=B.useCallback(L=>{const W=L.target;if(W.selectionStart!==W.selectionEnd){const ue=W.getBoundingClientRect(),de=window.pageYOffset||document.documentElement.scrollTop;F({top:ue.top+de-40,left:ue.left+10})}else F(null)},[]),ws=()=>Je(null,null,function*(){if(!(e!=null&&e._id)){ie.error("Blog ID is missing.");return}if(!$&&t==="Normal"){ie.error("Editor is not initialized.");return}let L,W,ue;if(t==="Normal"){const Ae=$.state.selection;if(W=Ae.from,ue=Ae.to,W===ue){ie.error("Please select some text to retry.");return}L=$.state.doc.textBetween(W,ue,`
`)}else{const We=(t==="Markdown"?ot:je).current;if(!We){ie.error("Editor is not initialized.");return}if(W=We.selectionStart,ue=We.selectionEnd,W===ue){ie.error("Please select some text to retry.");return}L=We.value.substring(W,ue)}me(L),S({from:W,to:ue});const de={contentPart:L.trim()};$&&$.commands.blur();try{G(!0);const Ae=yield c1(e._id,de);Ae.data?(le(Ae.data),Ie(!0)):ie.error("No content received from retry.")}catch(Ae){console.error("Retry failed:",Ae),ie.error(Ae.message||"Retry failed.")}finally{G(!1)}}),pl=()=>Je(null,null,function*(){if(!(e!=null&&e._id)){ie.error("Blog ID is missing.");return}const L={createNew:!0};try{yield xe(CE({id:e._id,payload:L})),bn("/blogs")}catch(W){console.error("Retry failed:",W),ie.error(W.message||"Retry failed.")}}),Ba=()=>{if(Z){if(t==="Normal"&&$){const L=ve(Z);$.chain().focus().deleteRange({from:z.from,to:z.to}).insertContentAt(z.from,L).setTextSelection({from:z.from,to:z.from+L.length}).run()}else{const W=(t==="Markdown"?ot:je).current;i(ue=>{const de=ue.substring(0,z.from)+Z+ue.substring(z.to);return W&&requestAnimationFrame(()=>{W.setSelectionRange(z.from,z.from+Z.length),W.focus()}),de})}ie.success("Selected lines replaced successfully!"),Ie(!1),le(null),me(null),S({from:0,to:0}),Se(!0)}},Fa=()=>{Ie(!1),le(null),me(null),S({from:0,to:0}),ie.info("Retry content discarded.")},ml=B.useCallback(L=>{if(L.target.tagName==="IMG"){const{src:W,alt:ue}=L.target;ee({src:W,alt:ue||""}),w(ue||""),it(!0)}},[]);B.useEffect(()=>{var L;if(((L=e==null?void 0:e.images)==null?void 0:L.length)>0){let W=ce;(ce.match(/{Image:.*?}/g)||[]).forEach((de,Ae)=>{const We=e.images[Ae];We!=null&&We.url&&(W=W.replace(de,`![${We.alt||"Image"}](${We.url})`))}),i(W)}},[e,ce,i]);const dE=B.useCallback(()=>{if(D){if(t==="Normal"&&$){let L=!1;$.state.doc.descendants((W,ue)=>{W.type.name==="image"&&W.attrs.src===D.src&&($.chain().focus().deleteRange({from:ue,to:ue+1}).run(),L=!0)}),L?(ie.success("Image deleted."),it(!1),ee(null),w(""),Se(!0)):ie.error("Failed to delete image.")}else if(t==="Markdown"){const L=new RegExp(`!\\[${Ir(D.alt||"")}\\]\\(${Ir(D.src)}\\)`,"g");i(W=>{const ue=W.replace(L,"");return Se(!0),ue}),ie.success("Image deleted."),it(!1),ee(null),w("")}else if(t==="HTML"){const L=new RegExp(`<img\\s+src="${Ir(D.src)}"\\s+alt="${Ir(D.alt||"")}"\\s*/>`,"g");i(W=>{const de=ve(W).replace(L,""),Ae=ft(de);return Se(!0),Ae}),ie.success("Image deleted."),it(!1),ee(null),w("")}}},[D,$,t,i,ve,ft]);B.useEffect(()=>{if(t==="Normal"&&$&&$.view){const L=$.view.dom;return L.addEventListener("click",ml),()=>{L.removeEventListener("click",ml)}}},[$,t,ml]);const ph=B.useCallback(()=>{if(!D||!C){ie.error("Alt text is required.");return}if(t==="Normal"&&$){let L=!1;$.state.doc.descendants((W,ue)=>{W.type.name==="image"&&W.attrs.src===D.src&&($.chain().focus().setNodeSelection(ue).setImage({src:D.src,alt:C}).run(),L=!0)}),L?(ie.success("Image alt text updated."),it(!1),ee(null),w(""),Se(!0)):ie.error("Failed to update image alt text.")}else if(t==="Markdown"){const L=new RegExp(`!\\[${Ir(D.alt||"")}\\]\\(${Ir(D.src)}\\)`,"g"),W=`![${C}](${D.src})`;i(ue=>{const de=ue.replace(L,W);return Se(!0),de}),ie.success("Image alt text updated."),it(!1),ee(null),w("")}else if(t==="HTML"){const L=new RegExp(`<img\\s+src="${Ir(D.src)}"\\s+alt="${Ir(D.alt||"")}"\\s*/>`,"g"),W=`<img src="${D.src}" alt="${C}" />`;i(ue=>{const Ae=ve(ue).replace(L,W),We=ft(Ae);return Se(!0),We}),ie.success("Image alt text updated."),it(!1),ee(null),w("")}},[D,C,$,t,i,ve,ft]),Ir=L=>L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),fE=B.useCallback(L=>{at?gt(L):n(L)},[at,n]),hE=B.useCallback(()=>{Se(!1),n(Tt),gt(null)},[Tt,n]),pE=B.useCallback(()=>{gt(null)},[]),mE=L=>!!new DOMParser().parseFromString(L,"text/html").querySelector("script"),gE=B.useCallback(L=>{const W=L.target.files[0];if(!W)return;const ue=t==="Markdown"&&W.name.endsWith(".md"),de=t==="HTML"&&W.name.endsWith(".html");if(!ue&&!de){ie.error(`Please upload a ${t==="Markdown"?".md":".html"} file.`);return}const Ae=new FileReader;Ae.onload=We=>{let st=We.target.result;if(de&&mE(st)){ie.error("Script tags are not allowed in imported HTML content for security reasons.");return}i(st),Se(!0),ie.success(`${W.name} imported successfully!`)},Ae.onerror=()=>{ie.error("Failed to read the file.")},Ae.readAsText(W),L.target.value=null},[t,i]),mh=({editorRef:L,mode:W})=>{if(!j||!L.current)return null;const ue={Markdown:[{icon:g.jsx(ja,{className:"w-4 h-4"}),action:()=>we(()=>qe("**","**",L))},{icon:g.jsx(za,{className:"w-4 h-4"}),action:()=>we(()=>qe("*","*",L))},{icon:g.jsx(Cs,{className:"w-4 h-4"}),action:()=>we(()=>qe("[","](url)",L))},{icon:g.jsx(ni,{className:"w-4 h-4"}),action:Ri}],HTML:[{icon:g.jsx(ja,{className:"w-4 h-4"}),action:()=>we(()=>qe("<strong>","</strong>",L))},{icon:g.jsx(za,{className:"w-4 h-4"}),action:()=>we(()=>qe("<em>","</em>",L))},{icon:g.jsx(Cs,{className:"w-4 h-4"}),action:()=>we(()=>qe('<a href="url">',"</a>",L))},{icon:g.jsx(ni,{className:"w-4 h-4"}),action:Ri}]};return g.jsx(Ge.div,{className:"absolute flex gap-2 bg-white shadow-lg p-2 rounded border z-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:j,children:ue[W].map((de,Ae)=>g.jsx(Fe,{title:de.icon.type.name,children:g.jsx("button",{onClick:de.action,className:"p-1 rounded hover:bg-gray-100",children:de.icon})},Ae))})},bE=B.useCallback(L=>L.trim().startsWith("<!DOCTYPE html>")||L.trim().startsWith("<html"),[]),xE=()=>{Dt(qt==="free"||qt==="basic"?{title:"Upgrade Required",description:"Rewrite is only available for Pro and Enterprise users.",confirmText:"Buy Now",cancelText:"Cancel",onConfirm:()=>bn("/pricing")}:{title:"Rewrite Selected Lines",description:"Do you want to rewrite the selected lines? You can rewrite only 3 times.",onConfirm:ws})},yE=()=>g.jsxs("div",{className:"bg-white border-x border-gray-200 shadow-sm px-4 py-2 flex items-center",children:[g.jsx("div",{className:"flex gap-1",children:[1,2,3].map(L=>g.jsx(Fe,{title:`Heading ${L}`,children:g.jsxs("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleHeading({level:L}).run():t==="HTML"?qe(`<h${L}>`,`</h${L}>`,je):qe(`${"#".repeat(L)} `,"",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("heading",{level:L}))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":`Heading ${L}`,type:"button",children:[L===1&&g.jsx(oT,{className:"w-4 h-4"}),L===2&&g.jsx(Lh,{className:"w-4 h-4"}),L===3&&g.jsx(cT,{className:"w-4 h-4"})]})},L))}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Fe,{title:"Bold",children:g.jsx("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleBold().run():t==="HTML"?qe("<strong>","</strong>",je):qe("**","**",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("bold"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Bold",type:"button",children:g.jsx(ja,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Italic",children:g.jsx("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleItalic().run():t==="HTML"?qe("<em>","</em>",je):qe("*","*",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("italic"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Italic",type:"button",children:g.jsx(za,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Underline",children:g.jsx("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleUnderline().run():t==="HTML"?qe("<u>","</u>",je):qe("<u>","</u>",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("underline"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Underline",type:"button",children:g.jsx(vT,{className:"w-4 h-4"})})})]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx("div",{className:"flex gap-1",children:["left","center"," personally"].map(L=>g.jsx(Fe,{title:`Align ${L}`,children:g.jsxs("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().setTextAlign(L).run():qe(`<div style="text-align: ${L};">`,"</div>",t==="HTML"?je:ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive({textAlign:L}))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":`Align ${L}`,type:"button",children:[L==="left"&&g.jsx(tT,{className:"w-4 h-4"}),L==="center"&&g.jsx(ZE,{className:"w-4 h-4"}),L==="right"&&g.jsx(rT,{className:"w-4 h-4"})]})},L))}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Fe,{title:"Bullet List",children:g.jsx("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleBulletList().run():t==="HTML"?qe(`<ul>
<li>`,`</li>
</ul>`,je):qe("- ","",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("bulletList"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Bullet List",type:"button",children:g.jsx(bT,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Ordered List",children:g.jsx("button",{onClick:()=>we(()=>{t==="Normal"?$.chain().focus().toggleOrderedList().run():t==="HTML"?qe(`<ol>
<li>`,`</li>
</ol>`,je):qe("1. ","",ot)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&($!=null&&$.isActive("orderedList"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Ordered List",type:"button",children:g.jsx(mT,{className:"w-4 h-4"})})})]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Fe,{title:"Link",children:g.jsx("button",{onClick:ir,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Link",type:"button",children:g.jsx(Cs,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Image",children:g.jsx("button",{onClick:Ri,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Image",type:"button",children:g.jsx(ni,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Undo",children:g.jsx("button",{onClick:()=>we(()=>$==null?void 0:$.chain().focus().undo().run()),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Undo",type:"button",children:g.jsx(LT,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Redo",children:g.jsx("button",{onClick:()=>we(()=>$==null?void 0:$.chain().focus().redo().run()),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Redo",type:"button",children:g.jsx(ST,{className:"w-4 h-4"})})}),!ut&&g.jsx(Fe,{title:"Rewrite",children:g.jsx("button",{onClick:()=>we(()=>{Dt({title:"Rewrite Selected Lines",description:"Do you want to rewrite the selected lines? You can rewrite only 3 times.",onConfirm:ws})}),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Rewrite",type:"button",children:g.jsx(Ah,{className:"w-4 h-4"})})}),g.jsx(Fe,{title:"Copy",children:g.jsx("button",{onClick:()=>we(()=>{navigator.clipboard.writeText(t==="HTML"?St:ce),ie.success("Content copied to clipboard!")}),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Copy",type:"button",children:g.jsx(PE,{className:"w-4 h-4"})})}),!ut&&g.jsx(Fe,{title:"Regenerate Content",children:g.jsx("button",{onClick:Nr,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Regenerate",type:"button",children:g.jsx(BE,{className:"w-4 h-4"})})}),(t==="Markdown"||t==="HTML")&&g.jsx(Fe,{title:`Import ${t==="Markdown"?".md":".html"} File`,children:g.jsx("button",{onClick:()=>{var L;return(L=Me.current)==null?void 0:L.click()},className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Import File",type:"button",children:g.jsx(FE,{className:"w-4 h-4"})})})]}),(t==="Markdown"||t==="HTML")&&g.jsx("input",{type:"file",ref:Me,style:{display:"none"},accept:t==="Markdown"?".md":".html",onChange:gE}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx(fr,{value:d,onChange:L=>we(()=>h(L)),className:"w-32","aria-label":"Font",children:_m.map(L=>g.jsx(fr.Option,{value:L.value,children:L.label},L.value))}),(t==="Markdown"||t==="HTML")&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx(Fe,{title:M?"Hide Preview":"Show Preview",children:g.jsx("button",{onClick:()=>P(!M),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${M?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Toggle Preview",type:"button",children:M?g.jsx(HE,{className:"w-4 h-4"}):g.jsx(Dd,{className:"w-4 h-4"})})})]})]}),EE=()=>{if(l||!U||(e==null?void 0:e.status)==="pending")return g.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-300px)] bg-white border rounded-lg",children:g.jsx(Ac,{})});if(M&&(t==="Markdown"||t==="HTML")){if(t==="HTML"&&bE(St)){const L=ME.sanitize(St,{USE_PROFILES:{html:!0},ADD_TAGS:["style"],ADD_ATTR:["target"]});return g.jsx("div",{className:`p-8 rounded-lg rounded-t-none overflow-y-auto custom-scroll h-screen border border-gray-200 ${d}`,children:g.jsx("iframe",{srcDoc:L,title:"HTML Preview",sandbox:"allow-same-origin"})})}return g.jsx("div",{className:`p-8 rounded-lg rounded-t-none overflow-y-auto custom-scroll h-screen border border-gray-200 bg-white ${d}`,children:g.jsx(To,{remarkPlugins:[ko],rehypePlugins:[Co],components:{a:({href:L,children:W})=>g.jsx(Fe,{title:L,placement:"top",children:g.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:W})}),img:({src:L,alt:W})=>g.jsx("img",{src:L,alt:W,className:"rounded-lg mx-auto my-3 w-3/4 h-auto shadow-sm"}),h1:({children:L})=>g.jsx("h1",{className:"text-2xl font-bold",children:L}),h2:({children:L})=>g.jsx("h2",{className:"text-xl font-semibold",children:L}),h3:({children:L})=>g.jsx("h3",{className:"text-lg font-medium",children:L}),p:({children:L})=>g.jsx("p",{className:"mb-4 leading-relaxed text-gray-700",children:Xn.Children.map(L,(W,ue)=>{if(typeof W=="string"){let de=W,Ae=[],We=0;const st=[...a].sort((Wt,kt)=>kt.original.length-Wt.original.length);for(;de.length>0;){let Wt=!1;for(const kt of st){const ei=new RegExp(kt.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),ti=de.match(ei);if(ti&&ti.index===0){Ae.push(g.jsxs("span",{className:"suggestion-highlight",onMouseEnter:()=>ke(kt),onMouseLeave:()=>ke(null),children:[ti[0],O===kt&&g.jsxs("div",{className:"suggestion-tooltip",style:{top:"100%",left:0},children:[g.jsxs("p",{className:"text-sm mb-2",children:[g.jsx("strong",{children:"Suggested:"})," ",kt.change]}),g.jsx("button",{className:"bg-blue-600 text-white px-2 py-1 rounded",onClick:()=>o(kt.original,kt.change),children:"Replace"})]})]},`${ue}-${We++}`)),de=de.slice(ti[0].length),Wt=!0;break}}if(!Wt){let kt=de.length;for(const ei of st){const ti=new RegExp(ei.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),gl=de.match(ti);gl&&gl.index<kt&&(kt=gl.index)}kt===de.length?(Ae.push(g.jsx("span",{children:de},`${ue}-${We++}`)),de=""):(Ae.push(g.jsx("span",{children:de.slice(0,kt)},`${ue}-${We++}`)),de=de.slice(kt))}}return Ae}return W})}),ul:({children:L})=>g.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2 text-gray-700",children:L}),ol:({children:L})=>g.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-gray-700",children:L}),li:({children:L})=>g.jsx("li",{className:"leading-relaxed",children:L}),code:We=>{var st=We,{node:L,inline:W,className:ue,children:de}=st,Ae=ln(st,["node","inline","className","children"]);const Wt=/language-(\w+)/.exec(ue||"");return!W&&Wt?g.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-lg",children:g.jsx("code",re(I({className:ue},Ae),{children:de}))}):g.jsx("code",re(I({className:"bg-gray-100 text-red-600 px-1 rounded"},Ae),{children:de}))}},children:ce})})}return g.jsxs("div",{className:"bg-white border rounded-lg rounded-t-none shadow-sm",children:[t==="Normal"&&g.jsxs("div",{className:"h-screen overflow-auto custom-scroll",children:[$&&g.jsxs(GC,{editor:$,className:"flex gap-2 bg-white shadow-lg p-2 rounded-lg border border-gray-200",children:[g.jsx(Fe,{title:"Bold",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{we(()=>{$.chain().focus().toggleBold().run()})},children:g.jsx(ja,{className:"w-5 h-5"})})}),g.jsx(Fe,{title:"Italic",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{we(()=>{$.chain().focus().toggleItalic().run()})},children:g.jsx(za,{className:"w-5 h-5"})})}),g.jsx(Fe,{title:"Heading",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{we(()=>{$.chain().focus().toggleHeading({level:2}).run()})},children:g.jsx(Lh,{className:"w-5 h-5"})})}),g.jsx(Fe,{title:"Link",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:ir,children:g.jsx(Cs,{className:"w-5 h-5"})})}),g.jsx(Fe,{title:"Image",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:Ri,children:g.jsx(ni,{className:"w-5 h-5"})})}),!ut&&g.jsx(Fe,{title:"Rewrite",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:xE,children:g.jsx(Ah,{className:"w-4 h-4"})})})]}),g.jsx(Dw,{editor:$}),X instanceof HTMLElement&&g.jsxs("div",{className:"proof-ui-bubble",ref:oe,style:{position:"absolute",top:Cr.top,left:Cr.left},children:[g.jsxs("div",{style:{marginBottom:4},children:["Replace with: ",g.jsx("strong",{children:X.dataset.suggestion})]}),g.jsx("button",{onClick:Ce,children:" Accept"}),g.jsx("button",{onClick:Pe,style:{marginLeft:6},children:" Reject"})]})]}),t==="Markdown"&&g.jsxs("div",{className:"h-screen",children:[g.jsx("textarea",{ref:ot,value:ce,onChange:L=>{i(L.target.value),Se(!0)},onMouseUp:Hn,onKeyUp:Hn,className:`w-full h-full p-4 text-sm focus:outline-none resize-none bg-white code-textarea custom-scroll ${d}`,placeholder:"Enter Markdown here...\\nUse # for headings, **bold**, *italic*, - for lists",style:{whiteSpace:"pre-wrap",lineHeight:"1.5"}}),g.jsx(mh,{editorRef:ot,mode:"Markdown"})]}),t==="HTML"&&g.jsxs("div",{className:"h-screen",children:[g.jsx("textarea",{ref:je,value:St,onChange:L=>{i(L.target.value),Se(!0)},onMouseUp:Hn,onKeyUp:Hn,className:"w-full h-full font-mono text-sm p-4 focus:outline-none resize-none bg-white code-textarea custom-scroll",placeholder:"<h1>HTML Title</h1>\\n<p>Paragraph with <a href='https://example.com'>link</a></p>\\n<img src='image.jpg' alt='description' />",style:{whiteSpace:"pre-wrap",lineHeight:"1.5"}}),g.jsx(mh,{editorRef:je,mode:"HTML"})]})]})};return g.jsxs(Ge.div,{className:"flex-1 bg-gray-50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[(K||u)&&g.jsx(Ge.div,{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},children:g.jsx(Ac,{})}),pe&&g.jsx(Ge.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Generated Content"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Original Text"}),g.jsx("div",{className:"p-4 bg-gray-100 rounded-md",children:g.jsx(To,{remarkPlugins:[ko],rehypePlugins:[Co],className:"prose",components:{a:({href:L,children:W})=>g.jsx(Fe,{title:L,placement:"top",children:g.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:W})}),strong:({children:L})=>g.jsx("strong",{className:"font-bold",children:L})},children:ye||"No text selected"})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Improved Text"}),g.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:g.jsx(To,{remarkPlugins:[ko],rehypePlugins:[Co],className:"prose",components:{a:({href:L,children:W})=>g.jsx(Fe,{title:L,placement:"top",children:g.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:W})}),strong:({children:L})=>g.jsx("strong",{className:"font-bold",children:L})},children:Z})})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:Fa,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Reject"}),g.jsx("button",{onClick:Ba,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Accept"})]})]})}),Tt&&g.jsx(mr,{title:"Unsaved Changes",open:!0,onOk:hE,onCancel:pE,okText:"Continue without Saving",cancelText:"Cancel",centered:!0,children:g.jsx("p",{className:"text-sm text-gray-600",children:"You have unsaved changes. Switching tabs may cause you to lose your work. Are you sure you want to continue?"})}),!ut&&g.jsx("div",{className:"flex border-b bg-white shadow-sm border-x",children:["Normal","Markdown","HTML"].map(L=>g.jsx("button",{onClick:()=>fE(L),className:`editor-tab ${t===L?"active":""}`,children:L},L))}),yE(),EE(),g.jsxs(mr,{title:"Insert Link",open:f,onOk:yn,onCancel:()=>m(!1),okText:"Insert Link",cancelText:"Cancel",centered:!0,children:[g.jsx(Hr,{value:x,onChange:L=>E(L.target.value),placeholder:"https://example.com",className:"w-full mt-4",prefix:g.jsx(Cs,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Include http:// or https://"})]}),g.jsxs(mr,{title:"Edit Image Alt Text",open:dt,onOk:ph,onCancel:()=>{it(!1),ee(null),w("")},okText:"Update Alt Text",cancelText:"Cancel",footer:[g.jsx(Bt,{onClick:dE,danger:!0,icon:g.jsx(DE,{className:"w-4 h-4"}),children:"Delete Image"},"delete"),g.jsx(Bt,{onClick:()=>{it(!1),ee(null),w("")},children:"Cancel"},"cancel"),g.jsx(Bt,{type:"primary",onClick:ph,children:"Update Alt Text"},"ok")],centered:!0,children:[g.jsx(Hr,{value:C,onChange:L=>w(L.target.value),placeholder:"Image description",className:"w-full mt-4",prefix:g.jsx(ni,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Provide alt text for accessibility"}),D&&g.jsx("div",{className:"mt-4",children:g.jsx("img",{src:D.src,alt:C||D.alt,className:"max-w-full h-auto rounded-lg"})})]}),g.jsxs(mr,{title:"Insert Image",open:b,onOk:hl,onCancel:()=>y(!1),okText:"Insert Image",cancelText:"Cancel",centered:!0,children:[g.jsx(Hr,{value:T,onChange:L=>v(L.target.value),placeholder:"https://example.com/image.jpg",className:"w-full mt-4",prefix:g.jsx(ni,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Include http:// or https://"}),g.jsx(Hr,{value:C,onChange:L=>w(L.target.value),placeholder:"Image description",className:"w-full mt-4",prefix:g.jsx(ni,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Provide alt text for accessibility"})]})]})},QM=["Blogging","Technology","Lifestyle","Travel","Food & Drink","Health & Wellness","Fashion","Business","Education","Entertainment","Photography","Fitness","Marketing","Finance","DIY & Crafts"],XM=({isCategoryModalOpen:e,setIsCategoryModalOpen:t,onSubmit:n,initialCategory:r="",initialIncludeTableOfContents:i=!1})=>{const[s,a]=B.useState(""),[o,u]=B.useState(r),[l,c]=B.useState(i),[d,h]=B.useState(!1),{categories:f,error:m}=pi(C=>C.wordpress),b=B.useCallback(C=>{if(o){ie.error("Only one category can be selected.");return}u(C),h(!1)},[o]),y=B.useCallback(()=>{u(""),h(!1)},[]);B.useCallback(()=>{if(s.trim()){if(o===s.trim()){ie.error("Category already selected.");return}u(s.trim()),a(""),h(!1)}},[s,o]);const x=B.useCallback(C=>{c(C.target.checked)},[]),E=B.useCallback(()=>{if(!o){h(!0),ie.error("Please select a category.");return}n({category:o,includeTableOfContents:l}),t(!1),u(""),c(!1),a(""),h(!1)},[o,l,n,t]),T=B.useCallback(()=>{t(!1),u(""),c(!1),a(""),h(!1)},[t]),v=B.useCallback(C=>{if(C.length>1){ie.error("Only one category can be selected.");return}const w=C.length>0?C[0]:"";u(w),h(!1)},[]);return g.jsx(mr,{title:"Select Category",open:e,onCancel:T,footer:g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx(Bt,{onClick:T,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Cancel category selection",children:"Cancel"}),g.jsx(Bt,{type:"primary",onClick:E,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Confirm category selection",children:"Confirm"})]}),centered:!0,width:600,children:g.jsxs("div",{className:"p-3 space-y-4",children:[g.jsx(Io,{children:o&&g.jsxs(Ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500 text-white rounded-full text-sm w-fit",children:[g.jsx("span",{className:"truncate max-w-[150px]",children:o}),g.jsx(Ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:y,className:"text-white hover:text-gray-200","aria-label":`Remove category ${o}`,children:g.jsx(Oo,{size:15})})]})}),!m&&(f==null?void 0:f.length)>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Auto-Generated Categories"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 overflow-y-auto p-3 rounded-md border border-indigo-200 bg-indigo-50 max-h-96",children:f.map(C=>g.jsxs(Ge.div,{onClick:()=>b(C.name),whileHover:{scale:1.02,backgroundColor:"#e0e7ff"},className:`flex items-center justify-between p-3 rounded-md bg-white border ${d&&!o?"border-red-500":"border-indigo-200"} text-sm font-medium cursor-pointer transition-all duration-200 ${o===C.name?"bg-indigo-100 border-indigo-400":o?"opacity-50 cursor-not-allowed":""}`,children:[g.jsx("span",{className:"truncate",children:C.name}),!o&&g.jsx(Ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-indigo-600 hover:text-indigo-700","aria-label":`Add category ${C.name}`,children:g.jsx(vo,{size:16})})]},C.id||C.name))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Select or Add Category"}),g.jsx(fr,{mode:"tags",placeholder:"Select or type a category",value:o?[o]:[],onChange:v,className:"w-full",allowClear:!0,showSearch:!0,filterOption:(C,w)=>w.label.toLowerCase().includes(C.toLowerCase()),options:QM.map(C=>({value:C,label:C})),styles:{popup:{root:{borderRadius:"8px"}}},"aria-label":"Select or add a category"}),d&&!o&&g.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 text-sm text-red-500",children:"Please select a category"})]}),g.jsxs("div",{className:"flex items-center justify-between py-2",children:[g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Include Table of Contents",g.jsx("p",{className:"text-xs text-gray-500",children:"Generate a table of contents for each blog."})]}),g.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",name:"includeTableOfContents",checked:l,onChange:x,className:"sr-only peer","aria-label":"Toggle table of contents"}),g.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})},{Panel:Lm}=d1,JM=({blog:e,keywords:t,setKeywords:n,onPost:r,activeTab:i,handleReplace:s,setProofreadingResults:a,proofreadingResults:o,handleSave:u,posted:l,isPosting:c,formData:d,editorContent:h})=>{var Me,ut,dt,it,D,ee,xe,ce,ve,ft,xn,$;const[f,m]=B.useState(""),[b,y]=B.useState(!1),[x,E]=B.useState(null),[T,v]=B.useState(!1),[C,w]=B.useState(!1),[M,P]=B.useState(!1),[U,_]=B.useState("overview"),j=pi(X=>X.auth.user),F=(ut=j==null?void 0:j.plan)!=null?ut:(Me=j==null?void 0:j.subscription)==null?void 0:Me.plan,K=Md(),G=Ru(),{handlePopup:Z}=u1(),{loading:le}=pi(X=>X.analysis),[ye,me]=B.useState(!1),{analysisResult:z}=pi(X=>X.analysis),S=e==null?void 0:e._id,pe=z==null?void 0:z[S];Yi.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1});const Ie=X=>X?X.trim().split(/\s+/).filter(oe=>oe.length>0).length:0;B.useEffect(()=>{G(AE()).unwrap()},[G]),B.useEffect(()=>{E(null)},[e==null?void 0:e._id]);const O=B.useCallback(()=>Je(null,null,function*(){if(!e||!e.title||!e.content){ie.error("Blog title or content is missing for analysis.");return}const X=t&&t.length>0?t:(e==null?void 0:e.focusKeywords)||e.keywords;try{const oe=yield G(NE({blogId:e._id,title:e.title,content:e.content,keywords:X})).unwrap();E(oe),_("analysis")}catch(oe){console.error("Failed to fetch competitive analysis:",{error:oe.message,status:oe.status,response:oe.response}),ie.error("Failed to perform competitive analysis.")}}),[e,t,G]);B.useEffect(()=>{T&&(O(),v(!1))},[T,O]),B.useEffect(()=>{var X,oe;(e!=null&&e.seoScore||(X=e==null?void 0:e.generatedMetadata)!=null&&X.competitorsAnalysis)&&E(I({blogScore:e.seoScore},(oe=e==null?void 0:e.generatedMetadata)==null?void 0:oe.competitorsAnalysis))},[e]);const ke=B.useCallback(X=>{n(oe=>oe.filter(Ce=>Ce!==X))},[n]),at=B.useCallback(()=>{if(f.trim()){const X=f.split(",").map(oe=>oe.trim().toLowerCase()).filter(oe=>oe&&!t.map(Ce=>Ce.toLowerCase()).includes(oe));X.length>0&&n(oe=>[...oe,...X]),m("")}},[f,t,n]),Se=B.useCallback(X=>{X.key==="Enter"&&(X.preventDefault(),at())},[at]),Tt=B.useCallback(()=>Je(null,null,function*(){if(!e||!e.content){ie.error("Blog content is required for proofreading.");return}if(le){ie.error("Please wait for Competitive Analysis to complete before starting Proofreading.");return}y(!0);try{const X=yield G(IE({id:e._id})).unwrap();a(X),_("suggestions"),ie.success("Proofreading suggestions loaded successfully!")}catch(X){console.error("Error fetching proofreading suggestions:",{error:X.message,status:X.status,response:X.response}),ie.error("Failed to fetch proofreading suggestions.")}finally{y(!1)}}),[e,G,le,a]),gt=B.useCallback(()=>{if(o.length===0){ie.info("No suggestions available to apply.");return}o.forEach(X=>{s(X.original,X.change)}),a([]),ie.success("All proofreading suggestions applied successfully!")},[o,s,a]),St=B.useCallback(()=>{var we,ir;if(["free","basic"].includes((we=F==null?void 0:F.toLowerCase)==null?void 0:we.call(F)))return Z({title:"Upgrade Required",description:"Competitor Analysis is only available for Pro and Enterprise users.",confirmText:"Buy Now",cancelText:"Cancel",onConfirm:()=>K("/pricing")});const X=e==null?void 0:e.seoScore,oe=(ir=e==null?void 0:e.generatedMetadata)==null?void 0:ir.competitors,Ce=typeof X=="number"&&X>=0,Pe=Array.isArray(oe)&&oe.length>0;return Z(!Ce&&!Pe&&!!!x?{title:"Competitive Analysis",description:"Do you really want to run competitive analysis? It will cost 10 credits.",confirmText:"Run",cancelText:"Cancel",onConfirm:()=>O()}:{title:"Run Competitive Analysis Again?",description:"You have already performed a competitive analysis for this blog. Would you like to run it again? This will cost 10 credits.",confirmText:"Run",cancelText:"Cancel",onConfirm:()=>O()})},[F,e,Z,K,x,O]),Mt=B.useCallback(()=>{var X;["free","basic"].includes((X=F==null?void 0:F.toLowerCase)==null?void 0:X.call(F))?Z({title:"Upgrade Required",description:"AI Proofreading is only available for Pro and Enterprise users.",confirmText:"Buy Now",cancelText:"Cancel",onConfirm:()=>K("/pricing")}):Z({title:"AI Proofreading",description:`Do you really want to proofread the blog? 
It will cost ${UE("blog.proofread")} credits.`,onConfirm:Tt})},[F,Z,K,Tt]),je=B.useCallback(()=>{Z({title:"Rewrite Keywords",description:"Do you want to rewrite the entire content with added keywords? You can rewrite only 3 times.",onConfirm:u})},[Z,u]),ot=B.useCallback(X=>Je(null,null,function*(){if(!h){ie.error("No content to export.");return}const oe=(e==null?void 0:e.title)||"Untitled Blog";if(X==="markdown"){const Ce=new Blob([h],{type:"text/markdown"}),Pe=URL.createObjectURL(Ce),Be=document.createElement("a");Be.href=Pe,Be.download=`${oe}.md`,Be.click(),URL.revokeObjectURL(Pe),ie.success("Markdown exported successfully!")}else if(X==="html"){const Ce=Yi.parse(h,{gfm:!0}),Pe=new Blob([Ce],{type:"text/html"}),Be=URL.createObjectURL(Pe),we=document.createElement("a");we.href=Be,we.download=`${oe}.html`,we.click(),URL.revokeObjectURL(Be),ie.success("HTML exported successfully!")}}),[h,e]),gn=g.jsxs(xl,{children:[g.jsx(xl.Item,{onClick:()=>ot("markdown"),children:"Export as Markdown"},"markdown"),g.jsx(xl.Item,{onClick:()=>ot("html"),children:"Export as HTML"},"html")]}),Cr=B.useCallback(X=>X>=80?"bg-green-100 text-green-700 border-green-200":X>=60?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200",[]),Ar=B.useCallback(({category:X,includeTableOfContents:oe})=>{try{r(re(I({},d),{categories:X,includeTableOfContents:oe}))}catch(Ce){console.error("Failed to post blog:",{error:Ce.message,status:Ce.status,response:Ce.response}),ie.error("Failed to post blog. Please try again.")}},[d,r]),bn=B.useCallback(()=>{w(!0)},[]);if(le)return g.jsx("div",{className:"flex items-center",children:g.jsx(Ac,{message:"Running Competitive Analysis"})});const Dt=({title:X,description:oe,isPro:Ce,isLoading:Pe,onClick:Be,buttonText:we,icon:ir})=>g.jsxs(Ge.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-all duration-300",children:[g.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[g.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:g.jsx(ir,{className:"w-4 h-4 text-blue-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("h3",{className:"font-semibold text-gray-900",children:X}),Ce&&g.jsx(Oh,{count:g.jsx(Ih,{size:10}),style:{backgroundColor:"#fbbf24"},size:"small"})]}),g.jsx("p",{className:"text-sm text-gray-600",children:oe})]})]}),g.jsx(Bt,{onClick:Be,loading:Pe,disabled:Pe,type:"primary",className:"w-full py-2 text-sm px-4 rounded-lg font-medium transition-all duration-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg",ghost:Ce,children:Pe?"Processing...":we})]}),un=({title:X,score:oe,icon:Ce})=>g.jsxs("div",{className:`p-3 rounded-lg border ${Cr(oe||0)}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ce,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:X})]}),oe>0&&g.jsxs("span",{className:"text-lg font-bold",children:[oe,g.jsx("span",{className:"text-xs ml-1",children:"/100"})]})]}),(oe||0)===0?g.jsx("p",{className:"text-xs text-gray-500 text-center p-2 bg-gray-50 rounded-lg",children:"Run Competitive Analysis to get score"}):g.jsx("div",{className:"w-full bg-white/50 rounded-full h-2",children:g.jsx("div",{style:{width:`${oe}%`,transition:"width 0.5s ease"},className:`h-2 rounded-full ${oe>=80?"bg-green-500":oe>=60?"bg-yellow-500":"bg-red-500"}`})})]}),qt=({competitors:X})=>{const[oe,Ce]=B.useState(!1),Pe=oe?X:X==null?void 0:X.slice(0,5);return g.jsxs("div",{className:"space-y-2 relative",children:[(X==null?void 0:X.length)>5&&g.jsx("span",{className:"absolute top-0 right-0 text-[10px] bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full",children:X.length}),Pe==null?void 0:Pe.map((Be,we)=>g.jsxs(Ge.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:we*.05},className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-xs font-medium text-blue-600",children:we+1})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium mb-1 text-gray-900 truncate",children:Be.title}),g.jsxs("a",{href:Be.link||Be.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[Be.score&&g.jsxs(vh,{color:"blue",children:[(Be.score*100).toFixed(2),"%"]}),"Visit ",g.jsx(Nh,{className:"w-3 h-3"})]})]})]},we)),(X==null?void 0:X.length)>5&&!oe&&g.jsxs("button",{onClick:()=>Ce(!0),className:"text-xs text-blue-600 hover:text-blue-700 text-center w-full",children:["+",X.length-5," more competitors"]})]})},Fn=({insights:X})=>{const[oe,Ce]=B.useState(!1),[Pe,Be]=B.useState(new Set),we=Object.entries(X||{}),ir=oe?we:we.slice(0,3),Ri=Nr=>{const yn=new Set(Pe);yn.has(Nr)?yn.delete(Nr):yn.add(Nr),Be(yn)};return g.jsxs("div",{className:"space-y-3",children:[ir.map(([Nr,yn],qe)=>{const hl=Pe.has(qe),Hn=typeof yn=="object"?"Multiple insights available":yn==null?void 0:yn.toString(),ws=(Hn==null?void 0:Hn.length)>120&&!hl,pl=ws?Hn.slice(0,120)+"...":Hn,Ba=yn.match(/\((\d+\/\d+)\)$/),Fa=Ba?Ba[1]:null;return g.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:qe*.05},className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx($a,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("p",{className:"font-medium text-blue-900 text-sm mb-1",children:Nr.replace(/([A-Z])/g," $1").trim()}),g.jsxs("p",{children:[" ",Fa&&g.jsx(vh,{color:"blue",children:Fa.replace("/"," / ")})]})]}),g.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed cursor-pointer select-none",onClick:()=>Ri(qe),children:[pl,ws&&g.jsx("span",{className:"text-blue-500 ml-1",children:"(more)"})]})]})]})},Nr)}),we.length>5&&g.jsx("button",{onClick:()=>Ce(!oe),className:"text-xs text-blue-600 hover:text-blue-700 text-center w-full",children:oe?"Show less":`+${we.length-5} more insights`})]})},Ee=({suggestion:X,index:oe,onApply:Ce})=>g.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:oe*.05},className:"border border-gray-200 rounded-lg p-3 bg-white hover:shadow-sm transition-shadow",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(qE,{className:"w-4 h-4 text-orange-500"}),g.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Original"})]}),g.jsx("div",{className:"p-2 bg-red-50 border border-red-100 rounded text-xs text-gray-700 leading-relaxed",children:X.original})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(WE,{className:"w-4 h-4 text-green-500"}),g.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Suggested"})]}),g.jsx("div",{className:"p-2 bg-green-50 border border-green-100 rounded text-xs text-gray-700 leading-relaxed",children:X.change})]}),g.jsx(Bt,{size:"small",type:"primary",ghost:!0,onClick:()=>{s(X.original,X.change),Ce(oe)},className:"w-full",children:"Apply This Change"})]})});return M?g.jsx(Ge.div,{initial:{x:"100%"},animate:{x:"calc(100% - 60px)"},className:"fixed top-[17.5rem] right-0 transform -translate-y-1/2 z-50",children:g.jsx(Fe,{title:"Maximize Sidebar",placement:"left",children:g.jsx(Bt,{onClick:()=>P(!1),className:"h-12 rounded-lg",icon:g.jsx(yT,{className:"w-4 h-4"})})})}):g.jsxs(g.Fragment,{children:[g.jsxs(Ge.div,{initial:{x:"100%"},animate:{x:0},transition:{type:"spring",stiffness:300,damping:30},className:"w-96 bg-white shadow-xl flex flex-col",children:[g.jsxs("div",{className:"p-4 border border-l-0 bg-gradient-to-r rounded-tr-md from-blue-50 to-purple-50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold",children:"Content Analysis"}),g.jsx("p",{className:"text-xs text-gray-600",children:"Optimize your content performance"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[!["free","basic"].includes((dt=F==null?void 0:F.toLowerCase)==null?void 0:dt.call(F))&&g.jsx(Fe,{title:"Export Content",placement:"left",children:g.jsx(zE,{overlay:gn,trigger:["click"],children:g.jsx(Bt,{size:"small",icon:g.jsx($E,{className:"w-4 h-4"})})})}),g.jsx(Fe,{title:"Minimize sidebar",placement:"left",children:g.jsx(Bt,{size:"small",icon:g.jsx(TT,{className:"w-4 h-4"}),onClick:()=>P(!0)})}),g.jsx(Fe,{title:"Content settings",children:g.jsx(Bt,{size:"small",icon:g.jsx(h1,{className:"w-4 h-4"}),onClick:()=>me(!0)})})]})]}),g.jsx("div",{className:"flex justify-between items-center mt-6 px-2",children:[{key:"overview",label:"Overview",icon:_h},{key:"analysis",label:"Analysis",icon:Ua},{key:"suggestions",label:"Suggestions",icon:$a,badge:o.length}].map(({key:X,label:oe,icon:Ce,badge:Pe})=>g.jsxs("button",{onClick:()=>_(X),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-150
        ${U===X?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[g.jsx(Ce,{className:"w-4 h-4"}),oe,Pe>0&&g.jsx("span",{className:"ml-1 inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-red-500 rounded-full",children:Pe})]},X))})]}),g.jsx("div",{className:"flex-1 max-h-screen overflow-y-auto custom-scroll border-r",children:g.jsxs(Io,{mode:"wait",children:[U==="overview"&&g.jsxs(Ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(IT,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Keywords"})]}),t.length>0&&g.jsxs("button",{type:"text",onClick:()=>{var X;["free"].includes((X=F==null?void 0:F.toLowerCase)==null?void 0:X.call(F))?jE({featureName:"Keyword Optimization",navigate:K}):je()},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-opacity-80 transition-colors text-sm font-medium
                    bg-green-50 text-green-600 border-green-300 border hover:bg-green-100`,children:[["free"].includes((it=F==null?void 0:F.toLowerCase)==null?void 0:it.call(F))?g.jsx(Ih,{className:"w-3 h-3"}):g.jsx(f1,{className:"w-3 h-3"}),"Optimize"]})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:g.jsx(Io,{children:t.map((X,oe)=>g.jsxs(Ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full border border-blue-200",children:[g.jsx("span",{className:"truncate max-w-[120px]",children:X}),g.jsx("button",{onClick:()=>ke(X),className:"ml-1 text-blue-600 hover:text-blue-800",children:g.jsx(Oo,{className:"w-3 h-3"})})]},X))})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:f,onChange:X=>m(X.target.value),onKeyDown:Se,placeholder:"Add keywords...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),g.jsx(Bt,{size:"small",type:"primary",onClick:at,icon:g.jsx(vo,{className:"w-4 h-4"})})]}),t.length===0&&g.jsx("p",{className:"text-xs text-gray-500 text-center py-2",children:"No keywords added yet"})]}),g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{className:"flex items-center gap-2 ",children:[g.jsx(_h,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Performance Metrics"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[g.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-blue-600",children:Ie(h)}),g.jsx("div",{className:"text-xs text-blue-600",children:"Words"})]}),g.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-purple-600",children:t==null?void 0:t.length}),g.jsx("div",{className:"text-xs text-purple-600",children:"Keywords"})]})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsx(un,{title:"Content Score",score:e==null?void 0:e.blogScore,icon:ho}),g.jsx(un,{title:"SEO Score",score:((D=pe==null?void 0:pe.insights)==null?void 0:D.blogScore)||(e==null?void 0:e.seoScore),icon:Ua})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(VE,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"AI Tools"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(Dt,{title:"Competitive Analysis",description:"Compare with top competitors",isPro:["free","basic"].includes((ee=F==null?void 0:F.toLowerCase)==null?void 0:ee.call(F)),isLoading:le,onClick:St,buttonText:"Run Analysis",icon:Ua}),i==="Normal"&&g.jsx(Dt,{title:"AI Proofreading",description:"Grammar and style improvements",isPro:["free","basic"].includes((xe=F==null?void 0:F.toLowerCase)==null?void 0:xe.call(F)),isLoading:b,onClick:Mt,buttonText:"Proofread Content",icon:ho})]})]})]},"overview"),U==="analysis"&&g.jsx(Ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-4",children:x||pe?g.jsxs(d1,{defaultActiveKey:["1"],ghost:!0,expandIconPosition:"end",children:[((ve=(pe==null?void 0:pe.competitors)||((ce=e==null?void 0:e.generatedMetadata)==null?void 0:ce.competitors))==null?void 0:ve.length)>0&&g.jsx(Lm,{header:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Dd,{className:"w-4 h-4 text-blue-600"}),g.jsx("span",{className:"font-medium",children:"Top Competitors"})]}),children:g.jsx(qt,{competitors:(pe==null?void 0:pe.competitors)||((ft=e==null?void 0:e.generatedMetadata)==null?void 0:ft.competitors)})},"1"),(((xn=x==null?void 0:x.insights)==null?void 0:xn.analysis)||(x==null?void 0:x.analysis))&&g.jsx(Lm,{header:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx($a,{className:"w-4 h-4 text-orange-500"}),g.jsx("span",{className:"font-medium",children:"Key Insights"})]}),children:g.jsx(Fn,{insights:(($=x==null?void 0:x.insights)==null?void 0:$.analysis)||(x==null?void 0:x.analysis)})},"2")]}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx(Ua,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No analysis results yet"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Run competitive analysis to see insights"})]})},"analysis"),U==="suggestions"&&g.jsx(Ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-4",children:b?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(Ge.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600",children:"Analyzing content..."})]}):o.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx($a,{className:"w-4 h-4 text-orange-500"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Suggestions"}),g.jsx(Oh,{count:o.length})]}),g.jsx(Bt,{size:"small",type:"primary",onClick:gt,disabled:o.length===0,className:"text-xs",children:"Apply All"})]}),g.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:o.map((X,oe)=>g.jsx(Ee,{suggestion:X,index:oe,onApply:Ce=>{const Pe=o.filter((Be,we)=>we!==Ce);a(Pe)}},oe))})]}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx(ho,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No suggestions available"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Run AI proofreading to get suggestions"})]})},"suggestions")]})}),g.jsxs("div",{className:"p-4 border border-l-0 rounded-br-md border-gray-200 bg-gray-50",children:[g.jsx(Ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:g.jsx(Bt,{type:"primary",size:"large",onClick:bn,loading:c,disabled:c,className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-green-600 to-emerald-600 border-0 hover:shadow-lg",children:c?"Posting...":e!=null&&e.wordpress?"Re-Post":"Post Blog"})}),(l==null?void 0:l.link)&&g.jsx(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-3 text-center",children:g.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 text-sm hover:text-blue-700 font-medium",children:["View Published Post",g.jsx(Nh,{className:"w-4 h-4"})]})})]})]}),g.jsx(mr,{title:"Content Enhancement Summary",open:ye,onCancel:()=>me(!1),footer:null,centered:!0,width:480,children:g.jsx(ZM,{features:(e==null?void 0:e.options)||{}})}),g.jsx(XM,{isCategoryModalOpen:C,setIsCategoryModalOpen:w,onSubmit:Ar,initialCategory:d.category,initialIncludeTableOfContents:d.includeTableOfContents})]})},ZM=({features:e})=>g.jsxs(Ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-3",children:[g.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Here are the content enhancement features currently applied to your blog:"}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(e||{}).length>0?Object.entries(e).map(([t,n])=>{const r=!!n;return g.jsxs(Ge.div,{whileHover:{backgroundColor:"#f8fafc"},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100 transition-colors duration-150",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-gray-400"}`}),g.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t.replace(/([A-Z])/g," $1").trim()})]}),g.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${r?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:r?"Enabled":"Disabled"})]},t)}):g.jsxs("div",{className:"text-center py-6",children:[g.jsx(h1,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-gray-500",children:"No enhancement features configured"})]})})]});var He;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(He||(He={}));function eD(e){return e.type===He.Tag||e.type===He.Script||e.type===He.Style}const tD=He.Root,nD=He.Text,rD=He.Directive,iD=He.Comment,sD=He.Script,aD=He.Style,oD=He.Tag,uD=He.CDATA,lD=He.Doctype;let Ny=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Ly(this,t)}};class rh extends Ny{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}class Ad extends rh{constructor(){super(...arguments),this.type=He.Text}get nodeType(){return 3}}class Iy extends rh{constructor(){super(...arguments),this.type=He.Comment}get nodeType(){return 8}}class Oy extends rh{constructor(t,n){super(n),this.name=t,this.type=He.Directive}get nodeType(){return 1}}class ih extends Ny{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class vy extends ih{constructor(){super(...arguments),this.type=He.CDATA}get nodeType(){return 4}}class Nd extends ih{constructor(){super(...arguments),this.type=He.Root}get nodeType(){return 9}}let _y=class extends ih{constructor(t,n,r=[],i=t==="script"?He.Script:t==="style"?He.Style:He.Tag){super(r),this.name=t,this.attribs=n,this.type=i}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,r;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(r=this["x-attribsPrefix"])===null||r===void 0?void 0:r[t]}})}};function sh(e){return eD(e)}function cD(e){return e.type===He.CDATA}function dD(e){return e.type===He.Text}function fD(e){return e.type===He.Comment}function hD(e){return e.type===He.Directive}function pD(e){return e.type===He.Root}function Ly(e,t=!1){let n;if(dD(e))n=new Ad(e.data);else if(fD(e))n=new Iy(e.data);else if(sh(e)){const r=t?kc(e.children):[],i=new _y(e.name,I({},e.attribs),r);r.forEach(s=>s.parent=i),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=I({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=I({},e["x-attribsPrefix"])),n=i}else if(cD(e)){const r=t?kc(e.children):[],i=new vy(r);r.forEach(s=>s.parent=i),n=i}else if(pD(e)){const r=t?kc(e.children):[],i=new Nd(r);r.forEach(s=>s.parent=i),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else if(hD(e)){const r=new Oy(e.name,e.data);e["x-name"]!=null&&(r["x-name"]=e["x-name"],r["x-publicId"]=e["x-publicId"],r["x-systemId"]=e["x-systemId"]),n=r}else throw new Error(`Not implemented yet: ${e.type}`);return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function kc(e){const t=e.map(n=>Ly(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const Rm={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class mD{constructor(t,n,r){this.dom=[],this.root=new Nd(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(r=n,n=Rm),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:Rm,this.elementCB=r!=null?r:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Nd(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const r=this.options.xmlMode?He.Tag:void 0,i=new _y(t,n,void 0,r);this.addNode(i),this.tagStack.push(i)}ontext(t){const{lastNode:n}=this;if(n&&n.type===He.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const r=new Ad(t);this.addNode(r),this.lastNode=r}}oncomment(t){if(this.lastNode&&this.lastNode.type===He.Comment){this.lastNode.data+=t;return}const n=new Iy(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Ad(""),n=new vy([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const r=new Oy(t,n);this.addNode(r)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],r=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),r&&(t.prev=r,r.next=t),t.parent=n,this.lastNode=null}}const gD=/\n/g;function bD(e){const t=[...e.matchAll(gD)].map((r=>r.index||0));t.unshift(-1);const n=Id(t,0,t.length);return r=>Ry(n,r)}function Id(e,t,n){if(n-t==1)return{offset:e[t],index:t+1};const r=Math.ceil((t+n)/2),i=Id(e,t,r),s=Id(e,r,n);return{offset:i.offset,low:i,high:s}}function Ry(e,t){return(function(n){return Object.prototype.hasOwnProperty.call(n,"index")})(e)?{line:e.index,column:t-e.offset}:Ry(e.high.offset<t?e.high:e.low,t)}function My(e,t="",n={}){const r=typeof t!="string"?t:n,i=typeof t=="string"?t:"",s=e.map(xD),a=!!r.lineNumbers;return function(o,u=0){const l=a?bD(o):()=>({line:0,column:0});let c=u;const d=[];e:for(;c<o.length;){let h=!1;for(const f of s){f.regex.lastIndex=c;const m=f.regex.exec(o);if(m&&m[0].length>0){if(!f.discard){const b=l(c),y=typeof f.replace=="string"?m[0].replace(new RegExp(f.regex.source,f.regex.flags),f.replace):m[0];d.push({state:i,name:f.name,text:y,offset:c,len:m[0].length,line:b.line,column:b.column})}if(c=f.regex.lastIndex,h=!0,f.push){const b=f.push(o,c);d.push(...b.tokens),c=b.offset}if(f.pop)break e;break}}if(!h)break}return{tokens:d,offset:c,complete:o.length<=c}}}function xD(e,t){return re(I({},e),{regex:yD(e,t)})}function yD(e,t){if(e.name.length===0)throw new Error(`Rule #${t} has empty name, which is not allowed.`);if((function(n){return Object.prototype.hasOwnProperty.call(n,"regex")})(e))return(function(n){if(n.global)throw new Error(`Regular expression /${n.source}/${n.flags} contains the global flag, which is not allowed.`);return n.sticky?n:new RegExp(n.source,n.flags+"y")})(e.regex);if((function(n){return Object.prototype.hasOwnProperty.call(n,"str")})(e)){if(e.str.length===0)throw new Error(`Rule #${t} ("${e.name}") has empty "str" property, which is not allowed.`);return new RegExp(Mm(e.str),"y")}return new RegExp(Mm(e.name),"y")}function Mm(e){return e.replace(/[-[\]{}()*+!<=:?./\\^$|#\s,]/g,"\\$&")}function wr(e,t){return(n,r)=>{let i=r,s;return r<n.tokens.length&&(s=e(n.tokens[r],n,r),s!==void 0&&i++),s===void 0?{matched:!1}:{matched:!0,position:i,value:s}}}function ah(e,t){return e.matched?{matched:!0,position:e.position,value:t(e.value,e.position)}:e}function vu(e,t){return e.matched?t(e):e}function sn(e,t){return(n,r)=>ah(e(n,r),(i,s)=>t(i,n,r,s))}function _u(e,t){return(n,r)=>{const i=e(n,r);return i.matched?i:{matched:!0,position:r,value:t}}}function cl(...e){return(t,n)=>{for(const r of e){const i=r(t,n);if(i.matched)return i}return{matched:!1}}}function Li(e,t){return(n,r)=>{const i=e(n,r);return i.matched?i:t(n,r)}}function ED(e,t){return(n,r)=>{const i=[];let s=!0;do{const a=e(n,r);a.matched&&t(a.value,i.length+1,n,r,a.position)?(i.push(a.value),r=a.position):s=!1}while(s);return{matched:!0,position:r,value:i}}}function oh(e){return ED(e,()=>!0)}function TD(e){return Gt(e,oh(e),(t,n)=>[t,...n])}function Gt(e,t,n){return(r,i)=>vu(e(r,i),s=>ah(t(r,s.position),(a,o)=>n(s.value,a,r,i,o)))}function kD(e,t){return Gt(e,t,n=>n)}function Dm(e,t){return Gt(e,t,(n,r)=>r)}function uh(e,t,n,r){return(i,s)=>vu(e(i,s),a=>vu(t(i,a.position),o=>ah(n(i,o.position),(u,l)=>r(a.value,o.value,u,i,s,l))))}function Dy(e,t,n){return uh(e,t,n,(r,i)=>i)}function SD(...e){return(t,n)=>{const r=[];let i=n;for(const s of e){const a=s(t,i);if(a.matched)r.push(a.value),i=a.position;else return{matched:!1}}return{matched:!0,position:i,value:r}}}function wD(...e){return CD(SD(...e))}function CD(e){return sn(e,t=>t.flatMap(n=>n))}function AD(e,t){return(n,r)=>{let i=!0,s=e,a=r;do{const o=t(s,n,a)(n,a);o.matched?(s=o.value,a=o.position):i=!1}while(i);return{matched:!0,position:a,value:s}}}function ND(e,t,n){return AD(e,r=>sn(t,(i,s,a,o)=>n(r,i,s,a,o)))}function ID(e,t,n){return OD(e,r=>ND(r,Gt(t,n,(i,s)=>[i,s]),(i,[s,a])=>s(i,a)))}function OD(e,t){return(n,r)=>vu(e(n,r),i=>t(i.value,n,r,i.position)(n,i.position))}const vD="(?:[ \\t\\r\\n\\f]*)",Py="(?:\\n|\\r\\n|\\r|\\f)",dl="[^\\x00-\\x7F]",Ma="(?:\\\\[0-9a-f]{1,6}(?:\\r\\n|[ \\n\\r\\t\\f])?)",Da="(?:\\\\[^\\n\\r\\f0-9a-f])",_D=`(?:[_a-z]|${dl}|${Ma}|${Da})`,By=`(?:[_a-z0-9-]|${dl}|${Ma}|${Da})`,LD=`(?:${By}+)`,RD=`(?:[-]?${_D}${By}*)`,MD=`'([^\\n\\r\\f\\\\']|\\\\${Py}|${dl}|${Ma}|${Da})*'`,DD=`"([^\\n\\r\\f\\\\"]|\\\\${Py}|${dl}|${Ma}|${Da})*"`,PD=My([{name:"ws",regex:new RegExp(vD)},{name:"hash",regex:new RegExp(`#${LD}`,"i")},{name:"ident",regex:new RegExp(RD,"i")},{name:"str1",regex:new RegExp(MD,"i")},{name:"str2",regex:new RegExp(DD,"i")},{name:"*"},{name:"."},{name:","},{name:"["},{name:"]"},{name:"="},{name:">"},{name:"|"},{name:"+"},{name:"~"},{name:"^"},{name:"$"}]),BD=My([{name:"unicode",regex:new RegExp(Ma,"i")},{name:"escape",regex:new RegExp(Da,"i")},{name:"any",regex:new RegExp("[\\s\\S]","i")}]);function Fy([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function FD(e){return e.reduce(Fy,[0,0,0])}const HD=wr(e=>e.name==="unicode"?String.fromCodePoint(parseInt(e.text.slice(1),16)):void 0),UD=wr(e=>e.name==="escape"?e.text.slice(1):void 0),jD=wr(e=>e.name==="any"?e.text:void 0),zD=sn(oh(cl(HD,UD,jD)),e=>e.join(""));function lh(e){const t=BD(e);return zD({tokens:t.tokens,options:void 0},0).value}function et(e){return wr(t=>t.name===e?!0:void 0)}const ch=wr(e=>e.name==="ws"?null:void 0),Od=_u(ch,null);function Ea(e){return Dy(Od,e,Od)}const Ta=wr(e=>e.name==="ident"?lh(e.text):void 0),$D=wr(e=>e.name==="hash"?lh(e.text.slice(1)):void 0),VD=wr(e=>e.name.startsWith("str")?lh(e.text.slice(1,-1)):void 0),Hy=kD(_u(Ta,""),et("|")),dh=Li(Gt(Hy,Ta,(e,t)=>({name:t,namespace:e})),sn(Ta,e=>({name:e,namespace:null}))),qD=Li(Gt(Hy,et("*"),e=>({type:"universal",namespace:e,specificity:[0,0,0]})),sn(et("*"),()=>({type:"universal",namespace:null,specificity:[0,0,0]}))),WD=sn(dh,({name:e,namespace:t})=>({type:"tag",name:e,namespace:t,specificity:[0,0,1]})),YD=Gt(et("."),Ta,(e,t)=>({type:"class",name:t,specificity:[0,1,0]})),KD=sn($D,e=>({type:"id",name:e,specificity:[1,0,0]})),Pm=wr(e=>{if(e.name==="ident"){if(e.text==="i"||e.text==="I")return"i";if(e.text==="s"||e.text==="S")return"s"}}),GD=Li(Gt(VD,_u(Dm(Od,Pm),null),(e,t)=>({value:e,modifier:t})),Gt(Ta,_u(Dm(ch,Pm),null),(e,t)=>({value:e,modifier:t}))),QD=cl(sn(et("="),()=>"="),Gt(et("~"),et("="),()=>"~="),Gt(et("|"),et("="),()=>"|="),Gt(et("^"),et("="),()=>"^="),Gt(et("$"),et("="),()=>"$="),Gt(et("*"),et("="),()=>"*=")),XD=uh(et("["),Ea(dh),et("]"),(e,{name:t,namespace:n})=>({type:"attrPresence",name:t,namespace:n,specificity:[0,1,0]})),JD=Dy(et("["),uh(Ea(dh),QD,Ea(GD),({name:e,namespace:t},n,{value:r,modifier:i})=>({type:"attrValue",name:e,namespace:t,matcher:n,value:r,modifier:i,specificity:[0,1,0]})),et("]")),ZD=Li(XD,JD),e9=Li(qD,WD),Bm=cl(KD,YD,ZD),Fm=sn(Li(wD(e9,oh(Bm)),TD(Bm)),e=>({type:"compound",list:e,specificity:FD(e.map(t=>t.specificity))})),t9=cl(sn(et(">"),()=>">"),sn(et("+"),()=>"+"),sn(et("~"),()=>"~"),Gt(et("|"),et("|"),()=>"||")),n9=Li(Ea(t9),sn(ch,()=>" ")),r9=ID(Fm,sn(n9,e=>(t,n)=>({type:"compound",list:[...n.list,{type:"combinator",combinator:e,left:t,specificity:t.specificity}],specificity:Fy(t.specificity,n.specificity)})),Fm);function i9(e,t){if(!(typeof t=="string"||t instanceof String))throw new Error("Expected a selector string. Actual input is not a string!");const n=PD(t);if(!n.complete)throw new Error(`The input "${t}" was only partially tokenized, stopped at offset ${n.offset}!
`+Hm(t,n.offset));const r=Ea(e)({tokens:n.tokens,options:void 0},0);if(!r.matched)throw new Error(`No match for "${t}" input!`);if(r.position<n.tokens.length){const i=n.tokens[r.position];throw new Error(`The input "${t}" was only partially parsed, stopped at offset ${i.offset}!
`+Hm(t,i.offset,i.len))}return r.value}function Hm(e,t,n=1){return`${e.replace(/(\t)|(\r)|(\n)/g,(r,i,s)=>i?"":s?"":"")}
${"".padEnd(t)}${"^".repeat(n)}`}function s9(e){return i9(r9,e)}function Kn(e){if(!e.type)throw new Error("This is not an AST node.");switch(e.type){case"universal":return lo(e.namespace)+"*";case"tag":return lo(e.namespace)+Vi(e.name);case"class":return"."+Vi(e.name);case"id":return"#"+Vi(e.name);case"attrPresence":return`[${lo(e.namespace)}${Vi(e.name)}]`;case"attrValue":return`[${lo(e.namespace)}${Vi(e.name)}${e.matcher}"${a9(e.value)}"${e.modifier?e.modifier:""}]`;case"combinator":return Kn(e.left)+e.combinator;case"compound":return e.list.reduce((t,n)=>n.type==="combinator"?Kn(n)+t:t+Kn(n),"");case"list":return e.list.map(Kn).join(",")}}function lo(e){return e||e===""?Vi(e)+"|":""}function Ao(e){return`\\${e.codePointAt(0).toString(16)} `}function Vi(e){return e.replace(/(^[0-9])|(^-[0-9])|(^-$)|([-0-9a-zA-Z_]|[^\x00-\x7F])|(\x00)|([\x01-\x1f]|\x7f)|([\s\S])/g,(t,n,r,i,s,a,o,u)=>n?Ao(n):r?"-"+Ao(r.slice(1)):i?"\\-":s||(a?"":o?Ao(o):"\\"+u))}function a9(e){return e.replace(/(")|(\\)|(\x00)|([\x01-\x1f]|\x7f)/g,(t,n,r,i,s)=>n?'\\"':r?"\\\\":i?"":Ao(s))}function No(e){if(!e.type)throw new Error("This is not an AST node.");switch(e.type){case"compound":{e.list.forEach(No),e.list.sort((t,n)=>jy(Um(t),Um(n)));break}case"combinator":{No(e.left);break}case"list":{e.list.forEach(No),e.list.sort((t,n)=>Kn(t)<Kn(n)?-1:1);break}}return e}function Um(e){switch(e.type){case"universal":return[1];case"tag":return[1];case"id":return[2];case"class":return[3,e.name];case"attrPresence":return[4,Kn(e)];case"attrValue":return[5,Kn(e)];case"combinator":return[15,Kn(e)]}}function Uy(e,t){return jy(e,t)}function jy(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("Arguments must be arrays.");const n=e.length<t.length?e.length:t.length;for(let r=0;r<n;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return e.length-t.length}class jm{constructor(t){this.branches=fs(o9(t))}build(t){return t(this.branches)}}function o9(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++){const[i,s]=e[r],a=u9(s9(i));n[r]={ast:a,terminal:{type:"terminal",valueContainer:{index:r,value:s,specificity:a.specificity}}}}return n}function u9(e){return zy(e),No(e),e}function zy(e){const t=[];e.list.forEach(n=>{switch(n.type){case"class":t.push({matcher:"~=",modifier:null,name:"class",namespace:null,specificity:n.specificity,type:"attrValue",value:n.name});break;case"id":t.push({matcher:"=",modifier:null,name:"id",namespace:null,specificity:n.specificity,type:"attrValue",value:n.name});break;case"combinator":zy(n.left),t.push(n);break;case"universal":break;default:t.push(n);break}}),e.list=t}function fs(e){const t=[];for(;e.length;){const n=qy(e,a=>!0,$y),{matches:r,nonmatches:i,empty:s}=c9(e,n);e=i,r.length&&t.push(d9(n,r)),s.length&&t.push(...l9(s))}return t}function l9(e){const t=[];for(const n of e){const r=n.terminal;if(r.type==="terminal")t.push(r);else{const{matches:i,rest:s}=g9(r.cont,a=>a.type==="terminal");i.forEach(a=>t.push(a)),s.length&&(r.cont=s,t.push(r))}}return t}function c9(e,t){const n=[],r=[],i=[];for(const s of e){const a=s.ast.list;a.length?(a.some(u=>$y(u)===t)?n:r).push(s):i.push(s)}return{matches:n,nonmatches:r,empty:i}}function $y(e){switch(e.type){case"attrPresence":return`attrPresence ${e.name}`;case"attrValue":return`attrValue ${e.name}`;case"combinator":return`combinator ${e.combinator}`;default:return e.type}}function d9(e,t){if(e==="tag")return f9(t);if(e.startsWith("attrValue "))return p9(e.substring(10),t);if(e.startsWith("attrPresence "))return h9(e.substring(13),t);if(e==="combinator >")return zm(">",t);if(e==="combinator +")return zm("+",t);throw new Error(`Unsupported selector kind: ${e}`)}function f9(e){const t=fh(e,r=>r.type==="tag",r=>r.name);return{type:"tagName",variants:Object.entries(t).map(([r,i])=>({type:"variant",value:r,cont:fs(i.items)}))}}function h9(e,t){for(const n of t)Vy(n,r=>r.type==="attrPresence"&&r.name===e);return{type:"attrPresence",name:e,cont:fs(t)}}function p9(e,t){const n=fh(t,i=>i.type==="attrValue"&&i.name===e,i=>`${i.matcher} ${i.modifier||""} ${i.value}`),r=[];for(const i of Object.values(n)){const s=i.oneSimpleSelector,a=m9(s),o=fs(i.items);r.push({type:"matcher",matcher:s.matcher,modifier:s.modifier,value:s.value,predicate:a,cont:o})}return{type:"attrValue",name:e,matchers:r}}function m9(e){if(e.modifier==="i"){const t=e.value.toLowerCase();switch(e.matcher){case"=":return n=>t===n.toLowerCase();case"~=":return n=>n.toLowerCase().split(/[ \t]+/).includes(t);case"^=":return n=>n.toLowerCase().startsWith(t);case"$=":return n=>n.toLowerCase().endsWith(t);case"*=":return n=>n.toLowerCase().includes(t);case"|=":return n=>{const r=n.toLowerCase();return t===r||r.startsWith(t)&&r[t.length]==="-"}}}else{const t=e.value;switch(e.matcher){case"=":return n=>t===n;case"~=":return n=>n.split(/[ \t]+/).includes(t);case"^=":return n=>n.startsWith(t);case"$=":return n=>n.endsWith(t);case"*=":return n=>n.includes(t);case"|=":return n=>t===n||n.startsWith(t)&&n[t.length]==="-"}}}function zm(e,t){const n=fh(t,i=>i.type==="combinator"&&i.combinator===e,i=>Kn(i.left)),r=[];for(const i of Object.values(n)){const s=fs(i.items),a=i.oneSimpleSelector.left;r.push({ast:a,terminal:{type:"popElement",cont:s}})}return{type:"pushElement",combinator:e,cont:fs(r)}}function fh(e,t,n){const r={};for(;e.length;){const i=qy(e,t,n),s=c=>t(c)&&n(c)===i,a=c=>c.ast.list.some(s),{matches:o,rest:u}=b9(e,a);let l=null;for(const c of o){const d=Vy(c,s);l||(l=d)}if(l==null)throw new Error("No simple selector is found.");r[i]={oneSimpleSelector:l,items:o},e=u}return r}function Vy(e,t){const n=e.ast.list,r=new Array(n.length);let i=-1;for(let a=n.length;a-- >0;)t(n[a])&&(r[a]=!0,i=a);if(i==-1)throw new Error("Couldn't find the required simple selector.");const s=n[i];return e.ast.list=n.filter((a,o)=>!r[o]),s}function qy(e,t,n){const r={};for(const a of e){const o={};for(const u of a.ast.list.filter(t))o[n(u)]=!0;for(const u of Object.keys(o))r[u]?r[u]++:r[u]=1}let i="",s=0;for(const a of Object.entries(r))a[1]>s&&(i=a[0],s=a[1]);return i}function g9(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return{matches:n,rest:r}}function b9(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return{matches:n,rest:r}}class x9{constructor(t){this.f=t}pickAll(t){return this.f(t)}pick1(t,n=!1){const r=this.f(t),i=r.length;if(i===0)return null;if(i===1)return r[0].value;const s=n?y9:E9;let a=r[0];for(let o=1;o<i;o++){const u=r[o];s(a,u)&&(a=u)}return a.value}}function y9(e,t){const n=Uy(t.specificity,e.specificity);return n>0||n===0&&t.index<e.index}function E9(e,t){const n=Uy(t.specificity,e.specificity);return n>0||n===0&&t.index>e.index}function $m(e){return new x9(Ss(e))}function Ss(e){const t=e.map(T9);return(n,...r)=>t.flatMap(i=>i(n,...r))}function T9(e){switch(e.type){case"terminal":{const t=[e.valueContainer];return(n,...r)=>t}case"tagName":return k9(e);case"attrValue":return w9(e);case"attrPresence":return S9(e);case"pushElement":return C9(e);case"popElement":return N9(e)}}function k9(e){const t={};for(const n of e.variants)t[n.value]=Ss(n.cont);return(n,...r)=>{const i=t[n.name];return i?i(n,...r):[]}}function S9(e){const t=e.name,n=Ss(e.cont);return(r,...i)=>Object.prototype.hasOwnProperty.call(r.attribs,t)?n(r,...i):[]}function w9(e){const t=[];for(const r of e.matchers){const i=r.predicate,s=Ss(r.cont);t.push((a,o,...u)=>i(a)?s(o,...u):[])}const n=e.name;return(r,...i)=>{const s=r.attribs[n];return s||s===""?t.flatMap(a=>a(s,r,...i)):[]}}function C9(e){const t=Ss(e.cont),n=e.combinator==="+"?Wy:A9;return(r,...i)=>{const s=n(r);return s===null?[]:t(s,r,...i)}}const Wy=e=>{const t=e.prev;return t===null?null:sh(t)?t:Wy(t)},A9=e=>{const t=e.parent;return t&&sh(t)?t:null};function N9(e){const t=Ss(e.cont);return(n,r,...i)=>t(r,...i)}const Yy=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Ky=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Sc;const I9=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),vd=(Sc=String.fromCodePoint)!==null&&Sc!==void 0?Sc:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Gy(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=I9.get(e))!==null&&t!==void 0?t:e}var It;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(It||(It={}));const O9=32;var _n;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(_n||(_n={}));function _d(e){return e>=It.ZERO&&e<=It.NINE}function v9(e){return e>=It.UPPER_A&&e<=It.UPPER_F||e>=It.LOWER_A&&e<=It.LOWER_F}function _9(e){return e>=It.UPPER_A&&e<=It.UPPER_Z||e>=It.LOWER_A&&e<=It.LOWER_Z||_d(e)}function L9(e){return e===It.EQUALS||_9(e)}var Ct;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ct||(Ct={}));var oi;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(oi||(oi={}));class R9{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ct.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=oi.Strict}startEntity(t){this.decodeMode=t,this.state=Ct.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ct.EntityStart:return t.charCodeAt(n)===It.NUM?(this.state=Ct.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ct.NamedEntity,this.stateNamedEntity(t,n));case Ct.NumericStart:return this.stateNumericStart(t,n);case Ct.NumericDecimal:return this.stateNumericDecimal(t,n);case Ct.NumericHex:return this.stateNumericHex(t,n);case Ct.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|O9)===It.LOWER_X?(this.state=Ct.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ct.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(_d(i)||v9(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(_d(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===It.SEMI)this.consumed+=1;else if(this.decodeMode===oi.Strict)return 0;return this.emitCodePoint(Gy(this.result),this.consumed),this.errors&&(t!==It.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&_n.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=Xy(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===oi.Attribute&&(s===0||L9(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&_n.VALUE_LENGTH)>>14,s!==0){if(a===It.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==oi.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&_n.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~_n.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ct.NamedEntity:return this.result!==0&&(this.decodeMode!==oi.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ct.NumericDecimal:return this.emitNumericEntity(0,2);case Ct.NumericHex:return this.emitNumericEntity(0,3);case Ct.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ct.EntityStart:return 0}}}function Qy(e){let t="";const n=new R9(e,r=>t+=vd(r));return function(i,s){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){t+=i.slice(a,o),n.startEntity(s);const l=n.write(i,o+1);if(l<0){a=o+n.end();break}a=o+l,o=l===0?a+1:a}const u=t+i.slice(a);return t="",u}}function Xy(e,t,n,r){const i=(t&_n.BRANCH_LENGTH)>>7,s=t&_n.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let a=n,o=a+i-1;for(;a<=o;){const u=a+o>>>1,l=e[u];if(l<r)a=u+1;else if(l>r)o=u-1;else return e[u+i]}return-1}Qy(Yy);Qy(Ky);var ae;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(ae||(ae={}));var V;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"})(V||(V={}));function cr(e){return e===ae.Space||e===ae.NewLine||e===ae.Tab||e===ae.FormFeed||e===ae.CarriageReturn}function co(e){return e===ae.Slash||e===ae.Gt||cr(e)}function Vm(e){return e>=ae.Zero&&e<=ae.Nine}function M9(e){return e>=ae.LowerA&&e<=ae.LowerZ||e>=ae.UpperA&&e<=ae.UpperZ}function D9(e){return e>=ae.UpperA&&e<=ae.UpperF||e>=ae.LowerA&&e<=ae.LowerF}var Wn;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(Wn||(Wn={}));const en={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class P9{constructor({xmlMode:t=!1,decodeEntities:n=!0},r){this.cbs=r,this.state=V.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=V.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=t,this.decodeEntities=n,this.entityTrie=t?Ky:Yy}reset(){this.state=V.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=V.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(t){t===ae.Lt||!this.decodeEntities&&this.fastForwardTo(ae.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=V.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===ae.Amp&&(this.state=V.BeforeEntity)}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?co(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=V.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===ae.Gt||cr(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===en.TitleEnd?this.decodeEntities&&t===ae.Amp&&(this.state=V.BeforeEntity):this.fastForwardTo(ae.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===ae.Lt)}stateCDATASequence(t){t===en.Cdata[this.sequenceIndex]?++this.sequenceIndex===en.Cdata.length&&(this.state=V.InCommentLike,this.currentSequence=en.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=V.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===en.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=V.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!co(t):M9(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=V.SpecialStartSequence}stateBeforeTagName(t){if(t===ae.ExclamationMark)this.state=V.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===ae.Questionmark)this.state=V.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,!this.xmlMode&&n===en.TitleEnd[2]?this.startSpecial(en.TitleEnd,3):this.state=!this.xmlMode&&n===en.ScriptEnd[2]?V.BeforeSpecialS:V.InTagName}else t===ae.Slash?this.state=V.BeforeClosingTagName:(this.state=V.Text,this.stateText(t))}stateInTagName(t){co(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){cr(t)||(t===ae.Gt?this.state=V.Text:(this.state=this.isTagStartChar(t)?V.InClosingTagName:V.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===ae.Gt||cr(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.state=V.Text,this.baseState=V.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===ae.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=V.InSpecialTag,this.sequenceIndex=0):this.state=V.Text,this.baseState=this.state,this.sectionStart=this.index+1):t===ae.Slash?this.state=V.InSelfClosingTag:cr(t)||(this.state=V.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===ae.Gt?(this.cbs.onselfclosingtag(this.index),this.state=V.Text,this.baseState=V.Text,this.sectionStart=this.index+1,this.isSpecial=!1):cr(t)||(this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===ae.Eq||co(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===ae.Eq?this.state=V.BeforeAttributeValue:t===ae.Slash||t===ae.Gt?(this.cbs.onattribend(Wn.NoValue,this.index),this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t)):cr(t)||(this.cbs.onattribend(Wn.NoValue,this.index),this.state=V.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===ae.DoubleQuote?(this.state=V.InAttributeValueDq,this.sectionStart=this.index+1):t===ae.SingleQuote?(this.state=V.InAttributeValueSq,this.sectionStart=this.index+1):cr(t)||(this.sectionStart=this.index,this.state=V.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ae.DoubleQuote?Wn.Double:Wn.Single,this.index),this.state=V.BeforeAttributeName):this.decodeEntities&&t===ae.Amp&&(this.baseState=this.state,this.state=V.BeforeEntity)}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,ae.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,ae.SingleQuote)}stateInAttributeValueNoQuotes(t){cr(t)||t===ae.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Wn.Unquoted,this.index),this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===ae.Amp&&(this.baseState=this.state,this.state=V.BeforeEntity)}stateBeforeDeclaration(t){t===ae.OpeningSquareBracket?(this.state=V.CDATASequence,this.sequenceIndex=0):this.state=t===ae.Dash?V.BeforeComment:V.InDeclaration}stateInDeclaration(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=V.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=V.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===ae.Dash?(this.state=V.InCommentLike,this.currentSequence=en.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=V.InDeclaration}stateInSpecialComment(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=V.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===en.ScriptEnd[3]?this.startSpecial(en.ScriptEnd,4):n===en.StyleEnd[3]?this.startSpecial(en.StyleEnd,4):(this.state=V.InTagName,this.stateInTagName(t))}stateBeforeEntity(t){this.entityExcess=1,this.entityResult=0,t===ae.Number?this.state=V.BeforeNumericEntity:t===ae.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=V.InNamedEntity,this.stateInNamedEntity(t))}stateInNamedEntity(t){if(this.entityExcess+=1,this.trieIndex=Xy(this.entityTrie,this.trieCurrent,this.trieIndex+1,t),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&_n.VALUE_LENGTH;if(n){const r=(n>>14)-1;if(!this.allowLegacyEntity()&&t!==ae.Semi)this.trieIndex+=r;else{const i=this.index-this.entityExcess+1;i>this.sectionStart&&this.emitPartial(this.sectionStart,i),this.entityResult=this.trieIndex,this.trieIndex+=r,this.entityExcess=0,this.sectionStart=this.index+1,r===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&_n.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~_n.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(t){(t|32)===ae.LowerX?(this.entityExcess++,this.state=V.InHexEntity):(this.state=V.InNumericEntity,this.stateInNumericEntity(t))}emitNumericEntity(t){const n=this.index-this.entityExcess-1;n+2+ +(this.state===V.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(t),this.emitCodePoint(Gy(this.entityResult))),this.state=this.baseState}stateInNumericEntity(t){t===ae.Semi?this.emitNumericEntity(!0):Vm(t)?(this.entityResult=this.entityResult*10+(t-ae.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(t){t===ae.Semi?this.emitNumericEntity(!0):Vm(t)?(this.entityResult=this.entityResult*16+(t-ae.Zero),this.entityExcess++):D9(t)?(this.entityResult=this.entityResult*16+((t|32)-ae.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===V.Text||this.baseState===V.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===V.Text||this.state===V.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===V.InAttributeValueDq||this.state===V.InAttributeValueSq||this.state===V.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case V.Text:{this.stateText(t);break}case V.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case V.InSpecialTag:{this.stateInSpecialTag(t);break}case V.CDATASequence:{this.stateCDATASequence(t);break}case V.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case V.InAttributeName:{this.stateInAttributeName(t);break}case V.InCommentLike:{this.stateInCommentLike(t);break}case V.InSpecialComment:{this.stateInSpecialComment(t);break}case V.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case V.InTagName:{this.stateInTagName(t);break}case V.InClosingTagName:{this.stateInClosingTagName(t);break}case V.BeforeTagName:{this.stateBeforeTagName(t);break}case V.AfterAttributeName:{this.stateAfterAttributeName(t);break}case V.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case V.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case V.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case V.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case V.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case V.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case V.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case V.InDeclaration:{this.stateInDeclaration(t);break}case V.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case V.BeforeComment:{this.stateBeforeComment(t);break}case V.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case V.InNamedEntity:{this.stateInNamedEntity(t);break}case V.BeforeEntity:{this.stateBeforeEntity(t);break}case V.InHexEntity:{this.stateInHexEntity(t);break}case V.InNumericEntity:{this.stateInNumericEntity(t);break}default:this.stateBeforeNumericEntity(t)}this.index++}this.cleanup()}finish(){this.state===V.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.state===V.InCommentLike?this.currentSequence===en.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===V.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===V.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===V.InTagName||this.state===V.BeforeAttributeName||this.state===V.BeforeAttributeValue||this.state===V.AfterAttributeName||this.state===V.InAttributeName||this.state===V.InAttributeValueSq||this.state===V.InAttributeValueDq||this.state===V.InAttributeValueNq||this.state===V.InClosingTagName||this.cbs.ontext(this.sectionStart,t)}emitPartial(t,n){this.baseState!==V.Text&&this.baseState!==V.InSpecialTag?this.cbs.onattribdata(t,n):this.cbs.ontext(t,n)}emitCodePoint(t){this.baseState!==V.Text&&this.baseState!==V.InSpecialTag?this.cbs.onattribentity(t):this.cbs.ontextentity(t)}}const Fi=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ze=new Set(["p"]),qm=new Set(["thead","tbody"]),Wm=new Set(["dd","dt"]),Ym=new Set(["rt","rp"]),B9=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",ze],["h1",ze],["h2",ze],["h3",ze],["h4",ze],["h5",ze],["h6",ze],["select",Fi],["input",Fi],["output",Fi],["button",Fi],["datalist",Fi],["textarea",Fi],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Wm],["dt",Wm],["address",ze],["article",ze],["aside",ze],["blockquote",ze],["details",ze],["div",ze],["dl",ze],["fieldset",ze],["figcaption",ze],["figure",ze],["footer",ze],["form",ze],["header",ze],["hr",ze],["main",ze],["nav",ze],["ol",ze],["pre",ze],["section",ze],["table",ze],["ul",ze],["rt",Ym],["rp",Ym],["tbody",qm],["tfoot",qm]]),F9=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Km=new Set(["math","svg"]),Gm=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),H9=/\s|\//;class U9{constructor(t,n={}){var r,i,s,a,o;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.lowerCaseTagNames=(r=n.lowerCaseTags)!==null&&r!==void 0?r:!n.xmlMode,this.lowerCaseAttributeNames=(i=n.lowerCaseAttributeNames)!==null&&i!==void 0?i:!n.xmlMode,this.tokenizer=new((s=n.Tokenizer)!==null&&s!==void 0?s:P9)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}ontext(t,n){var r,i;const s=this.getSlice(t,n);this.endIndex=n-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,s),this.startIndex=n}ontextentity(t){var n,r;const i=this.tokenizer.getSectionStart();this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,vd(t)),this.startIndex=i}isVoidElement(t){return!this.options.xmlMode&&F9.has(t)}onopentagname(t,n){this.endIndex=n;let r=this.getSlice(t,n);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)}emitOpenTag(t){var n,r,i,s;this.openTagStart=this.startIndex,this.tagname=t;const a=!this.options.xmlMode&&B9.get(t);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const o=this.stack.pop();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,o,!0)}this.isVoidElement(t)||(this.stack.push(t),Km.has(t)?this.foreignContext.push(!0):Gm.has(t)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,r;this.startIndex=this.openTagStart,this.attribs&&((r=(n=this.cbs).onopentag)===null||r===void 0||r.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var r,i,s,a,o,u;this.endIndex=n;let l=this.getSlice(t,n);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(Km.has(l)||Gm.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((i=(r=this.cbs).onopentagname)===null||i===void 0||i.call(r,"br"),(a=(s=this.cbs).onopentag)===null||a===void 0||a.call(s,"br",{},!0),(u=(o=this.cbs).onclosetag)===null||u===void 0||u.call(o,"br",!1));else{const c=this.stack.lastIndexOf(l);if(c!==-1)if(this.cbs.onclosetag){let d=this.stack.length-c;for(;d--;)this.cbs.onclosetag(this.stack.pop(),d!==0)}else this.stack.length=c;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,r;const i=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===i&&((r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,i,!t),this.stack.pop())}onattribname(t,n){this.startIndex=t;const r=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=vd(t)}onattribend(t,n){var r,i;this.endIndex=n,(i=(r=this.cbs).onattribute)===null||i===void 0||i.call(r,this.attribname,this.attribvalue,t===Wn.Double?'"':t===Wn.Single?"'":t===Wn.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(H9);let r=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r}ondeclaration(t,n){this.endIndex=n;const r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`!${i}`,`!${r}`)}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`?${i}`,`?${r}`)}this.startIndex=n+1}oncomment(t,n,r){var i,s,a,o;this.endIndex=n,(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,this.getSlice(t,n-r)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=n+1}oncdata(t,n,r){var i,s,a,o,u,l,c,d,h,f;this.endIndex=n;const m=this.getSlice(t,n-r);this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,m),(l=(u=this.cbs).oncdataend)===null||l===void 0||l.call(u)):((d=(c=this.cbs).oncomment)===null||d===void 0||d.call(c,`[CDATA[${m}]]`),(f=(h=this.cbs).oncommentend)===null||f===void 0||f.call(h)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,r,i;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(r=this.cbs).onparserinit)===null||i===void 0||i.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let r=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,n-this.bufferOffset);return r}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}}const Qm=/["&'<>$\x80-\uFFFF]/g,j9=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),z9=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function Jy(e){let t="",n=0,r;for(;(r=Qm.exec(e))!==null;){const i=r.index,s=e.charCodeAt(i),a=j9.get(s);a!==void 0?(t+=e.substring(n,i)+a,n=i+1):(t+=`${e.substring(n,i)}&#x${z9(e,i).toString(16)};`,n=Qm.lastIndex+=+((s&64512)===55296))}return t+e.substr(n)}function Zy(e,t){return function(r){let i,s=0,a="";for(;i=e.exec(r);)s!==i.index&&(a+=r.substring(s,i.index)),a+=t.get(i[0].charCodeAt(0)),s=i.index+1;return a+r.substring(s)}}const $9=Zy(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),V9=Zy(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),q9=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),W9=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Y9=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function K9(e){return e.replace(/"/g,"&quot;")}function G9(e,t){var n;if(!e)return;const r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?K9:t.xmlMode||t.encodeEntities!=="utf8"?Jy:$9;return Object.keys(e).map(i=>{var s,a;const o=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=W9.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&o===""?i:`${i}="${r(o)}"`}).join(" ")}const Xm=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function fl(e,t={}){const n="length"in e?e:[e];let r="";for(let i=0;i<n.length;i++)r+=Q9(n[i],t);return r}function Q9(e,t){switch(e.type){case tD:return fl(e.children,t);case lD:case rD:return eP(e);case iD:return rP(e);case uD:return nP(e);case sD:case aD:case oD:return Z9(e,t);case nD:return tP(e,t)}}const X9=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),J9=new Set(["svg","math"]);function Z9(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=q9.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&X9.has(e.parent.name)&&(t=re(I({},t),{xmlMode:!1}))),!t.xmlMode&&J9.has(e.name)&&(t=re(I({},t),{xmlMode:"foreign"}));let r=`<${e.name}`;const i=G9(e.attribs,t);return i&&(r+=` ${i}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&Xm.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=fl(e.children,t)),(t.xmlMode||!Xm.has(e.name))&&(r+=`</${e.name}>`)),r}function eP(e){return`<${e.data}>`}function tP(e,t){var n;let r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&Y9.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?Jy(r):V9(r)),r}function nP(e){return`<![CDATA[${e.children[0].data}]]>`}function rP(e){return`<!--${e.data}-->`}function iP(e,t){const n=new mD(void 0,t);return new U9(n,t).end(e),n.root}var wc,Jm;function sP(){if(Jm)return wc;Jm=1;var e=function(E){return t(E)&&!n(E)};function t(x){return!!x&&typeof x=="object"}function n(x){var E=Object.prototype.toString.call(x);return E==="[object RegExp]"||E==="[object Date]"||s(x)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function s(x){return x.$$typeof===i}function a(x){return Array.isArray(x)?[]:{}}function o(x,E){return E.clone!==!1&&E.isMergeableObject(x)?b(a(x),x,E):x}function u(x,E,T){return x.concat(E).map(function(v){return o(v,T)})}function l(x,E){if(!E.customMerge)return b;var T=E.customMerge(x);return typeof T=="function"?T:b}function c(x){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(x).filter(function(E){return Object.propertyIsEnumerable.call(x,E)}):[]}function d(x){return Object.keys(x).concat(c(x))}function h(x,E){try{return E in x}catch(T){return!1}}function f(x,E){return h(x,E)&&!(Object.hasOwnProperty.call(x,E)&&Object.propertyIsEnumerable.call(x,E))}function m(x,E,T){var v={};return T.isMergeableObject(x)&&d(x).forEach(function(C){v[C]=o(x[C],T)}),d(E).forEach(function(C){f(x,C)||(h(x,C)&&T.isMergeableObject(E[C])?v[C]=l(C,T)(x[C],E[C],T):v[C]=o(E[C],T))}),v}function b(x,E,T){T=T||{},T.arrayMerge=T.arrayMerge||u,T.isMergeableObject=T.isMergeableObject||e,T.cloneUnlessOtherwiseSpecified=o;var v=Array.isArray(E),C=Array.isArray(x),w=v===C;return w?v?T.arrayMerge(x,E,T):m(x,E,T):o(E,T)}b.all=function(E,T){if(!Array.isArray(E))throw new Error("first argument should be an array");return E.reduce(function(v,C){return b(v,C,T)},{})};var y=b;return wc=y,wc}var aP=sP();const eE=ka(aP);function hh(e,t,n=()=>{}){if(e===void 0){const r=function(...i){return t(r,...i)};return r}return e>=0?function(...r){return t(hh(e-1,t,n),...r)}:n}function tE(e,t){let n=0,r=e.length;for(;n<r&&e[n]===t;)++n;for(;r>n&&e[r-1]===t;)--r;return n>0||r<e.length?e.substring(n,r):e}function oP(e,t){let n=e.length;for(;n>0&&e[n-1]===t;)--n;return n<e.length?e.substring(0,n):e}function uP(e){return e.replace(/[\s\S]/g,t=>"\\u"+t.charCodeAt().toString(16).padStart(4,"0"))}function nE(e,t){const n=new Map;for(let r=e.length;r-- >0;){const i=e[r],s=t(i);n.set(s,n.has(s)?eE(i,n.get(s),{arrayMerge:lP}):i)}return[...n.values()].reverse()}const lP=(e,t,n)=>[...t];function hs(e,t){for(const n of t){if(!e)return;e=e[n]}return e}function Zm(e,t="a",n=26){const r=[];do e-=1,r.push(e%n),e=e/n>>0;while(e>0);const i=t.charCodeAt(0);return r.reverse().map(s=>String.fromCharCode(i+s)).join("")}const Cc=["I","X","C","M"],e1=["V","L","D"];function t1(e){return[...e+""].map(t=>+t).reverse().map((t,n)=>t%5<4?(t<5?"":e1[n])+Cc[n].repeat(t%5):Cc[n]+(t<5?e1[n]:Cc[n+1])).reverse().join("")}class rE{constructor(t,n=void 0){this.lines=[],this.nextLineWords=[],this.maxLineLength=n||t.wordwrap||Number.MAX_VALUE,this.nextLineAvailableChars=this.maxLineLength,this.wrapCharacters=hs(t,["longWordSplit","wrapCharacters"])||[],this.forceWrapOnLimit=hs(t,["longWordSplit","forceWrapOnLimit"])||!1,this.stashedSpace=!1,this.wordBreakOpportunity=!1}pushWord(t,n=!1){this.nextLineAvailableChars<=0&&!n&&this.startNewLine();const r=this.nextLineWords.length===0,i=t.length+(r?0:1);if(i<=this.nextLineAvailableChars||n)this.nextLineWords.push(t),this.nextLineAvailableChars-=i;else{const[s,...a]=this.splitLongWord(t);r||this.startNewLine(),this.nextLineWords.push(s),this.nextLineAvailableChars-=s.length;for(const o of a)this.startNewLine(),this.nextLineWords.push(o),this.nextLineAvailableChars-=o.length}}popWord(){const t=this.nextLineWords.pop();if(t!==void 0){const n=this.nextLineWords.length===0,r=t.length+(n?0:1);this.nextLineAvailableChars+=r}return t}concatWord(t,n=!1){if(this.wordBreakOpportunity&&t.length>this.nextLineAvailableChars)this.pushWord(t,n),this.wordBreakOpportunity=!1;else{const r=this.popWord();this.pushWord(r?r.concat(t):t,n)}}startNewLine(t=1){this.lines.push(this.nextLineWords),t>1&&this.lines.push(...Array.from({length:t-1},()=>[])),this.nextLineWords=[],this.nextLineAvailableChars=this.maxLineLength}isEmpty(){return this.lines.length===0&&this.nextLineWords.length===0}clear(){this.lines.length=0,this.nextLineWords.length=0,this.nextLineAvailableChars=this.maxLineLength}toString(){return[...this.lines,this.nextLineWords].map(t=>t.join(" ")).join(`
`)}splitLongWord(t){const n=[];let r=0;for(;t.length>this.maxLineLength;){const i=t.substring(0,this.maxLineLength),s=t.substring(this.maxLineLength),a=i.lastIndexOf(this.wrapCharacters[r]);if(a>-1)t=i.substring(a+1)+s,n.push(i.substring(0,a+1));else if(r++,r<this.wrapCharacters.length)t=i+s;else{if(this.forceWrapOnLimit){if(n.push(i),t=s,t.length>this.maxLineLength)continue}else t=i+s;break}}return n.push(t),n}}class Pa{constructor(t=null){this.next=t}getRoot(){return this.next?this.next:this}}class qn extends Pa{constructor(t,n=null,r=1,i=void 0){super(n),this.leadingLineBreaks=r,this.inlineTextBuilder=new rE(t,i),this.rawText="",this.stashedLineBreaks=0,this.isPre=n&&n.isPre,this.isNoWrap=n&&n.isNoWrap}}class n1 extends qn{constructor(t,n=null,{interRowLineBreaks:r=1,leadingLineBreaks:i=2,maxLineLength:s=void 0,maxPrefixLength:a=0,prefixAlign:o="left"}={}){super(t,n,i,s),this.maxPrefixLength=a,this.prefixAlign=o,this.interRowLineBreaks=r}}class ui extends qn{constructor(t,n=null,{leadingLineBreaks:r=1,maxLineLength:i=void 0,prefix:s=""}={}){super(t,n,r,i),this.prefix=s}}class r1 extends Pa{constructor(t=null){super(t),this.rows=[],this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class i1 extends Pa{constructor(t=null){super(t),this.cells=[],this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class li extends Pa{constructor(t,n=null,r=void 0){super(n),this.inlineTextBuilder=new rE(t,r),this.rawText="",this.stashedLineBreaks=0,this.isPre=n&&n.isPre,this.isNoWrap=n&&n.isNoWrap}}class cP extends Pa{constructor(t=null,n){super(t),this.transform=n}}function dP(e){return[...e].map(t=>"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0")).join("")}class fP{constructor(t){this.whitespaceChars=t.preserveNewlines?t.whitespaceCharacters.replace(/\n/g,""):t.whitespaceCharacters;const n=dP(this.whitespaceChars);if(this.leadingWhitespaceRe=new RegExp(`^[${n}]`),this.trailingWhitespaceRe=new RegExp(`[${n}]$`),this.allWhitespaceOrEmptyRe=new RegExp(`^[${n}]*$`),this.newlineOrNonWhitespaceRe=new RegExp(`(\\n|[^\\n${n}])`,"g"),this.newlineOrNonNewlineStringRe=new RegExp("(\\n|[^\\n]+)","g"),t.preserveNewlines){const r=new RegExp(`\\n|[^\\n${n}]+`,"gm");this.shrinkWrapAdd=function(i,s,a=(u=>u),o=!1){if(!i)return;const u=s.stashedSpace;let l=!1,c=r.exec(i);if(c)for(l=!0,c[0]===`
`?s.startNewLine():u||this.testLeadingWhitespace(i)?s.pushWord(a(c[0]),o):s.concatWord(a(c[0]),o);(c=r.exec(i))!==null;)c[0]===`
`?s.startNewLine():s.pushWord(a(c[0]),o);s.stashedSpace=u&&!l||this.testTrailingWhitespace(i)}}else{const r=new RegExp(`[^${n}]+`,"g");this.shrinkWrapAdd=function(i,s,a=(u=>u),o=!1){if(!i)return;const u=s.stashedSpace;let l=!1,c=r.exec(i);if(c)for(l=!0,u||this.testLeadingWhitespace(i)?s.pushWord(a(c[0]),o):s.concatWord(a(c[0]),o);(c=r.exec(i))!==null;)s.pushWord(a(c[0]),o);s.stashedSpace=u&&!l||this.testTrailingWhitespace(i)}}}addLiteral(t,n,r=!0){if(!t)return;const i=n.stashedSpace;let s=!1,a=this.newlineOrNonNewlineStringRe.exec(t);if(a)for(s=!0,a[0]===`
`?n.startNewLine():i?n.pushWord(a[0],r):n.concatWord(a[0],r);(a=this.newlineOrNonNewlineStringRe.exec(t))!==null;)a[0]===`
`?n.startNewLine():n.pushWord(a[0],r);n.stashedSpace=i&&!s}testLeadingWhitespace(t){return this.leadingWhitespaceRe.test(t)}testTrailingWhitespace(t){return this.trailingWhitespaceRe.test(t)}testContainsWords(t){return!this.allWhitespaceOrEmptyRe.test(t)}countNewlinesNoWords(t){this.newlineOrNonWhitespaceRe.lastIndex=0;let n=0,r;for(;(r=this.newlineOrNonWhitespaceRe.exec(t))!==null;)if(r[0]===`
`)n++;else return 0;return n}}class hP{constructor(t,n,r=void 0){this.options=t,this.picker=n,this.metadata=r,this.whitespaceProcessor=new fP(t),this._stackItem=new qn(t),this._wordTransformer=void 0}pushWordTransform(t){this._wordTransformer=new cP(this._wordTransformer,t)}popWordTransform(){if(!this._wordTransformer)return;const t=this._wordTransformer.transform;return this._wordTransformer=this._wordTransformer.next,t}startNoWrap(){this._stackItem.isNoWrap=!0}stopNoWrap(){this._stackItem.isNoWrap=!1}_getCombinedWordTransformer(){const t=this._wordTransformer?(r=>iE(r,this._wordTransformer)):void 0,n=this.options.encodeCharacters;return t?n?r=>n(t(r)):t:n}_popStackItem(){const t=this._stackItem;return this._stackItem=t.next,t}addLineBreak(){(this._stackItem instanceof qn||this._stackItem instanceof ui||this._stackItem instanceof li)&&(this._stackItem.isPre?this._stackItem.rawText+=`
`:this._stackItem.inlineTextBuilder.startNewLine())}addWordBreakOpportunity(){(this._stackItem instanceof qn||this._stackItem instanceof ui||this._stackItem instanceof li)&&(this._stackItem.inlineTextBuilder.wordBreakOpportunity=!0)}addInline(t,{noWordTransform:n=!1}={}){if(this._stackItem instanceof qn||this._stackItem instanceof ui||this._stackItem instanceof li){if(this._stackItem.isPre){this._stackItem.rawText+=t;return}if(!(t.length===0||this._stackItem.stashedLineBreaks&&!this.whitespaceProcessor.testContainsWords(t))){if(this.options.preserveNewlines){const r=this.whitespaceProcessor.countNewlinesNoWords(t);if(r>0){this._stackItem.inlineTextBuilder.startNewLine(r);return}}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.shrinkWrapAdd(t,this._stackItem.inlineTextBuilder,n?void 0:this._getCombinedWordTransformer(),this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}}addLiteral(t){if((this._stackItem instanceof qn||this._stackItem instanceof ui||this._stackItem instanceof li)&&t.length!==0){if(this._stackItem.isPre){this._stackItem.rawText+=t;return}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.addLiteral(t,this._stackItem.inlineTextBuilder,this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}openBlock({leadingLineBreaks:t=1,reservedLineLength:n=0,isPre:r=!1}={}){const i=Math.max(20,this._stackItem.inlineTextBuilder.maxLineLength-n);this._stackItem=new qn(this.options,this._stackItem,t,i),r&&(this._stackItem.isPre=!0)}closeBlock({trailingLineBreaks:t=1,blockTransform:n=void 0}={}){const r=this._popStackItem(),i=n?n(si(r)):si(r);fo(this._stackItem,i,r.leadingLineBreaks,Math.max(r.stashedLineBreaks,t))}openList({maxPrefixLength:t=0,prefixAlign:n="left",interRowLineBreaks:r=1,leadingLineBreaks:i=2}={}){this._stackItem=new n1(this.options,this._stackItem,{interRowLineBreaks:r,leadingLineBreaks:i,maxLineLength:this._stackItem.inlineTextBuilder.maxLineLength,maxPrefixLength:t,prefixAlign:n})}openListItem({prefix:t=""}={}){if(!(this._stackItem instanceof n1))throw new Error("Can't add a list item to something that is not a list! Check the formatter.");const n=this._stackItem,r=Math.max(t.length,n.maxPrefixLength),i=Math.max(20,n.inlineTextBuilder.maxLineLength-r);this._stackItem=new ui(this.options,n,{prefix:t,maxLineLength:i,leadingLineBreaks:n.interRowLineBreaks})}closeListItem(){const t=this._popStackItem(),n=t.next,r=Math.max(t.prefix.length,n.maxPrefixLength),i=`
`+" ".repeat(r),a=(n.prefixAlign==="right"?t.prefix.padStart(r):t.prefix.padEnd(r))+si(t).replace(/\n/g,i);fo(n,a,t.leadingLineBreaks,Math.max(t.stashedLineBreaks,n.interRowLineBreaks))}closeList({trailingLineBreaks:t=2}={}){const n=this._popStackItem(),r=si(n);r&&fo(this._stackItem,r,n.leadingLineBreaks,t)}openTable(){this._stackItem=new r1(this._stackItem)}openTableRow(){if(!(this._stackItem instanceof r1))throw new Error("Can't add a table row to something that is not a table! Check the formatter.");this._stackItem=new i1(this._stackItem)}openTableCell({maxColumnWidth:t=void 0}={}){if(!(this._stackItem instanceof i1))throw new Error("Can't add a table cell to something that is not a table row! Check the formatter.");this._stackItem=new li(this.options,this._stackItem,t)}closeTableCell({colspan:t=1,rowspan:n=1}={}){const r=this._popStackItem(),i=tE(si(r),`
`);r.next.cells.push({colspan:t,rowspan:n,text:i})}closeTableRow(){const t=this._popStackItem();t.next.rows.push(t.cells)}closeTable({tableToString:t,leadingLineBreaks:n=2,trailingLineBreaks:r=2}){const i=this._popStackItem(),s=t(i.rows);s&&fo(this._stackItem,s,n,r)}toString(){return si(this._stackItem.getRoot())}}function si(e){if(!(e instanceof qn||e instanceof ui||e instanceof li))throw new Error("Only blocks, list items and table cells can be requested for text contents.");return e.inlineTextBuilder.isEmpty()?e.rawText:e.rawText+e.inlineTextBuilder.toString()}function fo(e,t,n,r){if(!(e instanceof qn||e instanceof ui||e instanceof li))throw new Error("Only blocks, list items and table cells can contain text.");const i=si(e),s=Math.max(e.stashedLineBreaks,n);e.inlineTextBuilder.clear(),i?e.rawText=i+`
`.repeat(s)+t:(e.rawText=t,e.leadingLineBreaks=s),e.stashedLineBreaks=r}function iE(e,t){return t?iE(t.transform(e),t.next):e}function pP(e={}){const t=e.selectors.filter(a=>!a.format);if(t.length)throw new Error("Following selectors have no specified format: "+t.map(a=>`\`${a.selector}\``).join(", "));const n=new jm(e.selectors.map(a=>[a.selector,a])).build($m);typeof e.encodeCharacters!="function"&&(e.encodeCharacters=xP(e.encodeCharacters));const r=new jm(e.baseElements.selectors.map((a,o)=>[a,o+1])).build($m);function i(a){return gP(a,e,r)}const s=hh(e.limits.maxDepth,bP,function(a,o){o.addInline(e.limits.ellipsis||"")});return function(a,o=void 0){return mP(a,o,e,n,i,s)}}function mP(e,t,n,r,i,s){const a=n.limits.maxInputLength;a&&e&&e.length>a&&(console.warn(`Input length ${e.length} is above allowed limit of ${a}. Truncating without ellipsis.`),e=e.substring(0,a));const o=iP(e,{decodeEntities:n.decodeEntities}),u=i(o.children),l=new hP(n,r,t);return s(u,l),l.toString()}function gP(e,t,n){const r=[];function i(a,o){o=o.slice(0,t.limits.maxChildNodes);for(const u of o){if(u.type!=="tag")continue;const l=n.pick1(u);if(l>0?r.push({selectorIndex:l,element:u}):u.children&&a(u.children),r.length>=t.limits.maxBaseElements)return}}return hh(t.limits.maxDepth,i)(e),t.baseElements.orderBy!=="occurrence"&&r.sort((a,o)=>a.selectorIndex-o.selectorIndex),t.baseElements.returnDomByDefault&&r.length===0?e:r.map(a=>a.element)}function bP(e,t,n){if(!t)return;const r=n.options;t.length>r.limits.maxChildNodes&&(t=t.slice(0,r.limits.maxChildNodes),t.push({data:r.limits.ellipsis,type:"text"}));for(const s of t)switch(s.type){case"text":{n.addInline(s.data);break}case"tag":{const a=n.picker.pick1(s),o=r.formatters[a.format];o(s,e,n,a.options||{});break}}}function xP(e){if(!e||Object.keys(e).length===0)return;const t=Object.entries(e).filter(([,s])=>s!==!1),n=new RegExp(t.map(([s])=>`(${uP([...s][0])})`).join("|"),"g"),r=t.map(([,s])=>s),i=(s,...a)=>r[a.findIndex(o=>o)];return s=>s.replace(n,i)}function yP(e,t,n,r){}function EP(e,t,n,r){n.addLiteral(r.string||"")}function TP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.addLiteral(r.string||""),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function kP(e,t,n,r){t(e.children,n)}function SP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function sE(e){const t=e.attribs&&e.attribs.length?" "+Object.entries(e.attribs).map(([n,r])=>r===""?n:`${n}=${r.replace(/"/g,"&quot;")}`).join(" "):"";return`<${e.name}${t}>`}function aE(e){return`</${e.name}>`}function wP(e,t,n,r){n.startNoWrap(),n.addLiteral(sE(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(aE(e)),n.stopNoWrap()}function CP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(sE(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(aE(e)),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function AP(e,t,n,r){n.startNoWrap(),n.addLiteral(fl(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap()}function NP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(fl(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function IP(e,t,n,r){n.addLiteral(r.prefix||""),t(e.children,n),n.addLiteral(r.suffix||"")}var OP=Object.freeze({__proto__:null,block:SP,blockHtml:NP,blockString:TP,blockTag:CP,inline:kP,inlineHtml:AP,inlineString:EP,inlineSurround:IP,inlineTag:wP,skip:yP});function Lu(e,t){return e[t]||(e[t]=[]),e[t]}function vP(e,t=0){for(;e[t];)t++;return t}function _P(e,t){for(let n=0;n<t;n++){const r=Lu(e,n);for(let i=0;i<n;i++){const s=Lu(e,i);if(r[i]||s[n]){const a=r[i];r[i]=s[n],s[n]=a}}}}function LP(e,t,n,r){for(let i=0;i<e.rowspan;i++){const s=Lu(t,n+i);for(let a=0;a<e.colspan;a++)s[r+a]=e}}function Ld(e,t){return e[t]===void 0&&(e[t]=t===0?0:1+Ld(e,t-1)),e[t]}function s1(e,t,n,r){e[t+n]=Math.max(Ld(e,t+n),Ld(e,t)+r)}function RP(e,t,n){const r=[];let i=0;const s=e.length,a=[0];for(let l=0;l<s;l++){const c=Lu(r,l),d=e[l];let h=0;for(let f=0;f<d.length;f++){const m=d[f];h=vP(c,h),LP(m,r,l,h),h+=m.colspan,m.lines=m.text.split(`
`);const b=m.lines.length;s1(a,l,m.rowspan,b+t)}i=c.length>i?c.length:i}_P(r,s>i?s:i);const o=[],u=[0];for(let l=0;l<i;l++){let c=0,d;const h=Math.min(s,r[l].length);for(;c<h;)if(d=r[l][c],d){if(!d.rendered){let f=0;for(let m=0;m<d.lines.length;m++){const b=d.lines[m],y=a[c]+m;o[y]=(o[y]||"").padEnd(u[l])+b,f=b.length>f?b.length:f}s1(u,l,d.colspan,f+n),d.rendered=!0}c+=d.rowspan}else{const f=a[c];o[f]=o[f]||"",c++}}return o.join(`
`)}function MP(e,t,n,r){n.addLineBreak()}function DP(e,t,n,r){n.addWordBreakOpportunity()}function PP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.addInline("-".repeat(r.length||n.options.wordwrap||40)),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function BP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function FP(e,t,n,r){n.openBlock({isPre:!0,leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function HP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),r.uppercase!==!1?(n.pushWordTransform(i=>i.toUpperCase()),t(e.children,n),n.popWordTransform()):t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function UP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2,reservedLineLength:2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2,blockTransform:i=>(r.trimEmptyLines!==!1?tE(i,`
`):i).split(`
`).map(s=>"> "+s).join(`
`)})}function Rd(e,t){if(!t)return e;const n=typeof t[0]=="string"?t[0]:"[",r=typeof t[1]=="string"?t[1]:"]";return n+e+r}function oE(e,t,n,r,i){const s=typeof t=="function"?t(e,r,i):e;return s[0]==="/"&&n?oP(n,"/")+s:s}function jP(e,t,n,r){const i=e.attribs||{},s=i.alt?i.alt:"",a=i.src?oE(i.src,r.pathRewrite,r.baseUrl,n.metadata,e):"",o=a?s?s+" "+Rd(a,r.linkBrackets):Rd(a,r.linkBrackets):s;n.addInline(o,{noWordTransform:!0})}function zP(e,t,n,r){function i(){if(r.ignoreHref||!e.attribs||!e.attribs.href)return"";let a=e.attribs.href.replace(/^mailto:/,"");return r.noAnchorUrl&&a[0]==="#"?"":(a=oE(a,r.pathRewrite,r.baseUrl,n.metadata,e),a)}const s=i();if(!s)t(e.children,n);else{let a="";n.pushWordTransform(u=>(u&&(a+=u),u)),t(e.children,n),n.popWordTransform(),r.hideLinkHrefIfSameAsText&&s===a||n.addInline(a?" "+Rd(s,r.linkBrackets):s,{noWordTransform:!0})}}function uE(e,t,n,r,i){const s=hs(e,["parent","name"])==="li";let a=0;const o=(e.children||[]).filter(u=>u.type!=="text"||!/^\s*$/.test(u.data)).map(function(u){if(u.name!=="li")return{node:u,prefix:""};const l=s?i().trimStart():i();return l.length>a&&(a=l.length),{node:u,prefix:l}});if(o.length){n.openList({interRowLineBreaks:1,leadingLineBreaks:s?1:r.leadingLineBreaks||2,maxPrefixLength:a,prefixAlign:"left"});for(const{node:u,prefix:l}of o)n.openListItem({prefix:l}),t([u],n),n.closeListItem();n.closeList({trailingLineBreaks:s?1:r.trailingLineBreaks||2})}}function $P(e,t,n,r){const i=r.itemPrefix||" * ";return uE(e,t,n,r,()=>i)}function VP(e,t,n,r){let i=Number(e.attribs.start||"1");const s=qP(e.attribs.type);return uE(e,t,n,r,()=>" "+s(i++)+". ")}function qP(e="1"){switch(e){case"a":return t=>Zm(t,"a");case"A":return t=>Zm(t,"A");case"i":return t=>t1(t).toLowerCase();case"I":return t=>t1(t);case"1":default:return t=>t.toString()}}function WP(e){const t=[],n=[];for(const r of e)r.startsWith(".")?t.push(r.substring(1)):r.startsWith("#")&&n.push(r.substring(1));return{classes:t,ids:n}}function YP(e,t){if(t===!0)return!0;if(!e)return!1;const{classes:n,ids:r}=WP(t),i=(e.class||"").split(" "),s=(e.id||"").split(" ");return i.some(a=>n.includes(a))||s.some(a=>r.includes(a))}function KP(e,t,n,r){return YP(e.attribs,n.options.tables)?lE(e,t,n,r):GP(e,t,n,r)}function GP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks})}function lE(e,t,n,r){n.openTable(),e.children.forEach(s),n.closeTable({tableToString:a=>{var o,u;return RP(a,(o=r.rowSpacing)!=null?o:0,(u=r.colSpacing)!=null?u:3)},leadingLineBreaks:r.leadingLineBreaks,trailingLineBreaks:r.trailingLineBreaks});function i(a){const o=+hs(a,["attribs","colspan"])||1,u=+hs(a,["attribs","rowspan"])||1;n.openTableCell({maxColumnWidth:r.maxColumnWidth}),t(a.children,n),n.closeTableCell({colspan:o,rowspan:u})}function s(a){if(a.type!=="tag")return;const o=r.uppercaseHeaderCells!==!1?u=>{n.pushWordTransform(l=>l.toUpperCase()),i(u),n.popWordTransform()}:i;switch(a.name){case"thead":case"tbody":case"tfoot":case"center":a.children.forEach(s);return;case"tr":{n.openTableRow();for(const u of a.children)if(u.type==="tag")switch(u.name){case"th":{o(u);break}case"td":{i(u);break}}n.closeTableRow();break}}}}var QP=Object.freeze({__proto__:null,anchor:zP,blockquote:UP,dataTable:lE,heading:HP,horizontalLine:PP,image:jP,lineBreak:MP,orderedList:VP,paragraph:BP,pre:FP,table:KP,unorderedList:$P,wbr:DP});const XP={baseElements:{selectors:["body"],orderBy:"selectors",returnDomByDefault:!0},decodeEntities:!0,encodeCharacters:{},formatters:{},limits:{ellipsis:"...",maxBaseElements:void 0,maxChildNodes:void 0,maxDepth:void 0,maxInputLength:1<<24},longWordSplit:{forceWrapOnLimit:!1,wrapCharacters:[]},preserveNewlines:!1,selectors:[{selector:"*",format:"inline"},{selector:"a",format:"anchor",options:{baseUrl:null,hideLinkHrefIfSameAsText:!1,ignoreHref:!1,linkBrackets:["[","]"],noAnchorUrl:!0}},{selector:"article",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"aside",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"blockquote",format:"blockquote",options:{leadingLineBreaks:2,trailingLineBreaks:2,trimEmptyLines:!0}},{selector:"br",format:"lineBreak"},{selector:"div",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"footer",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"form",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"h1",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h2",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h3",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h4",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h5",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h6",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"header",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"hr",format:"horizontalLine",options:{leadingLineBreaks:2,length:void 0,trailingLineBreaks:2}},{selector:"img",format:"image",options:{baseUrl:null,linkBrackets:["[","]"]}},{selector:"main",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"nav",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"ol",format:"orderedList",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"p",format:"paragraph",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"pre",format:"pre",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"section",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"table",format:"table",options:{colSpacing:3,leadingLineBreaks:2,maxColumnWidth:60,rowSpacing:0,trailingLineBreaks:2,uppercaseHeaderCells:!0}},{selector:"ul",format:"unorderedList",options:{itemPrefix:" * ",leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"wbr",format:"wbr"}],tables:[],whitespaceCharacters:` 	\r
\f`,wordwrap:80},JP=(e,t,n)=>[...e,...t],cE=(e,t,n)=>[...t],ZP=(e,t,n)=>e.some(r=>typeof r=="object")?JP(e,t):cE(e,t);function e7(e={}){return e=eE(XP,e,{arrayMerge:cE,customMerge:t=>t==="selectors"?ZP:void 0}),e.formatters=Object.assign({},OP,QP,e.formatters),e.selectors=nE(e.selectors,(t=>t.selector)),n7(e),pP(e)}function t7(e,t={},n=void 0){return e7(t)(e,n)}function n7(e){if(e.tags){const n=Object.entries(e.tags).map(([r,i])=>re(I({},i),{selector:r||"*"}));e.selectors.push(...n),e.selectors=nE(e.selectors,(r=>r.selector))}function t(n,r,i){const s=r.pop();for(const a of r){let o=n[a];o||(o={},n[a]=o),n=o}n[s]=i}if(e.baseElement){const n=e.baseElement;t(e,["baseElements","selectors"],Array.isArray(n)?n:[n])}e.returnDomByDefault!==void 0&&t(e,["baseElements","returnDomByDefault"],e.returnDomByDefault);for(const n of e.selectors)n.format==="anchor"&&hs(n,["options","noLinkBrackets"])&&t(n,["options","linkBrackets"],!1)}const r7=({closeFnc:e,isOpen:t,handleSubmit:n,errors:r,setErrors:i,formData:s,setFormData:a})=>{var le,ye,me;const[o,u]=B.useState(0),[l,c]=B.useState(null),[d,h]=B.useState(!1),[f,m]=B.useState([]),[b,y]=B.useState(!1),[x,E]=B.useState(!1),T=x?s.keywords:s.keywords.slice(0,18),v=Ru();B.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const C=()=>{if(o===0&&!l){i(z=>re(I({},z),{template:!0})),ie.error("Please select a template before proceeding.");return}i(z=>re(I({},z),{template:!1})),u(1)},w=()=>u(0),M=()=>e(),P=z=>{c(yl[z].name),a(S=>re(I({},S),{template:yl[z].name})),i(S=>re(I({},S),{template:!1}))},U=(z,S)=>{a(pe=>re(I({},pe),{[S]:z.target.value})),i(pe=>re(I({},pe),{[S]:!1}))},_=z=>{a(S=>re(I({},S),{tone:z})),i(S=>re(I({},S),{tone:!1}))},j=(z,S)=>{const pe=S==="keywords"?"keywordInput":"focusKeywordInput";a(Ie=>re(I({},Ie),{[pe]:z.target.value})),i(Ie=>re(I({},Ie),{[S]:!1}))},F=z=>{const S=z==="keywords"?"keywordInput":"focusKeywordInput",pe=s[S].trim();if(!pe){i(ke=>re(I({},ke),{[z]:!0})),ie.error("Please enter a keyword.");return}const Ie=new Set(s[z].map(ke=>ke.trim().toLowerCase())),O=pe.split(",").map(ke=>ke.trim()).filter(ke=>ke&&!Ie.has(ke.toLowerCase()));if(O.length===0){i(ke=>re(I({},ke),{[z]:!0})),ie.error("Please enter valid, non-duplicate keywords separated by commas.");return}if(z==="focusKeywords"&&s[z].length+O.length>3){i(ke=>re(I({},ke),{[z]:!0})),ie.error("You can only add up to 3 focus keywords.");return}a(ke=>re(I({},ke),{[z]:[...ke[z],...O],[S]:""})),i(ke=>re(I({},ke),{[z]:!1}))},K=(z,S)=>{const pe=[...s[S]];pe.splice(z,1),a(re(I({},s),{[S]:pe}))},G=(z,S)=>{z.key==="Enter"&&(z.preventDefault(),F(S))},Z=()=>Je(null,null,function*(){if(!s.topic.trim()){i(z=>re(I({},z),{topic:!0})),ie.error("Please enter a topic before generating titles.");return}if(s.focusKeywords.length<1&&s.keywords.length<1){i(z=>re(I({},z),{focusKeywords:!0,keywords:!0})),ie.error("Please add at least one focus keyword or secondary keyword.");return}h(!0);try{const z=yield v(OE(I({keywords:s.focusKeywords,focusKeywords:s.keywords,topic:s.topic,template:l},b&&{oldTitles:f}))).unwrap();m(z),y(!0),ie.success("Titles generated successfully!")}catch(z){console.error("Failed to generate titles:",z),ie.error((z==null?void 0:z.message)||"Failed to generate titles. Please try again.")}finally{h(!1)}});return B.useEffect(()=>{y(!1),m([])},[]),g.jsx(mr,{title:o===0?"Select Template":"Create Simple Blog",open:t,onCancel:M,footer:o===0?[g.jsx("button",{onClick:C,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90","aria-label":"Proceed to next step",children:"Next"},"next")]:[g.jsx("button",{onClick:w,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300","aria-label":"Go to previous step",children:"Previous"},"previous"),g.jsx("button",{onClick:n,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 ml-3","aria-label":"Submit blog",children:"Submit"},"submit")],width:800,centered:!0,children:g.jsxs("div",{className:"p-2",children:[o===0&&g.jsxs("div",{className:"p-3",children:[g.jsx(YE,{children:yl.map((z,S)=>g.jsx("div",{className:`cursor-pointer transition-all duration-200 ${l===z.name?"border-gray-300 border-2 rounded-lg":""}`,onClick:()=>P(S),children:g.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm",children:[g.jsx("div",{className:"relative",children:g.jsx("img",{src:z.imgSrc||"/placeholder.svg",alt:z.name,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-2 mt-2",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:z.name}),g.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:z.description})]})]})},S))}),r.template&&g.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please select a template."})]}),o===1&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Topic ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(Hr,{value:s.topic,onChange:z=>U(z,"topic"),placeholder:"Enter blog topic...",className:`w-full px-3 py-2 border ${r.topic?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Blog topic"}),r.topic&&g.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Topic cannot be empty."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tone ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs(fr,{value:s.tone,onChange:_,className:`w-full ${r.tone?"border-red-500":""}`,"aria-label":"Blog tone",children:[g.jsx(fr.Option,{value:"Informative",children:"Informative"}),g.jsx(fr.Option,{value:"Casual",children:"Casual"}),g.jsx(fr.Option,{value:"Professional",children:"Professional"}),g.jsx(fr.Option,{value:"Persuasive",children:"Persuasive"}),g.jsx(fr.Option,{value:"Humorous",children:"Humorous"})]}),r.tone&&g.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Tone cannot be empty."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Focus Keywords (max 3) ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Hr,{value:s.focusKeywordInput,onChange:z=>j(z,"focusKeywords"),onKeyDown:z=>G(z,"focusKeywords"),placeholder:"Enter focus keywords, separated by commas",className:`flex-1 px-3 py-2 border ${r.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Focus keywords"}),g.jsx("button",{onClick:()=>F("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center","aria-label":"Add focus keyword",children:g.jsx(vo,{size:16})})]}),g.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.focusKeywords.map((z,S)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[z,g.jsx("button",{onClick:()=>K(S,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove focus keyword ${z}`,children:g.jsx(Oo,{size:16})})]},S))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Keywords ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Hr,{value:s.keywordInput,onChange:z=>j(z,"keywords"),onKeyDown:z=>G(z,"keywords"),placeholder:"Enter secondary keywords, separated by commas",className:`flex-1 px-3 py-2 border ${r.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Secondary keywords"}),g.jsx("button",{onClick:()=>F("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center","aria-label":"Add keyword",children:g.jsx(vo,{size:16})})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[T.map((z,S)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[z,g.jsx("button",{onClick:()=>K(S,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove keyword ${z}`,children:g.jsx(Oo,{size:16})})]},`${z}-${S}`)),s.keywords.length>18&&g.jsx("span",{onClick:()=>E(z=>!z),className:"text-xs font-medium text-blue-600 self-center cursor-pointer flex items-center gap-1",children:x?g.jsx(g.Fragment,{children:"Show less"}):g.jsxs(g.Fragment,{children:["+",s.keywords.length-18," more"]})})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx(Hr,{value:s.title,onChange:z=>U(z,"title"),placeholder:"Enter blog title...",className:`w-full px-3 flex-1 py-2 border ${r.title?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Blog title"}),g.jsx("button",{onClick:Z,disabled:d,className:`px-4 py-2 bg-gradient-to-r from-[#1B6FC9] to-[#4C9FE8] text-white rounded-lg flex items-center ${d?"opacity-50 cursor-not-allowed":"hover:from-[#1B6FC9]/90 hover:to-[#4C9FE8]/90"}`,children:d?g.jsx(KE,{size:"small"}):b?g.jsxs(g.Fragment,{children:[g.jsx(GE,{size:16,className:"mr-2"}),"Generate More"]}):g.jsxs(g.Fragment,{children:[g.jsx(f1,{size:16,className:"mr-2"}),"Generate Titles"]})})]}),f.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:f.map((z,S)=>{const pe=z===s.title;return g.jsx("div",{className:"relative group",children:g.jsx("button",{type:"button",onClick:()=>{a(Ie=>re(I({},Ie),{title:z})),i(Ie=>re(I({},Ie),{title:!1}))},className:`px-3 py-1 rounded-full text-sm border transition truncate max-w-[200px] sm:max-w-[300px] ${pe?"bg-[#1B6FC9] text-white border-[#1B6FC9]":"bg-gray-100 text-gray-700 border-gray-300 opacity-60 hover:opacity-100 hover:bg-gray-200"}`,"aria-label":`Select title: ${z}`,children:z})},S)})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Choose length of Blog ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"range",min:"500",max:"5000",value:(le=s.userDefinedLength)!=null?le:1e3,onChange:z=>U(z,"userDefinedLength"),placeholder:"Enter desired word count...",className:"w-full h-1 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#1B6FC9]",style:{background:`linear-gradient(to right, #1B6FC9 ${(((ye=s==null?void 0:s.userDefinedLength)!=null?ye:1e3)-500)/45}%, #e5e7eb 0%)`},"aria-label":"Desired word count"}),g.jsxs("span",{className:"mt-2 text-sm text-gray-600 block",children:[(me=s==null?void 0:s.userDefinedLength)!=null?me:1e3," words"]})]})]})]})})},X7=()=>{var qt,Fn;const{id:e}=vE(),t=Ru(),n=pi(Ee=>Ee.blog.selectedBlog),[r,i]=B.useState("Normal"),[s,a]=B.useState(!0),[o,u]=B.useState([]),[l,c]=B.useState(""),[d,h]=B.useState(""),[f,m]=B.useState([]),[b,y]=B.useState(!1),[x,E]=B.useState(null),[T,v]=B.useState(!1),[C,w]=B.useState(null),[M,P]=B.useState(!1),[U,_]=B.useState({category:"",includeTableOfContents:!1}),[j,F]=B.useState(!e),K=pi(Ee=>Ee.auth.user),G=(Fn=K==null?void 0:K.plan)!=null?Fn:(qt=K==null?void 0:K.subscription)==null?void 0:qt.plan,Z=Md(),ye=l1().pathname===`/blog-editor/${n==null?void 0:n._id}`,[me,z]=B.useState(!1),[S,pe]=B.useState({title:"",topic:"",tone:"Informative",focusKeywords:[],keywords:[],userDefinedLength:1200,focusKeywordInput:"",keywordInput:"",template:""}),[Ie,O]=B.useState({title:!1,topic:!1,tone:!1,focusKeywords:!1,keywords:!1,userDefinedLength:!1,template:!1});B.useEffect(()=>{e&&(a(!0),t(Sh(e)).unwrap().catch(()=>ie.error("Failed to load blog.")).finally(()=>a(!1)))},[e,t]),B.useEffect(()=>{n&&(u(n.keywords||[]),h(n.title||""),c(n.content?t7(n.content,{wordwrap:!1,selectors:[{selector:"a",options:{baseUrl:""}},{selector:"img",format:"skip"}]}):""),w(n.wordpress||null),_({category:n.category||"",includeTableOfContents:n.includeTableOfContents||!1,title:n.title||""}))},[n]);const ke=(Ee,Me)=>{if(typeof Ee!="string"||typeof Me!="string"){ie.error("Invalid suggestion format.");return}const ut=new RegExp(Ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");c(dt=>dt.replace(ut,Me)),m(dt=>dt.filter(it=>it.original!==Ee))},at=Ee=>Je(null,null,function*(){var Me,ut;if(P(!0),!d){ie.error("Blog title is missing."),P(!1);return}if(!l.trim()){ie.error("Blog content is empty."),P(!1);return}if(!Ee.categories){ie.error("Please select a category."),P(!1);return}try{const dt={blogId:n._id,title:d,content:l,categories:Ee.categories,includeTableOfContents:Ee.includeTableOfContents},it=C?yield Ch.put("/wordpress",dt):yield Ch.post("/wordpress",dt);w(it==null?void 0:it.data),ie.success(`Blog ${C?"updated":"posted"} successfully!`)}catch(dt){ie.error(((ut=(Me=dt.response)==null?void 0:Me.data)==null?void 0:ut.message)||`Failed to ${C?"update":"post to"} WordPress.`)}finally{P(!1)}}),Se=Ee=>Ee.trim().split(/\s+/).filter(Me=>Me.length>0).length,Tt=()=>Je(null,null,function*(){if(G==="free"||G==="basic"){showUpgradePopup();return}if(!d.trim()){ie.error("Blog title is required.");return}v(!0);try{const Ee=yield t(wh({id:n._id,title:d,content:l,published:n==null?void 0:n.published,focusKeywords:n==null?void 0:n.focusKeywords,keywords:o})).unwrap();return ie.success("Blog updated successfully"),a(!0),setTimeout(()=>{t(Sh(e)).unwrap().finally(()=>a(!1))},2e3),Ee}catch(Ee){console.error("Error updating the blog:",Ee),ie.error("Failed to save blog.")}finally{v(!1)}}),gt=()=>Je(null,null,function*(){v(!0);try{yield t(wh({id:n._id,title:d,content:l,published:n==null?void 0:n.published,focusKeywords:n==null?void 0:n.focusKeywords,keywords:o})).unwrap();const Ee=yield c1(n._id);Ee.data?(E(Ee.data),y(!0),ie.success("Review the suggested content.")):ie.error("No content received from retry.")}catch(Ee){console.error("Error updating the blog:",Ee),ie.error("Failed to save blog.")}finally{v(!1)}}),{Title:St}=_E,Mt=()=>{x&&(c(x),ie.success("Content updated successfully!")),y(!1),E(null)},je=()=>{y(!1),E(null),ie.info("Changes discarded.")},ot={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},gn=()=>{var Me,ut,dt;(!((Me=S.title)!=null&&Me.trim())||!((ut=S.topic)!=null&&ut.trim())||!((dt=S.tone)!=null&&dt.trim())||!S.template||!S.userDefinedLength||S.userDefinedLength<=0||!S.focusKeywords||S.focusKeywords.length===0||!S.keywords||S.keywords.length===0)&&!e&&Z("/blogs"),F(!1)},Cr=()=>Je(null,null,function*(){var ut,dt,it;const Ee={title:(ut=S.title)==null?void 0:ut.trim(),topic:(dt=S.topic)==null?void 0:dt.trim(),tone:(it=S.tone)==null?void 0:it.trim(),focusKeywords:S.focusKeywords,keywords:S.keywords,userDefinedLength:Number(S.userDefinedLength),template:S.template},Me={};if(Ee.title||(Me.title=!0),Ee.topic||(Me.topic=!0),Ee.tone||(Me.tone=!0),Ee.template||(Me.template=!0),(!Ee.userDefinedLength||Ee.userDefinedLength<=0)&&(Me.userDefinedLength=!0),(!Ee.focusKeywords||Ee.focusKeywords.length===0)&&(Me.focusKeywords=!0),(!Ee.keywords||Ee.keywords.length===0)&&(Me.keywords=!0),Object.keys(Me).length>0){O(D=>I(I({},D),Me)),ie.error("Please fill all required fields correctly.");return}try{const D=yield t(RE({blogData:Ee,user:K})).unwrap();F(!1),Z(`/blog-editor/${D._id}`)}catch(D){console.error("Failed to create blog:",D),ie.error((D==null?void 0:D.message)||"Failed to create blog")}}),Ar=Ee=>{const Me=Ee.target.value;Se(Me)<=60?(h(Me),_(ut=>re(I({},ut),{title:Me}))):ie.error("Title exceeds 60 words.")},bn=()=>{if(!l.trim()){ie.error("Please write some content to preview.");return}z(!0)},Dt=()=>z(!1),un=()=>l.trim()?`<div class="prose prose-lg"><h1>${d||topic||"Your Blog Title"}</h1>${l}</div>`:`<h1>${d||"Preview Title"}</h1><p>No content available for preview.</p>`;return g.jsxs(g.Fragment,{children:[g.jsx(LE,{children:g.jsx("title",{children:"Blog Editor | GenWrite"})}),g.jsxs("div",{className:`h-screen flex flex-col ${j?"blur-sm":""}`,children:[g.jsxs(mr,{open:b,centered:!0,footer:[g.jsx(Bt,{onClick:je,style:{background:"#f5f5f5",color:"#595959"},children:"Reject"},"reject"),g.jsx(Bt,{type:"primary",onClick:Mt,children:"Accept"},"accept")],onCancel:je,width:700,className:"rounded-lg",children:[g.jsx(St,{level:3,style:{marginBottom:"16px"},children:"Suggested Content"}),g.jsx("div",{style:{padding:"16px",background:"#f5f5f5",borderRadius:"4px",marginBottom:"16px"},children:g.jsx(To,{remarkPlugins:[ko],rehypePlugins:[Co],className:"prose",components:{a:({href:Ee,children:Me})=>g.jsx("a",{href:Ee,target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff"},children:Me}),strong:({children:Ee})=>g.jsx("strong",{style:{fontWeight:"bold"},children:Ee})},children:x})})]}),g.jsx(mr,{title:"Blog Preview",open:me,onCancel:Dt,footer:[g.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-500 focus:outline-none focus:bg-gray-500","aria-label":"Close preview",children:"Close"},"close")],width:800,centered:!0,children:g.jsx("div",{className:"prose prose-lg max-w-none p-4",dangerouslySetInnerHTML:{__html:un()}})}),g.jsxs("div",{className:"flex mt-5 pb-5",children:[g.jsxs("div",{className:"flex-1 flex flex-col",children:[g.jsxs("header",{className:"bg-white shadow-lg border rounded-tl-lg border-gray-200 p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:g.jsx(ho,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Blog":"Create New Blog"}),g.jsx("p",{className:"text-gray-600 text-sm",children:"Write and optimize your content"})]})]}),g.jsxs("div",{className:"flex gap-2",children:[ye&&g.jsxs("button",{onClick:bn,className:"px-4 py-2 bg-gradient-to-r from-[#1B6FC9] to-[#4C9FE8] text-white rounded-lg hover:from-[#1B6FC9]/90 hover:to-[#4C9FE8]/90 flex items-center","aria-label":"Preview blog",children:[g.jsx(Dd,{size:16,className:"mr-2"}),"Preview"]}),g.jsx("button",{onClick:Tt,className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all duration-300 ${T||!d.trim()||!l.trim()||Se(d)>60?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-105"}`,disabled:T||!d.trim()||!l.trim()||Se(d)>60,"aria-label":"Save blog",children:T?g.jsxs(g.Fragment,{children:[g.jsx(QE,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):g.jsxs(g.Fragment,{children:[g.jsx(CT,{className:"w-4 h-4"}),"Save Blog"]})})]})]}),ye&&g.jsxs("div",{className:"mt-4",children:[g.jsx("div",{className:"flex gap-2 flex-col sm:flex-row",children:g.jsx("input",{type:"text",value:d,onChange:Ar,placeholder:"Enter your blog title...",className:`flex-1 text-2xl sm:text-3xl font-bold text-gray-900 placeholder-gray-400 border-none outline-none resize-none ${Se(d)>60?"text-red-600":""}`,"aria-label":"Blog title"})}),g.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[Se(d),"/60 words (optimal for SEO)",Se(d)>60&&g.jsx("span",{className:"text-red-600 ml-2",children:"Title exceeds 60 words"})]})]})]}),g.jsx(Io,{children:g.jsx(Ge.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:ot,transition:{duration:.3},className:"flex-grow",children:s?g.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-120px)]",children:g.jsx(XE,{className:"animate-spin h-8 w-8 text-blue-600"})}):g.jsx(GM,{keywords:o,setKeywords:u,blog:n,activeTab:r,setActiveTab:i,proofreadingResults:f,handleReplace:ke,content:l,setContent:c,title:d,setTitle:h,isSavingKeyword:T})},r)})]}),g.jsx(JM,{blog:n,keywords:o,setKeywords:u,onPost:at,activeTab:r,handleReplace:ke,proofreadingResults:f,setProofreadingResults:m,handleSave:gt,posted:C,isPosting:M,formData:U,title:d,editorContent:l})]})]}),g.jsx(r7,{closeFnc:gn,isOpen:j,handleSubmit:Cr,errors:Ie,setErrors:O,formData:S,setFormData:pe})]})};export{X7 as default};
