import{b as _}from"./chunk-tiptap-Cj04N-E3.js";import{F as $,Q as q}from"./index-dLLMGBbj.js";var L,H=-1,v=function(t){addEventListener("pageshow",function(e){e.persisted&&(H=e.timeStamp,t(e))},!0)},A=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},T=function(){var t=A();return t&&t.activationStart||0},d=function(t,e){var n=A(),i="navigate";return H>=0?i="back-forward-cache":n&&(document.prerendering||T()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},m=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){e(r.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch{}},l=function(t,e,n,i){var r,o;return function(u){e.value>=0&&(u||i)&&((o=e.value-(r||0))||r===void 0)&&(r=e.value,e.delta=o,e.rating=function(c,a){return c>a[1]?"poor":c>a[0]?"needs-improvement":"good"}(e.value,n),t(e))}},I=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},E=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},P=function(t){var e=!1;return function(){e||(t(),e=!0)}},p=-1,w=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},y=function(t){document.visibilityState==="hidden"&&p>-1&&(p=t.type==="visibilitychange"?t.timeStamp:0,z())},M=function(){addEventListener("visibilitychange",y,!0),addEventListener("prerenderingchange",y,!0)},z=function(){removeEventListener("visibilitychange",y,!0),removeEventListener("prerenderingchange",y,!0)},O=function(){return p<0&&(p=w(),M(),v(function(){setTimeout(function(){p=w(),M()},0)})),{get firstHiddenTime(){return p}}},b=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},k=[1800,3e3],D=function(t,e){e=e||{},b(function(){var n,i=O(),r=d("FCP"),o=m("paint",function(u){u.forEach(function(c){c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<i.firstHiddenTime&&(r.value=Math.max(c.startTime-T(),0),r.entries.push(c),n(!0)))})});o&&(n=l(t,r,k,e.reportAllChanges),v(function(u){r=d("FCP"),n=l(t,r,k,e.reportAllChanges),I(function(){r.value=performance.now()-u.timeStamp,n(!0)})}))})},F=[.1,.25],J=function(t,e){e=e||{},D(P(function(){var n,i=d("CLS",0),r=0,o=[],u=function(a){a.forEach(function(s){if(!s.hadRecentInput){var V=o[0],W=o[o.length-1];r&&s.startTime-W.startTime<1e3&&s.startTime-V.startTime<5e3?(r+=s.value,o.push(s)):(r=s.value,o=[s])}}),r>i.value&&(i.value=r,i.entries=o,n())},c=m("layout-shift",u);c&&(n=l(t,i,F,e.reportAllChanges),E(function(){u(c.takeRecords()),n(!0)}),v(function(){r=0,i=d("CLS",0),n=l(t,i,F,e.reportAllChanges),I(function(){return n()})}),setTimeout(n,0))}))},N=0,C=1/0,h=0,K=function(t){t.forEach(function(e){e.interactionId&&(C=Math.min(C,e.interactionId),h=Math.max(h,e.interactionId),N=h?(h-C)/7+1:0)})},j=function(){return L?N:performance.interactionCount||0},U=function(){"interactionCount"in performance||L||(L=m("event",K,{type:"event",buffered:!0,durationThreshold:0}))},f=[],g=new Map,G=0,X=function(){var t=Math.min(f.length-1,Math.floor((j()-G)/50));return f[t]},Y=[],Z=function(t){if(Y.forEach(function(r){return r(t)}),t.interactionId||t.entryType==="first-input"){var e=f[f.length-1],n=g.get(t.interactionId);if(n||f.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var i={id:t.interactionId,latency:t.duration,entries:[t]};g.set(i.id,i),f.push(i)}f.sort(function(r,o){return o.latency-r.latency}),f.length>10&&f.splice(10).forEach(function(r){return g.delete(r.id)})}}},Q=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=P(t),document.visibilityState==="hidden"?t():(n=e(t),E(t)),n},x=[200,500],tt=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},b(function(){var n;U();var i,r=d("INP"),o=function(c){Q(function(){c.forEach(Z);var a=X();a&&a.latency!==r.value&&(r.value=a.latency,r.entries=a.entries,i())})},u=m("event",o,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});i=l(t,r,x,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),E(function(){o(u.takeRecords()),i(!0)}),v(function(){G=j(),f.length=0,g.clear(),r=d("INP"),i=l(t,r,x,e.reportAllChanges)}))}))},R=[2500,4e3],S={},et=function(t,e){e=e||{},b(function(){var n,i=O(),r=d("LCP"),o=function(a){e.reportAllChanges||(a=a.slice(-1)),a.forEach(function(s){s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-T(),0),r.entries=[s],n())})},u=m("largest-contentful-paint",o);if(u){n=l(t,r,R,e.reportAllChanges);var c=P(function(){S[r.id]||(o(u.takeRecords()),u.disconnect(),S[r.id]=!0,n(!0))});["keydown","click"].forEach(function(a){addEventListener(a,function(){return Q(c)},{once:!0,capture:!0})}),E(c),v(function(a){r=d("LCP"),n=l(t,r,R,e.reportAllChanges),I(function(){r.value=performance.now()-a.timeStamp,S[r.id]=!0,n(!0)})})}})},B=[800,1800],nt=function t(e){document.prerendering?b(function(){return t(e)}):document.readyState!=="complete"?addEventListener("load",function(){return t(e)},!0):setTimeout(e,0)},rt=function(t,e){e=e||{};var n=d("TTFB"),i=l(t,n,B,e.reportAllChanges);nt(function(){var r=A();r&&(n.value=Math.max(r.responseStart-T(),0),n.entries=[r],i(!0),v(function(){n=d("TTFB",0),(i=l(t,n,B,e.reportAllChanges))(!0)}))})};function it(t){const e=({name:n,delta:i,id:r})=>{q.event(n,{category:"Web Vitals",label:`${t}:${r}`,value:Math.round(n==="CLS"?i*1e3:i),nonInteraction:!0})};J(e),tt(e),et(e),D(e),rt(e)}function ut(){const t=$();_.useEffect(()=>{const e=t.pathname+t.search;q.send({hitType:"pageview",page:e}),it(e)},[t])}export{ut as u};
