var re=Object.defineProperty,ae=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var U=(d,x,c)=>x in d?re(d,x,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[x]=c,l=(d,x)=>{for(var c in x||(x={}))le.call(x,c)&&U(d,c,x[c]);if(Y)for(var c of Y(x))ne.call(x,c)&&U(d,c,x[c]);return d},n=(d,x)=>ae(d,oe(x));var W=(d,x,c)=>new Promise((j,g)=>{var w=r=>{try{y(c.next(r))}catch(h){g(h)}},v=r=>{try{y(c.throw(r))}catch(h){g(h)}},y=r=>r.done?j(r.value):Promise.resolve(r.value).then(w,v);y((c=c.apply(d,x)).next())});import{r as k,u as ie,b as de,M as ce,ed as me,a as ue,z as xe,Q as he,j as e,P as pe,W as C,ee as be}from"./index-BOjYwTQ9.js";import{c as ge}from"./pricingConfig-DUMy0XHk.js";import{T as fe}from"./TemplateSelection-DmW1_n-E.js";import{I,L as ye,b as ke}from"./forms.schemas-DlGGW_4w.js";import{P as F}from"./plus-CgXo6abL.js";import{X as R}from"./x-BzZJlCKO.js";import"./index-DYFbVrRz.js";import"./gapSize-U1swVQyS.js";import"./index-D46neESn.js";import"./Input-C2DAgzTE.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-BVWKvrgr.js";import"./search-DFVePN2M.js";import"./index-Bzifz0ya.js";import"./crown-D7h92co4.js";import"./index-BHYdUTwY.js";const $e=({type:d="quick",closeFnc:x})=>{var $,q,M;const[c,j]=k.useState(0),[g,w]=k.useState([]),v={topic:"",exactTitle:!1,performKeywordResearch:!1,addImages:!1,imageSource:I.NONE,template:null,templateIds:[],keywords:[],focusKeywords:[],otherLinkInput:"",focusKeywordInput:"",keywordInput:"",languageToWrite:"English",costCutter:!0},y={topic:"",template:"",focusKeywords:"",keywords:"",otherLinks:""},[r,h]=k.useState(v),[p,m]=k.useState(y),z=ie(),P=de(),{handlePopup:B}=ce(),{showLoading:G,hideLoading:O}=me(),b=ue(xe),Q=he();($=b==null?void 0:b.subscription)==null||$.plan;const N=k.useMemo(()=>{const s=[];r.performKeywordResearch&&s.push("keywordResearch");let t=ge({wordCount:1500,features:s,aiModel:"gemini",includeImages:r.addImages,imageSource:r.imageSource,numberOfImages:0});return r.costCutter&&(t=Math.round(t*.75)),t},[r.performKeywordResearch,r.addImages,r.imageSource,r.costCutter]),V=()=>{if(c===0){if(!r.template){m(s=>n(l({},s),{template:"Please select a template."}));return}m(s=>n(l({},s),{template:""})),j(1)}},K=()=>{h(v),w([]),m(y),x()},L=s=>{const{name:t,value:i}=s.target;h(o=>n(l({},o),{[t]:i})),m(o=>n(l({},o),{[t]:""}))},_=()=>{var o,u;const s={topic:r.topic.trim()?"":"Please enter a topic.",focusKeywords:!r.performKeywordResearch&&r.focusKeywords.length===0?"Please add at least one focus keyword.":"",keywords:!r.performKeywordResearch&&r.keywords.length===0?"Please add at least one secondary keyword.":"",otherLinks:g.length===0&&d==="yt"?"Please add at least one valid link.":""};if(m(s),Object.values(s).some(a=>a)){C.error("Please fill all required fields correctly.");return}if(g.length>3){m(a=>n(l({},a),{otherLinks:"You can only add up to 3 links."})),C.error("You can only add up to 3 links.");return}const t=(((o=b==null?void 0:b.credits)==null?void 0:o.base)||0)+(((u=b==null?void 0:b.credits)==null?void 0:u.extra)||0);if(t<N){B({title:"Insufficient Credits",description:e.jsxs("div",{children:[e.jsx("p",{children:"You don't have enough credits to generate this blog."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Required:"})," ",N," credits"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",t," credits"]})]}),okText:"Buy Credits",onConfirm:()=>{P("/pricing"),K()}});return}const i=n(l({},r),{type:d,otherLinks:g,imageSource:r.addImages?r.imageSource:I.NONE});B({title:`${d==="quick"?"Quick":"Youtube"} Blog Generation`,description:e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[d==="quick"?"Quick":"Youtube"," blog generation will cost you"," ",e.jsxs("b",{children:[N," credits"]}),"."]}),e.jsx("br",{}),e.jsx("span",{children:"Are you sure you want to proceed?"})]}),onConfirm:()=>W(null,null,function*(){const a=G(`Creating ${d==="quick"?"quick":"YouTube"} blog...`);try{const f=ke(i);yield z(be({blogData:f,user:b,navigate:P,type:d,queryClient:Q})).unwrap(),K()}catch(f){C.error((f==null?void 0:f.message)||"Failed to create blog. Please try again.")}finally{O(a)}})})},H=k.useCallback(s=>{h(t=>{var i,o;return n(l({},t),{template:(o=(i=s==null?void 0:s[0])==null?void 0:i.name)!=null?o:null,templateIds:s==null?void 0:s.map(u=>u.id)})}),m(t=>n(l({},t),{template:""}))},[]),E=(s,t)=>{const i=t==="keywords"?"keywordInput":"focusKeywordInput";h(o=>n(l({},o),{[i]:s.target.value})),m(o=>n(l({},o),{[t]:""}))},S=s=>{const t=s==="keywords"?"keywordInput":"focusKeywordInput",i=r[t].trim();if(!i){m(a=>n(l({},a),{[s]:"Please enter a keyword."}));return}const o=new Set(r[s].map(a=>a.trim().toLowerCase())),u=i.split(",").map(a=>a.trim()).filter(a=>a!==""&&!o.has(a.toLowerCase()));if(u.length===0){m(a=>n(l({},a),{[s]:"Please enter valid, non-duplicate keywords separated by commas."}));return}if(s==="focusKeywords"&&r[s].length+u.length>3){m(a=>n(l({},a),{[s]:"You can only add up to 3 focus keywords."}));return}h(a=>n(l({},a),{[s]:[...a[s],...u],[t]:""})),m(a=>n(l({},a),{[s]:""}))},A=(s,t)=>{const i=[...r[t]];i.splice(s,1),h(n(l({},r),{[t]:i})),m(o=>n(l({},o),{[t]:""}))},T=(s,t)=>{s.key==="Enter"&&(s.preventDefault(),S(t))},X=s=>{try{const t=new URL(s),i=t.hostname.toLowerCase().replace("www.","");if(!i.includes("youtube.com")&&!i.includes("youtu.be"))return null;let o=null;if(i==="youtube.com"||i==="m.youtube.com"){const u=t.pathname;u.startsWith("/watch")?o=t.searchParams.get("v"):u.startsWith("/embed/")?o=u.split("/embed/")[1].split("/")[0].split("?")[0]:u.startsWith("/v/")?o=u.split("/v/")[1].split("/")[0].split("?")[0]:u.startsWith("/shorts/")&&(o=u.split("/shorts/")[1].split("/")[0].split("?")[0])}else i==="youtu.be"&&(o=t.pathname.slice(1).split("/")[0].split("?")[0]);return o}catch(t){return null}},Z=s=>{switch(d){case"yt":const t=X(s);if(!t||!/^[a-zA-Z0-9_-]{11}$/.test(t))return{valid:!1,error:"Please enter a valid YouTube video link with a proper video ID."};break;default:try{new URL(s)}catch(o){return{valid:!1,error:"Please enter a valid URL (e.g., https://example.com)."}}}return{valid:!0}},D=()=>{var u;const s=(u=r.otherLinkInput)==null?void 0:u.trim(),t=3;if(!s){m(a=>n(l({},a),{otherLinks:`Please enter valid ${d==="yt"?"youtube":"reference"} links.`}));return}const i=s.split(",").map(a=>a.trim()).filter(a=>a!==""),o=[];for(let a of i){if(g.includes(a)||o.includes(a))continue;const f=Z(a);if(!f.valid){m(te=>n(l({},te),{otherLinks:f.error})),C.error(f.error);return}o.push(a)}if(o.length===0){m(a=>n(l({},a),{otherLinks:"No valid, unique links found."}));return}if(g.length+o.length>t){m(a=>n(l({},a),{otherLinks:`You can only add up to ${t} links.`}));return}w([...g,...o]),h(a=>n(l({},a),{otherLinkInput:""})),m(a=>n(l({},a),{otherLinks:""}))},J=s=>{s.key==="Enter"&&(s.preventDefault(),D())},ee=s=>{const t=[...g];t.splice(s,1),w(t),m(i=>n(l({},i),{otherLinks:""}))},se=[{id:"stock",label:"Stock Images",value:I.STOCK},{id:"ai",label:"AI-Generated Images",value:I.AI}];return e.jsxs(e.Fragment,{children:[" ",e.jsx(pe,{title:`Generate ${d==="quick"?"Quick":"Youtube"} Blog`,open:!0,onCancel:K,footer:c===0?[e.jsx("button",{onClick:V,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Next step",children:"Next"},"next")]:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[N," credits"]}),r.costCutter&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"(-25% off)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>j(0),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors","aria-label":"Previous step",children:"Previous"},"previous"),e.jsx("button",{onClick:_,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors ml-3","aria-label":"Submit quick blog",children:"Submit"},"submit")]})]},"footer-content")],width:800,centered:!0,transitionName:"",maskTransitionName:"",destroyOnHidden:!0,children:e.jsxs("div",{className:"p-2 space-y-2 !max-h-[75vh] overflow-y-auto custom-scroll",children:[c===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:` overflow-clip p-4 pt-0 ${p.template?"border-2 border-red-500 rounded-lg p-2":""}`,children:e.jsx(fe,{userSubscriptionPlan:(M=(q=b==null?void 0:b.subscription)==null?void 0:q.plan)!=null?M:"free",onClick:H,preSelectedIds:r.templateIds})}),p.template&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:p.template})]}),c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Topic ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"topic",value:r.topic,onChange:L,className:`w-full px-3 py-2 border ${p.topic?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter the blog topic","aria-label":"Blog topic"}),p.topic&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.topic})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Use Topic name as Blog Title"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.exactTitle,onChange:s=>h(t=>n(l({},t),{exactTitle:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Language ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"languageToWrite",value:r.languageToWrite,onChange:L,className:"w-full px-3 py-2 border border-gray-200 rounded-md text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#1B6FC9] focus:border-transparent","aria-label":"Select language",children:ye.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Perform Keyword Research"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.performKeywordResearch,onChange:s=>h(t=>n(l({},t),{performKeywordResearch:s.target.checked,focusKeywords:s.target.checked?[]:t.focusKeywords,keywords:s.target.checked?[]:t.keywords,focusKeywordInput:"",keywordInput:""})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),!r.performKeywordResearch&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Focus Keywords (Max 3) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.focusKeywordInput,onChange:s=>E(s,"focusKeywords"),onKeyDown:s=>T(s,"focusKeywords"),className:`flex-1 px-3 py-2 border ${p.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter focus keywords, separated by commas","aria-label":"Focus keywords"}),e.jsx("button",{onClick:()=>S("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add focus keywords",children:e.jsx(F,{size:16})})]}),p.focusKeywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.focusKeywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.focusKeywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>A(t,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(R,{size:16})})]},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keywords ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.keywordInput,onChange:s=>E(s,"keywords"),onKeyDown:s=>T(s,"keywords"),className:`flex-1 px-3 py-2 border ${p.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter secondary keywords, separated by commas","aria-label":"Secondary keywords"}),e.jsx("button",{onClick:()=>S("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add secondary keywords",children:e.jsx(F,{size:16})})]}),p.keywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.keywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.keywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>A(t,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(R,{size:16})})]},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Add Images"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.addImages,onChange:s=>h(t=>n(l({},t),{addImages:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),r.addImages&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Image Source"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mx-auto w-full mb-2",children:se.map(s=>e.jsxs("label",{htmlFor:s.id,className:`relative border rounded-lg px-4 py-3 flex items-center gap-3 justify-center cursor-pointer transition-all duration-150
                      ${r.imageSource===s.value?"border-blue-600 bg-blue-50":"border-gray-300"} hover:shadow-sm w-full`,children:[e.jsx("input",{type:"radio",id:s.id,name:"imageSource",value:s.value,checked:r.imageSource===s.value,onChange:L,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:s.label})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d==="yt"?"YouTube Video Links ":"Reference Links (e.g., articles, websites)"," ","(Max 3 links) ",d==="yt"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:r.otherLinkInput,onChange:s=>h(t=>n(l({},t),{otherLinkInput:s.target.value})),onKeyDown:s=>J(s),className:"flex-1 px-3 py-2 border rounded-md text-sm bg-gray-50",placeholder:"Enter full URLs (e.g., https://example.com), separated by commas","aria-label":"Reference/Video links"}),e.jsx("button",{onClick:()=>D(),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add reference/video links",children:e.jsx(F,{size:16})})]}),p.otherLinks&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.otherLinks}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>ee(t),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(R,{size:16})})]},t))})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900 mb-1",children:"üí∞ Cost Cutter"}),e.jsx("p",{className:"text-xs text-green-700",children:"Use AI Flash model for 25% savings"})]}),e.jsxs("label",{className:"relative inline-block w-14 h-7 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.costCutter,onChange:s=>h(t=>n(l({},t),{costCutter:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-300 rounded-full transition-colors duration-200 peer-checked:bg-green-500"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-6 w-6 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-7 shadow-md"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-5 shadow-sm",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900 mb-3 flex items-center gap-2",children:"üìù Blog Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Word Count"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"~1500 words"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"AI Model"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Gemini Flash"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Images"}),e.jsx("span",{className:"font-semibold text-blue-900",children:r.addImages?r.imageSource.includes("ai")?"AI Generated":"Stock Images":"None"})]})]})]})]})]})})]})};export{$e as default};
