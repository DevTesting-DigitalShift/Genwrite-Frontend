var ee=Object.defineProperty,se=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var W=(c,x,m)=>x in c?ee(c,x,{enumerable:!0,configurable:!0,writable:!0,value:m}):c[x]=m,o=(c,x)=>{for(var m in x||(x={}))re.call(x,m)&&W(c,m,x[m]);if(T)for(var m of T(x))ae.call(x,m)&&W(c,m,x[m]);return c},n=(c,x)=>se(c,te(x));import{r as w,u as le,b as oe,K as ne,a as ie,y as de,P as ce,j as e,M as ue,W as C,d_ as me}from"./index-BHjGFtI-.js";import{c as Y}from"./pricingConfig-CSs2zJwf.js";import{T as xe}from"./TemplateSelection-CCb-BkIv.js";import{P as I}from"./plus-BIUHHFxC.js";import{X as K}from"./x-E1e0XlYW.js";import"./index-DIi0wK2X.js";import"./gapSize-U1swVQyS.js";import"./index-D1a6zCDy.js";import"./Input-DW8nTHub.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-CflMzj5W.js";import"./search-CkWh2g9Y.js";import"./index-HYv308-F.js";import"./crown-qvg8mXx1.js";import"./index-JcZpNvJJ.js";const Re=({type:c="quick",closeFnc:x})=>{var A,$,M;const[m,L]=w.useState(0),[g,k]=w.useState([]),S={topic:"",performKeywordResearch:!1,addImages:!1,imageSource:"unsplash",template:null,templateIds:[],keywords:[],focusKeywords:[],otherLinkInput:"",focusKeywordInput:"",keywordInput:"",languageToWrite:"English",costCutter:!0},R={topic:"",template:"",focusKeywords:"",keywords:"",otherLinks:""},[r,b]=w.useState(S),[h,d]=w.useState(R),q=le(),P=oe(),{handlePopup:z}=ne(),p=ie(de),U=ce();(A=p==null?void 0:p.subscription)==null||A.plan;const G=()=>{if(m===0){if(!r.template){d(s=>n(o({},s),{template:"Please select a template."}));return}d(s=>n(o({},s),{template:""})),L(1)}},j=()=>{b(S),k([]),d(R),x()},v=s=>{const{name:t,value:i}=s.target;b(l=>n(o({},l),{[t]:i})),d(l=>n(o({},l),{[t]:""}))},O=()=>{var a,f;const s={topic:r.topic.trim()?"":"Please enter a topic.",focusKeywords:!r.performKeywordResearch&&r.focusKeywords.length===0?"Please add at least one focus keyword.":"",keywords:!r.performKeywordResearch&&r.keywords.length===0?"Please add at least one secondary keyword.":"",otherLinks:g.length===0&&c==="yt"?"Please add at least one valid link.":""};if(d(s),Object.values(s).some(y=>y)){C.error("Please fill all required fields correctly.");return}if(g.length>3){d(y=>n(o({},y),{otherLinks:"You can only add up to 3 links."})),C.error("You can only add up to 3 links.");return}const t=[];r.performKeywordResearch&&t.push("keywordResearch");let i=Y({wordCount:1500,features:t,aiModel:"gemini",includeImages:r.addImages,imageSource:r.imageSource==="ai-generated"?"ai":"stock",numberOfImages:0});r.costCutter&&(i=Math.round(i*.75));const l=(((a=p==null?void 0:p.credits)==null?void 0:a.base)||0)+(((f=p==null?void 0:p.credits)==null?void 0:f.extra)||0);if(l<i){z({title:"Insufficient Credits",description:e.jsxs("div",{children:[e.jsx("p",{children:"You don't have enough credits to generate this blog."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Required:"})," ",i," credits"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",l," credits"]})]}),okText:"Buy Credits",onConfirm:()=>{P("/pricing"),j()}});return}const u=n(o({},r),{type:c,otherLinks:g});q(me({blogData:u,user:p,navigate:P,queryClient:U,type:c})),j()},Q=w.useCallback(s=>{b(t=>{var i,l;return n(o({},t),{template:(l=(i=s==null?void 0:s[0])==null?void 0:i.name)!=null?l:null,templateIds:s==null?void 0:s.map(u=>u.id)})}),d(t=>n(o({},t),{template:""}))},[]),F=(s,t)=>{const i=t==="keywords"?"keywordInput":"focusKeywordInput";b(l=>n(o({},l),{[i]:s.target.value})),d(l=>n(o({},l),{[t]:""}))},N=s=>{const t=s==="keywords"?"keywordInput":"focusKeywordInput",i=r[t].trim();if(!i){d(a=>n(o({},a),{[s]:"Please enter a keyword."}));return}const l=new Set(r[s].map(a=>a.trim().toLowerCase())),u=i.split(",").map(a=>a.trim()).filter(a=>a!==""&&!l.has(a.toLowerCase()));if(u.length===0){d(a=>n(o({},a),{[s]:"Please enter valid, non-duplicate keywords separated by commas."}));return}if(s==="focusKeywords"&&r[s].length+u.length>3){d(a=>n(o({},a),{[s]:"You can only add up to 3 focus keywords."}));return}b(a=>n(o({},a),{[s]:[...a[s],...u],[t]:""})),d(a=>n(o({},a),{[s]:""}))},B=(s,t)=>{const i=[...r[t]];i.splice(s,1),b(n(o({},r),{[t]:i})),d(l=>n(o({},l),{[t]:""}))},D=(s,t)=>{s.key==="Enter"&&(s.preventDefault(),N(t))},V=s=>{try{const t=new URL(s),i=t.hostname.toLowerCase().replace("www.","");if(!i.includes("youtube.com")&&!i.includes("youtu.be"))return null;let l=null;if(i==="youtube.com"||i==="m.youtube.com"){const u=t.pathname;u.startsWith("/watch")?l=t.searchParams.get("v"):u.startsWith("/embed/")?l=u.split("/embed/")[1].split("/")[0].split("?")[0]:u.startsWith("/v/")?l=u.split("/v/")[1].split("/")[0].split("?")[0]:u.startsWith("/shorts/")&&(l=u.split("/shorts/")[1].split("/")[0].split("?")[0])}else i==="youtu.be"&&(l=t.pathname.slice(1).split("/")[0].split("?")[0]);return l}catch(t){return null}},J=s=>{switch(c){case"yt":const t=V(s);if(!t||!/^[a-zA-Z0-9_-]{11}$/.test(t))return{valid:!1,error:"Please enter a valid YouTube video link with a proper video ID."};break;default:try{new URL(s)}catch(l){return{valid:!1,error:"Please enter a valid URL (e.g., https://example.com)."}}}return{valid:!0}},E=()=>{var u;const s=(u=r.otherLinkInput)==null?void 0:u.trim(),t=3;if(!s){d(a=>n(o({},a),{otherLinks:`Please enter valid ${c==="yt"?"youtube":"reference"} links.`}));return}const i=s.split(",").map(a=>a.trim()).filter(a=>a!==""),l=[];for(let a of i){if(g.includes(a)||l.includes(a))continue;const f=J(a);if(!f.valid){d(y=>n(o({},y),{otherLinks:f.error})),C.error(f.error);return}l.push(a)}if(l.length===0){d(a=>n(o({},a),{otherLinks:"No valid, unique links found."}));return}if(g.length+l.length>t){d(a=>n(o({},a),{otherLinks:`You can only add up to ${t} links.`}));return}k([...g,...l]),b(a=>n(o({},a),{otherLinkInput:""})),d(a=>n(o({},a),{otherLinks:""}))},_=s=>{s.key==="Enter"&&(s.preventDefault(),E())},H=s=>{const t=[...g];t.splice(s,1),k(t),d(i=>n(o({},i),{otherLinks:""}))},X=[{id:"unsplash",label:"Stock Images",value:"unsplash"},{id:"ai-generated",label:"AI-Generated Images",value:"ai-generated"}],Z=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish"},{value:"German",label:"German"},{value:"French",label:"French"},{value:"Italian",label:"Italian"},{value:"Portuguese",label:"Portuguese"},{value:"Dutch",label:"Dutch"},{value:"Japanese",label:"Japanese"}];return e.jsx(ue,{title:`Generate ${c==="quick"?"Quick":"Youtube"} Blog`,open:!0,onCancel:j,footer:m===0?[e.jsx("button",{onClick:G,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Next step",children:"Next"},"next")]:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[(()=>{const s=[];r.performKeywordResearch&&s.push("keywordResearch");let t=Y({wordCount:1500,features:s,aiModel:"gemini",includeImages:r.addImages,imageSource:r.imageSource==="ai-generated"?"ai":"stock",numberOfImages:0});return r.costCutter&&(t=Math.round(t*.75)),t})()," ","credits"]}),r.costCutter&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"(-25% off)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>L(0),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors","aria-label":"Previous step",children:"Previous"},"previous"),e.jsx("button",{onClick:O,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors ml-3","aria-label":"Submit quick blog",children:"Submit"},"submit")]})]},"footer-content")],width:800,centered:!0,transitionName:"",maskTransitionName:"",destroyOnHidden:!0,children:e.jsxs("div",{className:"p-2 space-y-2",children:[m===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`!max-h-[75vh] overflow-clip p-4 pt-0 ${h.template?"border-2 border-red-500 rounded-lg p-2":""}`,children:e.jsx(xe,{userSubscriptionPlan:(M=($=p==null?void 0:p.subscription)==null?void 0:$.plan)!=null?M:"free",onClick:Q,preSelectedIds:r.templateIds})}),h.template&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:h.template})]}),m===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Topic ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"topic",value:r.topic,onChange:v,className:`w-full px-3 py-2 border ${h.topic?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter the blog topic","aria-label":"Blog topic"}),h.topic&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.topic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Language ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"languageToWrite",value:r.languageToWrite,onChange:v,className:"w-full px-3 py-2 border border-gray-200 rounded-md text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#1B6FC9] focus:border-transparent","aria-label":"Select language",children:Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Perform Keyword Research"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.performKeywordResearch,onChange:s=>b(t=>n(o({},t),{performKeywordResearch:s.target.checked,focusKeywords:s.target.checked?[]:t.focusKeywords,keywords:s.target.checked?[]:t.keywords,focusKeywordInput:"",keywordInput:""})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),!r.performKeywordResearch&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Focus Keywords (Max 3) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.focusKeywordInput,onChange:s=>F(s,"focusKeywords"),onKeyDown:s=>D(s,"focusKeywords"),className:`flex-1 px-3 py-2 border ${h.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter focus keywords, separated by commas","aria-label":"Focus keywords"}),e.jsx("button",{onClick:()=>N("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add focus keywords",children:e.jsx(I,{size:16})})]}),h.focusKeywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.focusKeywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.focusKeywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>B(t,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(K,{size:16})})]},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keywords ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.keywordInput,onChange:s=>F(s,"keywords"),onKeyDown:s=>D(s,"keywords"),className:`flex-1 px-3 py-2 border ${h.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter secondary keywords, separated by commas","aria-label":"Secondary keywords"}),e.jsx("button",{onClick:()=>N("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add secondary keywords",children:e.jsx(I,{size:16})})]}),h.keywords&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.keywords}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.keywords.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>B(t,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(K,{size:16})})]},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Add Images"}),e.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.addImages,onChange:s=>b(t=>n(o({},t),{addImages:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),r.addImages&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Image Source"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mx-auto w-full mb-2",children:X.map(s=>e.jsxs("label",{htmlFor:s.id,className:`relative border rounded-lg px-4 py-3 flex items-center gap-3 justify-center cursor-pointer transition-all duration-150
                      ${r.imageSource===s.value?"border-blue-600 bg-blue-50":"border-gray-300"} hover:shadow-sm w-full`,children:[e.jsx("input",{type:"radio",id:s.id,name:"imageSource",value:s.value,checked:r.imageSource===s.value,onChange:v,className:"hidden"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:s.label})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[c==="yt"?"YouTube Video Links ":"Reference Links (e.g., articles, websites)"," ","(Max 3 links) ",c==="yt"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:r.otherLinkInput,onChange:s=>b(t=>n(o({},t),{otherLinkInput:s.target.value})),onKeyDown:s=>_(s),className:"flex-1 px-3 py-2 border rounded-md text-sm bg-gray-50",placeholder:"Enter full URLs (e.g., https://example.com), separated by commas","aria-label":"Reference/Video links"}),e.jsx("button",{onClick:()=>E(),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add reference/video links",children:e.jsx(I,{size:16})})]}),h.otherLinks&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.otherLinks}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[s,e.jsx("button",{onClick:()=>H(t),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${s}`,children:e.jsx(K,{size:16})})]},t))})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900 mb-1",children:"üí∞ Cost Cutter"}),e.jsx("p",{className:"text-xs text-green-700",children:"Use AI Flash model for 25% savings"})]}),e.jsxs("label",{className:"relative inline-block w-14 h-7 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.costCutter,onChange:s=>b(t=>n(o({},t),{costCutter:s.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"absolute inset-0 bg-gray-300 rounded-full transition-colors duration-200 peer-checked:bg-green-500"}),e.jsx("div",{className:"absolute top-[2px] left-[2px] h-6 w-6 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-7 shadow-md"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-5 shadow-sm",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900 mb-3 flex items-center gap-2",children:"üìù Blog Configuration"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Word Count"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"~1500 words"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"AI Model"}),e.jsx("span",{className:"font-semibold text-blue-900",children:"Gemini Flash"})]}),e.jsx("div",{className:"border-t border-blue-200/60"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-900/70",children:"Images"}),e.jsx("span",{className:"font-semibold text-blue-900",children:r.addImages?r.imageSource==="ai-generated"?"AI Generated":"Stock Images":"None"})]})]})]})]})]})})};export{Re as default};
