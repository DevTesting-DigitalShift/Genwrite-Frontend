import{u as p,a as u,j as a,A as y,m as h,T}from"./index-IEu-g-tg.js";import{b as s}from"./chunk-tiptap-Bpe5wDXG.js";import{F as b}from"./Table-Dr-FJEKV.js";import{T as n}from"./index-DYDOKP8p.js";import"./index-CSnYdF8V.js";import"./SearchOutlined-DYNh4A0p.js";import"./EllipsisOutlined-BtLj8iqe.js";import"./Input-ufFssdcq.js";const L=()=>{const[l,d]=s.useState([]),[c,m]=s.useState(!0),{user:o}=p(e=>e.auth),x=u();s.useEffect(()=>{(async()=>{try{d(o==null?void 0:o.creditLogs)}catch(t){console.error("Failed to load credit logs",t)}finally{m(!1)}})()},[]);const g=[{title:"Date",dataIndex:"createdAt",key:"createdAt",sorter:(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),render:e=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"})})},{title:"Type",dataIndex:"type",key:"type",filters:[{text:"Deduction",value:"DEDUCTION"},{text:"Adjustment",value:"ADJUSTMENT"}],onFilter:(e,t)=>t.type===e,render:e=>a.jsx(n,{color:e==="DEDUCTION"?"red":"green",className:"font-medium",children:e})},{title:"Amount",dataIndex:"amount",key:"amount",sorter:(e,t)=>e.amount-t.amount,render:e=>a.jsx("span",{className:`font-semibold ${e<0?"text-red-500":"text-green-600"}`,children:e>0?`+${e}`:e})},{title:"Description",dataIndex:"description",key:"description",render:(e,t)=>{var r;return a.jsxs("div",{className:"text-sm text-gray-800",children:[e,((r=t.meta)==null?void 0:r.error)&&a.jsx(T,{title:t.meta.error,children:a.jsx(n,{color:"volcano",className:"ml-2 cursor-pointer",children:"Error"})})]})}},{title:"Blog",dataIndex:["meta","blogTitle"],key:"blogTitle",render:(e,t)=>{var r,i;return(r=t.meta)!=null&&r.blogId?a.jsx("span",{onClick:()=>x(`/toolbox/${t.meta.blogId}`),className:"text-blue-500 cursor-pointer hover:underline",children:(i=t.meta)==null?void 0:i.blogTitle}):"-"}}];return a.jsx(y,{children:a.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"p-4 bg-white rounded-xl",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Credit Logs"}),a.jsx(b,{dataSource:l,columns:g,loading:c,rowKey:(e,t)=>`${e.createdAt}-${t}`,pagination:{pageSize:10},className:"bg-white rounded-xl shadow-sm"})]})})};export{L as default};
