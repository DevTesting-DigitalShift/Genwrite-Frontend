var l=Object.defineProperty;var u=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var w=(a,r,t)=>r in a?l(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,y=(a,r)=>{for(var t in r||(r={}))f.call(r,t)&&w(a,t,r[t]);if(u)for(var t of u(r))p.call(r,t)&&w(a,t,r[t]);return a};var i=(a,r,t)=>new Promise((e,n)=>{var d=o=>{try{c(t.next(o))}catch(h){n(h)}},s=o=>{try{c(t.throw(o))}catch(h){n(h)}},c=o=>o.done?e(o.value):Promise.resolve(o.value).then(d,s);c((t=t.apply(a,r)).next())});function A(a){window.dataLayer=window.dataLayer||[];const r=y({},a),t=Object.keys(r).map(e=>i(null,null,function*(){if(/_id$/.test(e)&&r[e]!=null)try{const n=yield m(r[e]);r[e]=n}catch(n){console.error(n),r[e]="id_"+Date.now().toString()}return Promise.resolve()}));Promise.all(t).then(()=>{try{window.dataLayer.push(r)}catch(e){}}).catch(e=>{})}function m(a){return i(this,null,function*(){if(!a)return null;const t=new TextEncoder().encode(a.toString()),e=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")})}export{A as p};
