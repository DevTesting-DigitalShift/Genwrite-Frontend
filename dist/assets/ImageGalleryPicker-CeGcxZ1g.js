var z=Object.defineProperty,F=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var N=(r,s,a)=>s in r?z(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,k=(r,s)=>{for(var a in s||(s={}))q.call(s,a)&&N(r,a,s[a]);if(v)for(var a of v(s))B.call(s,a)&&N(r,a,s[a]);return r},w=(r,s)=>F(r,_(s));var S=(r,s,a)=>new Promise((c,m)=>{var u=o=>{try{d(a.next(o))}catch(n){m(n)}},i=o=>{try{d(a.throw(o))}catch(n){m(n)}},d=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,i);d((a=a.apply(r,s)).next())});import{r as l,W as D,j as e,B as G}from"./index-BGE4p5HE.js";import{searchImages as Q,getImages as T}from"./imageGalleryApi-BdiplmOI.js";import{D as $}from"./DebouncedSearchInput-1GFWccc4.js";import{I as A}from"./image-DVgSzQ1z.js";import{C as H}from"./check-B1RxVmVo.js";const R=({count:r=12})=>{const s=["aspect-[3/4]","aspect-[4/5]","aspect-square","aspect-[2/3]","aspect-[5/6]"];return e.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-4 space-y-4",children:Array.from({length:r}).map((a,c)=>e.jsx("div",{className:"break-inside-avoid rounded-xl overflow-hidden bg-gray-100 animate-pulse",children:e.jsx("div",{className:`w-full ${s[c%s.length]} bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_200%] animate-shimmer`})},c))})},Y=({onSelect:r,selectedImageUrl:s})=>{const[a,c]=l.useState([]),[m,u]=l.useState(!1),[i,d]=l.useState(""),[o,n]=l.useState(1),[p]=l.useState(20),[I,C]=l.useState(!0),[x,f]=l.useState(!1),b=l.useCallback((t=1,P=!1)=>S(null,null,function*(){t===1?u(!0):f(!0);try{const g={page:t,limit:p};let h;i.trim()?h=yield Q(w(k({},g),{q:i})):h=yield T(g);const j=h.data||[],y=h.pagination||{};c(P?E=>[...E,...j]:j),C(y.page<y.totalPages)}catch(g){console.error("Error fetching images:",g),D.error("Failed to load images")}finally{u(!1),f(!1)}}),[p,i]);l.useEffect(()=>{n(1),c([]),b(1,!1)},[i]);const M=t=>{r&&r(t.url,t.description||"")},L=()=>{const t=o+1;n(t),b(t,!0)};return e.jsxs(e.Fragment,{children:[e.jsx("style",{jsx:!0,global:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #555;
        }
      `}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsx($,{onSearch:d,placeholder:"Search images...",debounceTime:500,className:"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:m&&a.length===0?e.jsx(R,{count:12}):a.length===0?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center",children:[e.jsx(A,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-3 md:gap-4 space-y-3 md:space-y-4",children:a.map(t=>e.jsxs("div",{className:`break-inside-avoid relative group rounded-lg md:rounded-xl overflow-hidden cursor-pointer bg-gray-100 transition-all ${s===t.url?"ring-4 ring-blue-500 ring-offset-2":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>M(t),children:[e.jsx("img",{src:t.url,alt:t.description,className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),s===t.url&&e.jsx("div",{className:"absolute top-2 right-2 p-2 bg-blue-600 rounded-full shadow-lg",children:e.jsx(H,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-3 md:p-4",children:e.jsx("p",{className:"text-white text-xs md:text-sm line-clamp-2 font-medium",children:t.description})})]},t._id))}),I&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(G,{onClick:L,loading:x,size:"large",className:"px-6 md:px-8 rounded-lg w-full sm:w-auto",children:x?"Loading...":"Load More"})})]})})]})]})};export{Y as I};
