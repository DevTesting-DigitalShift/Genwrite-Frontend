var $=Object.defineProperty,R=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(i,n,s)=>n in i?$(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s,o=(i,n)=>{for(var s in n||(n={}))W.call(n,s)&&I(i,s,n[s]);if(O)for(var s of O(n))U.call(n,s)&&I(i,s,n[s]);return i},c=(i,n)=>R(i,K(n));var v=(i,n,s)=>new Promise((u,m)=>{var j=l=>{try{f(s.next(l))}catch(p){m(p)}},N=l=>{try{f(s.throw(l))}catch(p){m(p)}},f=l=>l.done?u(l.value):Promise.resolve(l.value).then(j,N);f((s=s.apply(i,n)).next())});import{b as E,u as F,a as T,r as g,l as M,j as e,B as y,A as G,m as k,W as d,eb as Y,ec as q}from"./index-54BNsocf.js";import{B as H}from"./building-2-CrFOEK80.js";import{T as J}from"./target-Bs_85GF5.js";import{C as Q}from"./check-DSf9KE5g.js";import{I as b}from"./index-CpHIAMxF.js";import{S as C}from"./index-OVXmCeJn.js";import"./Input-CBmK-TNH.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-BdhzflJX.js";import"./index-D_XB9Jta.js";import"./move-McwzBUue.js";const{TextArea:L}=b,de=()=>{const i=E(),n=F(),s=T(a=>a.auth.user),[u,m]=g.useState(0),[j,N]=g.useState(!1),[f,l]=g.useState(!1);g.useEffect(()=>{if(!localStorage.getItem("token")){i("/login",{replace:!0});return}n(M())},[n,i]),g.useEffect(()=>{if(!s||!s._id)return;const a=localStorage.getItem(`hasCompletedOnboarding_${s._id}`)==="true";(s.lastLogin||a)&&(s.emailVerified===!1?i(`/email-verify/${s.email}`,{replace:!0}):i("/dashboard",{replace:!0}))},[s,i]);const[p,V]=g.useState("https://"),[r,x]=g.useState({nameOfVoice:"",postLink:"",sitemap:"",describeBrand:"",keywords:[],persona:""}),[w,S]=g.useState(""),A=()=>v(null,null,function*(){if(!r.postLink){d.error("Please enter your company website URL");return}l(!0);try{const a=`${p}${r.postLink.replace(/^https?:\/\//,"")}`,t=yield Y(a);x(h=>c(o({},h),{nameOfVoice:t.nameOfVoice||h.nameOfVoice,describeBrand:t.describeBrand||h.describeBrand,keywords:t.keywords||h.keywords,persona:t.persona||h.persona,sitemap:t.sitemap||h.sitemap})),d.success("Company information fetched successfully!"),m(1)}catch(a){d.warning(a.message||"Couldn't fetch company information automatically. Please enter details manually."),m(1)}finally{l(!1)}}),B=()=>{if(w.trim()){const a=w.split(",").map(t=>t.trim()).filter(t=>t&&!r.keywords.includes(t));x(t=>c(o({},t),{keywords:[...t.keywords,...a]})),S("")}},P=a=>{x(t=>c(o({},t),{keywords:t.keywords.filter(h=>h!==a)}))},_=()=>v(null,null,function*(){if(!r.nameOfVoice.trim()){d.error("Please enter your brand name");return}if(!r.postLink.trim()){d.error("Please enter your website URL");return}if(!r.keywords.length){d.error("Please enter at least one keyword");return}if(!r.persona.trim()){d.error("Please enter your persona");return}r.sitemap.trim().length||delete r.sitemap,N(!0);try{const a=c(o({},r),{postLink:`${p}${r.postLink.replace(/^https?:\/\//,"")}`});yield q(a),d.success("Brand voice created successfully!"),s!=null&&s._id&&localStorage.setItem(`hasCompletedOnboarding_${s._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),setTimeout(()=>{i("/dashboard")},1e3)}catch(a){d.error(a.message||"Failed to create brand voice")}finally{N(!1)}}),z=()=>{s!=null&&s._id&&localStorage.setItem(`hasCompletedOnboarding_${s._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),i("/dashboard")},D=[{title:"Company Info",icon:H},{title:"Brand Details",icon:J},{title:"Review",icon:Q}];return e.jsxs("div",{className:"min-h-screen bg-white flex items-center justify-center p-6 relative",children:[e.jsx(y,{type:"text",onClick:z,disabled:!(s!=null&&s._id),className:"absolute top-6 right-6 text-gray-500 hover:text-gray-900",children:"Skip"}),e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"GenWrite"}),e.jsx("p",{className:"text-gray-500",children:"Set up your brand voice"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-12",children:D.map((a,t)=>e.jsx("div",{className:`h-2 rounded-full transition-all ${t===u?"w-8 bg-gray-900":t<u?"w-2 bg-gray-400":"w-2 bg-gray-200"}`},t))}),e.jsxs(G,{mode:"wait",children:[u===0&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-500",children:"We'll analyze your website to understand your brand"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Name"}),e.jsx(b,{size:"large",placeholder:"Acme Corporation",value:r.nameOfVoice,onChange:a=>x(t=>c(o({},t),{nameOfVoice:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Website URL"}),e.jsx(b,{size:"large",placeholder:"www.example.com",addonBefore:e.jsxs(C,{value:p,onChange:V,dropdownMatchSelectWidth:!1,className:"protocol-select",children:[e.jsx(C.Option,{value:"https://",children:"https://"}),e.jsx(C.Option,{value:"http://",children:"http://"})]}),value:r.postLink,onChange:a=>x(t=>c(o({},t),{postLink:a.target.value})),className:"url-input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Sitemap URL ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(b,{size:"large",placeholder:"https://www.example.com/sitemap.xml",value:r.sitemap,onChange:a=>x(t=>c(o({},t),{sitemap:a.target.value})),className:"rounded-lg"})]})]}),e.jsx(y,{type:"primary",size:"large",block:!0,onClick:A,loading:f,disabled:!r.postLink||!r.nameOfVoice,className:"h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:f?"Analyzing...":"Continue"})]},"step-0"),u===1&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Brand Details"}),e.jsx("p",{className:"text-gray-500",children:"Refine your brand information"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),e.jsx(L,{rows:4,placeholder:"Describe what your company does...",value:r.describeBrand,onChange:a=>x(t=>c(o({},t),{describeBrand:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Author Persona"}),e.jsx(L,{rows:3,placeholder:"What is your Author Persona?",value:r.persona,onChange:a=>x(t=>c(o({},t),{persona:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Keywords"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(b,{placeholder:"Add keywords (comma-separated)",value:w,onChange:a=>S(a.target.value),onKeyDown:a=>a.key==="Enter"&&B(),className:"rounded-lg"}),e.jsx(y,{onClick:B,className:"rounded-lg",children:"Add"})]}),r.keywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,t)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:[a,e.jsx("button",{onClick:()=>P(a),className:"hover:text-gray-900",children:"Ã—"})]},t))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{size:"large",onClick:()=>m(0),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(y,{type:"primary",size:"large",onClick:()=>m(2),className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:"Continue"})]})]},"step-1"),u===2&&e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Review"}),e.jsx("p",{className:"text-gray-500",children:"Verify your information before creating"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Brand Name"}),e.jsx("p",{className:"text-gray-900",children:r.nameOfVoice||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Website"}),e.jsxs("p",{className:"text-gray-900",children:[p,r.postLink||"Not provided"]})]}),r.describeBrand&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:r.describeBrand})]}),r.persona&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Author Persona"}),e.jsx("p",{className:"text-gray-700 text-sm",children:r.persona})]}),r.keywords.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,t)=>e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:a},t))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{size:"large",onClick:()=>m(1),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(y,{type:"primary",size:"large",onClick:_,loading:j,className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:j?"Creating...":"Create Brand Voice"})]})]},"step-2")]}),e.jsx("p",{className:"text-center text-gray-400 text-sm mt-12",children:"You can update these settings anytime"})]})]})};export{de as default};
