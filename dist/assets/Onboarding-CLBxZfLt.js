var R=Object.defineProperty,$=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(i,n,t)=>n in i?R(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,o=(i,n)=>{for(var t in n||(n={}))W.call(n,t)&&I(i,t,n[t]);if(O)for(var t of O(n))U.call(n,t)&&I(i,t,n[t]);return i},c=(i,n)=>$(i,K(n));var w=(i,n,t)=>new Promise((y,m)=>{var j=l=>{try{f(t.next(l))}catch(x){m(x)}},N=l=>{try{f(t.throw(l))}catch(x){m(x)}},f=l=>l.done?y(l.value):Promise.resolve(l.value).then(j,N);f((t=t.apply(i,n)).next())});import{c as E,b as F,u as T,a as M,r as g,l as G,j as e,B as u,A as Y,m as v,W as d,eb as q,ec as H}from"./index-7HC_oqoo.js";import{B as J}from"./building-2-W4BoiufK.js";import{C as Q}from"./check-CvI72R2z.js";import{I as b}from"./index-BqUOVHjR.js";import{S as C}from"./index-g8IKEq64.js";import"./Input-BmGF6SRQ.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-Z10FQSf9.js";import"./index-CwIYrDhH.js";import"./move-CrewOi6M.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Z=E("target",X),{TextArea:L}=b,me=()=>{const i=F(),n=T(),t=M(a=>a.auth.user),[y,m]=g.useState(0),[j,N]=g.useState(!1),[f,l]=g.useState(!1);g.useEffect(()=>{if(!localStorage.getItem("token")){i("/login",{replace:!0});return}n(G())},[n,i]),g.useEffect(()=>{if(!t||!t._id)return;const a=localStorage.getItem(`hasCompletedOnboarding_${t._id}`)==="true";(t.lastLogin||a)&&i("/dashboard",{replace:!0})},[t,i]);const[x,_]=g.useState("https://"),[r,p]=g.useState({nameOfVoice:"",postLink:"",sitemap:"",describeBrand:"",keywords:[],persona:""}),[k,S]=g.useState(""),V=()=>w(null,null,function*(){if(!r.postLink){d.error("Please enter your company website URL");return}l(!0);try{const a=`${x}${r.postLink.replace(/^https?:\/\//,"")}`,s=yield q(a);p(h=>c(o({},h),{nameOfVoice:s.nameOfVoice||h.nameOfVoice,describeBrand:s.describeBrand||h.describeBrand,keywords:s.keywords||h.keywords,persona:s.persona||h.persona,sitemap:s.sitemap||h.sitemap})),d.success("Company information fetched successfully!"),m(1)}catch(a){d.warning(a.message||"Couldn't fetch company information automatically. Please enter details manually."),m(1)}finally{l(!1)}}),B=()=>{if(k.trim()){const a=k.split(",").map(s=>s.trim()).filter(s=>s&&!r.keywords.includes(s));p(s=>c(o({},s),{keywords:[...s.keywords,...a]})),S("")}},A=a=>{p(s=>c(o({},s),{keywords:s.keywords.filter(h=>h!==a)}))},P=()=>w(null,null,function*(){if(!r.nameOfVoice.trim()){d.error("Please enter your brand name");return}if(!r.postLink.trim()){d.error("Please enter your website URL");return}if(!r.keywords.length){d.error("Please enter at least one keyword");return}if(!r.persona.trim()){d.error("Please enter your persona");return}r.sitemap.trim().length||delete r.sitemap,N(!0);try{const a=c(o({},r),{postLink:`${x}${r.postLink.replace(/^https?:\/\//,"")}`});yield H(a),d.success("Brand voice created successfully!"),t!=null&&t._id&&localStorage.setItem(`hasCompletedOnboarding_${t._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),setTimeout(()=>{i("/dashboard")},1e3)}catch(a){d.error(a.message||"Failed to create brand voice")}finally{N(!1)}}),z=()=>{t!=null&&t._id&&localStorage.setItem(`hasCompletedOnboarding_${t._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),i("/dashboard")},D=[{title:"Company Info",icon:J},{title:"Brand Details",icon:Z},{title:"Review",icon:Q}];return e.jsxs("div",{className:"min-h-screen bg-white flex items-center justify-center p-6 relative",children:[e.jsx(u,{type:"text",onClick:z,disabled:!(t!=null&&t._id),className:"absolute top-6 right-6 text-gray-500 hover:text-gray-900",children:"Skip"}),e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"GenWrite"}),e.jsx("p",{className:"text-gray-500",children:"Set up your brand voice"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-12",children:D.map((a,s)=>e.jsx("div",{className:`h-2 rounded-full transition-all ${s===y?"w-8 bg-gray-900":s<y?"w-2 bg-gray-400":"w-2 bg-gray-200"}`},s))}),e.jsxs(Y,{mode:"wait",children:[y===0&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-500",children:"We'll analyze your website to understand your brand"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Name"}),e.jsx(b,{size:"large",placeholder:"Acme Corporation",value:r.nameOfVoice,onChange:a=>p(s=>c(o({},s),{nameOfVoice:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Website URL"}),e.jsx(b,{size:"large",placeholder:"www.example.com",addonBefore:e.jsxs(C,{value:x,onChange:_,dropdownMatchSelectWidth:!1,className:"protocol-select",children:[e.jsx(C.Option,{value:"https://",children:"https://"}),e.jsx(C.Option,{value:"http://",children:"http://"})]}),value:r.postLink,onChange:a=>p(s=>c(o({},s),{postLink:a.target.value})),className:"url-input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Sitemap URL ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(b,{size:"large",placeholder:"https://www.example.com/sitemap.xml",value:r.sitemap,onChange:a=>p(s=>c(o({},s),{sitemap:a.target.value})),className:"rounded-lg"})]})]}),e.jsx(u,{type:"primary",size:"large",block:!0,onClick:V,loading:f,disabled:!r.postLink||!r.nameOfVoice,className:"h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:f?"Analyzing...":"Continue"})]},"step-0"),y===1&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Brand Details"}),e.jsx("p",{className:"text-gray-500",children:"Refine your brand information"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),e.jsx(L,{rows:4,placeholder:"Describe what your company does...",value:r.describeBrand,onChange:a=>p(s=>c(o({},s),{describeBrand:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Author Persona"}),e.jsx(L,{rows:3,placeholder:"What is your Author Persona?",value:r.persona,onChange:a=>p(s=>c(o({},s),{persona:a.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Keywords"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(b,{placeholder:"Add keywords (comma-separated)",value:k,onChange:a=>S(a.target.value),onKeyDown:a=>a.key==="Enter"&&B(),className:"rounded-lg"}),e.jsx(u,{onClick:B,className:"rounded-lg",children:"Add"})]}),r.keywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,s)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:[a,e.jsx("button",{onClick:()=>A(a),className:"hover:text-gray-900",children:"Ã—"})]},s))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{size:"large",onClick:()=>m(0),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(u,{type:"primary",size:"large",onClick:()=>m(2),className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:"Continue"})]})]},"step-1"),y===2&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Review"}),e.jsx("p",{className:"text-gray-500",children:"Verify your information before creating"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Brand Name"}),e.jsx("p",{className:"text-gray-900",children:r.nameOfVoice||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Website"}),e.jsxs("p",{className:"text-gray-900",children:[x,r.postLink||"Not provided"]})]}),r.describeBrand&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:r.describeBrand})]}),r.persona&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Author Persona"}),e.jsx("p",{className:"text-gray-700 text-sm",children:r.persona})]}),r.keywords.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((a,s)=>e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:a},s))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{size:"large",onClick:()=>m(1),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(u,{type:"primary",size:"large",onClick:P,loading:j,className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:j?"Creating...":"Create Brand Voice"})]})]},"step-2")]}),e.jsx("p",{className:"text-center text-gray-400 text-sm mt-12",children:"You can update these settings anytime"})]})]})};export{me as default};
