var le=Object.defineProperty,oe=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var K=(s,t,r)=>t in s?le(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,f=(s,t)=>{for(var r in t||(t={}))Q.call(t,r)&&K(s,r,t[r]);if(L)for(var r of L(t))ee.call(t,r)&&K(s,r,t[r]);return s},b=(s,t)=>oe(s,ne(t));var x=(s,t)=>{var r={};for(var n in s)Q.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&L)for(var n of L(s))t.indexOf(n)<0&&ee.call(s,n)&&(r[n]=s[n]);return r};var C=(s,t,r)=>new Promise((n,l)=>{var o=m=>{try{g(r.next(m))}catch(v){l(v)}},p=m=>{try{g(r.throw(m))}catch(v){l(v)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(o,p);g((r=r.apply(s,t)).next())});import{j as e}from"./tiptap-Cw5itmsP.js";import{r as a}from"./vendor-D8zynvq1.js";import{a as ie,u as de,l as B,H as ce,m as O,a3 as me,a4 as ue,a5 as pe,a6 as xe,a7 as he,a8 as fe}from"./index-6Wzook5W.js";import{M as we,s as w,c as be,q as ge,d as se,b as ve,j as V}from"./antd-CNZYc_MN.js";import{i as ae}from"./utils-Djmlt6HM.js";function ye(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const je=a.forwardRef(ye);function Pe(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{d:"M12 7.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"}),a.createElement("path",{fillRule:"evenodd",d:"M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 14.625v-9.75ZM8.25 9.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM18.75 9a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V9.75a.75.75 0 0 0-.75-.75h-.008ZM4.5 9.75A.75.75 0 0 1 5.25 9h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75V9.75Z",clipRule:"evenodd"}),a.createElement("path",{d:"M2.25 18a.75.75 0 0 0 0 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 0 0-.75-.75H2.25Z"}))}const Ne=a.forwardRef(Pe);function Ce(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const Ee=a.forwardRef(Ce);function Re(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M17.663 3.118c.225.015.45.032.673.05C19.876 3.298 21 4.604 21 6.109v9.642a3 3 0 0 1-3 3V16.5c0-5.922-4.576-10.775-10.384-11.217.324-1.132 1.3-2.01 2.548-2.114.224-.019.448-.036.673-.051A3 3 0 0 1 13.5 1.5H15a3 3 0 0 1 2.663 1.618ZM12 4.5A1.5 1.5 0 0 1 13.5 3H15a1.5 1.5 0 0 1 1.5 1.5H12Z",clipRule:"evenodd"}),a.createElement("path",{d:"M3 8.625c0-1.036.84-1.875 1.875-1.875h.375A3.75 3.75 0 0 1 9 10.5v1.875c0 1.036.84 1.875 1.875 1.875h1.875A3.75 3.75 0 0 1 16.5 18v2.625c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625v-12Z"}),a.createElement("path",{d:"M10.5 10.5a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963 5.23 5.23 0 0 0-3.434-1.279h-1.875a.375.375 0 0 1-.375-.375V10.5Z"}))}const De=a.forwardRef(Re);function ke(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{d:"M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z"}),a.createElement("path",{fillRule:"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))}const Se=a.forwardRef(ke);function Me(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),a.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const Ze=a.forwardRef(Me);function Ae(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const Oe=a.forwardRef(Ae);function Fe(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z",clipRule:"evenodd"}))}const $e=a.forwardRef(Fe);function Le(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const Te=a.forwardRef(Le);function Ie(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),a.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const Be=a.forwardRef(Ie);function Ve(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const U=a.forwardRef(Ve);function Ue(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const H=a.forwardRef(Ue);function He(l,n){var o=l,{title:s,titleId:t}=o,r=x(o,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const ze=a.forwardRef(He),Ge=({visible:s,onClose:t,hasPassword:r,onSubmit:n})=>{const[l,o]=a.useState(!1),[p,g]=a.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[m,v]=a.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[y,R]=a.useState(!1),[N,S]=a.useState(!1),[M,$]=a.useState(!1),j=u=>u?u.length<8?"Password must be at least 8 characters":/(?=.*[a-z])/.test(u)?/(?=.*[A-Z])/.test(u)?/(?=.*\d)/.test(u)?/(?=.*[@$!%*?&#])/.test(u)?"":"Password must contain at least one special character (@$!%*?&#)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter":"Password is required",T=()=>{const u={oldPassword:"",newPassword:"",confirmPassword:""};r&&!p.oldPassword&&(u.oldPassword="Please enter your old password");const P=j(p.newPassword);return P&&(u.newPassword=P),p.confirmPassword?p.confirmPassword!==p.newPassword&&(u.confirmPassword="Passwords do not match"):u.confirmPassword="Please confirm your password",v(u),!Object.values(u).some(D=>D!=="")},I=()=>C(null,null,function*(){if(T())try{o(!0),yield n(p),w.success(r?"Password changed successfully!":"Password set successfully!"),Z()}catch(u){w.error(u.message||"Failed to update password")}finally{o(!1)}}),Z=()=>{g({oldPassword:"",newPassword:"",confirmPassword:""}),v({oldPassword:"",newPassword:"",confirmPassword:""}),R(!1),S(!1),$(!1),t()},A=u=>{const{name:P,value:D}=u.target;g(k=>b(f({},k),{[P]:D})),m[P]&&v(k=>b(f({},k),{[P]:""}))};return e.jsx(we,{title:e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(ze,{className:"w-5 h-5 text-blue-600"}),r?"Change Password":"Set Password"]}),open:s,onCancel:Z,width:500,destroyOnClose:!0,footer:e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{onClick:Z,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Processing...":r?"Change Password":"Set Password"})]}),children:e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-800 font-medium mb-1",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Contains uppercase and lowercase letters"}),e.jsx("li",{children:"Contains at least one number"}),e.jsx("li",{children:"Contains at least one special character (@$!%*?&#)"})]})]}),r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Old Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",name:"oldPassword",value:p.oldPassword,onChange:A,placeholder:"Enter your old password",autoComplete:"current-password",className:`w-full px-4 py-2 pr-10 border ${m.oldPassword?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all`}),e.jsx("button",{type:"button",onClick:()=>R(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?e.jsx(U,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]}),m.oldPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.oldPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:N?"text":"password",name:"newPassword",value:p.newPassword,onChange:A,placeholder:"Enter your new password",autoComplete:"new-password",className:`w-full px-4 py-2 pr-10 border ${m.newPassword?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all`}),e.jsx("button",{type:"button",onClick:()=>S(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:N?e.jsx(U,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]}),m.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.newPassword}),!m.newPassword&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters with uppercase, lowercase, number, and special character"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M?"text":"password",name:"confirmPassword",value:p.confirmPassword,onChange:A,placeholder:"Confirm your new password",autoComplete:"new-password",className:`w-full px-4 py-2 pr-10 border ${m.confirmPassword?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all`}),e.jsx("button",{type:"button",onClick:()=>$(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:M?e.jsx(U,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]}),m.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.confirmPassword})]})]})})},E={profilePicture:"",personalDetails:{name:"eg : Siva Dheeraj",email:"eg : sivadheeraj@example.com",phone:"eg : +91 9990292929",bio:"eg : Lead Product Designer",jobTitle:"eg : Senior UX Engineer",company:"eg : Tech Innovators Inc",dob:"eg : 1990-05-15",interests:["technology","art"]}},We=[{value:"technology",label:"Technology",color:"#1890ff"},{value:"sports",label:"Sports",color:"#52c41a"},{value:"music",label:"Music",color:"#722ed1"},{value:"art",label:"Art",color:"#eb2f96"},{value:"other",label:"Other",color:"#fa8c16"}],te={free:"from-gray-500 to-gray-600",basic:"from-blue-500 to-blue-600",pro:"from-purple-500 to-purple-600",enterprise:"from-yellow-500 to-yellow-600"},re={active:"bg-green-500",canceled:"bg-red-500",past_due:"bg-orange-500",unpaid:"bg-red-600"},Qe=()=>{var P,D,k,z,G,W,_,q,Y,J;const[s,t]=a.useState(E),[r,n]=a.useState(null),{user:l}=ie(i=>i.auth),o=de(),[p,g]=a.useState(!1),[m,v]=a.useState({totalJoined:0,converted:0}),[y,R]=a.useState({promotionalEmails:!1,newFeatureUpdates:!1,accountAlerts:!1}),[N,S]=a.useState("");a.useEffect(()=>{o(B())},[o]);const M=((D=(P=l==null?void 0:l.credits)==null?void 0:P.base)!=null?D:0)+((z=(k=l==null?void 0:l.credits)==null?void 0:k.extra)!=null?z:0);a.useEffect(()=>{var d,c,h;if(!l)return;const i={profilePicture:l.avatar||"",personalDetails:{name:l.name||"",email:l.email||"",phone:l.phone||"",bio:l.bio||"",jobTitle:l.jobTitle||"",company:l.company||"",dob:l.dob||"",interests:l.interests||["other"]},subscription:{plan:((d=l.subscription)==null?void 0:d.plan)||"free",status:((c=l.subscription)==null?void 0:c.status)||"active"},emailVerified:l.emailVerified||!1};t(i),n(i),(h=l.referral)!=null&&h.referralId&&S(l.referral.referralId)},[l]),a.useEffect(()=>{l&&C(null,null,function*(){try{const[d,c]=yield Promise.all([me(),ue()]);v(d),c.emailPreference&&R(h=>f(f({},h),c.emailPreference))}catch(d){console.error("Failed to fetch additional profile data",d)}})},[l]);const $=()=>C(null,null,function*(){if(!r)return;const i={};s.profilePicture!==r.profilePicture&&(i.avatar=s.profilePicture);const d=s.personalDetails,c=r.personalDetails;if(d.name!==c.name&&(i.name=d.name),d.bio!==c.bio&&(i.bio=d.bio),d.email!==c.email&&(i.email=d.email),d.phone!==c.phone&&(i.phone=d.phone),d.jobTitle!==c.jobTitle&&(i.jobTitle=d.jobTitle),d.company!==c.company&&(i.company=d.company),d.dob!==c.dob&&(i.dob=d.dob),ae(d.interests,c.interests)||(i.interests=d.interests),Object.keys(i).length===0){w.info("No changes to save");return}try{yield o(pe(i)).unwrap(),w.success("Profile updated successfully!")}catch(h){w.error("Error updating profile, try again")}}),j=i=>{const{name:d,value:c}=i.target;if(d==="personalDetails.phone"){const h=c.replace(/[^0-9]/g,"");if(h.length>15){w.error("Phone number cannot exceed 15 digits.");return}t(X=>b(f({},X),{personalDetails:b(f({},X.personalDetails),{phone:h})}))}else d.startsWith("personalDetails.")&&t(h=>b(f({},h),{personalDetails:b(f({},h.personalDetails),{[d.split(".")[1]]:c})}))},T=i=>{t(d=>b(f({},d),{personalDetails:b(f({},d.personalDetails),{interests:i})}))},I=i=>C(null,null,function*(){try{const d=l!=null&&l.hasPassword?{oldPassword:i.oldPassword,newPassword:i.newPassword}:{newPassword:i.newPassword},c=yield fe(d);if(!c.success)throw new Error(c.message||"Failed to update password");o(B())}catch(d){throw d}}),Z=()=>C(null,null,function*(){try{const i=yield xe();S(i.referralId),w.success("Referral code generated!"),o(B())}catch(i){w.error("Failed to generate referral code")}}),A=()=>{if(!N)return;const d=`http://localhost:5174/signup?referal=${N}`;navigator.clipboard.writeText(d),w.success("Referral link copied to clipboard!")},u=(i,d)=>C(null,null,function*(){const c=b(f({},y),{[i]:d});R(c);try{yield he({emailPreference:c}),w.success("Preferences updated")}catch(h){R(y),w.error("Failed to update preferences")}});return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:e.jsx("title",{children:"Profile | GenWrite"})}),e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-3 sm:p-4 md:p-6 mt-5",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(O.div,{initial:{y:-20},animate:{y:0},className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 md:p-8 mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:s!=null&&s.profilePicture?e.jsx("img",{src:s.profilePicture,alt:"Profile",className:"w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-full border-4 border-gray-100 object-cover shadow-md"}):e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-full border-4 border-gray-100 bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center text-4xl sm:text-5xl font-bold shadow-md",children:(G=s==null?void 0:s.personalDetails)!=null&&G.name?`${(W=s==null?void 0:s.personalDetails.name[0])==null?void 0:W.toUpperCase()}`:"NA"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start justify-center sm:justify-start gap-2 mb-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:s.personalDetails.name||"Full Name"}),s.emailVerified&&e.jsx(be,{title:"Email Verified",children:e.jsx(Te,{className:"w-5 h-5 mt-2 sm:w-6 sm:h-6 text-blue-500"})})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4 line-clamp-2",children:s.personalDetails.bio||"Add your bio"}),e.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2",children:[e.jsxs("span",{className:`px-3 sm:px-4 py-1 sm:py-1.5 bg-gradient-to-r ${te[(_=s.subscription)==null?void 0:_.plan]||te.free} text-white rounded-full text-xs sm:text-sm font-medium capitalize`,children:[e.jsx(Se,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1"}),((q=s.subscription)==null?void 0:q.plan)||"free"]}),e.jsxs("span",{className:"px-3 sm:px-4 py-1 sm:py-1.5 bg-blue-50 text-blue-700 rounded-full text-xs sm:text-sm font-medium",children:[e.jsx(Ne,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1"}),M," Credits"]}),e.jsx("span",{className:`px-3 sm:px-4 py-1 sm:py-1.5 ${re[(Y=s.subscription)==null?void 0:Y.status]||re.active} text-white rounded-full text-xs sm:text-sm font-medium capitalize`,children:((J=s.subscription)==null?void 0:J.status)||"active"})]})]})]})}),e.jsxs(O.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"}),"Personal Details"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>g(!0),className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Oe,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l!=null&&l.hasPassword?"Change Password":"Set Password"]}),e.jsxs("button",{onClick:$,disabled:!r||ae(s,r),className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ee,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Save Changes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(F,{label:"Full Name",name:"personalDetails.name",value:s.personalDetails.name,onChange:j,placeholder:E.personalDetails.name}),e.jsx(F,{label:"Email",name:"personalDetails.email",value:s.personalDetails.email,onChange:j,placeholder:E.personalDetails.email,disabled:!0}),e.jsx(F,{label:"Phone",name:"personalDetails.phone",value:s.personalDetails.phone,onChange:j,placeholder:E.personalDetails.phone,maxLength:15}),e.jsx(F,{label:"Job Title",name:"personalDetails.jobTitle",value:s.personalDetails.jobTitle,onChange:j,placeholder:E.personalDetails.jobTitle}),e.jsx(F,{label:"Company",name:"personalDetails.company",value:s.personalDetails.company,onChange:j,placeholder:E.personalDetails.company}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx(ge,{format:"YYYY-MM-DD",value:s.personalDetails.dob?se(s.personalDetails.dob):null,onChange:(i,d)=>j({target:{name:"personalDetails.dob",value:d}}),className:"w-full",size:"large",placeholder:E.personalDetails.dob,disabledDate:i=>i&&i>se().endOf("day")})]}),e.jsxs("div",{className:"sm:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:"Bio"}),e.jsx("textarea",{name:"personalDetails.bio",value:s.personalDetails.bio||"",onChange:j,placeholder:"Tell us about yourself...",className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none text-sm sm:text-base",rows:4})]}),e.jsxs("div",{className:"sm:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:"Interests"}),e.jsx(ve,{mode:"multiple",value:s.personalDetails.interests,onChange:T,className:"w-full",placeholder:"Select your interests",options:We,maxTagCount:"responsive",size:"large"})]})]})]}),e.jsxs(O.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 md:p-8 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx($e,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Referral Program"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Share your referral code with friends and earn rewards when they subscribe."}),N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 font-mono text-lg font-bold text-gray-800 tracking-wider",children:N}),e.jsx("button",{onClick:A,className:"p-3 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Copy Code",children:e.jsx(De,{className:"w-6 h-6"})})]}):e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition-shadow",children:[e.jsx(je,{className:"w-5 h-5"}),"Generate Referral Code"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:m.totalJoined}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Referred Users"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:m.converted}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:"Converted"})]})]})]})]}),e.jsxs(O.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 md:p-8 mt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ze,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Email Notifications"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Account Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about important security changes."})]}),e.jsx(V,{checked:y.accountAlerts,disabled:!0,onChange:i=>u("accountAlerts",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Promotions & Offers"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive emails about new discounts and deals."})]}),e.jsx(V,{checked:y.promotionalEmails,onChange:i=>u("promotionalEmails",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Feature Updates"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Stay informed about new features and improvements."})]}),e.jsx(V,{checked:y.newFeatureUpdates,onChange:i=>u("newFeatureUpdates",i)})]})]})]})]})}),e.jsx(Ge,{visible:p,onClose:()=>g(!1),hasPassword:(l==null?void 0:l.hasPassword)||!1,onSubmit:I})]})},F=({label:s,name:t,value:r,onChange:n,placeholder:l,maxLength:o,disabled:p=!1})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:s}),e.jsx("input",{type:t==="personalDetails.phone"?"tel":"text",name:t,value:r||"",onChange:n,placeholder:l,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed text-sm sm:text-base",maxLength:o,pattern:t==="personalDetails.phone"?"[0-9]*":void 0,disabled:p})]});export{Qe as default};
