{"version":3,"file":"BrandVoice-DtjQucsp.js","sources":["../../src/components/brandvoice/BrandVoice.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaEdit, FaTimes } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Info, Loader2, Upload } from \"lucide-react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Modal, Tooltip, message } from \"antd\";\r\nimport {\r\n  createBrandVoiceThunk,\r\n  deleteBrandVoiceThunk,\r\n  fetchBrands,\r\n  fetchSiteInfo,\r\n  updateBrandVoiceThunk,\r\n  resetSiteInfo,\r\n} from \"@store/slices/brandSlice\";\r\n\r\nconst BrandVoice = () => {\r\n  const user = useSelector((state) => state.auth.user);\r\n  const dispatch = useDispatch();\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    nameOfVoice: \"\",\r\n    postLink: \"\",\r\n    keywords: [],\r\n    describeBrand: \"\",\r\n    sitemapUrl: \"\",\r\n    selectedVoice: null,\r\n    _id: undefined,\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const { brands, siteInfo } = useSelector((state) => state.brand);\r\n  const [lastScrapedUrl, setLastScrapedUrl] = useState(\"\");\r\n  const [isFormReset, setIsFormReset] = useState(false); // New flag to track form reset\r\n\r\n  // Fetch brands on mount\r\n  useEffect(() => {\r\n    dispatch(fetchBrands());\r\n  }, [dispatch]);\r\n\r\n  // Select first brand voice if none is selected\r\n  useEffect(() => {\r\n    if (brands.length > 0 && !formData.selectedVoice) {\r\n      setFormData((prev) => ({ ...prev, selectedVoice: brands[0] }));\r\n    }\r\n  }, [brands]);\r\n\r\n  // Reset form on mount and unmount (page change)\r\n  useEffect(() => {\r\n    if (!formData._id) {\r\n      resetForm();\r\n    }\r\n    return () => {\r\n      resetForm();\r\n      dispatch(resetSiteInfo()); // Clear siteInfo on unmount\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // Populate form with fetched siteInfo data\r\n  useEffect(() => {\r\n    if (siteInfo.data && !isFormReset) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        nameOfVoice: siteInfo.data.nameOfVoice || prev.nameOfVoice,\r\n        describeBrand: siteInfo.data.describeBrand || prev.describeBrand,\r\n        keywords: siteInfo.data.keywords || prev.keywords,\r\n        postLink: siteInfo.data.postLink || prev.postLink,\r\n        sitemapUrl: siteInfo.data.sitemap || prev.sitemapUrl,\r\n      }));\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        nameOfVoice: undefined,\r\n        describeBrand: undefined,\r\n        keywords: undefined,\r\n        postLink: undefined,\r\n        sitemapUrl: undefined,\r\n      }));\r\n      setLastScrapedUrl(formData.postLink);\r\n    }\r\n    if (siteInfo.error) {\r\n      message.error(\"Failed to fetch site info. Please try a different URL.\");\r\n    }\r\n  }, [siteInfo, formData.postLink, isFormReset]);\r\n\r\n  // Reset form function\r\n  const resetForm = useCallback(() => {\r\n    setFormData({\r\n      nameOfVoice: \"\",\r\n      postLink: \"\",\r\n      keywords: [],\r\n      describeBrand: \"\",\r\n      sitemapUrl: \"\",\r\n      selectedVoice: brands[0] || null,\r\n      _id: undefined,\r\n    });\r\n    setInputValue(\"\");\r\n    setErrors({});\r\n    setLastScrapedUrl(\"\");\r\n    setIsFormReset(true); // Set flag to prevent siteInfo repopulation\r\n  }, [brands]);\r\n\r\n  // Validate form fields\r\n  const validateForm = useCallback(() => {\r\n    const newErrors = {};\r\n    if (!formData.nameOfVoice.trim()) {\r\n      newErrors.nameOfVoice = \"Name of Voice is required.\";\r\n    }\r\n    if (!formData.postLink.trim()) {\r\n      newErrors.postLink = \"Post link is required.\";\r\n    } else {\r\n      try {\r\n        new URL(formData.postLink);\r\n      } catch {\r\n        newErrors.postLink = \"Please enter a valid URL (e.g., https://example.com).\";\r\n      }\r\n    }\r\n    if (formData.keywords.length === 0) {\r\n      newErrors.keywords = \"At least one keyword is required.\";\r\n    }\r\n    if (!formData.describeBrand.trim()) {\r\n      newErrors.describeBrand = \"Brand description is required.\";\r\n    }\r\n    if (!formData.sitemapUrl.trim()) {\r\n      newErrors.sitemapUrl = \"Sitemap URL is required.\";\r\n    } else {\r\n      try {\r\n        new URL(formData.sitemapUrl);\r\n      } catch {\r\n        newErrors.sitemapUrl = \"Please enter a valid URL (e.g., https://example.com/sitemap.xml).\";\r\n      }\r\n    }\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData]);\r\n\r\n  // Handle form input changes\r\n  const handleInputChange = useCallback(\r\n    (e) => {\r\n      const { name, value } = e.target;\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n      setErrors((prev) => ({ ...prev, [name]: undefined }));\r\n      if (name === \"postLink\" && value !== lastScrapedUrl) {\r\n        setLastScrapedUrl(\"\");\r\n      }\r\n      setIsFormReset(false); // Allow siteInfo to populate if user edits\r\n    },\r\n    [lastScrapedUrl]\r\n  );\r\n\r\n  // Handle keyword input\r\n  const handleKeyDown = useCallback(\r\n    (event) => {\r\n      if (event.key === \"Enter\" && inputValue.trim()) {\r\n        event.preventDefault();\r\n        const existing = formData.keywords.map((k) => k.toLowerCase());\r\n        const seen = new Set();\r\n        const newKeywords = inputValue\r\n          .split(\",\")\r\n          .map((k) => k.trim())\r\n          .filter((k) => {\r\n            const lower = k.toLowerCase();\r\n            if (!k || existing.includes(lower) || seen.has(lower)) return false;\r\n            seen.add(lower);\r\n            return true;\r\n          });\r\n        if (newKeywords.length === 0) return;\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          keywords: [...prev.keywords, ...newKeywords],\r\n        }));\r\n        setInputValue(\"\");\r\n        setErrors((prev) => ({ ...prev, keywords: undefined }));\r\n        setIsFormReset(false);\r\n      }\r\n    },\r\n    [inputValue, formData.keywords]\r\n  );\r\n\r\n  // Remove keyword\r\n  const removeKeyword = useCallback((keyword) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      keywords: prev.keywords.filter((k) => k !== keyword),\r\n    }));\r\n    setIsFormReset(false);\r\n  }, []);\r\n\r\n  // Handle CSV file upload for keywords\r\n  const handleFileChange = useCallback((event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    if (!file.name.toLowerCase().endsWith(\".csv\")) {\r\n      message.error(\"Invalid file type. Please upload a .csv file.\");\r\n      event.target.value = null;\r\n      return;\r\n    }\r\n    const maxSizeInBytes = 20 * 1024;\r\n    if (file.size > maxSizeInBytes) {\r\n      message.error(\"File size exceeds 20KB limit. Please upload a smaller file.\");\r\n      event.target.value = null;\r\n      return;\r\n    }\r\n    if (file.type !== \"text/csv\") {\r\n      message.error(\"Please upload a valid CSV file.\");\r\n      event.target.value = null;\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const text = e.target.result;\r\n      const keywords = text\r\n        .split(/,|\\n|;/)\r\n        .map((kw) => kw.trim())\r\n        .filter((kw) => kw.length > 0);\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        keywords: [...new Set([...prev.keywords, ...keywords])],\r\n      }));\r\n      setErrors((prev) => ({ ...prev, keywords: undefined }));\r\n      setIsFormReset(false);\r\n    };\r\n    reader.onerror = () => message.error(\"Error reading CSV file.\");\r\n    reader.readAsText(file);\r\n    event.target.value = null;\r\n  }, []);\r\n\r\n  // Save or update brand voice\r\n  const handleSave = useCallback(async () => {\r\n    if (!validateForm()) return;\r\n    setIsUploading(true);\r\n    const payload = {\r\n      nameOfVoice: formData.nameOfVoice.trim(),\r\n      postLink: formData.postLink.trim(),\r\n      keywords: formData.keywords.map((k) => k.trim()).filter(Boolean),\r\n      describeBrand: formData.describeBrand.trim(),\r\n      sitemap: formData.sitemapUrl.trim(),\r\n      userId: user?._id,\r\n    };\r\n    try {\r\n      if (formData._id) {\r\n        await dispatch(updateBrandVoiceThunk({ id: formData._id, payload })).unwrap();\r\n      } else {\r\n        await dispatch(createBrandVoiceThunk({ payload })).unwrap();\r\n      }\r\n      resetForm();\r\n      dispatch(fetchBrands());\r\n      dispatch(resetSiteInfo()); // Clear siteInfo after save\r\n    } catch (error) {\r\n      console.error(\"Error saving brand voice:\", error);\r\n      message.error(formData._id ? \"Failed to update brand voice.\" : \"Failed to create brand voice.\");\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [formData, user, dispatch, validateForm, resetForm]);\r\n\r\n  // Edit brand voice\r\n  const handleEdit = useCallback((brand) => {\r\n    setFormData({\r\n      nameOfVoice: brand.nameOfVoice || \"\",\r\n      postLink: brand.postLink || \"\",\r\n      keywords: Array.isArray(brand.keywords) ? brand.keywords : [],\r\n      describeBrand: brand.describeBrand || \"\",\r\n      sitemapUrl: brand.sitemap || \"\",\r\n      selectedVoice: brand,\r\n      _id: brand._id,\r\n    });\r\n    setErrors({});\r\n    setLastScrapedUrl(brand.postLink || \"\");\r\n    setIsFormReset(false);\r\n  }, []);\r\n\r\n  // Delete brand voice\r\n  const handleDelete = useCallback(\r\n    (brand) => {\r\n      Modal.confirm({\r\n        title: \"Delete Brand Voice?\",\r\n        content: \"Are you sure you want to delete this brand voice? This action cannot be undone.\",\r\n        okText: \"Delete\",\r\n        cancelText: \"Cancel\",\r\n        okButtonProps: { danger: true },\r\n        onOk: () => {\r\n          dispatch(deleteBrandVoiceThunk({ id: brand._id }))\r\n            .unwrap()\r\n            .then(() => {\r\n              if (formData.selectedVoice?._id === brand._id) {\r\n                resetForm();\r\n                dispatch(resetSiteInfo());\r\n              }\r\n            })\r\n            .catch(() => message.error(\"Failed to delete brand voice.\"));\r\n        },\r\n      });\r\n    },\r\n    [dispatch, formData.selectedVoice, resetForm]\r\n  );\r\n\r\n  // Select brand voice\r\n  const handleSelect = useCallback((voice) => {\r\n    setFormData((prev) => ({ ...prev, selectedVoice: voice }));\r\n    setIsFormReset(false);\r\n  }, []);\r\n\r\n  // Fetch site info\r\n  const handleFetchSiteInfo = useCallback(() => {\r\n    const url = formData.postLink.trim();\r\n    if (!url) {\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        postLink: \"Post link is required to fetch site info.\",\r\n      }));\r\n      return;\r\n    }\r\n    if (url === lastScrapedUrl) {\r\n      message.info(\"This URL has already been fetched.\");\r\n      return;\r\n    }\r\n    try {\r\n      new URL(url);\r\n      dispatch(fetchSiteInfo(url))\r\n        .unwrap()\r\n        .then(() => {\r\n          setIsFormReset(false); // Allow form population\r\n        })\r\n        .catch(() => message.error(\"Failed to fetch site info. Please try a different URL.\"));\r\n    } catch {\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        postLink: \"Please enter a valid URL (e.g., https://example.com).\",\r\n      }));\r\n    }\r\n  }, [formData.postLink, lastScrapedUrl, dispatch]);\r\n\r\n  // Memoized keywords rendering\r\n  const renderKeywords = useMemo(() => {\r\n    const latestKeywords = formData.keywords.slice(-3);\r\n    const remainingCount = formData.keywords.length - latestKeywords.length;\r\n    return (\r\n      <>\r\n        {remainingCount > 0 && (\r\n          <motion.div\r\n            className=\"flex items-center bg-indigo-100 text-indigo-700 rounded-md px-2 py-1 mr-2\"\r\n            initial={{ scale: 0.8 }}\r\n            animate={{ scale: 1 }}\r\n            title={`+${remainingCount} more keywords`}\r\n          >\r\n            <span className=\"text-sm\">{`+${remainingCount}`}</span>\r\n          </motion.div>\r\n        )}\r\n        {latestKeywords.map((keyword) => (\r\n          <motion.div\r\n            key={keyword}\r\n            className=\"flex items-center bg-indigo-100 text-indigo-700 rounded-md px-2 py-1 mr-2\"\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.8 }}\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <span className=\"text-sm truncate max-w-[100px]\">{keyword}</span>\r\n            <FaTimes\r\n              className=\"ml-1 cursor-pointer text-indigo-500 hover:text-indigo-700 transition-colors\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                removeKeyword(keyword);\r\n              }}\r\n              aria-label={`Remove ${keyword}`}\r\n            />\r\n          </motion.div>\r\n        ))}\r\n      </>\r\n    );\r\n  }, [formData.keywords, removeKeyword]);\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      className=\"flex flex-col lg:flex-row gap-6 p-4 lg:p-6 max-w-7xl mx-auto\"\r\n    >\r\n      <Helmet>\r\n        <title>Brand Voice | GenWrite</title>\r\n      </Helmet>\r\n\r\n      {/* Left Section: Form */}\r\n      <motion.div\r\n        className=\"w-full lg:w-[60%] bg-white rounded-xl p-6 shadow-lg border border-gray-100\"\r\n        initial={{ x: -20 }}\r\n        animate={{ x: 0 }}\r\n      >\r\n        <h1 className=\"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2\">\r\n          Create Your Brand Voice\r\n        </h1>\r\n        <p className=\"text-gray-600 text-sm mb-6\">\r\n          Define your brand's unique tone and style to ensure consistent content creation.\r\n        </p>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Post Link */}\r\n          <div>\r\n            <label htmlFor=\"postLink\" className=\"text-sm font-medium text-gray-700 flex gap-2 mb-1\">\r\n              Post or Blog Link <span className=\"text-red-500\">*</span>\r\n              <Tooltip\r\n                title=\"Add a link of your home page to fetch site info\"\r\n                overlayInnerStyle={{\r\n                  backgroundColor: \"#4169e1\",\r\n                  color: \"#fff\",\r\n                  borderRadius: \"8px\",\r\n                  padding: \"8px 12px\",\r\n                  fontSize: \"13px\",\r\n                  maxWidth: \"220px\",\r\n                }}\r\n              >\r\n                <span className=\"cursor-pointer\">\r\n                  <Info size={16} className=\"text-blue-500\" />\r\n                </span>\r\n              </Tooltip>\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <motion.input\r\n                id=\"postLink\"\r\n                type=\"url\"\r\n                name=\"postLink\"\r\n                value={formData.postLink}\r\n                onChange={handleInputChange}\r\n                placeholder=\"e.g., https://example.com/blog\"\r\n                className={`flex-grow p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${\r\n                  errors.postLink ? \"border-red-500\" : \"border-gray-300\"\r\n                }`}\r\n                whileFocus={{ scale: 1.01 }}\r\n                aria-invalid={!!errors.postLink}\r\n                aria-describedby={errors.postLink ? \"postLink-error\" : undefined}\r\n              />\r\n              <motion.button\r\n                className=\"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg font-medium shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                onClick={handleFetchSiteInfo}\r\n                whileHover={{ scale: 1.03 }}\r\n                whileTap={{ scale: 0.98 }}\r\n                disabled={siteInfo.loading || (formData.postLink && formData.postLink === lastScrapedUrl)}\r\n                aria-label=\"Fetch Site Info\"\r\n              >\r\n                {siteInfo.loading ? (\r\n                  <span className=\"flex items-center gap-2\">\r\n                    <Loader2 className=\"animate-spin w-4 h-4\" />\r\n                    Fetching...\r\n                  </span>\r\n                ) : (\r\n                  \"Fetch Site Info\"\r\n                )}\r\n              </motion.button>\r\n            </div>\r\n            {errors.postLink && (\r\n              <p id=\"postLink-error\" className=\"text-red-500 text-xs mt-1\">\r\n                {errors.postLink}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Name of Voice */}\r\n          <div>\r\n            <label\r\n              htmlFor=\"nameOfVoice\"\r\n              className=\"text-sm font-medium text-gray-700 flex gap-2 mb-1\"\r\n            >\r\n              Name of Voice <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <motion.input\r\n              id=\"nameOfVoice\"\r\n              type=\"text\"\r\n              name=\"nameOfVoice\"\r\n              value={formData.nameOfVoice}\r\n              onChange={handleInputChange}\r\n              placeholder=\"e.g., Friendly Tech\"\r\n              className={`w-full p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${\r\n                errors.nameOfVoice ? \"border-red-500\" : \"border-gray-300\"\r\n              }`}\r\n              whileFocus={{ scale: 1.01 }}\r\n              aria-invalid={!!errors.nameOfVoice}\r\n              aria-describedby={errors.nameOfVoice ? \"nameOfVoice-error\" : undefined}\r\n            />\r\n            {errors.nameOfVoice && (\r\n              <p id=\"nameOfVoice-error\" className=\"text-red-500 text-xs mt-1\">\r\n                {errors.nameOfVoice}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Keywords */}\r\n          <div>\r\n            <label htmlFor=\"keywords\" className=\"text-sm font-medium text-gray-700 flex gap-2 mb-1\">\r\n              Keywords <span className=\"text-red-500\">*</span>\r\n              <Tooltip\r\n                title=\"Upload a .csv file in the format: `Keyword` as header\"\r\n                overlayInnerStyle={{\r\n                  backgroundColor: \"#4169e1\",\r\n                  color: \"#fff\",\r\n                  borderRadius: \"8px\",\r\n                  padding: \"8px 12px\",\r\n                  fontSize: \"13px\",\r\n                  maxWidth: \"220px\",\r\n                }}\r\n              >\r\n                <span className=\"cursor-pointer\">\r\n                  <Info size={16} className=\"text-blue-500\" />\r\n                </span>\r\n              </Tooltip>\r\n            </label>\r\n            <motion.div\r\n              className={`flex items-center bg-white border rounded-lg p-2 flex-wrap gap-2 ${\r\n                errors.keywords ? \"border-red-500\" : \"border-gray-300\"\r\n              }`}\r\n              whileHover={{ boxShadow: \"0 0 0 3px rgba(99, 102, 241, 0.2)\" }}\r\n            >\r\n              {renderKeywords}\r\n              <input\r\n                id=\"keywords\"\r\n                type=\"text\"\r\n                value={inputValue}\r\n                onChange={(e) => setInputValue(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                className=\"flex-grow p-2 bg-transparent border-none outline-none text-sm\"\r\n                placeholder=\"Type a keyword and press Enter\"\r\n                aria-describedby={errors.keywords ? \"keywords-error\" : undefined}\r\n              />\r\n              <label htmlFor=\"file-upload\" className=\"flex items-center cursor-pointer\">\r\n                <motion.div\r\n                  className=\"bg-indigo-100 p-2 rounded-lg\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  aria-label=\"Upload CSV file\"\r\n                >\r\n                  <Upload size={20} className=\"text-indigo-600\" />\r\n                </motion.div>\r\n              </label>\r\n              <input\r\n                id=\"file-upload\"\r\n                type=\"file\"\r\n                className=\"hidden\"\r\n                onChange={handleFileChange}\r\n                accept=\".csv\"\r\n              />\r\n            </motion.div>\r\n            {errors.keywords && (\r\n              <p id=\"keywords-error\" className=\"text-red-500 text-xs mt-1\">\r\n                {errors.keywords}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sitemap URL */}\r\n          <div>\r\n            <label\r\n              htmlFor=\"sitemapUrl\"\r\n              className=\"text-sm font-medium text-gray-700 flex gap-2 mb-1\"\r\n            >\r\n              Sitemap URL <span className=\"text-red-500\">*</span>\r\n              <Tooltip\r\n                title=\"Paste the URL of your XML sitemap (e.g., https://example.com/sitemap.xml)\"\r\n                overlayInnerStyle={{\r\n                  backgroundColor: \"#4169e1\",\r\n                  color: \"#fff\",\r\n                  borderRadius: \"8px\",\r\n                  padding: \"8px 12px\",\r\n                  fontSize: \"13px\",\r\n                  maxWidth: \"320px\",\r\n                }}\r\n              >\r\n                <span className=\"cursor-pointer\">\r\n                  <Info size={16} className=\"text-blue-500\" />\r\n                </span>\r\n              </Tooltip>\r\n            </label>\r\n            <motion.input\r\n              id=\"sitemapUrl\"\r\n              type=\"url\"\r\n              name=\"sitemapUrl\"\r\n              value={formData.sitemapUrl}\r\n              onChange={handleInputChange}\r\n              placeholder=\"e.g., https://example.com/sitemap.xml\"\r\n              className={`w-full p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${\r\n                errors.sitemapUrl ? \"border-red-500\" : \"border-gray-300\"\r\n              }`}\r\n              whileFocus={{ scale: 1.01 }}\r\n              aria-invalid={!!errors.sitemapUrl}\r\n              aria-describedby={errors.sitemapUrl ? \"sitemapUrl-error\" : undefined}\r\n            />\r\n            {errors.sitemapUrl && (\r\n              <p id=\"sitemapUrl-error\" className=\"text-red-500 text-xs mt-1\">\r\n                {errors.sitemapUrl}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Brand Description */}\r\n          <div>\r\n            <label\r\n              htmlFor=\"describeBrand\"\r\n              className=\"text-sm font-medium text-gray-700 flex gap-2 mb-1\"\r\n            >\r\n              Describe Your Brand <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <motion.textarea\r\n              id=\"describeBrand\"\r\n              name=\"describeBrand\"\r\n              value={formData.describeBrand}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Describe your brand's tone and personality\"\r\n              className={`w-full p-3 border rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${\r\n                errors.describeBrand ? \"border-red-500\" : \"border-gray-300\"\r\n              }`}\r\n              rows=\"4\"\r\n              whileFocus={{ scale: 1.01 }}\r\n              aria-invalid={!!errors.describeBrand}\r\n              aria-describedby={errors.describeBrand ? \"describeBrand-error\" : undefined}\r\n            />\r\n            {errors.describeBrand && (\r\n              <p id=\"describeBrand-error\" className=\"text-red-500 text-xs mt-1\">\r\n                {errors.describeBrand}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Save Button */}\r\n          <div className=\"text-right\">\r\n            <motion.button\r\n              className=\"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg font-medium shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              onClick={handleSave}\r\n              whileHover={{ scale: 1.03, y: -2 }}\r\n              whileTap={{ scale: 0.98 }}\r\n              disabled={isUploading}\r\n              aria-label={formData._id ? \"Update Brand Voice\" : \"Save Brand Voice\"}\r\n            >\r\n              {isUploading ? (\r\n                <span className=\"flex items-center gap-2\">\r\n                  <Loader2 className=\"animate-spin w-4 h-4\" />\r\n                  Saving...\r\n                </span>\r\n              ) : formData._id ? (\r\n                \"Update Brand Voice\"\r\n              ) : (\r\n                \"Save Brand Voice\"\r\n              )}\r\n            </motion.button>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Right Section: Brand Voices List */}\r\n      <motion.div\r\n        className=\"w-full lg:w-[40%] bg-white rounded-xl p-6 shadow-lg border border-gray-100\"\r\n        initial={{ x: 20 }}\r\n        animate={{ x: 0 }}\r\n      >\r\n        <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Your Brand Voices</h2>\r\n        <div className=\"space-y-3 overflow-y-auto max-h-[calc(100vh-200px)]\">\r\n          {brands.length > 0 ? (\r\n            brands.map((item) => (\r\n              <YourVoicesComponent\r\n                key={item._id}\r\n                id={item._id}\r\n                brandName={item.nameOfVoice}\r\n                brandVoice={item.describeBrand}\r\n                onSelect={() => handleSelect(item)}\r\n                isSelected={formData.selectedVoice?._id === item._id}\r\n                onEdit={(e) => {\r\n                  e.stopPropagation();\r\n                  handleEdit(item);\r\n                }}\r\n                onDelete={(e) => {\r\n                  e.stopPropagation();\r\n                  handleDelete(item);\r\n                }}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"p-6 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 text-center text-gray-500 text-sm\">\r\n              No brand voices created yet. Start by adding one on the left.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst YourVoicesComponent = ({\r\n  id,\r\n  brandName,\r\n  brandVoice,\r\n  onSelect,\r\n  isSelected,\r\n  onEdit,\r\n  onDelete,\r\n}) => {\r\n  return (\r\n    <motion.div\r\n      className={`p-4 mt-2 rounded-xl cursor-pointer transition-all ${\r\n        isSelected\r\n          ? \"bg-gradient-to-r from-indigo-100 to-purple-100 border-2 border-indigo-300 shadow-md\"\r\n          : \"bg-white border border-gray-200 hover:bg-gray-50\"\r\n      }`}\r\n      onClick={onSelect}\r\n      whileHover={{\r\n        y: -2,\r\n        boxShadow: \"0 4px 15px rgba(99, 64, 241, 0.1)\",\r\n      }}\r\n      whileTap={{ scale: 0.98 }}\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.2 }}\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\" || e.key === \" \") {\r\n          e.preventDefault();\r\n          onSelect();\r\n        }\r\n      }}\r\n      aria-label={`Select ${brandName} brand voice`}\r\n    >\r\n      <div className=\"flex justify-between items-center\">\r\n        <h3\r\n          className={`font-medium text-sm ${\r\n            isSelected ? \"text-indigo-700\" : \"text-gray-700\"\r\n          } truncate max-w-[70%]`}\r\n        >\r\n          {brandName}\r\n        </h3>\r\n        <div className=\"flex space-x-2\">\r\n          <motion.button\r\n            className=\"text-indigo-500 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-300 rounded\"\r\n            whileHover={{ scale: 1.1 }}\r\n            whileTap={{ scale: 0.9 }}\r\n            onClick={onEdit}\r\n            aria-label={`Edit ${brandName}`}\r\n            title=\"Edit\"\r\n          >\r\n            <FaEdit className=\"w-4 h-4\" />\r\n          </motion.button>\r\n          <motion.button\r\n            className=\"text-gray-500 hover:text-red-400 focus:outline-none focus:ring-2 focus:ring-red-300 rounded\"\r\n            whileHover={{ scale: 1.1 }}\r\n            whileTap={{ scale: 0.9 }}\r\n            onClick={onDelete}\r\n            aria-label={`Delete ${brandName}`}\r\n            title=\"Delete\"\r\n          >\r\n            <img src=\"/Images/trash.png\" alt=\"Delete\" className=\"w-4 h-4\" />\r\n          </motion.button>\r\n        </div>\r\n      </div>\r\n      <p className=\"text-xs text-gray-600 mt-1 line-clamp-3\">{brandVoice}</p>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default BrandVoice;"],"names":["BrandVoice","user","useSelector","state","dispatch","useDispatch","inputValue","setInputValue","useState","isUploading","setIsUploading","formData","setFormData","errors","setErrors","brands","siteInfo","lastScrapedUrl","setLastScrapedUrl","isFormReset","setIsFormReset","useEffect","fetchBrands","prev","__spreadProps","__spreadValues","resetForm","resetSiteInfo","message","useCallback","validateForm","newErrors","e","handleInputChange","name","value","handleKeyDown","event","existing","k","seen","newKeywords","lower","removeKeyword","keyword","handleFileChange","file","maxSizeInBytes","reader","keywords","kw","handleSave","__async","payload","updateBrandVoiceThunk","createBrandVoiceThunk","error","handleEdit","brand","handleDelete","Modal","deleteBrandVoiceThunk","_a","handleSelect","voice","handleFetchSiteInfo","url","fetchSiteInfo","renderKeywords","useMemo","latestKeywords","remainingCount","jsxs","Fragment","jsx","motion","FaTimes","Helmet","Tooltip","Info","Loader2","Upload","item","YourVoicesComponent","id","brandName","brandVoice","onSelect","isSelected","onEdit","onDelete","FaEdit"],"mappings":"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"}