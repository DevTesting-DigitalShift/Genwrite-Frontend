var _=Object.defineProperty,q=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var N=(t,s,a)=>s in t?_(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,w=(t,s)=>{for(var a in s||(s={}))G.call(s,a)&&N(t,a,s[a]);if(v)for(var a of v(s))Q.call(s,a)&&N(t,a,s[a]);return t},k=(t,s)=>q(t,B(s));var S=(t,s,a)=>new Promise((c,u)=>{var m=o=>{try{d(a.next(o))}catch(i){u(i)}},n=o=>{try{d(a.throw(o))}catch(i){u(i)}},d=o=>o.done?c(o.value):Promise.resolve(o.value).then(m,n);d((a=a.apply(t,s)).next())});import{r as l,W as $,j as e,B as A}from"./index-54BNsocf.js";import{s as H,g as R}from"./imageGalleryApi-KE03i0Rs.js";import{l as T}from"./lodash-DmQYlH4Z.js";import{S as W}from"./search-Duo5aQYD.js";import{I as D}from"./image-DnJdZtLH.js";import{C as J}from"./check-DSf9KE5g.js";const K=({count:t=12})=>{const s=["aspect-[3/4]","aspect-[4/5]","aspect-square","aspect-[2/3]","aspect-[5/6]"];return e.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-4 space-y-4",children:Array.from({length:t}).map((a,c)=>e.jsx("div",{className:"break-inside-avoid rounded-xl overflow-hidden bg-gray-100 animate-pulse",children:e.jsx("div",{className:`w-full ${s[c%s.length]} bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_200%] animate-shimmer`})},c))})},se=({onSelect:t,selectedImageUrl:s})=>{const[a,c]=l.useState([]),[u,m]=l.useState(!1),[n,d]=l.useState(""),[o,i]=l.useState(1),[p]=l.useState(20),[C,I]=l.useState(!0),[x,f]=l.useState(!1),b=l.useCallback((r=1,z=!1)=>S(null,null,function*(){r===1?m(!0):f(!0);try{const g={page:r,limit:p};let h;n.trim()?h=yield H(k(w({},g),{q:n})):h=yield R(g);const y=h.data||[],j=h.pagination||{};c(z?F=>[...F,...y]:y),I(j.page<j.totalPages)}catch(g){console.error("Error fetching images:",g),$.error("Failed to load images")}finally{m(!1),f(!1)}}),[p,n]);l.useEffect(()=>{i(1),c([]),b(1,!1)},[n]);const M=l.useCallback(T.debounce(r=>{d(r)},500),[]),E=r=>{M(r.target.value)},L=r=>{t&&t(r.url,r.description||"")},P=()=>{const r=o+1;i(r),b(r,!0)};return e.jsxs(e.Fragment,{children:[e.jsx("style",{jsx:!0,global:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #555;
        }
      `}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search images...",onChange:E,className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:u&&a.length===0?e.jsx(K,{count:12}):a.length===0?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center",children:[e.jsx(D,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-3 md:gap-4 space-y-3 md:space-y-4",children:a.map(r=>e.jsxs("div",{className:`break-inside-avoid relative group rounded-lg md:rounded-xl overflow-hidden cursor-pointer bg-gray-100 transition-all ${s===r.url?"ring-4 ring-blue-500 ring-offset-2":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>L(r),children:[e.jsx("img",{src:r.url,alt:r.description,className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),s===r.url&&e.jsx("div",{className:"absolute top-2 right-2 p-2 bg-blue-600 rounded-full shadow-lg",children:e.jsx(J,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-3 md:p-4",children:e.jsx("p",{className:"text-white text-xs md:text-sm line-clamp-2 font-medium",children:r.description})})]},r._id))}),C&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(A,{onClick:P,loading:x,size:"large",className:"px-6 md:px-8 rounded-lg w-full sm:w-auto",children:x?"Loading...":"Load More"})})]})})]})]})};export{se as I};
