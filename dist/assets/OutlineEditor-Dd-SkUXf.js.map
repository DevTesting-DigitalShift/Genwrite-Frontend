{"version":3,"file":"OutlineEditor-Dd-SkUXf.js","sources":["../../src/pages/OutlineEditor.jsx"],"sourcesContent":["import Carousel from \"@components/multipleStepModal/Carousel\"\r\nimport { packages } from \"@constants/templates\"\r\nimport { createOutlineThunk } from \"@store/slices/otherSlice\"\r\nimport { Empty, Input, Select, Modal } from \"antd\"\r\nimport { Bold, Italic, List, Plus, Sparkles, X } from \"lucide-react\"\r\nimport React, { useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useQuery } from \"@tanstack/react-query\"\r\nimport { fetchBrands } from \"@store/slices/brandSlice\"\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\nconst { Option } = Select\r\n\r\nconst OutlineEditor = () => {\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n  const [currentStep, setCurrentStep] = useState(0)\r\n  const [selectedTemplate, setSelectedTemplate] = useState(null)\r\n  const [showAllKeywords, setShowAllKeywords] = useState(false)\r\n  const [isOpen, setIsOpen] = useState(true)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    topic: \"\",\r\n    tone: \"Informative\",\r\n    focusKeywords: [],\r\n    keywords: [],\r\n    userDefinedLength: 1200,\r\n    focusKeywordInput: \"\",\r\n    keywordInput: \"\",\r\n    template: \"\",\r\n    brandId: null,\r\n    resources: [],\r\n    resourceInput: \"\",\r\n  })\r\n  const [errors, setErrors] = useState({\r\n    title: false,\r\n    topic: false,\r\n    tone: false,\r\n    focusKeywords: false,\r\n    keywords: false,\r\n    template: false,\r\n    resources: false,\r\n  })\r\n  const [markdownContent, setMarkdownContent] = useState(null)\r\n\r\n  const {\r\n    data: brands = [],\r\n    isLoading: loadingBrands,\r\n    error: brandError,\r\n  } = useQuery({\r\n    queryKey: [\"brands\"],\r\n    queryFn: fetchBrands,\r\n    enabled: formData.isCheckedBrand,\r\n    staleTime: 5 * 60 * 1000,\r\n    cacheTime: 10 * 60 * 1000,\r\n  })\r\n\r\n  console.log({ brands })\r\n  console.log({ brandError })\r\n\r\n  const handleClose = () => {\r\n    setIsOpen(false)\r\n    navigate(\"/toolbox\")\r\n  }\r\n\r\n  const handlePrev = () => {\r\n    setCurrentStep((prev) => prev - 1)\r\n  }\r\n\r\n  const handleNext = () => {\r\n    let newErrors = {}\r\n\r\n    if (currentStep === 0) {\r\n      if (!selectedTemplate) {\r\n        newErrors.template = true\r\n        setErrors((prev) => ({ ...prev, ...newErrors }))\r\n        return\r\n      }\r\n    }\r\n\r\n    if (currentStep === 1) {\r\n      newErrors = {\r\n        title: !formData.title.trim(),\r\n        topic: !formData.topic.trim(),\r\n        tone: !formData.tone,\r\n        focusKeywords: formData.focusKeywords.length === 0,\r\n        keywords: formData.keywords.length === 0,\r\n      }\r\n      if (Object.values(newErrors).some((error) => error)) {\r\n        setErrors((prev) => ({ ...prev, ...newErrors }))\r\n        return\r\n      }\r\n    }\r\n\r\n    setErrors((prev) => ({ ...prev, ...newErrors, template: false }))\r\n    setCurrentStep((prev) => prev + 1)\r\n  }\r\n\r\n  const handlePackageSelect = (index) => {\r\n    setSelectedTemplate(packages[index].name)\r\n    setFormData((prev) => ({ ...prev, template: packages[index].name }))\r\n    setErrors((prev) => ({ ...prev, template: false }))\r\n  }\r\n\r\n  const handleInputChange = (e, key) => {\r\n    setFormData((prev) => ({ ...prev, [key]: e.target.value }))\r\n    setErrors((prev) => ({ ...prev, [key]: false }))\r\n  }\r\n\r\n  const handleSelectChange = (value) => {\r\n    setFormData((prev) => ({ ...prev, tone: value }))\r\n    setErrors((prev) => ({ ...prev, tone: false }))\r\n  }\r\n\r\n  const handleKeywordInputChange = (e, type) => {\r\n    const key =\r\n      type === \"keywords\"\r\n        ? \"keywordInput\"\r\n        : type === \"focusKeywords\"\r\n        ? \"focusKeywordInput\"\r\n        : \"resourceInput\"\r\n    setFormData((prev) => ({ ...prev, [key]: e.target.value }))\r\n    setErrors((prev) => ({ ...prev, [type]: false }))\r\n  }\r\n\r\n  const handleAddKeyword = (type) => {\r\n    const inputKey =\r\n      type === \"keywords\"\r\n        ? \"keywordInput\"\r\n        : type === \"focusKeywords\"\r\n        ? \"focusKeywordInput\"\r\n        : \"resourceInput\"\r\n    const inputValue = formData[inputKey].trim()\r\n\r\n    if (!inputValue) {\r\n      setErrors((prev) => ({ ...prev, [type]: true }))\r\n      return\r\n    }\r\n\r\n    const existingSet = new Set(formData[type].map((k) => k.trim().toLowerCase()))\r\n    const newItems = inputValue\r\n      .split(\",\")\r\n      .map((k) => k.trim())\r\n      .filter((k) => k && !existingSet.has(k.toLowerCase()))\r\n\r\n    if (newItems.length === 0) {\r\n      setErrors((prev) => ({ ...prev, [type]: true }))\r\n      return\r\n    }\r\n\r\n    if (type === \"focusKeywords\" && formData[type].length + newItems.length > 3) {\r\n      setErrors((prev) => ({ ...prev, [type]: true }))\r\n      return\r\n    }\r\n\r\n    if (type === \"resources\" && formData[type].length + newItems.length > 4) {\r\n      setErrors((prev) => ({ ...prev, [type]: true }))\r\n      return\r\n    }\r\n\r\n    if (type === \"resources\") {\r\n      const invalidUrls = newItems.filter((url) => {\r\n        try {\r\n          new URL(url)\r\n          return false\r\n        } catch {\r\n          return true\r\n        }\r\n      })\r\n      if (invalidUrls.length > 0) {\r\n        setErrors((prev) => ({ ...prev, [type]: true }))\r\n        return\r\n      }\r\n    }\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [type]: [...prev[type], ...newItems],\r\n      [inputKey]: \"\",\r\n    }))\r\n    setErrors((prev) => ({ ...prev, [type]: false }))\r\n  }\r\n\r\n  const handleRemoveKeyword = (index, type) => {\r\n    const updatedItems = [...formData[type]]\r\n    updatedItems.splice(index, 1)\r\n    setFormData({ ...formData, [type]: updatedItems })\r\n  }\r\n\r\n  const handleKeyPress = (e, type) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault()\r\n      handleAddKeyword(type)\r\n    }\r\n  }\r\n\r\n  const handleBrandSelect = (brandId) => {\r\n    setFormData((prev) => ({ ...prev, brandId }))\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true)\r\n    const selectedBrand = brands.find((brand) => brand._id === formData.brandId)\r\n    const blogData = {\r\n      title: formData.title?.trim(),\r\n      topic: formData.topic?.trim(),\r\n      tone: formData.tone?.trim(),\r\n      focusKeywords: formData.focusKeywords,\r\n      keywords: formData.keywords,\r\n      wordsLimit: Number(formData.userDefinedLength),\r\n      template: formData.template,\r\n      brandData: selectedBrand\r\n        ? {\r\n            name: selectedBrand.nameOfVoice,\r\n            audience: selectedBrand.describeBrand,\r\n            values: selectedBrand.keywords,\r\n          }\r\n        : null,\r\n      resources: formData.resources,\r\n    }\r\n\r\n    const newErrors = {\r\n      title: !blogData.title,\r\n      topic: !blogData.topic,\r\n      tone: !blogData.tone,\r\n      template: !blogData.template,\r\n      focusKeywords: !blogData.focusKeywords || blogData.focusKeywords.length === 0,\r\n      keywords: !blogData.keywords || blogData.keywords.length === 0,\r\n    }\r\n\r\n    if (Object.values(newErrors).some((error) => error)) {\r\n      setErrors((prev) => ({ ...prev, ...newErrors }))\r\n      setCurrentStep(1)\r\n      setIsSubmitting(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await dispatch(createOutlineThunk(blogData)).unwrap()\r\n      setMarkdownContent(response)\r\n      setIsOpen(false)\r\n    } catch (err) {\r\n      console.error(\"Failed to create blog:\", err)\r\n      message.error(err?.message || \"Failed to create blog\")\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const handleExportMarkdown = () => {\r\n    if (!markdownContent) return\r\n    const blob = new Blob([markdownContent], { type: \"text/markdown\" })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement(\"a\")\r\n    a.href = url\r\n    a.download = `${formData.title || \"blog-outline\"}.md`\r\n    a.click()\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  const handleContentChange = (e) => {\r\n    setMarkdownContent(e.target.value)\r\n  }\r\n\r\n  const handleFormat = (format) => {\r\n    const textarea = document.getElementById(\"outline-editor\")\r\n    const start = textarea.selectionStart\r\n    const end = textarea.selectionEnd\r\n    const selectedText = markdownContent.substring(start, end)\r\n    let newText = markdownContent\r\n\r\n    if (format === \"bold\") {\r\n      newText =\r\n        markdownContent.substring(0, start) + `**${selectedText}**` + markdownContent.substring(end)\r\n    } else if (format === \"italic\") {\r\n      newText =\r\n        markdownContent.substring(0, start) + `*${selectedText}*` + markdownContent.substring(end)\r\n    } else if (format === \"list\") {\r\n      const lines = selectedText.split(\"\\n\").filter((line) => line.trim())\r\n      const formattedLines = lines.map((line) => `- ${line.trim()}`).join(\"\\n\")\r\n      newText =\r\n        markdownContent.substring(0, start) + formattedLines + markdownContent.substring(end)\r\n    }\r\n\r\n    setMarkdownContent(newText)\r\n  }\r\n\r\n  const isImageUrl = (url) => {\r\n    const imageExtensions = [\".png\", \".jpg\", \".jpeg\", \".gif\", \".webp\"]\r\n    try {\r\n      const urlObj = new URL(url)\r\n      return imageExtensions.some((ext) => urlObj.pathname.toLowerCase().endsWith(ext))\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n\r\n  const visibleKeywords = showAllKeywords ? formData.keywords : formData.keywords.slice(0, 18)\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        title={\r\n          currentStep === 0\r\n            ? \"Select Template\"\r\n            : currentStep === 1\r\n            ? \"Tell us about your blog, we'll outline it for you!\"\r\n            : \"Brand Voice & Resources\"\r\n        }\r\n        open={isOpen}\r\n        onCancel={handleClose}\r\n        footer={\r\n          currentStep === 0\r\n            ? [\r\n                <button\r\n                  key=\"next\"\r\n                  onClick={handleNext}\r\n                  className=\"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90\"\r\n                  aria-label=\"Proceed to next step\"\r\n                >\r\n                  Next\r\n                </button>,\r\n              ]\r\n            : currentStep === 1\r\n            ? [\r\n                <button\r\n                  key=\"previous\"\r\n                  onClick={handlePrev}\r\n                  className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300\"\r\n                  aria-label=\"Go to previous step\"\r\n                >\r\n                  Previous\r\n                </button>,\r\n                <button\r\n                  key=\"next\"\r\n                  onClick={handleNext}\r\n                  className=\"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 ml-3\"\r\n                  aria-label=\"Proceed to brand and resources\"\r\n                >\r\n                  Next\r\n                </button>,\r\n              ]\r\n            : currentStep === 2\r\n            ? [\r\n                <button\r\n                  key=\"previous\"\r\n                  onClick={handlePrev}\r\n                  className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300\"\r\n                  aria-label=\"Go to previous step\"\r\n                >\r\n                  Previous\r\n                </button>,\r\n                <button\r\n                  key=\"submit\"\r\n                  onClick={handleSubmit}\r\n                  className=\"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 ml-3 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  disabled={isSubmitting}\r\n                  aria-label=\"Submit blog\"\r\n                >\r\n                  {isSubmitting ? \"Submitting...\" : \"Submit\"}\r\n                </button>,\r\n              ]\r\n            : [\r\n                <button\r\n                  key=\"export\"\r\n                  onClick={handleExportMarkdown}\r\n                  className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\"\r\n                  aria-label=\"Export as Markdown\"\r\n                >\r\n                  Export as Markdown\r\n                </button>,\r\n                <button\r\n                  key=\"close\"\r\n                  onClick={handleClose}\r\n                  className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 ml-3\"\r\n                  aria-label=\"Close modal\"\r\n                >\r\n                  Close\r\n                </button>,\r\n              ]\r\n        }\r\n        width={800}\r\n        centered\r\n        bodyStyle={{ background: \"rgba(255, 255, 255, 0.95)\", backdropFilter: \"blur(8px)\" }}\r\n        maskStyle={{ background: \"rgba(0, 0, 0, 0.5)\", backdropFilter: \"blur(4px)\" }}\r\n      >\r\n        <div className=\"p-2\">\r\n          {currentStep === 0 && (\r\n            <div className=\"p-3\">\r\n              <Carousel>\r\n                {packages.map((pkg, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`cursor-pointer transition-all duration-200 ${\r\n                      selectedTemplate === pkg.name ? \"border-blue-600 border-2 rounded-lg\" : \"\"\r\n                    }`}\r\n                    onClick={() => handlePackageSelect(index)}\r\n                  >\r\n                    <div className=\"bg-white rounded-lg overflow-hidden shadow-sm\">\r\n                      <div className=\"relative\">\r\n                        <img\r\n                          src={pkg.imgSrc || \"/placeholder.svg\"}\r\n                          alt={pkg.name}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"p-2 mt-2\">\r\n                        <h3 className=\"font-medium text-gray-900 mb-1\">{pkg.name}</h3>\r\n                        <p className=\"text-sm text-gray-500 line-clamp-2\">{pkg.description}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </Carousel>\r\n              {errors.template && (\r\n                <p className=\"text-red-500 text-sm mt-2\">Please select a template.</p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {currentStep === 1 && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Topic <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <Input\r\n                  value={formData.topic}\r\n                  onChange={(e) => handleInputChange(e, \"topic\")}\r\n                  placeholder=\"Enter blog topic...\"\r\n                  className={`w-full px-3 py-2 border ${\r\n                    errors.topic ? \"border-red-500\" : \"border-gray-200\"\r\n                  } rounded-md text-sm focus:ring-2 focus:ring-blue-600`}\r\n                  aria-label=\"Blog topic\"\r\n                />\r\n                {errors.topic && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">Topic cannot be empty.</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Tone <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <Select\r\n                  value={formData.tone}\r\n                  onChange={handleSelectChange}\r\n                  className={`w-full ${errors.tone ? \"border-red-500\" : \"\"}`}\r\n                  aria-label=\"Blog tone\"\r\n                  placeholder=\"Select tone\"\r\n                >\r\n                  <Option value=\"Informative\">Informative</Option>\r\n                  <Option value=\"Casual\">Casual</Option>\r\n                  <Option value=\"Professional\">Professional</Option>\r\n                  <Option value=\"Persuasive\">Persuasive</Option>\r\n                  <Option value=\"Humorous\">Humorous</Option>\r\n                </Select>\r\n                {errors.tone && <p className=\"text-red-500 text-sm mt-1\">Please select a tone.</p>}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Focus Keywords (max 3) <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    value={formData.focusKeywordInput}\r\n                    onChange={(e) => handleKeywordInputChange(e, \"focusKeywords\")}\r\n                    onKeyDown={(e) => handleKeyPress(e, \"focusKeywords\")}\r\n                    placeholder=\"Enter focus keywords, separated by commas\"\r\n                    className={`flex-1 px-3 py-2 border ${\r\n                      errors.focusKeywords ? \"border-red-500\" : \"border-gray-200\"\r\n                    } rounded-md text-sm focus:ring-2 focus:ring-blue-600`}\r\n                    aria-label=\"Focus keywords\"\r\n                  />\r\n                  <button\r\n                    onClick={() => handleAddKeyword(\"focusKeywords\")}\r\n                    className=\"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center\"\r\n                    aria-label=\"Add focus keyword\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                  {formData.focusKeywords.map((keyword, index) => (\r\n                    <span\r\n                      key={index}\r\n                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700\"\r\n                    >\r\n                      {keyword}\r\n                      <button\r\n                        onClick={() => handleRemoveKeyword(index, \"focusKeywords\")}\r\n                        className=\"ml-1 text-blue-400 hover:text-blue-600\"\r\n                        aria-label={`Remove focus keyword ${keyword}`}\r\n                      >\r\n                        <X size={16} />\r\n                      </button>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                {errors.focusKeywords && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">\r\n                    At least one focus keyword is required (max 3).\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Keywords <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    value={formData.keywordInput}\r\n                    onChange={(e) => handleKeywordInputChange(e, \"keywords\")}\r\n                    onKeyDown={(e) => handleKeyPress(e, \"keywords\")}\r\n                    placeholder=\"Enter secondary keywords, separated by commas\"\r\n                    className={`flex-1 px-3 py-2 border ${\r\n                      errors.keywords ? \"border-red-500\" : \"border-gray-200\"\r\n                    } rounded-md text-sm focus:ring-2 focus:ring-blue-600`}\r\n                    aria-label=\"Secondary keywords\"\r\n                  />\r\n                  <button\r\n                    onClick={() => handleAddKeyword(\"keywords\")}\r\n                    className=\"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center\"\r\n                    aria-label=\"Add keyword\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                  {visibleKeywords.map((keyword, index) => (\r\n                    <span\r\n                      key={`${keyword}-${index}`}\r\n                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700\"\r\n                    >\r\n                      {keyword}\r\n                      <button\r\n                        onClick={() => handleRemoveKeyword(index, \"keywords\")}\r\n                        className=\"ml-1 text-blue-400 hover:text-blue-600\"\r\n                        aria-label={`Remove keyword ${keyword}`}\r\n                      >\r\n                        <X size={16} />\r\n                      </button>\r\n                    </span>\r\n                  ))}\r\n                  {formData.keywords.length > 18 && (\r\n                    <span\r\n                      onClick={() => setShowAllKeywords((prev) => !prev)}\r\n                      className=\"text-xs font-medium text-blue-600 self-center cursor-pointer flex items-center gap-1\"\r\n                    >\r\n                      {showAllKeywords ? (\r\n                        <>Show less</>\r\n                      ) : (\r\n                        <>+{formData.keywords.length - 18} more</>\r\n                      )}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                {errors.keywords && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">At least one keyword is required.</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Title <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"flex gap-4\">\r\n                  <Input\r\n                    value={formData.title}\r\n                    onChange={(e) => handleInputChange(e, \"title\")}\r\n                    placeholder=\"Enter blog title...\"\r\n                    className={`w-full px-3 flex-1 py-2 border ${\r\n                      errors.title ? \"border-red-500\" : \"border-gray-200\"\r\n                    } rounded-md text-sm focus:ring-2 focus:ring-blue-600`}\r\n                    aria-label=\"Blog title\"\r\n                  />\r\n                </div>\r\n                {errors.title && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">Title cannot be empty.</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Choose length of Blog <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"500\"\r\n                  max=\"5000\"\r\n                  value={formData.userDefinedLength ?? 1000}\r\n                  onChange={(e) => handleInputChange(e, \"userDefinedLength\")}\r\n                  placeholder=\"Enter desired word count...\"\r\n                  className=\"w-full h-1 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#1B6FC9]\"\r\n                  style={{\r\n                    background: `linear-gradient(to right, #1B6FC9 ${\r\n                      ((formData?.userDefinedLength ?? 1000) - 500) / 45\r\n                    }%, #e5e7eb 0%)`,\r\n                  }}\r\n                  aria-label=\"Desired word count\"\r\n                />\r\n                <span className=\"mt-2 text-sm text-gray-600 block\">\r\n                  {formData?.userDefinedLength ?? 1000} words\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {currentStep === 2 && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Select Brand Voice\r\n                </label>\r\n                <div className=\"mt-3 p-4 rounded-md border border-gray-200 bg-gray-50\">\r\n                  {brands?.length > 0 ? (\r\n                    <div className=\"max-h-48 overflow-y-auto pr-1\">\r\n                      <div className=\"grid gap-3\">\r\n                        {brands.map((voice) => (\r\n                          <label\r\n                            key={voice._id}\r\n                            className={`flex items-start gap-2 p-3 rounded-md cursor-pointer ${\r\n                              formData.brandId === voice._id\r\n                                ? \"bg-blue-100 border-blue-300\"\r\n                                : \"bg-white border border-gray-200\"\r\n                            }`}\r\n                          >\r\n                            <input\r\n                              type=\"radio\"\r\n                              name=\"selectedBrandVoice\"\r\n                              value={voice._id}\r\n                              checked={formData.brandId === voice._id}\r\n                              onChange={() => handleBrandSelect(voice._id)}\r\n                              className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-600\"\r\n                            />\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"font-medium text-gray-700\">{voice.nameOfVoice}</div>\r\n                              <p className=\"text-sm text-gray-600 mt-1\">{voice.describeBrand}</p>\r\n                            </div>\r\n                          </label>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-gray-500 text-sm italic\">\r\n                      <Empty /> No brand voices available. Create one to get started.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Resource Links (max 4)\r\n                </label>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    value={formData.resourceInput}\r\n                    onChange={(e) => handleKeywordInputChange(e, \"resources\")}\r\n                    onKeyDown={(e) => handleKeyPress(e, \"resources\")}\r\n                    placeholder=\"Enter resource links (YouTube or others), separated by commas\"\r\n                    className={`flex-1 px-3 py-2 border ${\r\n                      errors.resources ? \"border-red-500\" : \"border-gray-200\"\r\n                    } rounded-md text-sm focus:ring-2 focus:ring-blue-600`}\r\n                    aria-label=\"Resource links\"\r\n                  />\r\n                  <button\r\n                    onClick={() => handleAddKeyword(\"resources\")}\r\n                    className=\"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center\"\r\n                    aria-label=\"Add resource link\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                  {formData.resources.map((resource, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700\"\r\n                    >\r\n                      {isImageUrl(resource) ? (\r\n                        <img\r\n                          src={resource}\r\n                          alt={`Resource ${index + 1}`}\r\n                          className=\"h-16 w-auto object-contain rounded mr-2 hover:opacity-80 transition-opacity\"\r\n                        />\r\n                      ) : (\r\n                        <a\r\n                          href={resource}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-blue-700 hover:underline mr-2 truncate max-w-[150px]\"\r\n                        >\r\n                          {resource}\r\n                        </a>\r\n                      )}\r\n                      <button\r\n                        onClick={() => handleRemoveKeyword(index, \"resources\")}\r\n                        className=\"ml-1 text-blue-400 hover:text-blue-600\"\r\n                        aria-label={`Remove resource ${resource}`}\r\n                      >\r\n                        <X size={16} />\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                {errors.resources && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">\r\n                    Please enter valid resource links (max 4).\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {currentStep === 3 && (\r\n            <div className=\"p-4 bg-white rounded-lg shadow-sm\">\r\n              <h2 className=\"text-lg font-semibold text-gray-800 mb-4\">Generated Blog Outline</h2>\r\n              {markdownContent ? (\r\n                <div\r\n                  className=\"prose prose-sm max-w-none text-gray-700\"\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: markdownContent\r\n                      .replace(/^#+\\s+/gm, (match) => `<h${match.length}>`)\r\n                      .replace(/\\n/gm, \"<br>\")\r\n                      .replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\")\r\n                      .replace(/\\*(.*?)\\*/g, \"<em>$1</em>\")\r\n                      .replace(/^- (.*)$/gm, \"<li>$1</li>\")\r\n                      .replace(/(<li>.*<\\/li>)/g, \"<ul>$1</ul>\"),\r\n                  }}\r\n                />\r\n              ) : (\r\n                <p className=\"text-gray-500 text-sm\">No content available to display.</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n      <div className=\"rounded-lg p-6 min-h-[600px] flex flex-col\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r mb-2 from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n            Blog Outline Editor\r\n          </h1>\r\n          <button\r\n            onClick={handleExportMarkdown}\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium flex items-center gap-2\"\r\n            aria-label=\"Export as Markdown\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              className=\"h-5 w-5\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n              />\r\n            </svg>\r\n            Export as Markdown\r\n          </button>\r\n        </div>\r\n        {markdownContent ? (\r\n          <div className=\"flex-1 flex space-x-4\">\r\n            <div className=\"w-1/2\">\r\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-3 px-3 tracking-wide\">\r\n                Preview\r\n              </h3>\r\n              <div className=\"w-full h-screen p-4 border border-gray-200 rounded-lg bg-white overflow-y-auto prose prose-sm max-w-none text-gray-700 shadow-sm\">\r\n                <div\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: markdownContent\r\n                      .replace(/^#+\\s+/gm, (match) => `<h${match.length}>`)\r\n                      .replace(/\\n/gm, \"<br>\")\r\n                      .replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\")\r\n                      .replace(/\\*(.*?)\\*/g, \"<em>$1</em>\")\r\n                      .replace(/^- (.*)$/gm, \"<li>$1</li>\")\r\n                      .replace(/(<li>.*<\\/li>)/g, \"<ul>$1</ul>\")\r\n                      .replace(/^(<h[1-6]>.*<\\/h[1-6]>)$/gm, '<div class=\"mt-4\">$1</div>')\r\n                      .replace(/^(<ul>.*<\\/ul>)$/gm, '<div class=\"mt-2\">$1</div>'),\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"w-1/2\">\r\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-3 px-3 tracking-wide\">\r\n                Edit Your Blog Outline\r\n              </h3>\r\n              <textarea\r\n                id=\"outline-editor\"\r\n                value={markdownContent}\r\n                onChange={handleContentChange}\r\n                className=\"w-full h-screen p-4 border border-gray-200 rounded-lg text-sm font-mono bg-white focus:ring-2 focus:ring-blue-600 resize-none shadow-sm\"\r\n                aria-label=\"Edit blog outline\"\r\n                placeholder=\"Edit your blog outline here...\"\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex-1 flex items-center justify-center\">\r\n            <p className=\"text-gray-500 text-sm\">No content available to display.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OutlineEditor\r\n"],"names":["Option","Select","OutlineEditor","dispatch","useDispatch","navigate","useNavigate","currentStep","setCurrentStep","useState","selectedTemplate","setSelectedTemplate","showAllKeywords","setShowAllKeywords","isOpen","setIsOpen","isSubmitting","setIsSubmitting","formData","setFormData","errors","setErrors","markdownContent","setMarkdownContent","brands","loadingBrands","brandError","useQuery","fetchBrands","handleClose","handlePrev","prev","handleNext","newErrors","__spreadValues","error","__spreadProps","handlePackageSelect","index","packages","handleInputChange","e","key","handleSelectChange","value","handleKeywordInputChange","type","handleAddKeyword","inputKey","inputValue","existingSet","k","newItems","url","handleRemoveKeyword","updatedItems","handleKeyPress","handleBrandSelect","brandId","handleSubmit","__async","selectedBrand","brand","blogData","_a","_b","_c","response","createOutlineThunk","err","handleExportMarkdown","blob","a","handleContentChange","isImageUrl","imageExtensions","urlObj","ext","visibleKeywords","jsx","Modal","jsxs","Carousel","pkg","Input","Plus","keyword","X","Fragment","voice","Empty","resource","match"],"mappings":"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"}