var w=Object.defineProperty,p=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var m=(s,e,r)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,d=(s,e)=>{for(var r in e||(e={}))A.call(e,r)&&m(s,r,e[r]);if(f)for(var r of f(e))K.call(e,r)&&m(s,r,e[r]);return s},u=(s,e)=>p(s,h(e));var y=(s,e,r)=>new Promise((l,o)=>{var i=a=>{try{n(r.next(a))}catch(t){o(t)}},c=a=>{try{n(r.throw(a))}catch(t){o(t)}},n=a=>a.done?l(a.value):Promise.resolve(a.value).then(i,c);n((r=r.apply(s,e)).next())});import{d as v}from"./useAuthStore-CU2rUJjR.js";import{f as R,a as S,r as k}from"./analysisApi-DM6-hWp4.js";import{s as g}from"./antd-8WQTeuab.js";import{c as C}from"./react-wNxFir7h.js";const G=C(v(s=>({keywordAnalysis:[],suggestions:[],loading:!1,analysisResult:{},error:null,selectedKeywords:[],setAnalysisResult:(e,r)=>s(l=>({analysisResult:u(d({},l.analysisResult),{[e]:r})})),setSelectedKeywords:e=>s({selectedKeywords:e}),clearSelectedKeywords:()=>s({selectedKeywords:[]}),clearKeywordAnalysis:()=>s({keywordAnalysis:[]}),clearSuggestions:()=>s({suggestions:[],error:null}),setLoading:e=>s({loading:e}),setError:e=>s({error:e}),fetchCompetitiveAnalysis:i=>y(null,[i],function*({blogId:e,title:r,content:l,keywords:o}){var c,n;s({loading:!0,error:null});try{const a=yield k({blogId:e,title:r,content:l,keywords:o});return s(t=>({analysisResult:u(d({},t.analysisResult),{[e]:a}),loading:!1})),g.success("Competitive analysis completed successfully!"),a}catch(a){console.error("Competitive analysis error",a);const t=((n=(c=a.response)==null?void 0:c.data)==null?void 0:n.message)||"Failed to fetch competitive analysis.";throw g.error(t),s({error:t,loading:!1}),a}}),analyzeKeywords:e=>y(null,null,function*(){var r,l;s({loading:!0,error:null});try{const o=yield S(e);return s({keywordAnalysis:o,loading:!1}),o}catch(o){const i=((l=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to analyze keywords.";throw g.error(i),s({error:i,loading:!1}),o}}),fetchSuggestions:e=>y(null,null,function*(){s({loading:!0,error:null});try{const r=yield R(e);return s({suggestions:r,loading:!1}),r}catch(r){throw console.error("error",r),s({error:"Failed to fetch suggestions",loading:!1}),r}})}),{name:"analysis-store"}));export{G as u};
