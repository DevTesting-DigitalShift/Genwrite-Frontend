var _=Object.defineProperty,R=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var O=(n,i,r)=>i in n?_(n,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[i]=r,o=(n,i)=>{for(var r in i||(i={}))$.call(i,r)&&O(n,r,i[r]);if(L)for(var r of L(i))U.call(i,r)&&O(n,r,i[r]);return n},c=(n,i)=>R(n,K(i));var k=(n,i,r)=>new Promise((u,m)=>{var j=l=>{try{g(r.next(l))}catch(x){m(x)}},N=l=>{try{g(r.throw(l))}catch(x){m(x)}},g=l=>l.done?u(l.value):Promise.resolve(l.value).then(j,N);g((r=r.apply(n,i)).next())});import{c as W,b as E,u as F,a as T,r as h,l as M,j as e,A as G,m as v,B as f,X as d,eb as X,ec as Y}from"./index-783-lCeb.js";import{B as q}from"./building-2-HSexucV2.js";import{C as H}from"./check-93jzC2tW.js";import{I as b}from"./index-Wtl0AGHI.js";import{S as C}from"./index-DmRbsXOl.js";import"./Input-DUJcTjOO.js";import"./EyeOutlined-Bmd706kk.js";import"./SearchOutlined-FwrjRWud.js";import"./index-OJoJxPpm.js";import"./move-KjYBMGvK.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Q=W("target",J),{TextArea:I}=b,de=()=>{const n=E(),i=F(),r=T(s=>s.auth.user),[u,m]=h.useState(0),[j,N]=h.useState(!1),[g,l]=h.useState(!1);h.useEffect(()=>{if(!localStorage.getItem("token")){n("/login",{replace:!0});return}i(M())},[i,n]),h.useEffect(()=>{if(!r||!r._id)return;const s=localStorage.getItem(`hasCompletedOnboarding_${r._id}`)==="true";(r.lastLogin||s)&&n("/dashboard",{replace:!0})},[r,n]);const[x,V]=h.useState("https://"),[t,p]=h.useState({nameOfVoice:"",postLink:"",sitemap:"",describeBrand:"",keywords:[],persona:""}),[w,B]=h.useState(""),A=()=>k(null,null,function*(){if(!t.postLink){d.error("Please enter your company website URL");return}l(!0);try{const s=`${x}${t.postLink.replace(/^https?:\/\//,"")}`,a=yield X(s);p(y=>c(o({},y),{nameOfVoice:a.nameOfVoice||y.nameOfVoice,describeBrand:a.describeBrand||y.describeBrand,keywords:a.keywords||y.keywords,persona:a.persona||y.persona,sitemap:a.sitemap||y.sitemap})),d.success("Company information fetched successfully!"),m(1)}catch(s){d.warning(s.message||"Couldn't fetch company information automatically. Please enter details manually."),m(1)}finally{l(!1)}}),S=()=>{if(w.trim()){const s=w.split(",").map(a=>a.trim()).filter(a=>a&&!t.keywords.includes(a));p(a=>c(o({},a),{keywords:[...a.keywords,...s]})),B("")}},P=s=>{p(a=>c(o({},a),{keywords:a.keywords.filter(y=>y!==s)}))},z=()=>k(null,null,function*(){if(!t.nameOfVoice.trim()){d.error("Please enter your brand name");return}if(!t.postLink.trim()){d.error("Please enter your website URL");return}if(!t.keywords.length){d.error("Please enter at least one keyword");return}if(!t.persona.trim()){d.error("Please enter your persona");return}t.sitemap.trim().length||delete t.sitemap,N(!0);try{const s=c(o({},t),{postLink:`${x}${t.postLink.replace(/^https?:\/\//,"")}`});yield Y(s),d.success("Brand voice created successfully!"),r!=null&&r._id&&localStorage.setItem(`hasCompletedOnboarding_${r._id}`,"true"),sessionStorage.setItem("justCompletedOnboarding","true"),setTimeout(()=>{n("/dashboard")},1e3)}catch(s){d.error(s.message||"Failed to create brand voice")}finally{N(!1)}}),D=[{title:"Company Info",icon:q},{title:"Brand Details",icon:Q},{title:"Review",icon:H}];return e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-6",children:e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"GenWrite"}),e.jsx("p",{className:"text-gray-500",children:"Set up your brand voice"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-12",children:D.map((s,a)=>e.jsx("div",{className:`h-2 rounded-full transition-all ${a===u?"w-8 bg-gray-900":a<u?"w-2 bg-gray-400":"w-2 bg-gray-200"}`},a))}),e.jsxs(G,{mode:"wait",children:[u===0&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Company Information"}),e.jsx("p",{className:"text-gray-500",children:"We'll analyze your website to understand your brand"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Name"}),e.jsx(b,{size:"large",placeholder:"Acme Corporation",value:t.nameOfVoice,onChange:s=>p(a=>c(o({},a),{nameOfVoice:s.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Website URL"}),e.jsx(b,{size:"large",placeholder:"www.example.com",addonBefore:e.jsxs(C,{value:x,onChange:V,dropdownMatchSelectWidth:!1,className:"protocol-select",children:[e.jsx(C.Option,{value:"https://",children:"https://"}),e.jsx(C.Option,{value:"http://",children:"http://"})]}),value:t.postLink,onChange:s=>p(a=>c(o({},a),{postLink:s.target.value})),className:"url-input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Sitemap URL ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(b,{size:"large",placeholder:"https://www.example.com/sitemap.xml",value:t.sitemap,onChange:s=>p(a=>c(o({},a),{sitemap:s.target.value})),className:"rounded-lg"})]})]}),e.jsx(f,{type:"primary",size:"large",block:!0,onClick:A,loading:g,disabled:!t.postLink||!t.nameOfVoice,className:"h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:g?"Analyzing...":"Continue"})]},"step-0"),u===1&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Brand Details"}),e.jsx("p",{className:"text-gray-500",children:"Refine your brand information"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),e.jsx(I,{rows:4,placeholder:"Describe what your company does...",value:t.describeBrand,onChange:s=>p(a=>c(o({},a),{describeBrand:s.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Author Persona"}),e.jsx(I,{rows:3,placeholder:"What is your Author Persona?",value:t.persona,onChange:s=>p(a=>c(o({},a),{persona:s.target.value})),className:"rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Keywords"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(b,{placeholder:"Add keywords (comma-separated)",value:w,onChange:s=>B(s.target.value),onKeyDown:s=>s.key==="Enter"&&S(),className:"rounded-lg"}),e.jsx(f,{onClick:S,className:"rounded-lg",children:"Add"})]}),t.keywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((s,a)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:[s,e.jsx("button",{onClick:()=>P(s),className:"hover:text-gray-900",children:"Ã—"})]},a))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{size:"large",onClick:()=>m(0),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(f,{type:"primary",size:"large",onClick:()=>m(2),className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:"Continue"})]})]},"step-1"),u===2&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Review"}),e.jsx("p",{className:"text-gray-500",children:"Verify your information before creating"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Brand Name"}),e.jsx("p",{className:"text-gray-900",children:t.nameOfVoice||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Website"}),e.jsxs("p",{className:"text-gray-900",children:[x,t.postLink||"Not provided"]})]}),t.describeBrand&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:t.describeBrand})]}),t.persona&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Author Persona"}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.persona})]}),t.keywords.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((s,a)=>e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:s},a))})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{size:"large",onClick:()=>m(1),className:"flex-1 rounded-lg",children:"Back"}),e.jsx(f,{type:"primary",size:"large",onClick:z,loading:j,className:"flex-1 h-12 bg-gray-900 hover:bg-gray-800 rounded-lg font-medium",children:j?"Creating...":"Create Brand Voice"})]})]},"step-2")]}),e.jsx("p",{className:"text-center text-gray-400 text-sm mt-12",children:"You can update these settings anytime"})]})})};export{de as default};
