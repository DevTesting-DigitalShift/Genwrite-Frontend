{"version":3,"file":"CompetitiveAnalysisModal-0ekYYa4V.js","sources":["../../src/components/mutipstepmodal/CompetitiveAnalysisModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport axiosInstance from \"../../api\";\r\n\r\nconst CompetitiveAnalysisModal = ({ closefnc }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    keywords: [],\r\n    keywordInput: \"\",\r\n    contentType: \"text\", // or \"markdown\"\r\n    selectedProject: null,\r\n  });\r\n\r\n  const [recentProjects, setRecentProjects] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [analysisResults, setAnalysisResults] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRecentProjects = async () => {\r\n      try {\r\n        const response = await axiosInstance.get(\"/blogs\");\r\n        const allBlogs = response.data;\r\n        const recentBlogs = allBlogs.slice(-10).reverse();\r\n        setRecentProjects(recentBlogs);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching recent projects:\", error);\r\n        toast.error(\"Failed to load recent projects\");\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRecentProjects();\r\n  }, []);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      title: project.title,\r\n      content: project.content,\r\n      keywords: project.focusKeywords || [],\r\n      selectedProject: project,\r\n      contentType: \"markdown\",\r\n    }));\r\n  };\r\n\r\n  const handleKeywordInputChange = (e) => {\r\n    setFormData((prev) => ({ ...prev, keywordInput: e.target.value }));\r\n  };\r\n\r\n  const handleAddKeyword = () => {\r\n    const inputValue = formData.keywordInput;\r\n    if (inputValue.trim() !== \"\") {\r\n      const newKeywords = inputValue\r\n        .split(\",\")\r\n        .map((keyword) => keyword.trim())\r\n        .filter((keyword) => keyword !== \"\" && !formData.keywords.includes(keyword));\r\n\r\n      if (newKeywords.length > 0) {\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          keywords: [...prev.keywords, ...newKeywords],\r\n          keywordInput: \"\",\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemoveKeyword = (index) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      keywords: prev.keywords.filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      handleAddKeyword();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.title.trim()) {\r\n      toast.error(\"Please enter a blog title\");\r\n      return;\r\n    }\r\n    if (!formData.content.trim()) {\r\n      toast.error(\"Please enter blog content\");\r\n      return;\r\n    }\r\n    if (formData.keywords.length === 0) {\r\n      toast.error(\"Please add at least one keyword\");\r\n      return;\r\n    }\r\n\r\n    setIsAnalyzing(true);\r\n    try {\r\n      const response = await axiosInstance.post(\"/analysis/run\", {\r\n        title: formData.title,\r\n        content: formData.content,\r\n        keywords: formData.keywords,\r\n        contentType: formData.contentType,\r\n      });\r\n\r\n      if (response.data) {\r\n        setAnalysisResults(response.data);\r\n        toast.success(\"Analysis completed successfully!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error performing competitive analysis:\", error);\r\n      toast.error(\"Failed to perform competitive analysis\");\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"w-[800px] bg-white rounded-lg shadow-xl max-h-[90vh] flex flex-col\">\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <h2 className=\"text-lg font-semibold\">Competitive Analysis</h2>\r\n          <button onClick={closefnc} className=\"text-gray-400 hover:text-gray-600\">\r\n            <X className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"px-6 py-4 overflow-y-auto\">\r\n          <div className=\"space-y-6\">\r\n            {!analysisResults ? (\r\n              <>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Select Recent Project\r\n                  </label>\r\n                  <select\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500 max-h-[200px] overflow-y-auto\"\r\n                    onChange={(e) => {\r\n                      const project = recentProjects.find((p) => p._id === e.target.value);\r\n                      if (project) handleProjectSelect(project);\r\n                    }}\r\n                    value={formData.selectedProject?._id || \"\"}\r\n                  >\r\n                    <option value=\"\">Select a project</option>\r\n                    {recentProjects.map((project) => (\r\n                      <option key={project._id} value={project._id}>\r\n                        {project.title}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Blog Title\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    value={formData.title}\r\n                    onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                    placeholder=\"Enter your blog title\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Blog Content\r\n                  </label>\r\n                  <textarea\r\n                    name=\"content\"\r\n                    value={formData.content}\r\n                    onChange={handleInputChange}\r\n                    className=\"w-full h-40 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                    placeholder={`Enter your blog content in ${formData.contentType} format`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Keywords\r\n                  </label>\r\n                  <div className=\"flex gap-2\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.keywordInput}\r\n                      onChange={handleKeywordInputChange}\r\n                      onKeyDown={handleKeyPress}\r\n                      className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                      placeholder=\"Add keywords (comma-separated)\"\r\n                    />\r\n                    <button\r\n                      onClick={handleAddKeyword}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\"\r\n                    >\r\n                      Add\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                    {formData.keywords.map((keyword, index) => (\r\n                      <span\r\n                        key={index}\r\n                        className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800\"\r\n                      >\r\n                        {keyword}\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleRemoveKeyword(index)}\r\n                          className=\"ml-1.5 flex-shrink-0 text-indigo-400 hover:text-indigo-600\"\r\n                        >\r\n                          <X className=\"w-3 h-3\" />\r\n                        </button>\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-800 mb-4\">Analysis Results</h3>\r\n                <div className=\"bg-gray-100 p-4 rounded-md\">\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    <strong>Analysis:</strong>\r\n                    <ul className=\"list-disc ml-5 mt-1\">\r\n                      {Object.entries(analysisResults.analysis).map(([key, value]) => (\r\n                        <li key={key} className=\"mb-1\">\r\n                          <strong>{key.replace(/([A-Z])/g, \" $1\")}: </strong>\r\n                          {value}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 mt-4\">\r\n                    <strong>Suggestions:</strong> {analysisResults.suggestions}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 mt-4\">\r\n                    <strong>Summary:</strong> {analysisResults.summary}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 mt-4\">\r\n                    <strong>Blog Score:</strong> {analysisResults.blogScore} / 100\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 p-6 border-t\">\r\n          <button\r\n            onClick={closefnc}\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\r\n          >\r\n            Close\r\n          </button>\r\n          {!analysisResults && (\r\n            <button\r\n              onClick={handleSubmit}\r\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700\"\r\n              disabled={isAnalyzing}\r\n            >\r\n              {isAnalyzing ? \"Analyzing...\" : \"Analyze\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompetitiveAnalysisModal;"],"names":["CompetitiveAnalysisModal","closefnc","formData","setFormData","useState","recentProjects","setRecentProjects","isLoading","setIsLoading","isAnalyzing","setIsAnalyzing","analysisResults","setAnalysisResults","useEffect","recentBlogs","axiosInstance","error","toast","handleInputChange","e","name","value","prev","handleProjectSelect","project","handleKeywordInputChange","handleAddKeyword","inputValue","newKeywords","keyword","handleRemoveKeyword","index","_","handleKeyPress","handleSubmit","response","jsxs","jsx","X","key","Fragment","p","_a"],"mappings":"iGAKA,MAAMA,EAA2B,CAAC,CAAE,SAAAC,KAAe,OACjD,KAAM,CAACC,EAAUC,CAAW,EAAIC,WAAS,CACvC,MAAO,GACP,QAAS,GACT,SAAU,CAAC,EACX,aAAc,GACd,YAAa,OACb,gBAAiB,IAAA,CAClB,EAEK,CAACC,EAAgBC,CAAiB,EAAIF,EAAAA,SAAS,CAAA,CAAE,EACjD,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAI,EACzC,CAACK,EAAaC,CAAc,EAAIN,EAAAA,SAAS,EAAK,EAC9C,CAACO,EAAiBC,CAAkB,EAAIR,EAAAA,SAAS,IAAI,EAE3DS,EAAAA,UAAU,IAAM,EACc,SAAY,CAClC,GAAA,CAGF,MAAMC,GAFW,MAAMC,EAAc,IAAI,QAAQ,GACvB,KACG,MAAM,GAAG,EAAE,QAAQ,EAChDT,EAAkBQ,CAAW,EAC7BN,EAAa,EAAK,QACXQ,EAAO,CACN,QAAA,MAAM,kCAAmCA,CAAK,EACtDC,EAAM,MAAM,gCAAgC,EAC5CT,EAAa,EAAK,CAAA,CAEtB,GAEoB,CACtB,EAAG,EAAE,EAEC,MAAAU,EAAqBC,GAAM,CAC/B,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAIF,EAAE,OAC1BhB,EAAamB,IAAU,CACrB,GAAGA,EACH,CAACF,CAAI,EAAGC,CAAA,EACR,CACJ,EAEME,EAAuBC,GAAY,CACvCrB,EAAamB,IAAU,CACrB,GAAGA,EACH,MAAOE,EAAQ,MACf,QAASA,EAAQ,QACjB,SAAUA,EAAQ,eAAiB,CAAC,EACpC,gBAAiBA,EACjB,YAAa,UAAA,EACb,CACJ,EAEMC,EAA4BN,GAAM,CAC1BhB,EAACmB,IAAU,CAAE,GAAGA,EAAM,aAAcH,EAAE,OAAO,KAAA,EAAQ,CACnE,EAEMO,EAAmB,IAAM,CAC7B,MAAMC,EAAazB,EAAS,aACxB,GAAAyB,EAAW,KAAK,IAAM,GAAI,CACtB,MAAAC,EAAcD,EACjB,MAAM,GAAG,EACT,IAAKE,GAAYA,EAAQ,KAAK,CAAC,EAC/B,OAAQA,GAAYA,IAAY,IAAM,CAAC3B,EAAS,SAAS,SAAS2B,CAAO,CAAC,EAEzED,EAAY,OAAS,GACvBzB,EAAamB,IAAU,CACrB,GAAGA,EACH,SAAU,CAAC,GAAGA,EAAK,SAAU,GAAGM,CAAW,EAC3C,aAAc,EAAA,EACd,CACJ,CAEJ,EAEME,EAAuBC,GAAU,CACrC5B,EAAamB,IAAU,CACrB,GAAGA,EACH,SAAUA,EAAK,SAAS,OAAO,CAACU,EAAG,IAAM,IAAMD,CAAK,CAAA,EACpD,CACJ,EAEME,EAAkBd,GAAM,CACxBA,EAAE,MAAQ,UACZA,EAAE,eAAe,EACAO,EAAA,EAErB,EAEMQ,EAAe,SAAY,CAC/B,GAAI,CAAChC,EAAS,MAAM,OAAQ,CAC1Be,EAAM,MAAM,2BAA2B,EACvC,MAAA,CAEF,GAAI,CAACf,EAAS,QAAQ,OAAQ,CAC5Be,EAAM,MAAM,2BAA2B,EACvC,MAAA,CAEE,GAAAf,EAAS,SAAS,SAAW,EAAG,CAClCe,EAAM,MAAM,iCAAiC,EAC7C,MAAA,CAGFP,EAAe,EAAI,EACf,GAAA,CACF,MAAMyB,EAAW,MAAMpB,EAAc,KAAK,gBAAiB,CACzD,MAAOb,EAAS,MAChB,QAASA,EAAS,QAClB,SAAUA,EAAS,SACnB,YAAaA,EAAS,WAAA,CACvB,EAEGiC,EAAS,OACXvB,EAAmBuB,EAAS,IAAI,EAChClB,EAAM,QAAQ,kCAAkC,SAE3CD,EAAO,CACN,QAAA,MAAM,yCAA0CA,CAAK,EAC7DC,EAAM,MAAM,wCAAwC,CAAA,QACpD,CACAP,EAAe,EAAK,CAAA,CAExB,EAEA,aACG,MAAI,CAAA,UAAU,6EACb,SAAC0B,EAAA,KAAA,MAAA,CAAI,UAAU,qEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,iDACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,wBAAwB,SAAoB,uBAAA,EAC1DA,EAAAA,IAAC,SAAO,CAAA,QAASpC,EAAU,UAAU,oCACnC,SAACoC,EAAA,IAAAC,EAAA,CAAE,UAAU,SAAU,CAAA,CACzB,CAAA,CAAA,EACF,EAEAD,EAAA,IAAC,MAAI,CAAA,UAAU,4BACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,YACZ,SAAC1B,SA0FC,MACC,CAAA,SAAA,CAAC0B,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAAgB,mBAAA,EACvED,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAS,WAAA,CAAA,QAChB,KAAG,CAAA,UAAU,sBACX,SAAO,OAAA,QAAQ1B,EAAgB,QAAQ,EAAE,IAAI,CAAC,CAAC4B,EAAKlB,CAAK,IACvDe,EAAAA,KAAA,KAAA,CAAa,UAAU,OACtB,SAAA,CAAAA,OAAC,SAAQ,CAAA,SAAA,CAAIG,EAAA,QAAQ,WAAY,KAAK,EAAE,IAAA,EAAE,EACzClB,CAAA,CAFM,EAAAkB,CAGT,CACD,CACH,CAAA,CAAA,EACF,EACAH,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAY,cAAA,CAAA,EAAS,IAAE1B,EAAgB,WAAA,EACjD,EACAyB,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAQ,UAAA,CAAA,EAAS,IAAE1B,EAAgB,OAAA,EAC7C,EACAyB,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAW,aAAA,CAAA,EAAS,IAAE1B,EAAgB,UAAU,QAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAhHEyB,EAAAA,KAAAI,EAAAA,SAAA,CAAA,SAAA,CAAAJ,OAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,wBAAA,EACAD,EAAA,KAAC,SAAA,CACC,UAAU,qIACV,SAAWjB,GAAM,CACT,MAAAK,EAAUnB,EAAe,KAAMoC,GAAMA,EAAE,MAAQtB,EAAE,OAAO,KAAK,EAC/DK,KAA6BA,CAAO,CAC1C,EACA,QAAOkB,EAAAxC,EAAS,kBAAT,YAAAwC,EAA0B,MAAO,GAExC,SAAA,CAACL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAgB,mBAAA,EAChChC,EAAe,IAAKmB,GAClBa,EAAAA,IAAA,SAAA,CAAyB,MAAOb,EAAQ,IACtC,SAAAA,EAAQ,KADE,EAAAA,EAAQ,GAErB,CACD,CAAA,CAAA,CAAA,CACH,EACF,SAEC,MACC,CAAA,SAAA,CAACa,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,QACL,MAAOnC,EAAS,MAChB,SAAUgB,EACV,UAAU,uGACV,YAAY,uBAAA,CAAA,CACd,EACF,SAEC,MACC,CAAA,SAAA,CAACmB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,eAAA,EACAA,EAAA,IAAC,WAAA,CACC,KAAK,UACL,MAAOnC,EAAS,QAChB,SAAUgB,EACV,UAAU,4GACV,YAAa,8BAA8BhB,EAAS,WAAW,SAAA,CAAA,CACjE,EACF,SAEC,MACC,CAAA,SAAA,CAACmC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,WAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAC,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOnC,EAAS,aAChB,SAAUuB,EACV,UAAWQ,EACX,UAAU,uGACV,YAAY,gCAAA,CACd,EACAI,EAAA,IAAC,SAAA,CACC,QAASX,EACT,UAAU,wEACX,SAAA,KAAA,CAAA,CAED,EACF,EACAW,EAAAA,IAAC,OAAI,UAAU,4BACZ,WAAS,SAAS,IAAI,CAACR,EAASE,IAC/BK,EAAA,KAAC,OAAA,CAEC,UAAU,wGAET,SAAA,CAAAP,EACDQ,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMP,EAAoBC,CAAK,EACxC,UAAU,6DAEV,SAAAM,EAAAA,IAACC,EAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,CACzB,CAAA,EAVKP,CAAA,CAYR,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CA4BJ,CAAA,EACF,EAEAK,EAAAA,KAAC,MAAI,CAAA,UAAU,sCACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,QAASpC,EACT,UAAU,0GACX,SAAA,OAAA,CAED,EACC,CAACU,GACA0B,EAAA,IAAC,SAAA,CACC,QAASH,EACT,UAAU,oFACV,SAAUzB,EAET,WAAc,eAAiB,SAAA,CAAA,CAClC,CAEJ,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ"}