import{D as re,b as O,H as oe,J as le,P as ie,S as y,Q as se,M as ae,a3 as ce,aL as de,aI as ue,j as S,aG as me,au as H,aH as pe}from"./index-CfcK-_FJ.js";import{C as be}from"./index-Bau_I98C.js";import{R as ge,b as s}from"./chunk-tiptap-JX9QK0Ia.js";import{m as U,u as fe}from"./useBreakpoint-DFrfYlGm.js";const ve={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},A=ge.createContext({});var ye=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const he=e=>re(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function je(e,t,r){const n=s.useMemo(()=>t||he(r),[t,r]);return s.useMemo(()=>n.map(i=>{var{span:l}=i,c=ye(i,["span"]);return l==="filled"?Object.assign(Object.assign({},c),{filled:!0}):Object.assign(Object.assign({},c),{span:typeof l=="number"?l:U(e,l)})}),[n,e])}var Se=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function Oe(e,t){let r=[],n=[],o=!1,i=0;return e.filter(l=>l).forEach(l=>{const{filled:c}=l,p=Se(l,["filled"]);if(c){n.push(p),r.push(n),n=[],i=0;return}const f=t-i;i+=l.span||1,i>=t?(i>t?(o=!0,n.push(Object.assign(Object.assign({},p),{span:f}))):n.push(p),r.push(n),n=[],i=0):n.push(p)}),n.length>0&&r.push(n),r=r.map(l=>{const c=l.reduce((p,f)=>p+(f.span||1),0);if(c<t){const p=l[l.length-1];return p.span=t-(c-(p.span||1)),l}return l}),[r,o]}const xe=(e,t)=>{const[r,n]=s.useMemo(()=>Oe(t,e),[t,e]);return r},$e=e=>{let{children:t}=e;return t};function X(e){return e!=null}const G=e=>{const{itemPrefixCls:t,component:r,span:n,className:o,style:i,labelStyle:l,contentStyle:c,bordered:p,label:f,content:h,colon:$,type:m,styles:b}=e,x=r,a=s.useContext(A),{classNames:g}=a;return p?s.createElement(x,{className:O({[`${t}-item-label`]:m==="label",[`${t}-item-content`]:m==="content",[`${g==null?void 0:g.label}`]:m==="label",[`${g==null?void 0:g.content}`]:m==="content"},o),style:i,colSpan:n},X(f)&&s.createElement("span",{style:Object.assign(Object.assign({},l),b==null?void 0:b.label)},f),X(h)&&s.createElement("span",{style:Object.assign(Object.assign({},l),b==null?void 0:b.content)},h)):s.createElement(x,{className:O(`${t}-item`,o),style:i,colSpan:n},s.createElement("div",{className:`${t}-item-container`},(f||f===0)&&s.createElement("span",{className:O(`${t}-item-label`,g==null?void 0:g.label,{[`${t}-item-no-colon`]:!$}),style:Object.assign(Object.assign({},l),b==null?void 0:b.label)},f),(h||h===0)&&s.createElement("span",{className:O(`${t}-item-content`,g==null?void 0:g.content),style:Object.assign(Object.assign({},c),b==null?void 0:b.content)},h)))};function W(e,t,r){let{colon:n,prefixCls:o,bordered:i}=t,{component:l,type:c,showLabel:p,showContent:f,labelStyle:h,contentStyle:$,styles:m}=r;return e.map((b,x)=>{let{label:a,children:g,prefixCls:d=o,className:E,style:C,labelStyle:L,contentStyle:R,span:T=1,key:v,styles:u}=b;return typeof l=="string"?s.createElement(G,{key:`${c}-${v||x}`,className:E,style:C,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},h),m==null?void 0:m.label),L),u==null?void 0:u.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},$),m==null?void 0:m.content),R),u==null?void 0:u.content)},span:T,colon:n,component:l,itemPrefixCls:d,bordered:i,label:p?a:null,content:f?g:null,type:c}):[s.createElement(G,{key:`label-${v||x}`,className:E,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},h),m==null?void 0:m.label),C),L),u==null?void 0:u.label),span:1,colon:n,component:l[0],itemPrefixCls:d,bordered:i,label:a,type:"label"}),s.createElement(G,{key:`content-${v||x}`,className:E,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$),m==null?void 0:m.content),C),R),u==null?void 0:u.content),span:T*2-1,component:l[1],itemPrefixCls:d,bordered:i,content:g,type:"content"})]})}const we=e=>{const t=s.useContext(A),{prefixCls:r,vertical:n,row:o,index:i,bordered:l}=e;return n?s.createElement(s.Fragment,null,s.createElement("tr",{key:`label-${i}`,className:`${r}-row`},W(o,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),s.createElement("tr",{key:`content-${i}`,className:`${r}-row`},W(o,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):s.createElement("tr",{key:i,className:`${r}-row`},W(o,e,Object.assign({component:l?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},Ee=e=>{const{componentCls:t,labelBg:r}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.padding)} ${y(e.paddingLG)}`,borderInlineEnd:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:r,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.paddingSM)} ${y(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.paddingXS)} ${y(e.padding)}`}}}}}},Ce=e=>{const{componentCls:t,extraColor:r,itemPaddingBottom:n,itemPaddingEnd:o,colonMarginRight:i,colonMarginLeft:l,titleMarginBottom:c}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ie(e)),Ee(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:c},[`${t}-title`]:Object.assign(Object.assign({},se),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:r,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:o},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${y(l)} ${y(i)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Pe=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),Ie=oe("Descriptions",e=>{const t=le(e,{});return Ce(t)},Pe);var Ne=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const w=e=>{const{prefixCls:t,title:r,extra:n,column:o,colon:i=!0,bordered:l,layout:c,children:p,className:f,rootClassName:h,style:$,size:m,labelStyle:b,contentStyle:x,styles:a,items:g,classNames:d}=e,E=Ne(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:C,direction:L,className:R,style:T,classNames:v,styles:u}=ae("descriptions"),j=C("descriptions",t),_=fe(),Y=s.useMemo(()=>{var P;return typeof o=="number"?o:(P=U(_,Object.assign(Object.assign({},ve),o)))!==null&&P!==void 0?P:3},[_,o]),Q=je(_,g,p),z=ce(m),Z=xe(Y,Q),[k,ee,te]=Ie(j),ne=s.useMemo(()=>({labelStyle:b,contentStyle:x,styles:{content:Object.assign(Object.assign({},u.content),a==null?void 0:a.content),label:Object.assign(Object.assign({},u.label),a==null?void 0:a.label)},classNames:{label:O(v.label,d==null?void 0:d.label),content:O(v.content,d==null?void 0:d.content)}}),[b,x,a,d,v,u]);return k(s.createElement(A.Provider,{value:ne},s.createElement("div",Object.assign({className:O(j,R,v.root,d==null?void 0:d.root,{[`${j}-${z}`]:z&&z!=="default",[`${j}-bordered`]:!!l,[`${j}-rtl`]:L==="rtl"},f,h,ee,te),style:Object.assign(Object.assign(Object.assign(Object.assign({},T),u.root),a==null?void 0:a.root),$)},E),(r||n)&&s.createElement("div",{className:O(`${j}-header`,v.header,d==null?void 0:d.header),style:Object.assign(Object.assign({},u.header),a==null?void 0:a.header)},r&&s.createElement("div",{className:O(`${j}-title`,v.title,d==null?void 0:d.title),style:Object.assign(Object.assign({},u.title),a==null?void 0:a.title)},r),n&&s.createElement("div",{className:O(`${j}-extra`,v.extra,d==null?void 0:d.extra),style:Object.assign(Object.assign({},u.extra),a==null?void 0:a.extra)},n)),s.createElement("div",{className:`${j}-view`},s.createElement("table",null,s.createElement("tbody",null,Z.map((P,V)=>s.createElement(we,{key:V,index:V,colon:i,prefixCls:j,vertical:c==="vertical",bordered:l,row:P}))))))))};w.Item=$e;var D="basil",Le=function(t){return t===3?"v3":t},q="https://js.stripe.com",Re="".concat(q,"/").concat(D,"/stripe.js"),Te=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Be=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Me=function(t){return Te.test(t)||Be.test(t)},_e=function(){for(var t=document.querySelectorAll('script[src^="'.concat(q,'"]')),r=0;r<t.length;r++){var n=t[r];if(Me(n.src))return n}return null},F=function(t){var r="",n=document.createElement("script");n.src="".concat(Re).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},ze=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:r})},I=null,B=null,M=null,Ge=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},We=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},Ae=function(t){return I!==null?I:(I=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=_e();if(!(o&&t)){if(!o)o=F(t);else if(o&&M!==null&&B!==null){var i;o.removeEventListener("load",M),o.removeEventListener("error",B),(i=o.parentNode)===null||i===void 0||i.removeChild(o),o=F(t)}}M=We(r,n),B=Ge(n),o.addEventListener("load",M),o.addEventListener("error",B)}catch(l){n(l);return}}),I.catch(function(r){return I=null,Promise.reject(r)}))},Ve=function(t,r,n){if(t===null)return null;var o=r[0],i=o.match(/^pk_test/),l=Le(t.version),c=D;i&&l!==c&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=t.apply(void 0,r);return ze(p,n),p},N,J=!1,K=function(){return N||(N=Ae(null).catch(function(t){return N=null,Promise.reject(t)}),N)};Promise.resolve().then(function(){return K()}).catch(function(e){J||console.warn(e)});var He=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];J=!0;var o=Date.now();return K().then(function(i){return Ve(i,r,o)})};const{Title:Xe}=me;function Je(){const e=de(),t=ue(),{plan:r,customCredits:n}=t.state||{},o=async()=>{const i=await He("pk_test_51RRByjPwKVl4RglV8Y5NfbjePOnbdIyEHMRdrWpmv0XxMAqc3X6bFcfEXKKGIOF9M3SlvCBNjVTt2R2rTOgWwjyx00yjpRvpMz");try{const l=await pe.post("/stripe/checkout",{planName:r.name.toLowerCase().includes("pro")?"pro":r.name.toLowerCase().includes("enterprise")?"enterprise":"credits",credits:r.type==="credit_purchase"?n:r.credits,success_url:`${window.location.origin}/payment/success`,cancel_url:`${window.location.origin}/payment/cancel`});if(console.log(l.data),l!=null&&l.data.sessionId){const c=await i.redirectToCheckout({sessionId:l.data.sessionId});if(c!=null&&c.error)throw error}else throw new Error("Something went wrong")}catch(l){console.error("Error creating checkout session:",l),alert("Failed to initiate checkout. Please try again.")}};if(!(r!=null&&r.name))throw new Error("Invalid Payment Request");return S.jsxs(be,{style:{maxWidth:600,margin:"40px auto"},children:[S.jsx(Xe,{level:3,children:"Confirm Your Payment"}),S.jsxs(w,{bordered:!0,column:1,children:[S.jsx(w.Item,{label:"Plan Name",children:r.name}),S.jsx(w.Item,{label:"Type",children:r.type}),S.jsx(w.Item,{label:"Price",children:`$${(n?n*.05:r.price).toFixed(2)}`}),n>0&&S.jsx(w.Item,{label:"Credits",children:n})]}),S.jsxs("div",{style:{marginTop:24,textAlign:"center"},children:[S.jsx(H,{type:"primary",onClick:o,children:"Proceed to Pay"}),S.jsx(H,{style:{marginLeft:12},onClick:()=>e(-1),children:"Go Back"})]})]})}export{Je as default};
