import{j as t}from"./tiptap-BabmW22p.js";import{b as s}from"./vendor-CcjAMWu8.js";const L=({maxDuration:y=6e4,onTimeout:c,message:u,delay:i=200,isYouTube:r=!1})=>{const[m,j]=s.useState(0),[P,w]=s.useState(!1),[S,N]=s.useState(i===0),f=s.useRef(null),g=s.useRef(null),I=s.useRef(Date.now());return s.useEffect(()=>(i>0&&(g.current=setTimeout(()=>{N(!0)},i)),()=>{g.current&&clearTimeout(g.current)}),[i]),s.useEffect(()=>(f.current=setTimeout(()=>{console.warn("ProgressLoadingScreen: Maximum duration exceeded."),w(!0),c==null||c()},y),()=>{f.current&&clearTimeout(f.current);const o=Date.now()-I.current;o>5e3&&console.info(`ProgressLoadingScreen: Was displayed for ${(o/1e3).toFixed(1)}s`)}),[y,c]),s.useEffect(()=>{const o=[1,2,3,15,20,25,30,40];let d=0,h=0,n=null;const p=r?2e3:500,l=()=>{j(e=>{if(e>=98)return 98;if(d<o.length){const a=o[d];d++;const x=r?p+d*300:p;return n=setTimeout(l,x),a}if(e>=40&&e<70)return n=setTimeout(l,r?3e3:800),Math.min(e+6,70);if(e>=70&&e<85){const a=h>1e4?2:3;return n=setTimeout(l,r?4e3:1200),Math.min(e+a,85)}if(e>=85&&e<95){const a=h>2e4?.5:1;return n=setTimeout(l,r?5e3:1500),Math.min(e+a,95)}return e>=95&&e<98?(n=setTimeout(l,r?6e3:2e3),Math.min(e+.3,98)):e})},M=setInterval(()=>{h+=100},100);return l(),()=>{clearInterval(M),n&&clearTimeout(n)}},[r]),S?t.jsx("div",{className:"progress-loading-screen",role:"status","aria-live":"polite","aria-busy":"true","aria-label":u||`Loading content, please wait... ${Math.floor(m)}%`,children:t.jsxs("div",{className:"progress-loading-content",children:[t.jsxs("div",{className:"progress-container-wrapper",children:[t.jsxs("div",{className:"progress-percentage",children:[t.jsx("span",{className:"percentage-number",children:Math.floor(m)}),t.jsx("span",{className:"percentage-symbol",children:"%"})]}),t.jsx("div",{className:"modern-progress-bar",children:t.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})})]}),u&&t.jsx("p",{className:"loading-message-text",children:u})]})}):null};export{L as P};
