var yt=Object.defineProperty;var qe=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var Ve=(n,a,s)=>a in n?yt(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s,J=(n,a)=>{for(var s in a||(a={}))vt.call(a,s)&&Ve(n,s,a[s]);if(qe)for(var s of qe(a))wt.call(a,s)&&Ve(n,s,a[s]);return n};var Qe=(n,a,s)=>new Promise((r,h)=>{var N=u=>{try{b(s.next(u))}catch(y){h(y)}},x=u=>{try{b(s.throw(u))}catch(y){h(y)}},b=u=>u.done?r(u.value):Promise.resolve(u.value).then(N,x);b((s=s.apply(n,a)).next())});import{r as o,I as z,Z as et,j as e,u as Ot,c as jt,a0 as St,a as Ct,z as $t,$ as Nt,a3 as Mt,H as At,m as Y,B as q,T as re,aw as Dt,aN as It,X as Rt,b as Bt}from"./index-5bYReZwQ.js";import{b as Lt}from"./SkeletonLoader-DUdY6Fxs.js";import{d as l}from"./dayjs.min-BQYSwEmP.js";import{F as Pt}from"./fuse-CLoWdkAE.js";import{u as kt}from"./useQuery-D25eEySs.js";import{u as Ge}from"./useMutation-qK8oydm8.js";import{c as Et}from"./clsx-B-dksMZM.js";import{l as Ke}from"./lodash-H0e-HZRr.js";import{D as Tt}from"./index-CE-UWdnT.js";import{u as Ft}from"./useProAction-DAs9GHOT.js";import{P as zt}from"./plus-CxPrgCWF.js";import{S as _t}from"./search-DgVwgSqq.js";import{X as Ht}from"./x-CxWtpQaR.js";import{P as fe}from"./index-cbhR9ZNg.js";import{c as tt}from"./createLucideIcon-QO50GtA0.js";import{R as Ut}from"./refresh-ccw-BsJ86Gpf.js";import{R as Ze}from"./rotate-ccw-DILwxab2.js";import{B as Yt,T as qt}from"./index-g-8GJJ3i.js";import{P as Vt}from"./Pagination-BX8rxdd2.js";import"./Overflow-Dq-RNpnn.js";import"./index-BnzCI0ch.js";import"./index-D_imPqk7.js";import"./SearchOutlined-BTvDsIhQ.js";import"./LeftOutlined-uf9S6pgM.js";import"./useBreakpoint-CIh6yixn.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],Gt=tt("arrow-down-up",Qt);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Zt=tt("funnel",Kt);var Wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function ge(){return ge=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},ge.apply(this,arguments)}const Xt=(n,a)=>o.createElement(z,ge({},n,{ref:a,icon:Wt})),Jt=o.forwardRef(Xt);var es={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},he.apply(this,arguments)}const ts=(n,a)=>o.createElement(z,he({},n,{ref:a,icon:es})),ss=o.forwardRef(ts);var as={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};function pe(){return pe=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},pe.apply(this,arguments)}const rs=(n,a)=>o.createElement(z,pe({},n,{ref:a,icon:as})),We=o.forwardRef(rs);var ns={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function xe(){return xe=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},xe.apply(this,arguments)}const ls=(n,a)=>o.createElement(z,xe({},n,{ref:a,icon:ns})),os=o.forwardRef(ls);var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};function be(){return be=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},be.apply(this,arguments)}const cs=(n,a)=>o.createElement(z,be({},n,{ref:a,icon:is})),ds=o.forwardRef(cs);var us={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194zm-72 388v134H354V706c0-42.2 16.4-81.9 46.3-111.7C430.1 564.4 469.8 548 512 548s81.9 16.4 111.7 46.3C653.6 624.1 670 663.8 670 706zm0-388c0 42.2-16.4 81.9-46.3 111.7C593.9 459.6 554.2 476 512 476s-81.9-16.4-111.7-46.3A156.63 156.63 0 01354 318V184h316v134z"}}]},name:"hourglass",theme:"outlined"};function ye(){return ye=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},ye.apply(this,arguments)}const ms=(n,a)=>o.createElement(z,ye({},n,{ref:a,icon:us})),fs=o.forwardRef(ms);var gs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};function ve(){return ve=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},ve.apply(this,arguments)}const hs=(n,a)=>o.createElement(z,ve({},n,{ref:a,icon:gs})),ps=o.forwardRef(hs);var xs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM310.3 167.1a8 8 0 00-12.6 0L185.7 309c-4.2 5.3-.4 13 6.3 13h76v530c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V322h76c6.7 0 10.5-7.8 6.3-13l-112-141.9z"}}]},name:"sort-descending",theme:"outlined"};function we(){return we=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},we.apply(this,arguments)}const bs=(n,a)=>o.createElement(z,we({},n,{ref:a,icon:xs})),ys=o.forwardRef(bs);var ne={exports:{}},vs=ne.exports,Xe;function ws(){return Xe||(Xe=1,(function(n,a){(function(s,r){n.exports=r()})(vs,(function(){return function(s,r,h){r.prototype.isBetween=function(N,x,b,u){var y=h(N),f=h(x),S=(u=u||"()")[0]==="(",B=u[1]===")";return(S?this.isAfter(y,b):!this.isBefore(y,b))&&(B?this.isBefore(f,b):!this.isAfter(f,b))||(S?this.isBefore(y,b):!this.isAfter(y,b))&&(B?this.isAfter(f,b):!this.isBefore(f,b))}}}))})(ne)),ne.exports}var Os=ws();const js=et(Os);var le={exports:{}},Ss=le.exports,Je;function Cs(){return Je||(Je=1,(function(n,a){(function(s,r){n.exports=r()})(Ss,(function(){var s="minute",r=/[+-]\d\d(?::?\d\d)?/g,h=/([+-]|\d\d)/g;return function(N,x,b){var u=x.prototype;b.utc=function(i){var v={date:i,utc:!0,args:arguments};return new x(v)},u.utc=function(i){var v=b(this.toDate(),{locale:this.$L,utc:!0});return i?v.add(this.utcOffset(),s):v},u.local=function(){return b(this.toDate(),{locale:this.$L,utc:!1})};var y=u.parse;u.parse=function(i){i.utc&&(this.$u=!0),this.$utils().u(i.$offset)||(this.$offset=i.$offset),y.call(this,i)};var f=u.init;u.init=function(){if(this.$u){var i=this.$d;this.$y=i.getUTCFullYear(),this.$M=i.getUTCMonth(),this.$D=i.getUTCDate(),this.$W=i.getUTCDay(),this.$H=i.getUTCHours(),this.$m=i.getUTCMinutes(),this.$s=i.getUTCSeconds(),this.$ms=i.getUTCMilliseconds()}else f.call(this)};var S=u.utcOffset;u.utcOffset=function(i,v){var O=this.$utils().u;if(O(i))return this.$u?0:O(this.$offset)?S.call(this):this.$offset;if(typeof i=="string"&&(i=(function(g){g===void 0&&(g="");var A=g.match(r);if(!A)return null;var P=(""+A[0]).match(h)||["-",0,0],D=P[0],$=60*+P[1]+ +P[2];return $===0?0:D==="+"?$:-$})(i),i===null))return this;var C=Math.abs(i)<=16?60*i:i;if(C===0)return this.utc(v);var d=this.clone();if(v)return d.$offset=C,d.$u=!1,d;var M=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(d=this.local().add(C+M,s)).$offset=C,d.$x.$localOffset=M,d};var B=u.format;u.format=function(i){var v=i||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return B.call(this,v)},u.valueOf=function(){var i=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*i},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var j=u.toDate;u.toDate=function(i){return i==="s"&&this.$offset?b(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():j.call(this)};var L=u.diff;u.diff=function(i,v,O){if(i&&this.$u===i.$u)return L.call(this,i,v,O);var C=this.local(),d=b(i).local();return L.call(C,d,v,O)}}}))})(le)),le.exports}var $s=Cs();const Ns=et($s);l.extend(Ns);const{RangePicker:Ms}=Tt;function As({value:n,onChange:a,minDate:s,maxDate:r}){const h={"Last 7 Days":[l().subtract(6,"day").startOf("day").isBefore(s)?s:l().subtract(6,"day").startOf("day"),r.endOf("day")],"Last 30 Days":[l().subtract(29,"day").startOf("day").isBefore(s)?s:l().subtract(29,"day").startOf("day"),r.endOf("day")],"Last 3 Months":[l().subtract(3,"month").startOf("day").isBefore(s)?s:l().subtract(3,"month").startOf("day"),r.endOf("day")],"Last 6 Months":[l().subtract(6,"month").startOf("day").isBefore(s)?s:l().subtract(6,"month").startOf("day"),r.endOf("day")],"Last 1 Year":[l().subtract(1,"year").startOf("day").isBefore(s)?s:l().subtract(1,"year").startOf("day"),r.endOf("day")]};return e.jsx("div",{children:e.jsx(Ms,{presets:Object.entries(h).map(([N,x])=>({label:N,value:x})),value:n,minDate:s,maxDate:r,onChange:N=>{a(N?[l(N[0]).startOf("day"),l(N[1]).endOf("day")]:[null,null])},format:"YYYY-MM-DD",placeholder:["Start date","End date"],className:"w-full rounded-lg border-gray-300 shadow-sm",allowClear:!1})})}l.extend(js);const R=100,sa=()=>{var De,Ie,Re,Be,Le,Pe,ke,Ee;const n=Ot(),a=jt(),s=St(),r=Ct($t),h=(r==null?void 0:r.id)||"guest",{handleProAction:N}=Ft(),x=JSON.parse(sessionStorage.getItem(`user_${h}_filters`))||{},[b,u]=o.useState([]),[y,f]=o.useState(x.currentPage||1),[S,B]=o.useState(6),[j,L]=o.useState(x.sortType||"updatedAt"),[i,v]=o.useState(x.sortOrder||"desc"),[O,C]=o.useState(x.statusFilter||"all"),[d,M]=o.useState([x.dateRangeStart?l(x.dateRangeStart):null,x.dateRangeEnd?l(x.dateRangeEnd):null]),[g,A]=o.useState([x.presetDateRangeStart?l(x.presetDateRangeStart):l().startOf("year").startOf("day"),x.presetDateRangeEnd?l(x.presetDateRangeEnd):l().endOf("day")]),[P,D]=o.useState(x.activePresetLabel||"All"),[$,ee]=o.useState(x.searchTerm||""),[st,G]=o.useState(!1),[at,K]=o.useState(!1),[rt,V]=o.useState(!1),{handlePopup:Oe}=Nt(),nt=120,[oe,lt]=o.useState(0),[E,k]=o.useState(R);o.useEffect(()=>{r?s.invalidateQueries({queryKey:["blogs",h]}):(sessionStorage.removeItem(`user_${h}_filters`),s.clear(),u([]),f(1),L("updatedAt"),v("desc"),C("all"),M([null,null]),A([l().startOf("year").startOf("day"),l().endOf("day")]),D("All"),ee(""),k(R))},[r,h,s]),o.useEffect(()=>{if(r){const t={sortType:j,sortOrder:i,statusFilter:O,searchTerm:$,activePresetLabel:P,dateRangeStart:d[0]?d[0].toISOString():null,dateRangeEnd:d[1]?d[1].toISOString():null,presetDateRangeStart:g[0]?g[0].toISOString():null,presetDateRangeEnd:g[1]?g[1].toISOString():null,currentPage:y};sessionStorage.setItem(`user_${h}_filters`,JSON.stringify(t))}},[r,h,j,i,O,$,d,g,P,y]),o.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[y]);const ot=o.useCallback(()=>{L("updatedAt"),v("desc"),C("all"),M([null,null]),A([l().startOf("year").startOf("day"),l().endOf("day")]),D("All"),ee(""),f(1),k(R),sessionStorage.removeItem(`user_${h}_filters`),s.invalidateQueries({queryKey:["blogs",h]})},[h,s]),it=o.useCallback(()=>{ee(""),f(1)},[]),ie=j==="updatedAt"&&i==="desc",ct=o.useMemo(()=>$||!ie||O!=="all"||d[0]||g[0]&&!g[0].isSame(l().startOf("year").startOf("day")),[$,ie,O,d,g]),dt=o.useCallback(()=>j==="title"&&i==="asc"?"A-Z":j==="title"&&i==="desc"?"Z-A":j==="createdAt"&&i==="desc"?"Newest":j==="createdAt"&&i==="asc"?"Oldest":"Recently Updated",[j,i]),ut=o.useCallback(()=>{switch(O){case"complete":return"Completed";case"pending":return"Pending";case"failed":return"Failed";default:return"All"}},[O]);o.useCallback(()=>P||(d[0]&&d[1]?`${l(d[0]).format("MMM DD")} - ${l(d[1]).format("MMM DD")}`:"All Dates"),[P,d]);const mt=o.useCallback(()=>Qe(null,null,function*(){const t={start:d[0]?l(d[0]).startOf("day").toISOString():g[0]?l(g[0]).startOf("day").toISOString():void 0,end:d[1]?l(d[1]).endOf("day").toISOString():g[1]?l(g[1]).endOf("day").toISOString():void 0,limit:E};return(yield n(Mt(t)).unwrap()).data||[]}),[n,d,g,E]),{data:Z=[],isLoading:ce,isFetching:de}=kt({queryKey:["blogs",h,(Ie=(De=d[0])==null?void 0:De.toISOString())!=null?Ie:null,(Be=(Re=d[1])==null?void 0:Re.toISOString())!=null?Be:null,(Pe=(Le=g[0])==null?void 0:Le.toISOString())!=null?Pe:null,(Ee=(ke=g[1])==null?void 0:ke.toISOString())!=null?Ee:null,E],queryFn:mt,staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,enabled:!!r,onError:t=>{console.error("Failed to fetch blogs:",{error:t.message,status:t.status,response:t.response}),Rt.error("Failed to load blogs. Please try again.")}});o.useEffect(()=>{const t=Bt();if(!t||!r)return;const m=(c,p)=>{var w,te,W,T,Q,se,_,H,U,F,ae,Te,Fe,ze,_e,He;console.debug(`Blog event: ${p}`,c),p==="blog:deleted"||p==="blog:archived"?(s.setQueryData(["blogs",h,(te=(w=d[0])==null?void 0:w.toISOString())!=null?te:null,(T=(W=d[1])==null?void 0:W.toISOString())!=null?T:null,(se=(Q=g[0])==null?void 0:Q.toISOString())!=null?se:null,(H=(_=g[1])==null?void 0:_.toISOString())!=null?H:null,E],(I=[])=>I.filter(X=>X._id!==c.blogId)),s.invalidateQueries({queryKey:["blog",c.blogId]})):(s.setQueryData(["blogs",h,(F=(U=d[0])==null?void 0:U.toISOString())!=null?F:null,(Te=(ae=d[1])==null?void 0:ae.toISOString())!=null?Te:null,(ze=(Fe=g[0])==null?void 0:Fe.toISOString())!=null?ze:null,(He=(_e=g[1])==null?void 0:_e.toISOString())!=null?He:null,E],(I=[])=>{const X=I.findIndex(me=>me._id===c.blogId);if(X>-1)return I[X]=J(J({},I[X]),c),[...I];{const me=l(c.updatedAt||c.createdAt),Ue=d[0]||g[0],Ye=d[1]||g[1];return!Ue||!Ye||me.isBetween(Ue,Ye,"day","[]")?[c,...I]:I}}),s.setQueryData(["blog",c.blogId],I=>J(J({},I),c)))};return t.on("blog:statusChanged",c=>m(c,"blog:statusChanged")),t.on("blog:updated",c=>m(c,"blog:updated")),t.on("blog:deleted",c=>m(c,"blog:deleted")),t.on("blog:archived",c=>m(c,"blog:archived")),()=>{t.off("blog:statusChanged"),t.off("blog:updated"),t.off("blog:deleted"),t.off("blog:archived")}},[s,r,h,d,g,E]);const je=Ge({mutationFn:t=>n(Dt({id:t})).unwrap(),onSuccess:()=>{s.invalidateQueries({queryKey:["blogs",h],exact:!1})},onError:t=>{console.error("Failed to retry blog:",t)}}),Se=Ge({mutationFn:t=>n(It(t)).unwrap(),onSuccess:()=>{s.invalidateQueries({queryKey:["blogs",h],exact:!1})},onError:t=>{console.error("Failed to archive blog:",t)}}),Ce=o.useMemo(()=>new Pt(Z,{keys:[{name:"title",weight:.5},{name:"content",weight:.3},{name:"focusKeywords",weight:.2}],threshold:.3,includeScore:!0,shouldSort:!0}),[Z]),ft=o.useMemo(()=>Ke.debounce(t=>{ee(t),f(1)},300),[]),ue=o.useMemo(()=>{let t=Z;$.trim()&&(t=Ce.search($).map(({item:c})=>c)),O!=="all"&&(t=t.filter(c=>c.status===O));const m=[...t];return j==="title"?m.sort((c,p)=>i==="asc"?c.title.localeCompare(p.title):p.title.localeCompare(c.title)):j==="updatedAt"?m.sort((c,p)=>i==="asc"?new Date(c.updatedAt)-new Date(p.updatedAt):new Date(p.updatedAt)-new Date(c.updatedAt)):j==="createdAt"&&m.sort((c,p)=>i==="asc"?new Date(c.createdAt)-new Date(p.createdAt):new Date(p.createdAt)-new Date(c.createdAt)),{blogs:m.slice((y-1)*S,y*S),total:m.length}},[Z,$,O,j,i,y,S,Ce]);o.useEffect(()=>{u(ue.blogs),lt(ue.total)},[ue]),o.useEffect(()=>{const t=Ke.debounce(()=>{window.innerWidth>=1024?B(15):window.innerWidth>=768?B(12):B(6),f(1)},200);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),t.cancel()}},[]);const $e=o.useCallback(t=>{a(`/toolbox/${t._id}`)},[a]),Ne=o.useCallback(t=>{a(`/blog-editor/${t._id}`)},[a]),gt=o.useCallback(t=>{je.mutate(t)},[je]),ht=o.useCallback(t=>{Se.mutate(t)},[Se]),Me=o.useCallback((t,m=nt)=>t?t.length>m?t.substring(0,m)+"...":t:"",[]),Ae=o.useCallback(t=>{var m,c,p;return(p=(c=(m=t==null?void 0:t.replace(/<[^>]*>/g,""))==null?void 0:m.replace(/[\\*#=_~`>\-]+/g,""))==null?void 0:c.replace(/\s{2,}/g," "))==null?void 0:p.trim()},[]),pt=o.useMemo(()=>[{label:"A-Z (Ascending)",icon:e.jsx(ps,{}),onClick:()=>{L("title"),v("asc"),G(!1),f(1)}},{label:"Z-A (Descending)",icon:e.jsx(ys,{}),onClick:()=>{L("title"),v("desc"),G(!1),f(1)}},{label:"Newest Blog",icon:e.jsx(ss,{}),onClick:()=>{L("createdAt"),v("desc"),G(!1),f(1)}},{label:"Oldest Blog",icon:e.jsx(Jt,{}),onClick:()=>{L("createdAt"),v("asc"),G(!1),f(1)}}],[]),xt=o.useMemo(()=>[{label:"All Status",icon:e.jsx(We,{}),onClick:()=>{C("all"),K(!1),f(1)}},{label:"Status: Completed",icon:e.jsx(We,{}),onClick:()=>{C("complete"),K(!1),f(1)}},{label:"Status: Pending",icon:e.jsx(fs,{}),onClick:()=>{C("pending"),K(!1),f(1)}},{label:"Status: Failed",icon:e.jsx(os,{}),onClick:()=>{C("failed"),K(!1),f(1)}}],[]),bt=o.useMemo(()=>[{label:"Last 7 Days",value:[l().subtract(7,"days").startOf("day"),l().endOf("day")],onClick:()=>{A([l().subtract(7,"days").startOf("day"),l().endOf("day")]),M([null,null]),D("Last 7 Days"),f(1),V(!1),k(R)}},{label:"Last 30 Days",value:[l().subtract(30,"days").startOf("day"),l().endOf("day")],onClick:()=>{A([l().subtract(30,"days").startOf("day"),l().endOf("day")]),M([null,null]),D("Last 30 Days"),f(1),V(!1),k(R)}},{label:"Last 3 Months",value:[l().subtract(3,"months").startOf("day"),l().endOf("day")],onClick:()=>{A([l().subtract(3,"months").startOf("day"),l().endOf("day")]),M([null,null]),D("Last 3 Months"),f(1),V(!1),k(R)}},{label:"Last 6 Months",value:[l().subtract(6,"months").startOf("day"),l().endOf("day")],onClick:()=>{A([l().subtract(6,"months").startOf("day"),l().endOf("day")]),M([null,null]),D("Last 6 Months"),f(1),V(!1),k(R)}},{label:"All",value:[l().startOf("year").startOf("day"),l().endOf("day")],onClick:()=>{A([l().startOf("year").startOf("day"),l().endOf("day")]),M([null,null]),D("All"),f(1),V(!1),k(R)}}],[]);return e.jsxs("div",{className:"p-2 md:p-4 lg:p-8 max-w-full",children:[e.jsx(At,{children:e.jsx("title",{children:"Blogs | GenWrite"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 mt-5 p-2 md:mt-0 md:p-0",children:[e.jsx(Y.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blogs Generated"}),e.jsx(Y.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"text-gray-500 text-sm mt-2 max-w-md",children:"All our blogs in one place. Explore insights, tips, and strategies to level up your content creation."})]}),e.jsx(Y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs("div",{onClick:()=>{N(()=>{a("/blog-editor")})},className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-[#1B6FC9] hover:bg-[#1B6FC9]/90 text-white rounded-lg transition-colors text-xs sm:text-sm font-medium cursor-pointer",children:[e.jsx(zt,{className:"w-4 sm:w-5 h-4 sm:h-5"}),"New Blog"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 sm:p-6 rounded-lg mb-6",children:[e.jsx("div",{className:"flex-1 flex items-center gap-2",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{placeholder:"Search blogs...",value:$,onChange:t=>ft(t.target.value),className:"w-full rounded-lg border border-gray-300 px-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-300 py-2","aria-label":"Search blogs"}),e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),$&&e.jsx(Ht,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 cursor-pointer",onClick:it})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 items-center",children:[e.jsx(fe,{open:st,onOpenChange:t=>G(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:pt.map(({label:t,icon:m,onClick:c})=>e.jsx(re,{title:t,placement:"left",children:e.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:m}),e.jsx("span",{children:t})]})},t))}),children:e.jsx(Y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(q,{type:"default",icon:e.jsx(Gt,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${ie?"":"border-blue-400 bg-blue-50 text-blue-600"}`,children:["Sort: ",dt()]})})}),e.jsx(fe,{open:at,onOpenChange:t=>K(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:xt.map(({label:t,icon:m,onClick:c})=>e.jsx(re,{title:t,placement:"left",children:e.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:m}),e.jsx("span",{children:t})]})},t))}),children:e.jsx(Y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(q,{type:"default",icon:e.jsx(Zt,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${O!=="all"?"border-green-400 bg-green-50 text-green-600":""}`,children:["Filter: ",ut()]})})}),e.jsx(fe,{open:rt,onOpenChange:t=>V(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:bt.map(({label:t,onClick:m})=>e.jsx(re,{title:t,placement:"left",children:e.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:e.jsx(ds,{})}),e.jsx("span",{children:t})]})},t))})}),e.jsx(Y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(q,{type:"default",icon:e.jsx(Ut,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:()=>s.invalidateQueries(["blogs",h]),className:"p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm",children:"Refresh"})}),e.jsx(Y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(q,{type:"default",icon:e.jsx(Ze,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:ot,className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${ct?"border-red-400 bg-red-50 text-red-600":""}`,children:"Reset"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(As,{value:d,minDate:r!=null&&r.createdAt?l(r==null?void 0:r.createdAt):void 0,maxDate:l(),onChange:t=>{M(t?[l(t[0]).startOf("day"),l(t[1]).endOf("day")]:[null,null]),A([null,null]),D(""),f(1),k(R)},className:Et("w-full rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-300 text-xs sm:text-sm",(d[0]||g[0])&&"!border-purple-400 !shadow-purple-100"),format:"YYYY-MM-DD",placeholder:["Start date","End date"],"aria-label":"Select date range"})})]}),ce||de?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[...Array(S)].map((t,m)=>e.jsx("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6",children:e.jsx(Lt,{})},m))}):b.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 270px)"},children:[e.jsx("img",{src:"Images/no-blog.png",alt:"No blogs",className:"w-20 sm:w-24"}),e.jsx("p",{className:"text-lg sm:text-xl mt-5",children:"No blogs available."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8 place-items-center p-2",children:b.map(t=>{const m=t.isManuallyEdited===!0,{_id:c,title:p,status:w,createdAt:te,content:W,aiModel:T,focusKeywords:Q,updatedAt:se,wordpress:_,agendaJob:H}=t,U=/gemini/gi.test(T);return e.jsx(Yt.Ribbon,{text:e.jsx("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide text-xs sm:text-sm",children:m?e.jsx(e.Fragment,{children:"Manually Generated"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`./Images/${U?"gemini":T==="claude"?"claude":"chatgpt"}.png`,alt:U?"Gemini":T==="claude"?"Claude":"ChatGPT",width:16,height:16,loading:"lazy",className:"bg-white"}),U?"Gemini 2.0 flash":T==="claude"?"Claude 4 sonnet":"Gpt 4.1 nano"]})}),className:"absolute top-0",color:m?"#9CA3AF":U?"#4796E3":T==="claude"?"#9368F8":"#74AA9C",children:e.jsxs("div",{className:`bg-white shadow-md hover:shadow-xl transition-all duration-300 rounded-lg p-4 sm:p-6 min-h-[180px] min-w-0 relative ${m?"border-gray-500":w==="failed"?"border-red-500":w==="pending"||w==="in-progress"?"border-yellow-500":"border-green-500"} border-2`,title:p,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(te).toLocaleDateString("en-US",{dateStyle:"medium"})}),m?e.jsx("div",{className:"cursor-pointer",onClick:()=>Ne(t),role:"button",tabIndex:0,onKeyDown:F=>F.key==="Enter"&&Ne(t),"aria-label":`View blog ${p}`,children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-base sm:text-lg capitalize font-semibold text-gray-900 !text-left max-w-full",children:p}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:Me(Ae(W))||""})]})}):e.jsx(re,{title:w==="complete"?p:w==="failed"?"Blog generation failed":w==="pending"?`Pending Blog will be generated ${H!=null&&H.nextRunAt?"at "+new Date(H.nextRunAt).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"shortly"}`:`Blog generation is ${w}`,color:w==="complete"?"green":w==="failed"?"red":"#eab308",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{(w==="complete"||w==="failed")&&$e(t)},role:"button",tabIndex:0,onKeyDown:F=>F.key==="Enter"&&(w==="complete"||w==="failed")&&$e(t),"aria-label":`View blog ${p}`,children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-base sm:text-lg capitalize font-semibold text-gray-900 !text-left max-w-full",children:p}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:Me(Ae(W))||""})]})})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:Q==null?void 0:Q.map((F,ae)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2 sm:px-2.5 py-0.5 rounded-full",children:F},ae))}),w==="failed"&&e.jsx(q,{type:"text",className:"p-2 hover:!border-blue-500 hover:text-blue-500","aria-label":"Regenerate Blog",onClick:()=>Oe({title:"Regenerate Blog",description:e.jsxs("span",{className:"my-2",children:["Are you sure you want to retry generating ",e.jsx("b",{children:p})," blog?"]}),confirmText:"Yes",onConfirm:()=>{gt(c)},confirmProps:{type:"text",className:"border-green-500 bg-green-50 text-green-600"},cancelProps:{danger:!1}}),children:e.jsx(Ze,{className:"w-4 sm:w-5 h-4 sm:h-5"})}),e.jsx(q,{type:"text",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>Oe({title:"Move to Trash",description:e.jsxs("span",{className:"my-2",children:["Blog ",e.jsx("b",{children:p})," will be moved to trash. You can restore it later."]}),confirmText:"Delete",onConfirm:()=>{ht(c)},confirmProps:{type:"text",className:"border-red-500 hover:bg-red-500 bg-red-100 text-red-600"},cancelProps:{danger:!1}}),"aria-label":`Move blog ${p} to trash`,children:e.jsx(qt,{className:"w-4 sm:w-5 h-4 sm:h-5"})})]}),e.jsxs("div",{className:"mt-3 -mb-2 flex justify-end text-xs sm:text-sm text-right text-gray-500 font-medium",children:[(_==null?void 0:_.postedOn)&&e.jsxs("span",{className:"",children:["Posted on:"," ",new Date(_.postedOn).toLocaleDateString("en-US",{dateStyle:"medium"})]}),e.jsxs("span",{className:"ml-auto",children:["Last updated:"," ",new Date(se).toLocaleDateString("en-US",{dateStyle:"medium"})]})]})]})},c)})}),oe>S&&e.jsx("div",{className:"flex justify-center mt-6 sm:mt-8",children:e.jsx(Vt,{current:y,total:oe,pageSize:S,onChange:(t,m)=>{f(t),m!==S&&(B(m),f(1))},showTotal:t=>`Total ${t} blogs`,responsive:!0,showSizeChanger:!1,pageSizeOptions:["6","12","15"],disabled:ce||de,className:"text-xs sm:text-sm"})}),Z.length===E&&E!==-1&&y===Math.ceil(oe/S)&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(q,{onClick:()=>k(t=>t+R),disabled:ce||de,children:"Load More"})})]})]})};export{sa as default};
