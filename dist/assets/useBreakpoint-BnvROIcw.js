import{R as h,b as f}from"./chunk-tiptap-JX9QK0Ia.js";import{as as l,a4 as x}from"./index-D_Iu5SBb.js";const m=(e,n)=>{typeof(e==null?void 0:e.addEventListener)<"u"?e.addEventListener("change",n):typeof(e==null?void 0:e.addListener)<"u"&&e.addListener(n)},$=(e,n)=>{typeof(e==null?void 0:e.removeEventListener)<"u"?e.removeEventListener("change",n):typeof(e==null?void 0:e.removeListener)<"u"&&e.removeListener(n)},p=["xxl","xl","lg","md","sm","xs"],b=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),g=e=>{const n=e,r=[].concat(p).reverse();return r.forEach((c,i)=>{const s=c.toUpperCase(),t=`screen${s}Min`,a=`screen${s}`;if(!(n[t]<=n[a]))throw new Error(`${t}<=${a} fails : !(${n[t]}<=${n[a]})`);if(i<r.length-1){const o=`screen${s}Max`;if(!(n[a]<=n[o]))throw new Error(`${a}<=${o} fails : !(${n[a]}<=${n[o]})`);const d=`screen${r[i+1].toUpperCase()}Min`;if(!(n[o]<=n[d]))throw new Error(`${o}<=${d} fails : !(${n[o]}<=${n[d]})`)}}),e},y=(e,n)=>{if(n){for(const r of p)if(e[r]&&(n==null?void 0:n[r])!==void 0)return n[r]}},M=()=>{const[,e]=l(),n=b(g(e));return h.useMemo(()=>{const r=new Map;let c=-1,i={};return{responsiveMap:n,matchHandlers:{},dispatch(s){return i=s,r.forEach(t=>t(i)),r.size>=1},subscribe(s){return r.size||this.register(),c+=1,r.set(c,s),s(i),c},unsubscribe(s){r.delete(s),r.size||this.unregister()},register(){Object.entries(n).forEach(s=>{let[t,a]=s;const o=d=>{let{matches:v}=d;this.dispatch(Object.assign(Object.assign({},i),{[t]:v}))},u=window.matchMedia(a);m(u,o),this.matchHandlers[a]={mql:u,listener:o},o(u)})},unregister(){Object.values(n).forEach(s=>{const t=this.matchHandlers[s];$(t==null?void 0:t.mql,t==null?void 0:t.listener)}),r.clear()}}},[e])};function w(){const[,e]=f.useReducer(n=>n+1,0);return e}function U(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=f.useRef(n),c=w(),i=M();return x(()=>{const s=i.subscribe(t=>{r.current=t,e&&c()});return()=>i.unsubscribe(s)},[]),r.current}export{w as a,y as m,p as r,U as u};
