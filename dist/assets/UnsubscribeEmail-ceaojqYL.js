var p=(o,m,t)=>new Promise((i,a)=>{var u=s=>{try{r(t.next(s))}catch(n){a(n)}},l=s=>{try{r(t.throw(s))}catch(n){a(n)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(u,l);r((t=t.apply(o,m)).next())});import{j as e}from"./tiptap-BabmW22p.js";import{h as f,f as g,b}from"./vendor-CcjAMWu8.js";import{u as v}from"./useAuthStore-CU2rUJjR.js";import{s as c,z as y,T as j,G as N,B as h}from"./antd-8WQTeuab.js";import{c as k}from"./index-CHEUOGl9.js";import"./DataLayer-DALerVhB.js";import"./react-wNxFir7h.js";import"./utils-DIb0lvMo.js";const w=[["path",{d:"M22 15V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"fuxbkv"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M16 19h6",key:"xwg31i"}]],S=k("mail-minus",w),{Title:E,Paragraph:M,Text:P}=j,W=()=>{const o=f(),[m]=g(),{loading:t,unsubscribeSuccessMessage:i,error:a,unsubscribeAction:u,resetUnsubscribe:l}=v(),r=m.get("email");b.useEffect(()=>()=>{l()},[l]),b.useEffect(()=>{i&&(c.success(i),setTimeout(()=>o("/"),2e3)),a&&c.error(a)},[i,a,o]);const s=d=>d&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d),n=()=>p(null,null,function*(){if(!r){c.error("Email not provided in the URL. Please check the link and try again.");return}if(!s(r)){c.error("Invalid email format. Please provide a valid email address.");return}try{yield u(r)}catch(d){}}),x=()=>{o("/dashboard")};return e.jsx(y,{theme:{token:{fontFamily:"Inter, sans-serif"},components:{Button:{primaryColor:"#fff"}}},children:e.jsx("main",{className:"bg-gradient-to-br from-blue-50 via-purple-50 to-white flex items-center justify-center min-h-screen p-4 font-sans",children:e.jsxs("div",{className:"max-w-xl w-full text-center p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(S,{className:"h-16 w-16 text-purple-500 mx-auto",strokeWidth:1.5})}),e.jsx(E,{level:2,className:"!text-4xl !font-bold !text-slate-900 !mb-3",children:"Weâ€™re sad to see you go ðŸ˜”"}),e.jsx(M,{className:"!text-slate-600 !mb-10 !text-lg",children:"Youâ€™re about to unsubscribe from our emails. Are you sure?"}),e.jsxs(N,{direction:"vertical",className:"w-full sm:w-auto sm:!flex-row",size:"middle",children:[e.jsx(h,{type:"primary",size:"large",shape:"round",className:"!bg-gradient-to-r !from-purple-600 !to-blue-600 hover:!from-purple-700 hover:!to-blue-700 !h-12 !px-8 !text-base !font-semibold !shadow-lg !border-none transform hover:scale-105 transition-transform",onClick:x,disabled:t,children:"Stay Subscribed"}),e.jsx(h,{size:"large",shape:"round",className:"!bg-transparent !h-12 !px-8 !text-base !font-semibold !text-purple-800 !border-purple-300 hover:!bg-purple-100 hover:!border-purple-400",onClick:n,disabled:t||!r||!s(r),children:"Unsubscribe"})]}),e.jsx("div",{className:"mt-16",children:e.jsx(P,{className:"!text-sm !text-slate-500",children:"You can resubscribe anytime from your account settings."})})]})})})};export{W as default};
