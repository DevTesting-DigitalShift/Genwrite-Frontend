import{u as j,a as N,g as v,j as t,A as I,H as T,m as D,T as O}from"./index-KPP6Codd.js";import{b as o}from"./chunk-tiptap-Diw-eXXG.js";import{d as w}from"./dayjs.min-BeGhjYCo.js";import{S as d,E as C}from"./Pagination-CjE1cCS3.js";import{I as A}from"./index-1Kwlz9fO.js";import{R as E}from"./SearchOutlined-DyqyMk8o.js";import{F as L,T as p}from"./index-DevyVgRg.js";import{S as z}from"./index-DDjPLeeE.js";import"./LeftOutlined-Blg3rtIY.js";import"./Overflow-pR7VzlsO.js";import"./move-gr_ySktW.js";import"./useIcons-hMLqDAOw.js";import"./SearchOutlined-v5Jh5q1W.js";import"./Input-FIQqpxh1.js";import"./index-DJF1CZg_.js";import"./EllipsisOutlined-D_5Z7VDw.js";const V=()=>{const l=j(),{Option:n}=d,[s,u]=o.useState(""),[i,x]=o.useState("24h"),[a,c]=o.useState({current:1,pageSize:10}),h=[10,20,50,100],{logs:y,loading:m,totalLogs:S}=N(e=>e.creditLogs),f=e=>{const r=w();switch(e){case"24h":return{start:r.subtract(24,"hours").startOf("hour").toISOString(),end:r.endOf("hour").toISOString()};case"7d":return{start:r.subtract(7,"days").startOf("day").toISOString(),end:r.endOf("day").toISOString()};case"30d":return{start:r.subtract(30,"days").startOf("day").toISOString(),end:r.endOf("day").toISOString()};default:return{}}};o.useEffect(()=>{const e={page:a.current,limit:a.pageSize,...s?{search:s}:{},...f(i)};l(v(e))},[l,s,i,a]);const b=[{title:"Date",dataIndex:"createdAt",key:"createdAt",sorter:(e,r)=>new Date(e.createdAt)-new Date(r.createdAt),render:e=>t.jsx("span",{className:"text-sm text-gray-600",children:new Date(e).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"})})},{title:"Type",dataIndex:"category",key:"category",filters:[{text:"Deduction",value:"DEDUCTION"},{text:"Adjustment",value:"ADJUSTMENT"}],onFilter:(e,r)=>r.category===e,render:e=>t.jsx(p,{color:e==="DEDUCTION"?"red":"green",className:"font-medium px-2 py-0.5 rounded-full",children:e})},{title:"Amount",dataIndex:"amount",key:"amount",sorter:(e,r)=>e.amount-r.amount,render:e=>t.jsx("span",{className:`font-semibold ${e<0?"text-red-500":"text-green-600"}`,children:e>0?`+${e}`:e})},{title:"Description",dataIndex:"description",key:"description",render:(e,r)=>{var g;return t.jsxs("div",{className:"text-sm text-gray-800 flex items-center",children:[e,((g=r.meta)==null?void 0:g.error)&&t.jsx(O,{title:r.meta.error,children:t.jsx(p,{color:"volcano",className:"ml-2 cursor-pointer px-2 py-0.5 rounded-full",children:"Error"})})]})}},{title:"Blog Topic",dataIndex:["meta","blogTitle"],key:"blogTitle",render:e=>t.jsx("span",{children:e||"N/A"})}];return t.jsxs(I,{children:[t.jsx(T,{children:t.jsx("title",{children:"Credit Logs | GenWrite"})}),t.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"p-6 bg-white rounded-2xl shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Credit Logs"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(A,{prefix:t.jsx(E,{className:"text-gray-400"}),placeholder:"Search by blog title",value:s,onChange:e=>u(e.target.value),className:"w-64 rounded-lg border-gray-200 hover:border-blue-300"}),t.jsxs(d,{value:i,onChange:e=>x(e),className:"w-48 rounded-lg border-gray-200 hover:border-blue-300",placeholder:"Select date range",children:[t.jsx(n,{value:"24h",children:"Last 24 Hours"}),t.jsx(n,{value:"7d",children:"Last 7 Days"}),t.jsx(n,{value:"30d",children:"Last 30 Days"})]}),t.jsx(d,{value:a.pageSize,onChange:e=>c({...a,pageSize:e}),options:h.map(e=>({label:`${e} / page`,value:e})),className:"w-32 rounded-lg border-gray-200 hover:border-blue-300"})]})]}),t.jsx(L,{dataSource:y,columns:b,loading:m,rowKey:(e,r)=>`${e._id}-${r}`,pagination:{current:a.current,pageSize:a.pageSize,total:S,showSizeChanger:!1,onChange:(e,r)=>{c({current:e,pageSize:r})}},className:"rounded-xl overflow-hidden",rowClassName:"hover:bg-gray-50 transition-colors",bordered:!1,scroll:{x:"max-content"},locale:{emptyText:m?t.jsx(z,{}):t.jsx(C,{description:"No logs found"})}})]})]})};export{V as default};
