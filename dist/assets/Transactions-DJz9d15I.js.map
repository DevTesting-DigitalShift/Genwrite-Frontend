{"version":3,"file":"Transactions-DJz9d15I.js","sources":["../../src/pages/Transactions.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { Table, Tag, Tooltip } from \"antd\"\r\nimport { motion } from \"framer-motion\"\r\nimport { ReloadOutlined } from \"@ant-design/icons\"\r\nimport { Helmet } from \"react-helmet\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { fetchTransactions } from \"@store/slices/userSlice\"\r\n\r\nconst Transactions = () => {\r\n  const dispatch = useDispatch()\r\n  const { transactions, loading } = useSelector((state) => state.user)\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTransactions())\r\n  }, [dispatch])\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Date\",\r\n      dataIndex: \"createdAt\",\r\n      key: \"createdAt\",\r\n      render: (date) =>\r\n        new Date(date).toLocaleString(\"en-US\", { dateStyle: \"medium\", timeStyle: \"short\" }),\r\n      sorter: (a, b) => new Date(a.createdAt) - new Date(b.createdAt),\r\n      defaultSortOrder: \"descend\",\r\n    },\r\n    {\r\n      title: \"Type\",\r\n      dataIndex: \"type\",\r\n      key: \"type\",\r\n      render: (type) => (\r\n        <Tag color={type === \"subscription\" ? \"blue\" : \"gold\"}>\r\n          {type.replace(/_/g, \" \").toUpperCase()}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Plan\",\r\n      dataIndex: \"plan\",\r\n      key: \"plan\",\r\n      render: (plan) => (plan ? <Tag color=\"purple\">{plan.toUpperCase()}</Tag> : \"-\"),\r\n    },\r\n    {\r\n      title: \"Credits\",\r\n      dataIndex: \"creditsAdded\",\r\n      key: \"creditsAdded\",\r\n      render: (credits) => <span>{credits || 0}</span>,\r\n    },\r\n    {\r\n      title: \"Amount\",\r\n      dataIndex: \"amount\",\r\n      key: \"amount\",\r\n      render: (amt, record) => `$${(amt / 100).toFixed(2)} ${record.currency?.toUpperCase()}`,\r\n    },\r\n    {\r\n      title: \"Payment Method\",\r\n      dataIndex: \"paymentMethod\",\r\n      key: \"paymentMethod\",\r\n      render: (pm) => pm?.toUpperCase() || \"-\",\r\n    },\r\n    {\r\n      title: \"Status\",\r\n      dataIndex: \"status\",\r\n      key: \"status\",\r\n      render: (status) => {\r\n        let color = \"default\"\r\n        if (status === \"success\") color = \"green\"\r\n        else if (status === \"failed\") color = \"red\"\r\n        else if (status === \"pending\") color = \"orange\"\r\n        return <Tag color={color}>{status.toUpperCase()}</Tag>\r\n      },\r\n      filters: [\r\n        { text: \"Success\", value: \"success\" },\r\n        { text: \"Pending\", value: \"pending\" },\r\n        { text: \"Failed\", value: \"failed\" },\r\n      ],\r\n      onFilter: (value, record) => record.status === value,\r\n    },\r\n    {\r\n      title: \"Invoice\",\r\n      dataIndex: \"invoiceUrl\",\r\n      key: \"invoiceUrl\",\r\n      render: (url) =>\r\n        url ? (\r\n          <a\r\n            href={url}\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n            className=\"text-blue-500 underline hover:text-blue-700\"\r\n          >\r\n            View Invoice\r\n          </a>\r\n        ) : (\r\n          \"-\"\r\n        ),\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Transactions | GenWrite</title>\r\n      </Helmet>\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.4 }}\r\n        className=\"p-6 bg-white rounded-xl shadow-md\"\r\n      >\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800\">Your Transactions</h2>\r\n          <Tooltip title=\"Refresh\">\r\n            <button\r\n              onClick={fetchTransactions}\r\n              className=\"px-3 py-2 bg-gray-100 rounded-full hover:bg-gray-200 transition\"\r\n            >\r\n              <ReloadOutlined />\r\n            </button>\r\n          </Tooltip>\r\n        </div>\r\n        <Table\r\n          rowKey=\"_id\"\r\n          loading={loading}\r\n          dataSource={transactions}\r\n          columns={columns}\r\n          pagination={{ pageSize: 10 }}\r\n          className=\"custom-table rounded-lg overflow-hidden\"\r\n        />\r\n      </motion.div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Transactions\r\n"],"names":["Transactions","dispatch","useDispatch","transactions","loading","useSelector","state","useEffect","fetchTransactions","columns","date","a","b","type","jsx","Tag","plan","credits","amt","record","_a","pm","status","color","value","url","jsxs","Fragment","Helmet","motion","Tooltip","ReloadOutlined","Table"],"mappings":"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"}