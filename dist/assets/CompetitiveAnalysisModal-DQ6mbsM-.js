import{R as O,b as c}from"./chunk-tiptap-Diw-eXXG.js";import{ac as ue,o as D,ad as X,ae as me,af as pe,ag as G,ah as ie,ai as Me,t as Ie,aj as De,ak as Be,al as Te,am as U,_ as Le,C as ke,g as Pe,d as je,e as T,r as Ne,an as We,ao as Ke,w as Fe,k as Xe,p as ye,ap as ze,aq as le,ar as He,as as ce,T as Ge,at as Ve,au as qe,av as Ue,aw as Qe,ax as Ye,ay as Ze,I as Je,az as et,G as tt,a as rt,b as he,W as nt,s as J,j as m,L as ve,m as ee,a7 as ot}from"./index-651b9dXw.js";import{g as at}from"./getEstimatedCost-C7zpUDMg.js";import{X as be}from"./x-CRSOVgfR.js";import{C as st}from"./index-BoQoPIWW.js";import{R as it}from"./LeftOutlined-CLClSuz_.js";import{g as lt}from"./index-DQ7QI2Yd.js";var Ee=O.forwardRef(function(e,t){var r=e.prefixCls,n=e.forceRender,o=e.className,s=e.style,a=e.children,d=e.isActive,l=e.role,y=e.classNames,p=e.styles,h=O.useState(d||n),x=ue(h,2),g=x[0],C=x[1];return O.useEffect(function(){(n||d)&&C(!0)},[n,d]),g?O.createElement("div",{ref:t,className:D("".concat(r,"-content"),X(X({},"".concat(r,"-content-active"),d),"".concat(r,"-content-inactive"),!d),o),style:s,role:l},O.createElement("div",{className:D("".concat(r,"-content-box"),y==null?void 0:y.body),style:p==null?void 0:p.body},a)):null});Ee.displayName="PanelContent";var ct=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],Ae=O.forwardRef(function(e,t){var r=e.showArrow,n=r===void 0?!0:r,o=e.headerClass,s=e.isActive,a=e.onItemClick,d=e.forceRender,l=e.className,y=e.classNames,p=y===void 0?{}:y,h=e.styles,x=h===void 0?{}:h,g=e.prefixCls,C=e.collapsible,w=e.accordion,k=e.panelKey,v=e.extra,S=e.header,j=e.expandIcon,$=e.openMotion,P=e.destroyInactivePanel,I=e.children,i=me(e,ct),u=C==="disabled",b=v!=null&&typeof v!="boolean",f=X(X(X({onClick:function(){a==null||a(k)},onKeyDown:function(A){(A.key==="Enter"||A.keyCode===pe.ENTER||A.which===pe.ENTER)&&(a==null||a(k))},role:w?"tab":"button"},"aria-expanded",s),"aria-disabled",u),"tabIndex",u?-1:0),_=typeof j=="function"?j(e):O.createElement("i",{className:"arrow"}),K=_&&O.createElement("div",G({className:"".concat(g,"-expand-icon")},["header","icon"].includes(C)?f:{}),_),L=D("".concat(g,"-item"),X(X({},"".concat(g,"-item-active"),s),"".concat(g,"-item-disabled"),u),l),W=D(o,"".concat(g,"-header"),X({},"".concat(g,"-collapsible-").concat(C),!!C),p.header),E=ie({className:W,style:x.header},["header","icon"].includes(C)?{}:f);return O.createElement("div",G({},i,{ref:t,className:L}),O.createElement("div",E,n&&K,O.createElement("span",G({className:"".concat(g,"-header-text")},C==="header"?f:{}),S),b&&O.createElement("div",{className:"".concat(g,"-extra")},v)),O.createElement(Me,G({visible:s,leavedClassName:"".concat(g,"-content-hidden")},$,{forceRender:d,removeOnLeave:P}),function(N,A){var F=N.className,R=N.style;return O.createElement(Ee,{ref:A,prefixCls:g,className:F,classNames:p,style:R,styles:x,isActive:s,forceRender:d,role:w?"tabpanel":void 0},I)}))}),dt=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],ut=function(t,r){var n=r.prefixCls,o=r.accordion,s=r.collapsible,a=r.destroyInactivePanel,d=r.onItemClick,l=r.activeKey,y=r.openMotion,p=r.expandIcon;return t.map(function(h,x){var g=h.children,C=h.label,w=h.key,k=h.collapsible,v=h.onItemClick,S=h.destroyInactivePanel,j=me(h,dt),$=String(w??x),P=k??s,I=S??a,i=function(f){P!=="disabled"&&(d(f),v==null||v(f))},u=!1;return o?u=l[0]===$:u=l.indexOf($)>-1,O.createElement(Ae,G({},j,{prefixCls:n,key:$,panelKey:$,isActive:u,accordion:o,openMotion:y,expandIcon:p,header:C,collapsible:P,onItemClick:i,destroyInactivePanel:I}),g)})},mt=function(t,r,n){if(!t)return null;var o=n.prefixCls,s=n.accordion,a=n.collapsible,d=n.destroyInactivePanel,l=n.onItemClick,y=n.activeKey,p=n.openMotion,h=n.expandIcon,x=t.key||String(r),g=t.props,C=g.header,w=g.headerClass,k=g.destroyInactivePanel,v=g.collapsible,S=g.onItemClick,j=!1;s?j=y[0]===x:j=y.indexOf(x)>-1;var $=v??a,P=function(u){$!=="disabled"&&(l(u),S==null||S(u))},I={key:x,panelKey:x,header:C,headerClass:w,isActive:j,prefixCls:o,destroyInactivePanel:k??d,openMotion:p,accordion:s,children:t.props.children,onItemClick:P,expandIcon:h,collapsible:$};return typeof t.type=="string"?t:(Object.keys(I).forEach(function(i){typeof I[i]>"u"&&delete I[i]}),O.cloneElement(t,I))};function gt(e,t,r){return Array.isArray(e)?ut(e,r):Ie(t).map(function(n,o){return mt(n,o,r)})}function ft(e){var t=e;if(!Array.isArray(t)){var r=U(t);t=r==="number"||r==="string"?[t]:[]}return t.map(function(n){return String(n)})}var pt=O.forwardRef(function(e,t){var r=e.prefixCls,n=r===void 0?"rc-collapse":r,o=e.destroyInactivePanel,s=o===void 0?!1:o,a=e.style,d=e.accordion,l=e.className,y=e.children,p=e.collapsible,h=e.openMotion,x=e.expandIcon,g=e.activeKey,C=e.defaultActiveKey,w=e.onChange,k=e.items,v=D(n,l),S=De([],{value:g,onChange:function(b){return w==null?void 0:w(b)},defaultValue:C,postState:ft}),j=ue(S,2),$=j[0],P=j[1],I=function(b){return P(function(){if(d)return $[0]===b?[]:[b];var f=$.indexOf(b),_=f>-1;return _?$.filter(function(K){return K!==b}):[].concat(Le($),[b])})};Be(!y,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var i=gt(k,y,{prefixCls:n,accordion:d,openMotion:h,expandIcon:x,collapsible:p,destroyInactivePanel:s,onItemClick:I,activeKey:$});return O.createElement("div",G({ref:t,className:v,style:a,role:d?"tablist":void 0},Te(e,{aria:!0,data:!0})),i)});const ge=Object.assign(pt,{Panel:Ae});ge.Panel;const yt=c.forwardRef((e,t)=>{const{getPrefixCls:r}=c.useContext(ke),{prefixCls:n,className:o,showArrow:s=!0}=e,a=r("collapse",n),d=D({[`${a}-no-arrow`]:!s},o);return c.createElement(ge.Panel,Object.assign({ref:t},e,{prefixCls:a,className:d}))}),ht=e=>{const{componentCls:t,contentBg:r,padding:n,headerBg:o,headerPadding:s,collapseHeaderPaddingSM:a,collapseHeaderPaddingLG:d,collapsePanelBorderRadius:l,lineWidth:y,lineType:p,colorBorder:h,colorText:x,colorTextHeading:g,colorTextDisabled:C,fontSizeLG:w,lineHeight:k,lineHeightLG:v,marginSM:S,paddingSM:j,paddingLG:$,paddingXS:P,motionDurationSlow:I,fontSizeIcon:i,contentPadding:u,fontHeight:b,fontHeightLG:f}=e,_=`${T(y)} ${p} ${h}`;return{[t]:Object.assign(Object.assign({},Ne(e)),{backgroundColor:o,border:_,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:_,"&:first-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`${T(l)} ${T(l)} 0 0`}},"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${T(l)} ${T(l)}`}},[`> ${t}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:s,color:g,lineHeight:k,cursor:"pointer",transition:`all ${I}, visibility 0s`},We(e)),{[`> ${t}-header-text`]:{flex:"auto"},[`${t}-expand-icon`]:{height:b,display:"flex",alignItems:"center",paddingInlineEnd:S},[`${t}-arrow`]:Object.assign(Object.assign({},Ke()),{fontSize:i,transition:`transform ${I}`,svg:{transition:`transform ${I}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}}),[`${t}-collapsible-header`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-collapsible-icon`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:x,backgroundColor:r,borderTop:_,[`& > ${t}-content-box`]:{padding:u},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:a,paddingInlineStart:P,[`> ${t}-expand-icon`]:{marginInlineStart:e.calc(j).sub(P).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:j}}},"&-large":{[`> ${t}-item`]:{fontSize:w,lineHeight:v,[`> ${t}-header`]:{padding:d,paddingInlineStart:n,[`> ${t}-expand-icon`]:{height:f,marginInlineStart:e.calc($).sub(n).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:$}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${T(l)} ${T(l)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:C,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:S}}}}})}},vt=e=>{const{componentCls:t}=e,r=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[r]:{transform:"rotate(180deg)"}}}},bt=e=>{const{componentCls:t,headerBg:r,borderlessContentPadding:n,borderlessContentBg:o,colorBorder:s}=e;return{[`${t}-borderless`]:{backgroundColor:r,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${s}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:o,borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{padding:n}}}},xt=e=>{const{componentCls:t,paddingSM:r}=e;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:r}}}}}},Ct=e=>({headerPadding:`${e.paddingSM}px ${e.padding}px`,headerBg:e.colorFillAlter,contentPadding:`${e.padding}px 16px`,contentBg:e.colorBgContainer,borderlessContentPadding:`${e.paddingXXS}px 16px ${e.padding}px`,borderlessContentBg:"transparent"}),$t=Pe("Collapse",e=>{const t=je(e,{collapseHeaderPaddingSM:`${T(e.paddingXS)} ${T(e.paddingSM)}`,collapseHeaderPaddingLG:`${T(e.padding)} ${T(e.paddingLG)}`,collapsePanelBorderRadius:e.borderRadiusLG});return[ht(t),bt(t),xt(t),vt(t),lt(t)]},Ct),St=c.forwardRef((e,t)=>{const{getPrefixCls:r,direction:n,expandIcon:o,className:s,style:a}=Fe("collapse"),{prefixCls:d,className:l,rootClassName:y,style:p,bordered:h=!0,ghost:x,size:g,expandIconPosition:C="start",children:w,destroyInactivePanel:k,destroyOnHidden:v,expandIcon:S}=e,j=Xe(E=>{var N;return(N=g??E)!==null&&N!==void 0?N:"middle"}),$=r("collapse",d),P=r(),[I,i,u]=$t($),b=c.useMemo(()=>C==="left"?"start":C==="right"?"end":C,[C]),f=S??o,_=c.useCallback((E={})=>{const N=typeof f=="function"?f(E):c.createElement(it,{rotate:E.isActive?n==="rtl"?-90:90:void 0,"aria-label":E.isActive?"expanded":"collapsed"});return ye(N,()=>{var A;return{className:D((A=N==null?void 0:N.props)===null||A===void 0?void 0:A.className,`${$}-arrow`)}})},[f,$]),K=D(`${$}-icon-position-${b}`,{[`${$}-borderless`]:!h,[`${$}-rtl`]:n==="rtl",[`${$}-ghost`]:!!x,[`${$}-${j}`]:j!=="middle"},s,l,y,i,u),L=Object.assign(Object.assign({},ze(P)),{motionAppear:!1,leavedClassName:`${$}-content-hidden`}),W=c.useMemo(()=>w?Ie(w).map((E,N)=>{var A,F;const R=E.props;if(R!=null&&R.disabled){const M=(A=E.key)!==null&&A!==void 0?A:String(N),B=Object.assign(Object.assign({},le(E.props,["disabled"])),{key:M,collapsible:(F=R.collapsible)!==null&&F!==void 0?F:"disabled"});return ye(E,B)}return E}):null,[w]);return I(c.createElement(ge,Object.assign({ref:t,openMotion:L},le(e,["rootClassName"]),{expandIcon:_,prefixCls:$,className:K,style:Object.assign(Object.assign({},a),p),destroyInactivePanel:v??k}),W))}),Oe=Object.assign(St,{Panel:yt});var wt={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},It=function(){var t=c.useRef([]),r=c.useRef(null);return c.useEffect(function(){var n=Date.now(),o=!1;t.current.forEach(function(s){if(s){o=!0;var a=s.style;a.transitionDuration=".3s, .3s, .3s, .06s",r.current&&n-r.current<100&&(a.transitionDuration="0s, 0s")}}),o&&(r.current=Date.now())}),t.current},xe=0,kt=He();function Pt(){var e;return kt?(e=xe,xe+=1):e="TEST_OR_SSR",e}const jt=function(e){var t=c.useState(),r=ue(t,2),n=r[0],o=r[1];return c.useEffect(function(){o("rc_progress_".concat(Pt()))},[]),e||n};var Ce=function(t){var r=t.bg,n=t.children;return c.createElement("div",{style:{width:"100%",height:"100%",background:r}},n)};function $e(e,t){return Object.keys(e).map(function(r){var n=parseFloat(r),o="".concat(Math.floor(n*t),"%");return"".concat(e[r]," ").concat(o)})}var Nt=c.forwardRef(function(e,t){var r=e.prefixCls,n=e.color,o=e.gradientId,s=e.radius,a=e.style,d=e.ptg,l=e.strokeLinecap,y=e.strokeWidth,p=e.size,h=e.gapDegree,x=n&&U(n)==="object",g=x?"#FFF":void 0,C=p/2,w=c.createElement("circle",{className:"".concat(r,"-circle-path"),r:s,cx:C,cy:C,stroke:g,strokeLinecap:l,strokeWidth:y,opacity:d===0?0:1,style:a,ref:t});if(!x)return w;var k="".concat(o,"-conic"),v=h?"".concat(180+h/2,"deg"):"0deg",S=$e(n,(360-h)/360),j=$e(n,1),$="conic-gradient(from ".concat(v,", ").concat(S.join(", "),")"),P="linear-gradient(to ".concat(h?"bottom":"top",", ").concat(j.join(", "),")");return c.createElement(c.Fragment,null,c.createElement("mask",{id:k},w),c.createElement("foreignObject",{x:0,y:0,width:p,height:p,mask:"url(#".concat(k,")")},c.createElement(Ce,{bg:P},c.createElement(Ce,{bg:$}))))}),Y=100,se=function(t,r,n,o,s,a,d,l,y,p){var h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,x=n/100*360*((360-a)/360),g=a===0?0:{bottom:0,top:180,left:90,right:-90}[d],C=(100-o)/100*r;y==="round"&&o!==100&&(C+=p/2,C>=r&&(C=r-.01));var w=Y/2;return{stroke:typeof l=="string"?l:void 0,strokeDasharray:"".concat(r,"px ").concat(t),strokeDashoffset:C+h,transform:"rotate(".concat(s+x+g,"deg)"),transformOrigin:"".concat(w,"px ").concat(w,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Et=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Se(e){var t=e??[];return Array.isArray(t)?t:[t]}var At=function(t){var r=ie(ie({},wt),t),n=r.id,o=r.prefixCls,s=r.steps,a=r.strokeWidth,d=r.trailWidth,l=r.gapDegree,y=l===void 0?0:l,p=r.gapPosition,h=r.trailColor,x=r.strokeLinecap,g=r.style,C=r.className,w=r.strokeColor,k=r.percent,v=me(r,Et),S=Y/2,j=jt(n),$="".concat(j,"-gradient"),P=S-a/2,I=Math.PI*2*P,i=y>0?90+y/2:-90,u=I*((360-y)/360),b=U(s)==="object"?s:{count:s,gap:2},f=b.count,_=b.gap,K=Se(k),L=Se(w),W=L.find(function(B){return B&&U(B)==="object"}),E=W&&U(W)==="object",N=E?"butt":x,A=se(I,u,0,100,i,y,p,h,N,a),F=It(),R=function(){var V=0;return K.map(function(H,q){var oe=L[q]||L[L.length-1],Q=se(I,u,V,H,i,y,p,oe,N,a);return V+=H,c.createElement(Nt,{key:q,color:oe,ptg:H,radius:P,prefixCls:o,gradientId:$,style:Q,strokeLinecap:N,strokeWidth:a,gapDegree:y,ref:function(ae){F[q]=ae},size:Y})}).reverse()},M=function(){var V=Math.round(f*(K[0]/100)),H=100/f,q=0;return new Array(f).fill(null).map(function(oe,Q){var Z=Q<=V-1?L[0]:h,ae=Z&&U(Z)==="object"?"url(#".concat($,")"):void 0,fe=se(I,u,q,H,i,y,p,Z,"butt",a,_);return q+=(u-fe.strokeDashoffset+_)*100/u,c.createElement("circle",{key:Q,className:"".concat(o,"-circle-path"),r:P,cx:S,cy:S,stroke:ae,strokeWidth:a,opacity:1,style:fe,ref:function(Re){F[Q]=Re}})})};return c.createElement("svg",G({className:D("".concat(o,"-circle"),C),viewBox:"0 0 ".concat(Y," ").concat(Y),style:g,id:n,role:"presentation"},v),!f&&c.createElement("circle",{className:"".concat(o,"-circle-trail"),r:P,cx:S,cy:S,stroke:h,strokeLinecap:N,strokeWidth:d||a,style:A}),f?M():R())};function z(e){return!e||e<0?0:e>100?100:e}function te({success:e,successPercent:t}){let r=t;return e&&"progress"in e&&(r=e.progress),e&&"percent"in e&&(r=e.percent),r}const Ot=({percent:e,success:t,successPercent:r})=>{const n=z(te({success:t,successPercent:r}));return[n,z(z(e)-n)]},_t=({success:e={},strokeColor:t})=>{const{strokeColor:r}=e;return[r||ce.green,t||null]},ne=(e,t,r)=>{var n,o,s,a;let d=-1,l=-1;if(t==="step"){const y=r.steps,p=r.strokeWidth;typeof e=="string"||typeof e>"u"?(d=e==="small"?2:14,l=p??8):typeof e=="number"?[d,l]=[e,e]:[d=14,l=8]=Array.isArray(e)?e:[e.width,e.height],d*=y}else if(t==="line"){const y=r==null?void 0:r.strokeWidth;typeof e=="string"||typeof e>"u"?l=y||(e==="small"?6:8):typeof e=="number"?[d,l]=[e,e]:[d=-1,l=8]=Array.isArray(e)?e:[e.width,e.height]}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[d,l]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[d,l]=[e,e]:Array.isArray(e)&&(d=(o=(n=e[0])!==null&&n!==void 0?n:e[1])!==null&&o!==void 0?o:120,l=(a=(s=e[0])!==null&&s!==void 0?s:e[1])!==null&&a!==void 0?a:120));return[d,l]},Rt=3,Mt=e=>Rt/e*100,Dt=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:n="round",gapPosition:o,gapDegree:s,width:a=120,type:d,children:l,success:y,size:p=a,steps:h}=e,[x,g]=ne(p,"circle");let{strokeWidth:C}=e;C===void 0&&(C=Math.max(Mt(x),6));const w={width:x,height:g,fontSize:x*.15+6},k=c.useMemo(()=>{if(s||s===0)return s;if(d==="dashboard")return 75},[s,d]),v=Ot(e),S=o||d==="dashboard"&&"bottom"||void 0,j=Object.prototype.toString.call(e.strokeColor)==="[object Object]",$=_t({success:y,strokeColor:e.strokeColor}),P=D(`${t}-inner`,{[`${t}-circle-gradient`]:j}),I=c.createElement(At,{steps:h,percent:h?v[1]:v,strokeWidth:C,trailWidth:C,strokeColor:h?$[1]:$,strokeLinecap:n,trailColor:r,prefixCls:t,gapDegree:k,gapPosition:S}),i=x<=20,u=c.createElement("div",{className:P,style:w},I,!i&&l);return i?c.createElement(Ge,{title:l},u):u},re="--progress-line-stroke-color",_e="--progress-percent",we=e=>{const t=e?"100%":"-100%";return new Ve(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Bt=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},Ne(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${re})`]},height:"100%",width:`calc(1 / var(${_e}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${T(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:we(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:we(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},Tt=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Lt=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},Wt=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},Kt=e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${e.fontSize/e.fontSizeSM}em`}),Ft=Pe("Progress",e=>{const t=e.calc(e.marginXXS).div(2).equal(),r=je(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Bt(r),Tt(r),Lt(r),Wt(r)]},Kt);var Xt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const zt=e=>{let t=[];return Object.keys(e).forEach(r=>{const n=parseFloat(r.replace(/%/g,""));Number.isNaN(n)||t.push({key:n,value:e[r]})}),t=t.sort((r,n)=>r.key-n.key),t.map(({key:r,value:n})=>`${n} ${r}%`).join(", ")},Ht=(e,t)=>{const{from:r=ce.blue,to:n=ce.blue,direction:o=t==="rtl"?"to left":"to right"}=e,s=Xt(e,["from","to","direction"]);if(Object.keys(s).length!==0){const d=zt(s),l=`linear-gradient(${o}, ${d})`;return{background:l,[re]:l}}const a=`linear-gradient(${o}, ${r}, ${n})`;return{background:a,[re]:a}},Gt=e=>{const{prefixCls:t,direction:r,percent:n,size:o,strokeWidth:s,strokeColor:a,strokeLinecap:d="round",children:l,trailColor:y=null,percentPosition:p,success:h}=e,{align:x,type:g}=p,C=a&&typeof a!="string"?Ht(a,r):{[re]:a,background:a},w=d==="square"||d==="butt"?0:void 0,k=o??[-1,s||(o==="small"?6:8)],[v,S]=ne(k,"line",{strokeWidth:s}),j={backgroundColor:y||void 0,borderRadius:w},$=Object.assign(Object.assign({width:`${z(n)}%`,height:S,borderRadius:w},C),{[_e]:z(n)/100}),P=te(e),I={width:`${z(P)}%`,height:S,borderRadius:w,backgroundColor:h==null?void 0:h.strokeColor},i={width:v<0?"100%":v},u=c.createElement("div",{className:`${t}-inner`,style:j},c.createElement("div",{className:D(`${t}-bg`,`${t}-bg-${g}`),style:$},g==="inner"&&l),P!==void 0&&c.createElement("div",{className:`${t}-success-bg`,style:I})),b=g==="outer"&&x==="start",f=g==="outer"&&x==="end";return g==="outer"&&x==="center"?c.createElement("div",{className:`${t}-layout-bottom`},u,l):c.createElement("div",{className:`${t}-outer`,style:i},b&&l,u,f&&l)},Vt=e=>{const{size:t,steps:r,rounding:n=Math.round,percent:o=0,strokeWidth:s=8,strokeColor:a,trailColor:d=null,prefixCls:l,children:y}=e,p=n(r*(o/100)),x=t??[t==="small"?2:14,s],[g,C]=ne(x,"step",{steps:r,strokeWidth:s}),w=g/r,k=Array.from({length:r});for(let v=0;v<r;v++){const S=Array.isArray(a)?a[v]:a;k[v]=c.createElement("div",{key:v,className:D(`${l}-steps-item`,{[`${l}-steps-item-active`]:v<=p-1}),style:{backgroundColor:v<=p-1?S:d,width:w,height:C}})}return c.createElement("div",{className:`${l}-steps-outer`},k,y)};var qt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const Ut=["normal","exception","active","success"],Qt=c.forwardRef((e,t)=>{const{prefixCls:r,className:n,rootClassName:o,steps:s,strokeColor:a,percent:d=0,size:l="default",showInfo:y=!0,type:p="line",status:h,format:x,style:g,percentPosition:C={}}=e,w=qt(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:k="end",type:v="outer"}=C,S=Array.isArray(a)?a[0]:a,j=typeof a=="string"||Array.isArray(a)?a:void 0,$=c.useMemo(()=>{if(S){const R=typeof S=="string"?S:Object.values(S)[0];return new qe(R).isLight()}return!1},[a]),P=c.useMemo(()=>{var R,M;const B=te(e);return parseInt(B!==void 0?(R=B??0)===null||R===void 0?void 0:R.toString():(M=d??0)===null||M===void 0?void 0:M.toString(),10)},[d,e.success,e.successPercent]),I=c.useMemo(()=>!Ut.includes(h)&&P>=100?"success":h||"normal",[h,P]),{getPrefixCls:i,direction:u,progress:b}=c.useContext(ke),f=i("progress",r),[_,K,L]=Ft(f),W=p==="line",E=W&&!s,N=c.useMemo(()=>{if(!y)return null;const R=te(e);let M;const B=x||(H=>`${H}%`),V=W&&$&&v==="inner";return v==="inner"||x||I!=="exception"&&I!=="success"?M=B(z(d),z(R)):I==="exception"?M=W?c.createElement(Ue,null):c.createElement(Qe,null):I==="success"&&(M=W?c.createElement(Ye,null):c.createElement(Ze,null)),c.createElement("span",{className:D(`${f}-text`,{[`${f}-text-bright`]:V,[`${f}-text-${k}`]:E,[`${f}-text-${v}`]:E}),title:typeof M=="string"?M:void 0},M)},[y,d,P,I,p,f,x]);let A;p==="line"?A=s?c.createElement(Vt,Object.assign({},e,{strokeColor:j,prefixCls:f,steps:typeof s=="object"?s.count:s}),N):c.createElement(Gt,Object.assign({},e,{strokeColor:S,prefixCls:f,direction:u,percentPosition:{align:k,type:v}}),N):(p==="circle"||p==="dashboard")&&(A=c.createElement(Dt,Object.assign({},e,{strokeColor:S,prefixCls:f,progressStatus:I}),N));const F=D(f,`${f}-status-${I}`,{[`${f}-${p==="dashboard"&&"circle"||p}`]:p!=="line",[`${f}-inline-circle`]:p==="circle"&&ne(l,"circle")[0]<=20,[`${f}-line`]:E,[`${f}-line-align-${k}`]:E,[`${f}-line-position-${v}`]:E,[`${f}-steps`]:s,[`${f}-show-info`]:y,[`${f}-${l}`]:typeof l=="string",[`${f}-rtl`]:u==="rtl"},b==null?void 0:b.className,n,o,K,L);return _(c.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},b==null?void 0:b.style),g),className:F,role:"progressbar","aria-valuenow":P,"aria-valuemin":0,"aria-valuemax":100},le(w,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),A))});function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}const Yt=(e,t)=>c.createElement(Je,de({},e,{ref:t,icon:et})),ir=c.forwardRef(Yt),{Panel:Zt}=Oe,lr=({closeFnc:e})=>{var P,I;const[t,r]=c.useState({title:"",content:"",keywords:[],keywordInput:"",contentType:"text",selectedProject:null}),[n,o]=c.useState(!1),[s,a]=c.useState(null),{handlePopup:d}=tt(),l=rt(),{blogs:y,loading:p}=he(i=>i.blog),{analysis:h,error:x,loading:g}=he(i=>i.analysis);c.useEffect(()=>{l(nt())},[l]),c.useEffect(()=>{n&&!g&&(h?o(!1):x?(console.error("Analysis error:",x),J.error(x||"Failed to perform competitive analysis. Please try again."),o(!1)):(console.warn("Unexpected state: analysis and analysisError are both null"),o(!1)))},[h,x,g,n]);const C=i=>{const{name:u,value:b}=i.target;r(f=>({...f,[u]:b}))},w=i=>{r(u=>({...u,title:i.title,content:i.content,keywords:i.focusKeywords||[],selectedProject:i,contentType:"markdown"}))},k=i=>{r(u=>({...u,keywordInput:i.target.value}))},v=()=>{const i=t.keywordInput;if(i.trim()!==""){const u=i.split(",").map(b=>b.trim()).filter(b=>b!==""&&!t.keywords.includes(b));u.length>0&&r(b=>({...b,keywords:[...b.keywords,...u],keywordInput:""}))}},S=i=>{r(u=>({...u,keywords:u.keywords.filter((b,f)=>f!==i)}))},j=i=>{(i.key==="Enter"||i.key===",")&&(i.preventDefault(),v())},$=()=>{if(!t.title.trim())return J.error("Please enter a blog title");if(!t.content.trim())return J.error("Please enter blog content");if(t.keywords.length===0)return J.error("Please add at least one keyword");d({title:"Analysis the competitors",description:m.jsxs("p",{children:["Competitors Analysis cost: ",m.jsxs("b",{children:[at("analysis.competitors")," credits"]}),m.jsx("br",{}),"Do you wish to proceed?"]}),onConfirm:async()=>{var i;o(!0);try{const b=await l(ot({title:t.title,content:t.content,keywords:t.keywords,contentType:t.contentType,blogId:(i=t==null?void 0:t.selectedProject)==null?void 0:i._id})).unwrap();a(b)}catch(u){console.error("Error fetching analysis:",u)}finally{o(!1)}}})};return p?m.jsx(ve,{}):m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:m.jsxs("div",{className:"w-[800px] bg-white rounded-lg shadow-xl max-h-[90vh] flex flex-col",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Competitive Analysis"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:m.jsx(be,{className:"h-6 w-6"})})]}),m.jsx("div",{className:"px-6 py-4 overflow-y-auto",children:n||g?m.jsx(ve,{}):m.jsx("div",{className:"space-y-6",children:s?m.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"space-y-4",children:[m.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},className:"flex flex-col items-center",children:[m.jsx(Qt,{type:"dashboard",percent:parseInt(s.blogScore||0),format:i=>`${i} / 100`,strokeColor:{"0%":"#108ee9","100%":"#87d068"},trailColor:"#d1d5db"}),m.jsx("div",{className:"text-gray-700 text-base font-semibold mb-2",children:"Blog SEO Score"})]}),m.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},children:m.jsx(st,{title:"Suggestions to Beat Competitors",className:"bg-gray-50 border border-gray-200 rounded-lg",headStyle:{background:"#f9fafb",fontWeight:600},children:m.jsx("ul",{className:"list-decimal pl-6 space-y-2 text-sm text-gray-700",children:(I=s==null?void 0:s.suggestions)==null?void 0:I.split(/(?:\d+\.\s)/).filter(Boolean).map((i,u)=>m.jsx("li",{children:m.jsx("span",{dangerouslySetInnerHTML:{__html:i.trim().replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})},u))})})}),m.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.4},children:m.jsx(Oe,{accordion:!0,className:"bg-white border border-gray-200 rounded-lg",expandIconPosition:"right",children:Object.entries(s.analysis).map(([i,u])=>{const b=u.match(/^(\d+\/\d+)\s+—\s+(.*)$/),f=b?b[1]:null,_=b?b[2]:u;return m.jsx(Zt,{header:m.jsxs("div",{className:"flex justify-between items-center w-full pr-2",children:[m.jsx("span",{className:"font-medium text-gray-800",children:i}),f&&m.jsx("span",{className:"text-sm text-center w-[10ch] font-semibold text-blue-700 bg-gray-100 tracking-wide px-2 py-0.5 rounded-md",children:f.replace("/"," / ")})]}),className:"text-sm text-gray-700 leading-relaxed",children:m.jsx("p",{children:_})},i)})})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Recent Project"}),m.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500 max-h-[200px] overflow-y-auto",onChange:i=>{const u=y.find(b=>b._id===i.target.value);u&&w(u)},value:((P=t.selectedProject)==null?void 0:P._id)||"",children:[m.jsx("option",{value:"",children:"Select a project"}),y.map(i=>m.jsx("option",{value:i._id,children:i.title},i._id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blog Title"}),m.jsx("input",{type:"text",name:"title",value:t.title,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your blog title"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blog Content"}),m.jsx("textarea",{name:"content",value:t.content,onChange:C,className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter your blog content in ${t.contentType} format`})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:t.keywordInput,onChange:k,onKeyDown:j,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Add keywords (comma-separated)"}),m.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Add"})]}),m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.keywords.map((i,u)=>m.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[i,m.jsx("button",{type:"button",onClick:()=>S(u),className:"ml-1.5 flex-shrink-0 text-indigo-400 hover:text-indigo-600",children:m.jsx(be,{className:"w-3 h-3"})})]},u))})]})]})})}),m.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t",children:[m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),!s&&m.jsx("button",{onClick:$,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",disabled:n||g,children:n||g?"Analyzing...":"Analyze"})]})]})})};export{lr as C,ir as R};
