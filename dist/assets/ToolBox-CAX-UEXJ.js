var mE=Object.defineProperty,gE=Object.defineProperties;var bE=Object.getOwnPropertyDescriptors;var Fa=Object.getOwnPropertySymbols;var xh=Object.prototype.hasOwnProperty,yh=Object.prototype.propertyIsEnumerable;var gl=Math.pow,bh=(e,t,n)=>t in e?mE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))xh.call(t,n)&&bh(e,n,t[n]);if(Fa)for(var n of Fa(t))yh.call(t,n)&&bh(e,n,t[n]);return e},ne=(e,t)=>gE(e,bE(t));var on=(e,t)=>{var n={};for(var r in e)xh.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Fa)for(var r of Fa(e))t.indexOf(r)<0&&yh.call(e,r)&&(n[r]=e[r]);return n};var Xe=(e,t,n)=>new Promise((r,i)=>{var s=u=>{try{o(n.next(u))}catch(l){i(l)}},a=u=>{try{o(n.throw(u))}catch(l){i(l)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,a);o((n=n.apply(e,t)).next())});import{ae as n1,a0 as Ta,r as F,af as Qn,j as g,ag as xE,ah as r1,ai as Eh,z as Rd,a1 as i1,a as hi,y as s1,u as Lu,Y as re,m as Ke,L as Cc,T as Pe,X as pr,B as Dt,aj as a1,ak as yE,A as No,al as EE,am as TE,an as kE,Z as SE,ao as wE,a4 as Th,v as CE,H as AE,ap as kh,aq as Sh,ar as NE}from"./index-Cn0lJV_B.js";import{m as Wi,p as IE}from"./marked.esm-BFQzAr0N.js";import{I as Fr}from"./index-2LwgoDjo.js";import{c as pt}from"./createLucideIcon-B0CO7ycx.js";import{I as ti}from"./image-JiR58Yfo.js";import{T as OE}from"./trash-2-DnLPafqL.js";import{R as wh}from"./rotate-ccw-RJQvNZqS.js";import{C as vE}from"./copy-_KonE_44.js";import{R as _E}from"./ReloadOutlined-CU8o_KT1.js";import{U as LE}from"./upload-Zc3xRf2i.js";import{S as dr}from"./index-aU4ZUF4R.js";import{E as RE,a as Md}from"./eye-DOljtfz4.js";import{g as ME,C as o1,E as Ch}from"./getEstimatedCost-1bsxqcgB.js";import{o as DE}from"./UpgardePopUp-DnftD6-b.js";import{X as Io}from"./x-zsxKfeHZ.js";import{P as Oo}from"./plus-DQ5W0jdj.js";import{M as bl,D as PE}from"./index-65Ay8N9m.js";import{D as BE}from"./download-C4p8ig9n.js";import{T as Ha}from"./trending-up-CZ0IgVn9.js";import{C as FE}from"./crown-CNjc5UKq.js";import{S as u1}from"./sparkles-7AGfUHKS.js";import{F as fo}from"./file-text-BREzy2EJ.js";import{Z as HE}from"./zap-Dyrjrve2.js";import{B as UE}from"./index-Y2Q1mlj9.js";import{R as jE}from"./CrownTwoTone-DqY32_nd.js";import{T as Ah}from"./index-CXhWc-FC.js";import{C as zE}from"./circle-alert-BFM8e3Ek.js";import{C as $E}from"./circle-check-big-C-HoTHxm.js";import{C as VE,p as xl}from"./templates-pA84CFyd.js";import{S as qE}from"./index-Dwy74jxa.js";import{R as WE}from"./refresh-ccw-CmehN9d4.js";import{R as YE}from"./refresh-cw-AQ0Uuzet.js";import{L as KE}from"./loader-circle-OLTqhfvt.js";import"./Input-BVSDI0n7.js";import"./Overflow-ixZkfjUu.js";import"./index-B5rmA60b.js";import"./LeftOutlined-CWc8Ptrd.js";import"./EllipsisOutlined-DWA0oaZl.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],QE=pt("align-center",GE);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],JE=pt("align-left",XE);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],eT=pt("align-right",ZE);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Ua=pt("bold",tT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Nh=pt("chart-column",nT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],iT=pt("heading-1",rT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Ih=pt("heading-2",sT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],oT=pt("heading-3",aT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ja=pt("italic",uT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],za=pt("lightbulb",lT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ws=pt("link",cT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],fT=pt("list-ordered",dT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],pT=pt("list",hT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],gT=pt("maximize-2",mT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],xT=pt("minimize-2",bT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],ET=pt("redo-2",yT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kT=pt("save",TT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],l1=pt("sliders-horizontal",ST);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],CT=pt("target",wT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],NT=pt("underline",AT);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],OT=pt("undo-2",IT);var yl={exports:{}},El={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh;function vT(){if(Oh)return El;Oh=1;var e=n1();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function o(d,h){var f=h(),m=r({inst:{value:f,getSnapshot:h}}),b=m[0].inst,y=m[1];return s(function(){b.value=f,b.getSnapshot=h,u(b)&&y({inst:b})},[d,f,h]),i(function(){return u(b)&&y({inst:b}),d(function(){u(b)&&y({inst:b})})},[d]),a(f),f}function u(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch(m){return!0}}function l(d,h){return h()}var c=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?l:o;return El.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,El}var vh;function c1(){return vh||(vh=1,yl.exports=vT()),yl.exports}var d1=c1();function vt(e){this.content=e}vt.prototype={constructor:vt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new vt(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new vt(n)},addToStart:function(e,t){return new vt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new vt(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new vt(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=vt.from(e),e.size?new vt(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=vt.from(e),e.size?new vt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=vt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};vt.from=function(e){if(e instanceof vt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new vt(t)};function f1(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){let a=f1(i.content,s.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function h1(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let a=e.child(--i),o=t.child(--s),u=a.nodeSize;if(a==o){n-=u,r-=u;continue}if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let l=0,c=Math.min(a.text.length,o.text.length);for(;l<c&&a.text[a.text.length-l-1]==o.text[o.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let l=h1(a.content,o.content,n-1,r-1);if(l)return l}n-=u,r-=u}}class q{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let a=0,o=0;o<n;a++){let u=this.content[a],l=o+u.nodeSize;if(l>t&&r(u,i+o,s||null,a)!==!1&&u.content.size){let c=o+1;u.nodesBetween(Math.max(0,t-c),Math.min(u.content.size,n-c),r,i+c)}o=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",a=!0;return this.nodesBetween(t,n,(o,u)=>{let l=o.isText?o.text.slice(Math.max(t,u)-u,n-u):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&r&&(a?a=!1:s+=r),s+=l},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new q(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,a=0;a<n;s++){let o=this.content[s],u=a+o.nodeSize;u>t&&((a<t||u>n)&&(o.isText?o=o.cut(Math.max(0,t-a),Math.min(o.text.length,n-a)):o=o.cut(Math.max(0,t-a-1),Math.min(o.content.size,n-a-1))),r.push(o),i+=o.nodeSize),a=u}return new q(r,i)}cutByIndex(t,n){return t==n?q.empty:t==0&&n==this.content.length?this:new q(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new q(i,s)}addToStart(t){return new q([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new q(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return f1(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return h1(this,t,n,r)}findIndex(t){if(t==0)return $a(0,t);if(t==this.size)return $a(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?$a(n+1,s):$a(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new q(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return q.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new q(n||t,r)}static from(t){if(!t)return q.empty;if(t instanceof q)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new q([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}q.empty=new q([],0);const Tl={index:0,offset:0};function $a(e,t){return Tl.index=e,Tl.offset=t,Tl}function vo(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!vo(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!vo(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ze=class Ac{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&vo(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Ac.none;if(t instanceof Ac)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ze.none=[];class _o extends Error{}class ie{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=m1(this.content,t+this.openStart,n);return r&&new ie(r,this.openStart,this.openEnd)}removeBetween(t,n){return new ie(p1(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return ie.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(q.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ie(t,r,i)}}ie.empty=new ie(q.empty,0,0);function p1(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:a,offset:o}=e.findIndex(n);if(i==t||s.isText){if(o!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(p1(s.content,t-i-1,n-i-1)))}function m1(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=m1(a.content,t-s-1,n,a);return o&&e.replaceChild(i,a.copy(o))}function _T(e,t,n){if(n.openStart>e.depth)throw new _o("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new _o("Inconsistent open depths");return g1(e,t,n,0)}function g1(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=g1(e,t,n,r+1);return s.copy(s.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let a=e.parent,o=a.content;return mi(a,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}else{let{start:a,end:o}=LT(n,e);return mi(s,x1(e,a,o,t,r))}else return mi(s,Lo(e,t,r))}function b1(e,t){if(!t.type.compatibleContent(e.type))throw new _o("Cannot join "+t.type.name+" onto "+e.type.name)}function Nc(e,t,n){let r=e.node(n);return b1(r,t.node(n)),r}function pi(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Fs(e,t,n,r){let i=(t||e).node(n),s=0,a=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(pi(e.nodeAfter,r),s++));for(let o=s;o<a;o++)pi(i.child(o),r);t&&t.depth==n&&t.textOffset&&pi(t.nodeBefore,r)}function mi(e,t){return e.type.checkContent(t),e.copy(t)}function x1(e,t,n,r,i){let s=e.depth>i&&Nc(e,t,i+1),a=r.depth>i&&Nc(n,r,i+1),o=[];return Fs(null,e,i,o),s&&a&&t.index(i)==n.index(i)?(b1(s,a),pi(mi(s,x1(e,t,n,r,i+1)),o)):(s&&pi(mi(s,Lo(e,t,i+1)),o),Fs(t,n,i,o),a&&pi(mi(a,Lo(n,r,i+1)),o)),Fs(r,null,i,o),new q(o)}function Lo(e,t,n){let r=[];if(Fs(null,e,n,r),e.depth>n){let i=Nc(e,t,n+1);pi(mi(i,Lo(e,t,n+1)),r)}return Fs(t,null,n,r),new q(r)}function LT(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(q.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class ra{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ze.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let o=r;r=i,i=o}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ro(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let a=t;;){let{index:o,offset:u}=a.content.findIndex(s),l=s-u;if(r.push(a,o,i+u),!l||(a=a.child(o),a.isText))break;s=l-1,i+=u+1}return new ra(n,r,s)}static resolveCached(t,n){let r=_h.get(t);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else _h.set(t,r=new RT);let i=r.elts[r.i]=ra.resolve(t,n);return r.i=(r.i+1)%MT,i}}class RT{constructor(){this.elts=[],this.i=0}}const MT=12,_h=new WeakMap;class Ro{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const DT=Object.create(null);let $r=class Ic{constructor(t,n,r,i=ze.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&vo(this.attrs,n||t.defaultAttrs||DT)&&ze.sameSet(this.marks,r||ze.none)}copy(t=null){return t==this.content?this:new Ic(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Ic(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return ie.empty;let i=this.resolve(t),s=this.resolve(n),a=r?0:i.sharedDepth(n),o=i.start(a),l=i.node(a).content.cut(i.pos-o,s.pos-o);return new ie(l,i.depth-a,s.depth-a)}replace(t,n,r){return _T(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return ra.resolveCached(this,t)}resolveNoCache(t){return ra.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),y1(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=q.empty,i=0,s=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,s),o=a&&a.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ze.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ze.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=q.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};$r.prototype.text=void 0;class Mo extends $r{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):y1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Mo(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Mo(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function y1(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Ei{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new PT(t,n);if(r.next==null)return Ei.empty;let i=E1(r);r.next&&r.err("Unexpected trailing text");let s=$T(zT(i));return VT(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(a,o){let u=a.matchFragment(t,r);if(u&&(!n||u.validEnd))return q.from(o.map(l=>l.createAndFill()));for(let l=0;l<a.next.length;l++){let{type:c,next:d}=a.next[l];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,o.concat(c));if(h)return h}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let a=[];for(let o=i;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:o,next:u}=s.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||u.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return s}).join(`
`)}}Ei.empty=new Ei(!0);class PT{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function E1(e){let t=[];do t.push(BT(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function BT(e){let t=[];do t.push(FT(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function FT(e){let t=jT(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=HT(e,t);else break;return t}function Lh(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function HT(e,t){let n=Lh(e),r=n;return e.eat(",")&&(e.next!="}"?r=Lh(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function UT(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let a=n[s];a.isInGroup(t)&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function jT(e){if(e.eat("(")){let t=E1(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=UT(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function zT(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(a,o,u){let l={term:u,to:o};return t[a].push(l),l}function i(a,o){a.forEach(u=>u.to=o)}function s(a,o){if(a.type=="choice")return a.exprs.reduce((u,l)=>u.concat(s(l,o)),[]);if(a.type=="seq")for(let u=0;;u++){let l=s(a.exprs[u],o);if(u==a.exprs.length-1)return l;i(l,o=n())}else if(a.type=="star"){let u=n();return r(o,u),i(s(a.expr,u),u),[r(u)]}else if(a.type=="plus"){let u=n();return i(s(a.expr,o),u),i(s(a.expr,u),u),[r(u)]}else{if(a.type=="opt")return[r(o)].concat(s(a.expr,o));if(a.type=="range"){let u=o;for(let l=0;l<a.min;l++){let c=n();i(s(a.expr,u),c),u=c}if(a.max==-1)i(s(a.expr,u),u);else for(let l=a.min;l<a.max;l++){let c=n();r(u,c),i(s(a.expr,u),c),u=c}return[r(u)]}else{if(a.type=="name")return[r(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function T1(e,t){return t-e}function Rh(e,t){let n=[];return r(t),n.sort(T1);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let a=0;a<s.length;a++){let{term:o,to:u}=s[a];!o&&n.indexOf(u)==-1&&r(u)}}}function $T(e){let t=Object.create(null);return n(Rh(e,0));function n(r){let i=[];r.forEach(a=>{e[a].forEach(({term:o,to:u})=>{if(!o)return;let l;for(let c=0;c<i.length;c++)i[c][0]==o&&(l=i[c][1]);Rh(e,u).forEach(c=>{l||i.push([o,l=[]]),l.indexOf(c)==-1&&l.push(c)})})});let s=t[r.join(",")]=new Ei(r.indexOf(e.length-1)>-1);for(let a=0;a<i.length;a++){let o=i[a][1].sort(T1);s.next.push({type:i[a][0],next:t[o.join(",")]||n(o)})}return s}}function VT(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,a=[];for(let o=0;o<i.next.length;o++){let{type:u,next:l}=i.next[o];a.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(l)==-1&&r.push(l)}s&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function k1(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function S1(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function w1(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function C1(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new WT(e,r,t[r]);return n}let Mh=class A1{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=C1(t,r.attrs),this.defaultAttrs=k1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ei.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:S1(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $r(this,this.computeAttrs(t),q.from(n),ze.setFrom(r))}createChecked(t=null,n,r){return n=q.from(n),this.checkContent(n),new $r(this,this.computeAttrs(t),n,ze.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=q.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(q.empty,!0);return s?new $r(this,t,n.append(s),ze.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){w1(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ze.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,a)=>r[s]=new A1(s,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function qT(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class WT{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?qT(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ru{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=C1(t,i.attrs),this.excluded=null;let s=k1(this.attrs);this.instance=s?new ze(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ze(this,S1(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,a)=>r[s]=new Ru(s,i++,n,a)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){w1(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let N1=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=vt.from(t.nodes),n.marks=vt.from(t.marks||{}),this.nodes=Mh.compile(this.spec.nodes,this),this.marks=Ru.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",o=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ei.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=o=="_"?null:o?Dh(this,o.split(" ")):o==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:Dh(this,a.split(" "))}this.nodeFromJSON=i=>$r.fromJSON(this,i),this.markFromJSON=i=>ze.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Mh){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Mo(r,r.defaultAttrs,t,ze.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function Dh(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],a=s;if(s)n.push(s);else for(let o in e.marks){let u=e.marks[o];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function YT(e){return e.tag!=null}function KT(e){return e.style!=null}let Hs=class Oc{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(YT(i))this.tags.push(i);else if(KT(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new Bh(this,n,!1);return r.addAll(t,ze.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new Bh(this,n,!0);return r.addAll(t,ze.none,n.from,n.to),ie.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(XT(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],o=a.style;if(!(o.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=n))){if(a.getAttrs){let u=a.getAttrs(n);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let o=n[a];if((o.priority==null?50:o.priority)<s)break}n.splice(a,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=Fh(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=Fh(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Oc(t,Oc.schemaRules(t)))}};const I1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},GT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},O1={ol:!0,ul:!0},ia=1,vc=2,Us=4;function Ph(e,t,n){return t!=null?(t?ia:0)|(t==="full"?vc:0):e&&e.whitespace=="pre"?ia|vc:n&~Us}class Va{constructor(t,n,r,i,s,a){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=ze.none,this.match=s||(a&Us?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(q.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ia)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=q.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!I1.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Bh{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,a=Ph(null,n.preserveWhitespace,0)|(r?Us:0);i?s=new Va(i.type,i.attrs,ze.none,!0,n.topMatch||i.type.contentMatch,a):r?s=new Va(null,null,ze.none,!0,null,a):s=new Va(t.schema.topNodeType,null,ze.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&vc?"full":this.localPreserveWS||(i.options&ia)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],o=t.previousSibling;(!a||o&&o.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),o;O1.hasOwnProperty(a)&&this.parser.normalizeLists&&QT(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,r));e:if(u?u.ignore:GT.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let l,c=this.needsBlock;if(I1.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),l=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=u&&u.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),l&&this.sync(s),this.needsBlock=c}else{let l=this.readStyles(t,n);l&&this.addElementByRule(t,u,l,u.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let o=void 0;;){let u=this.parser.matchStyle(s,a,this,o);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(l=>!u.clearMark(l)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)o=u;else break}}return n}addElementByRule(t,n,r,i){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(a,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(o)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let a=r?t.childNodes[r]:t.firstChild,o=i==null?null:t.childNodes[i];a!=o;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let a=this.open,o=0;a>=0;a--){let u=this.nodes[a],l=u.findWrapping(t);if(l&&(!i||i.length>l.length+o)&&(i=l,s=u,!l.length))break;if(u.solid){if(r)break;o+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let a=ze.none;for(let o of i.concat(t.marks))(s.type?s.type.allowsMarkType(o.type):Hh(o.type,t.type))&&(a=o.addToSet(a));return s.content.push(t.mark(a)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let o=Ph(t,s,a.options);a.options&Us&&a.content.length==0&&(o|=Us);let u=ze.none;return r=r.filter(l=>(a.type?a.type.allowsMarkType(l.type):Hh(l.type,t))?(u=l.addToSet(u),!1):!0),this.nodes.push(new Va(t,n,u,i,null,o)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ia)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(o,u)=>{for(;o>=0;o--){let l=n[o];if(l==""){if(o==n.length-1||o==0)continue;for(;u>=s;u--)if(a(o-1,u))return!0;return!1}else{let c=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!c||c.name!=l&&!c.isInGroup(l))return!1;u--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function QT(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&O1.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function XT(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Fh(e){let t={};for(let n in e)t[n]=e[n];return t}function Hh(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],a=o=>{s.push(o);for(let u=0;u<o.edgeCount;u++){let{type:l,next:c}=o.edge(u);if(l==t||s.indexOf(c)<0&&a(c))return!0}};if(a(i.contentMatch))return!0}}class Ai{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=kl(n).createDocumentFragment());let i=r,s=[];return t.forEach(a=>{if(s.length||a.marks.length){let o=0,u=0;for(;o<s.length&&u<a.marks.length;){let l=a.marks[u];if(!this.marks[l.type.name]){u++;continue}if(!l.eq(s[o][0])||l.type.spec.spanning===!1)break;o++,u++}for(;o<s.length;)i=s.pop()[1];for(;u<a.marks.length;){let l=a.marks[u++],c=this.serializeMark(l,a.isInline,n);c&&(s.push([l,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=ho(kl(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&ho(kl(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return ho(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ai(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=Uh(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return Uh(t.marks)}}function Uh(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function kl(e){return e.document||window.document}const jh=new WeakMap;function JT(e){let t=jh.get(e);return t===void 0&&jh.set(e,t=ZT(e)),t}function ZT(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function ho(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=JT(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let o,u=n?e.createElementNS(n,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let d in l)if(l[d]!=null){let h=d.indexOf(" ");h>0?u.setAttributeNS(d.slice(0,h),d.slice(h+1),l[d]):d=="style"&&u.style?u.style.cssText=l[d]:u.setAttribute(d,l[d])}}for(let d=c;d<t.length;d++){let h=t[d];if(h===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:f,contentDOM:m}=ho(e,h,n,r);if(u.appendChild(f),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:u,contentDOM:o}}const v1=65535,_1=Math.pow(2,16);function e3(e,t){return e+t*_1}function zh(e){return e&v1}function t3(e){return(e-(e&v1))/_1}const L1=1,R1=2,po=4,M1=8;class _c{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&M1)>0}get deletedBefore(){return(this.delInfo&(L1|po))>0}get deletedAfter(){return(this.delInfo&(R1|po))>0}get deletedAcross(){return(this.delInfo&po)>0}}class cn{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&cn.empty)return cn.empty}recover(t){let n=0,r=zh(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+t3(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let u=this.ranges[o]-(this.inverted?i:0);if(u>t)break;let l=this.ranges[o+s],c=this.ranges[o+a],d=u+l;if(t<=d){let h=l?t==u?-1:t==d?1:n:n,f=u+i+(h<0?0:c);if(r)return f;let m=t==(n<0?u:d)?null:e3(o/3,t-u),b=t==u?R1:t==d?L1:po;return(n<0?t!=u:t!=d)&&(b|=M1),new _c(f,b,m)}i+=c-l}return r?t+i:new _c(t+i,0,null)}touches(t,n){let r=0,i=zh(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let u=this.ranges[o]-(this.inverted?r:0);if(u>t)break;let l=this.ranges[o+s],c=u+l;if(t<=c&&o==i*3)return!0;r+=this.ranges[o+a]-l}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],o=a-(this.inverted?s:0),u=a+(this.inverted?0:s),l=this.ranges[i+n],c=this.ranges[i+r];t(o,o+l,u,u+c),s+=c-l}}invert(){return new cn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?cn.empty:new cn(t<0?[0,-t,0]:[0,0,t])}}cn.empty=new cn([]);class sa{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new sa(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new sa;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],o=a.mapResult(t,n);if(o.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return r?t:new _c(t,i,null)}}const Sl=Object.create(null);class Ht{getMap(){return cn.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Sl[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Sl)throw new RangeError("Duplicate use of step JSON ID "+t);return Sl[t]=n,n.prototype.jsonID=t,n}}class xt{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new xt(t,null)}static fail(t){return new xt(null,t)}static fromReplace(t,n,r,i){try{return xt.ok(t.replace(n,r,i))}catch(s){if(s instanceof _o)return xt.fail(s.message);throw s}}}function Dd(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(Dd(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return q.fromArray(r)}class Hr extends Ht{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ie(Dd(n.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return xt.fromReplace(t,this.from,this.to,s)}invert(){return new In(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Hr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Hr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Hr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Hr(n.from,n.to,t.markFromJSON(n.mark))}}Ht.jsonID("addMark",Hr);class In extends Ht{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new ie(Dd(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return xt.fromReplace(t,this.from,this.to,r)}invert(){return new Hr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new In(n.pos,r.pos,this.mark)}merge(t){return t instanceof In&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new In(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new In(n.from,n.to,t.markFromJSON(n.mark))}}Ht.jsonID("removeMark",In);class Ur extends Ht{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return xt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return xt.fromReplace(t,this.pos,this.pos+1,new ie(q.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ur(this.pos,n.marks[i]);return new Ur(this.pos,this.mark)}}return new Ti(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ur(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ur(n.pos,t.markFromJSON(n.mark))}}Ht.jsonID("addNodeMark",Ur);class Ti extends Ht{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return xt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return xt.fromReplace(t,this.pos,this.pos+1,new ie(q.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ur(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ti(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ti(n.pos,t.markFromJSON(n.mark))}}Ht.jsonID("removeNodeMark",Ti);class Ct extends Ht{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Lc(t,this.from,this.to)?xt.fail("Structure replace would overwrite content"):xt.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new cn([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ct(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ct(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Ct)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?ie.empty:new ie(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ct(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?ie.empty:new ie(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ct(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ct(n.from,n.to,ie.fromJSON(t,n.slice),!!n.structure)}}Ht.jsonID("replace",Ct);class It extends Ht{constructor(t,n,r,i,s,a,o=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=o}apply(t){if(this.structure&&(Lc(t,this.from,this.gapFrom)||Lc(t,this.gapTo,this.to)))return xt.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return xt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?xt.fromReplace(t,this.from,this.to,r):xt.fail("Content does not fit in gap")}getMap(){return new cn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new It(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new It(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new It(n.from,n.to,n.gapFrom,n.gapTo,ie.fromJSON(t,n.slice),n.insert,!!n.structure)}}Ht.jsonID("replaceAround",It);function Lc(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function n3(e,t,n,r){let i=[],s=[],a,o;e.doc.nodesBetween(t,n,(u,l,c)=>{if(!u.isInline)return;let d=u.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let h=Math.max(l,t),f=Math.min(l+u.nodeSize,n),m=r.addToSet(d);for(let b=0;b<d.length;b++)d[b].isInSet(m)||(a&&a.to==h&&a.mark.eq(d[b])?a.to=f:i.push(a=new In(h,f,d[b])));o&&o.to==h?o.to=f:s.push(o=new Hr(h,f,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function r3(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(a,o)=>{if(!a.isInline)return;s++;let u=null;if(r instanceof Ru){let l=a.marks,c;for(;c=r.isInSet(l);)(u||(u=[])).push(c),l=c.removeFromSet(l)}else r?r.isInSet(a.marks)&&(u=[r]):u=a.marks;if(u&&u.length){let l=Math.min(o+a.nodeSize,n);for(let c=0;c<u.length;c++){let d=u[c],h;for(let f=0;f<i.length;f++){let m=i[f];m.step==s-1&&d.eq(i[f].style)&&(h=m)}h?(h.to=l,h.step=s):i.push({style:d,from:Math.max(o,t),to:l,step:s})}}}),i.forEach(a=>e.step(new In(a.from,a.to,a.style)))}function Pd(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),a=[],o=t+1;for(let u=0;u<s.childCount;u++){let l=s.child(u),c=o+l.nodeSize,d=r.matchType(l.type);if(!d)a.push(new Ct(o,c,ie.empty));else{r=d;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||e.step(new In(o,c,l.marks[h]));if(i&&l.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,m;for(;h=f.exec(l.text);)m||(m=new ie(q.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new Ct(o+h.index,o+h.index+h[0].length,m))}}o=c}if(!r.validEnd){let u=r.fillBefore(q.empty,!0);e.replace(o,o,new ie(u,0,0))}for(let u=a.length-1;u>=0;u--)e.step(a[u])}function i3(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function hs(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,a,n))return r;if(r==0||i.type.spec.isolating||!i3(i,s,a))break}return null}function s3(e,t,n){let{$from:r,$to:i,depth:s}=t,a=r.before(s+1),o=i.after(s+1),u=a,l=o,c=q.empty,d=0;for(let m=s,b=!1;m>n;m--)b||r.index(m)>0?(b=!0,c=q.from(r.node(m).copy(c)),d++):u--;let h=q.empty,f=0;for(let m=s,b=!1;m>n;m--)b||i.after(m+1)<i.end(m)?(b=!0,h=q.from(i.node(m).copy(h)),f++):l++;e.step(new It(u,l,a,o,new ie(c.append(h),d,f),c.size-d,!0))}function Bd(e,t,n=null,r=e){let i=a3(e,t),s=i&&o3(r,t);return s?i.map($h).concat({type:t,attrs:n}).concat(s.map($h)):null}function $h(e){return{type:e,attrs:null}}function a3(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return n.canReplaceWith(r,i,a)?s:null}function o3(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let u=(a.length?a[a.length-1]:t).contentMatch;for(let l=r;u&&l<i;l++)u=u.matchType(n.child(l).type);return!u||!u.validEnd?null:a}function u3(e,t,n){let r=q.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let o=n[a].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=q.from(n[a].type.create(n[a].attrs,r))}let i=t.start,s=t.end;e.step(new It(i,s,i,s,new ie(r,0,0),n.length,!0))}function l3(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(a,o)=>{let u=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,u)&&c3(e.doc,e.mapping.slice(s).map(o),r)){let l=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!m?l=!1:!f&&m&&(l=!0)}l===!1&&P1(e,a,o,s),Pd(e,e.mapping.slice(s).map(o,1),r,void 0,l===null);let c=e.mapping.slice(s),d=c.map(o,1),h=c.map(o+a.nodeSize,1);return e.step(new It(d,h,d+1,h-1,new ie(q.from(r.create(u,null,a.marks)),0,0),1,!0)),l===!0&&D1(e,a,o,s),!1}})}function D1(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+a.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function P1(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=e.mapping.slice(r).map(n+1+s);e.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function c3(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function d3(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new It(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new ie(q.from(a),0,0),1,!0))}function br(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,c=n-2;l>s;l--,c--){let d=i.node(l),h=i.index(l);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),m=r&&r[c+1];m&&(f=f.replaceChild(0,m.type.create(m.attrs)));let b=r&&r[c]||d;if(!d.canReplace(h+1,d.childCount)||!b.type.validContent(f))return!1}let o=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(o,o,u?u.type:i.node(s+1).type)}function f3(e,t,n=1,r){let i=e.doc.resolve(t),s=q.empty,a=q.empty;for(let o=i.depth,u=i.depth-n,l=n-1;o>u;o--,l--){s=q.from(i.node(o).copy(s));let c=r&&r[l];a=q.from(c?c.type.create(c.attrs,a):i.node(o).copy(a))}e.step(new Ct(t,t,new ie(s.append(a),n,n),!0))}function Qr(e,t){let n=e.resolve(t),r=n.index();return B1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function h3(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),a=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function B1(e,t){return!!(e&&t&&!e.isLeaf&&h3(e,t))}function Mu(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,a,o=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(i+1),o++,a=r.node(i).maybeChild(o)):(s=r.node(i).maybeChild(o-1),a=r.node(i+1)),s&&!s.isTextblock&&B1(s,a)&&r.node(i).canReplace(o,o+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function p3(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),a=s.node().type;if(i&&a.inlineContent){let c=a.whitespace=="pre",d=!!a.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let o=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);P1(e,c.node(),c.before(),o)}a.inlineContent&&Pd(e,t+n-1,a,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(o),l=u.map(t-n);if(e.step(new Ct(l,u.map(t+n,-1),ie.empty,!0)),r===!0){let c=e.doc.resolve(l);D1(e,c.node(),c.before(),e.steps.length)}return e}function m3(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function F1(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let o=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(o>0?1:0),l=r.node(a),c=!1;if(s==1)c=l.canReplace(u,u,i);else{let d=l.contentMatchAt(u).findWrapping(i.firstChild.type);c=d&&l.canReplaceWith(u,u,d[0])}if(c)return o==0?r.pos:o<0?r.before(a+1):r.after(a+1)}return null}function Du(e,t,n=t,r=ie.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return H1(i,s,r)?new Ct(t,n,r):new g3(i,s,r).fit()}function H1(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class g3{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=q.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=q.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,a=r.depth,o=i.depth;for(;a&&o&&s.childCount==1;)s=s.firstChild.content,a--,o--;let u=new ie(s,a,o);return t>-1?new It(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Ct(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=wl(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:u,match:l}=this.frontier[o],c,d=null;if(n==1&&(a?l.matchType(a.type)||(d=l.fillBefore(q.from(a),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:o,parent:s,inject:d};if(n==2&&a&&(c=l.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:o,parent:s,wrap:c};if(s&&l.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=wl(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ie(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=wl(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new ie(Rs(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ie(Rs(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let a=this.unplaced,o=r?r.content:a.content,u=a.openStart-t,l=0,c=[],{match:d,type:h}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)c.push(i.child(b));d=d.matchFragment(i)}let f=o.size+t-(a.content.size-a.openEnd);for(;l<o.childCount;){let b=o.child(l),y=d.matchType(b.type);if(!y)break;l++,(l>1||u==0||b.content.size)&&(d=y,c.push(U1(b.mark(h.allowedMarks(b.marks)),l==1?u:0,l==o.childCount?f:-1)))}let m=l==o.childCount;m||(f=-1),this.placed=Ms(this.placed,n,q.from(c)),this.frontier[n].match=d,m&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,y=o;b<f;b++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=m?t==0?ie.empty:new ie(Rs(a.content,t-1,1),t-1,f<0?a.openEnd:t-1):new ie(Rs(a.content,t,l),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Cl(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=Cl(t,n,i,r,s);if(a){for(let o=n-1;o>=0;o--){let{match:u,type:l}=this.frontier[o],c=Cl(t,o,l,u,!0);if(!c||c.childCount)continue e}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ms(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Ms(this.placed,this.depth,q.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(q.empty,!0);n.childCount&&(this.placed=Ms(this.placed,this.frontier.length,n))}}function Rs(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Rs(e.firstChild.content,t-1,n)))}function Ms(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ms(e.lastChild.content,t-1,n)))}function wl(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function U1(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,U1(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(q.empty,!0)))),e.copy(r)}function Cl(e,t,n,r,i){let s=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let o=r.fillBefore(s.content,!0,a);return o&&!b3(n,s.content,a)?o:null}function b3(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function x3(e){return e.spec.defining||e.spec.definingForContent}function y3(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(H1(i,s,r))return e.step(new Ct(t,n,r));let a=z1(i,e.doc.resolve(n));a[a.length-1]==0&&a.pop();let o=-(i.depth+1);a.unshift(o);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let m=i.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(h)>-1?o=h:i.before(h)==f&&a.splice(1,0,-h)}let u=a.indexOf(o),l=[],c=r.openStart;for(let h=r.content,f=0;;f++){let m=h.firstChild;if(l.push(m),f==r.openStart)break;h=m.content}for(let h=c-1;h>=0;h--){let f=l[h],m=x3(f.type);if(m&&!f.sameMarkup(i.node(Math.abs(o)-1)))c=h;else if(m||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+c+1)%(r.openStart+1),m=l[f];if(m)for(let b=0;b<a.length;b++){let y=a[(b+u)%a.length],x=!0;y<0&&(x=!1,y=-y);let E=i.node(y-1),T=i.index(y-1);if(E.canReplaceWith(T,T,m.type,m.marks))return e.replace(i.before(y),x?s.after(y):n,new ie(j1(r.content,0,r.openStart,f),f,r.openEnd))}}let d=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let f=a[h];f<0||(t=i.before(f),n=s.after(f))}}function j1(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(j1(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(q.empty,!0))}return e}function E3(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=m3(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new ie(q.from(r),0,0))}function T3(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=z1(r,i);for(let a=0;a<s.length;a++){let o=s[a],u=a==s.length-1;if(u&&o==0||r.node(o).type.contentMatch.validEnd)return e.delete(r.start(o),i.end(o));if(o>0&&(u||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return e.delete(r.before(o),i.after(o))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}function z1(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Yi extends Ht{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return xt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return xt.fromReplace(t,this.pos,this.pos+1,new ie(q.from(i),0,n.isLeaf?0:1))}getMap(){return cn.empty}invert(t){return new Yi(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Yi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Yi(n.pos,n.attr,n.value)}}Ht.jsonID("attr",Yi);class aa extends Ht{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return xt.ok(r)}getMap(){return cn.empty}invert(t){return new aa(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new aa(n.attr,n.value)}}Ht.jsonID("docAttr",aa);let Ji=class extends Error{};Ji=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Ji.prototype=Object.create(Error.prototype);Ji.prototype.constructor=Ji;Ji.prototype.name="TransformError";class $1{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new sa}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Ji(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=ie.empty){let i=Du(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new ie(q.from(r),0,0))}delete(t,n){return this.replace(t,n,ie.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return y3(this,t,n,r),this}replaceRangeWith(t,n,r){return E3(this,t,n,r),this}deleteRange(t,n){return T3(this,t,n),this}lift(t,n){return s3(this,t,n),this}join(t,n=1){return p3(this,t,n),this}wrap(t,n){return u3(this,t,n),this}setBlockType(t,n=t,r,i=null){return l3(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return d3(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Yi(t,n,r)),this}setDocAttribute(t,n){return this.step(new aa(t,n)),this}addNodeMark(t,n){return this.step(new Ur(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ze)n.isInSet(r.marks)&&this.step(new Ti(t,n));else{let i=r.marks,s,a=[];for(;s=n.isInSet(i);)a.push(new Ti(t,s)),i=s.removeFromSet(i);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(t,n=1,r){return f3(this,t,n,r),this}addMark(t,n,r){return n3(this,t,n,r),this}removeMark(t,n,r){return r3(this,t,n,r),this}clearIncompatible(t,n,r){return Pd(this,t,n,r),this}}const Al=Object.create(null);class be{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new V1(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=ie.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let s=t.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:u,$to:l}=a[o],c=t.mapping.slice(s);t.replaceRange(c.map(u.pos),c.map(l.pos),o?ie.empty:n),o==0&&Wh(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:o}=i[s],u=t.mapping.slice(r),l=u.map(a.pos),c=u.map(o.pos);s?t.deleteRange(l,c):(t.replaceRangeWith(l,c,n),Wh(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Te(t):Fi(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let a=n<0?Fi(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Fi(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(a)return a}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new dn(t.node(0))}static atStart(t){return Fi(t,t,0,0,1)||new dn(t)}static atEnd(t){return Fi(t,t,t.content.size,t.childCount,-1)||new dn(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Al[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Al)throw new RangeError("Duplicate use of selection JSON ID "+t);return Al[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Te.between(this.$anchor,this.$head).getBookmark()}}be.prototype.visible=!0;class V1{constructor(t,n){this.$from=t,this.$to=n}}let Vh=!1;function qh(e){!Vh&&!e.parent.inlineContent&&(Vh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Te extends be{constructor(t,n=t){qh(t),qh(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return be.near(r);let i=t.resolve(n.map(this.anchor));return new Te(i.parent.inlineContent?i:r,r)}replace(t,n=ie.empty){if(super.replace(t,n),n==ie.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Te&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Pu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Te(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=be.findFrom(n,r,!0)||be.findFrom(n,-r,!0);if(s)n=s.$head;else return be.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(be.findFrom(t,-r,!0)||be.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Te(t,n)}}be.jsonID("text",Te);class Pu{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Pu(t.map(this.anchor),t.map(this.head))}resolve(t){return Te.between(t.resolve(this.anchor),t.resolve(this.head))}}class he extends be{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?be.near(s):new he(s)}content(){return new ie(q.from(this.node),0,0)}eq(t){return t instanceof he&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Fd(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(t.resolve(n.anchor))}static create(t,n){return new he(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}he.prototype.visible=!1;be.jsonID("node",he);class Fd{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Pu(r,r):new Fd(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&he.isSelectable(r)?new he(n):be.near(n)}}class dn extends be{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=ie.empty){if(n==ie.empty){t.delete(0,t.doc.content.size);let r=be.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new dn(t)}map(t){return new dn(t)}eq(t){return t instanceof dn}getBookmark(){return k3}}be.jsonID("all",dn);const k3={map(){return this},resolve(e){return new dn(e)}};function Fi(e,t,n,r,i,s=!1){if(t.inlineContent)return Te.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let o=t.child(a);if(o.isAtom){if(!s&&he.isSelectable(o))return he.create(e,n-(i<0?o.nodeSize:0))}else{let u=Fi(e,o,n+i,i<0?o.childCount:0,i,s);if(u)return u}n+=o.nodeSize*i}return null}function Wh(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Ct||i instanceof It))return;let s=e.mapping.maps[r],a;s.forEach((o,u,l,c)=>{a==null&&(a=c)}),e.setSelection(be.near(e.doc.resolve(a),n))}const Yh=1,qa=2,Kh=4;class S3 extends $1{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Yh)&~qa,this.storedMarks=null,this}get selectionSet(){return(this.updated&Yh)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=qa,this}ensureMarks(t){return ze.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&qa)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~qa,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ze.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(be.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Kh,this}get scrolledIntoView(){return(this.updated&Kh)>0}}function Gh(e,t){return!t||!e?e:e.bind(t)}class Ds{constructor(t,n,r){this.name=t,this.init=Gh(n.init,r),this.apply=Gh(n.apply,r)}}const w3=[new Ds("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Ds("selection",{init(e,t){return e.selection||be.atStart(t.doc)},apply(e){return e.selection}}),new Ds("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Ds("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Nl{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=w3.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ds(r.key,r.spec.state,r))})}}class Vi{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let u=i?i[a].n:0,l=i?i[a].state:this,c=u<n.length&&o.spec.appendTransaction.call(o,u?n.slice(u):n,l,r);if(c&&r.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<a?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Vi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new S3(this)}static create(t){let n=new Nl(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Vi(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Nl(this.schema,t.plugins),r=n.fields,i=new Vi(n);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Nl(t.schema,t.plugins),s=new Vi(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=$r.fromJSON(t.schema,n.doc);else if(a.name=="selection")s.selection=be.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let o in r){let u=r[o],l=u.spec.state;if(u.key==a.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){s[a.name]=l.fromJSON.call(u,t,n[o],s);return}}s[a.name]=a.init(t,s)}}),s}}function q1(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=q1(i,t,{})),n[r]=i}return n}class Qe{constructor(t){this.spec=t,this.props={},t.props&&q1(t.props,this,this.props),this.key=t.key?t.key.key:W1("plugin")}getState(t){return t[this.key]}}const Il=Object.create(null);function W1(e){return e in Il?e+"$"+ ++Il[e]:(Il[e]=0,e+"$")}class tt{constructor(t="key"){this.key=W1(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const _t=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Zi=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Rc=null;const cr=function(e,t,n){let r=Rc||(Rc=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},C3=function(){Rc=null},ki=function(e,t,n,r){return n&&(Qh(e,t,n,r,-1)||Qh(e,t,n,r,1))},A3=/^(img|br|input|textarea|hr)$/i;function Qh(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Sn(e))){let a=e.parentNode;if(!a||a.nodeType!=1||ka(e)||A3.test(e.nodeName)||e.contentEditable=="false")return!1;t=_t(e)+(i<0?0:1),e=a}else if(e.nodeType==1){let a=e.childNodes[t+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=a,t=i<0?Sn(e):0}else return!1}}function Sn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function N3(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Sn(e)}else if(e.parentNode&&!ka(e))t=_t(e),e=e.parentNode;else return null}}function I3(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!ka(e))t=_t(e)+1,e=e.parentNode;else return null}}function O3(e,t,n){for(let r=t==0,i=t==Sn(e);r||i;){if(e==n)return!0;let s=_t(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Sn(e)}}function ka(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Bu=function(e){return e.focusNode&&ki(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function si(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function v3(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function _3(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Sn(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Sn(r.startContainer),r.startOffset)}}}const Xn=typeof navigator!="undefined"?navigator:null,Xh=typeof document!="undefined"?document:null,Xr=Xn&&Xn.userAgent||"",Mc=/Edge\/(\d+)/.exec(Xr),Y1=/MSIE \d/.exec(Xr),Dc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xr),tn=!!(Y1||Dc||Mc),Vr=Y1?document.documentMode:Dc?+Dc[1]:Mc?+Mc[1]:0,Ln=!tn&&/gecko\/(\d+)/i.test(Xr);Ln&&+(/Firefox\/(\d+)/.exec(Xr)||[0,0])[1];const Pc=!tn&&/Chrome\/(\d+)/.exec(Xr),Pt=!!Pc,K1=Pc?+Pc[1]:0,Kt=!tn&&!!Xn&&/Apple Computer/.test(Xn.vendor),es=Kt&&(/Mobile\/\w+/.test(Xr)||!!Xn&&Xn.maxTouchPoints>2),En=es||(Xn?/Mac/.test(Xn.platform):!1),L3=Xn?/Win/.test(Xn.platform):!1,mr=/Android \d/.test(Xr),Sa=!!Xh&&"webkitFontSmoothing"in Xh.documentElement.style,R3=Sa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function M3(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ir(e,t){return typeof e=="number"?e:e[t]}function D3(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Jh(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=n||e.dom;a;){if(a.nodeType!=1){a=Zi(a);continue}let o=a,u=o==s.body,l=u?M3(s):D3(o),c=0,d=0;if(t.top<l.top+ir(r,"top")?d=-(l.top-t.top+ir(i,"top")):t.bottom>l.bottom-ir(r,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+ir(i,"top")-l.top:t.bottom-l.bottom+ir(i,"bottom")),t.left<l.left+ir(r,"left")?c=-(l.left-t.left+ir(i,"left")):t.right>l.right-ir(r,"right")&&(c=t.right-l.right+ir(i,"right")),c||d)if(u)s.defaultView.scrollBy(c,d);else{let f=o.scrollLeft,m=o.scrollTop;d&&(o.scrollTop+=d),c&&(o.scrollLeft+=c);let b=o.scrollLeft-f,y=o.scrollTop-m;t={left:t.left-b,top:t.top-y,right:t.right-b,bottom:t.bottom-y}}let h=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(h))break;a=h=="absolute"?a.offsetParent:Zi(a)}}function P3(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){let o=e.root.elementFromPoint(s,a);if(!o||o==e.dom||!e.dom.contains(o))continue;let u=o.getBoundingClientRect();if(u.top>=n-20){r=o,i=u.top;break}}return{refDOM:r,refTop:i,stack:G1(e.dom)}}function G1(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Zi(r));return t}function B3({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Q1(n,r==0?0:r-t)}function Q1(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ri=null;function F3(e){if(e.setActive)return e.setActive();if(Ri)return e.focus(Ri);let t=G1(e);e.focus(Ri==null?{get preventScroll(){return Ri={preventScroll:!0},!0}}:void 0),Ri||(Ri=!1,Q1(t,0))}function X1(e,t){let n,r=2e8,i,s=0,a=t.top,o=t.top,u,l;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=cr(c).getClientRects();else continue;for(let f=0;f<h.length;f++){let m=h[f];if(m.top<=a&&m.bottom>=o){a=Math.max(m.bottom,a),o=Math.min(m.top,o);let b=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(b<r){n=c,r=b,i=b&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,c.nodeType==1&&b&&(s=d+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!u&&m.left<=t.left&&m.right>=t.left&&(u=c,l={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(s=d+1)}}return!n&&u&&(n=u,i=l,r=0),n&&n.nodeType==3?H3(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:X1(n,i)}function H3(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=vr(r,1);if(s.top!=s.bottom&&Hd(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function Hd(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function U3(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function j3(e,t,n){let{node:r,offset:i}=X1(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function z3(e,t,n,r){let i=-1;for(let s=t,a=!1;s!=e.dom;){let o=e.docView.nearestDesc(s,!0),u;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((u=o.dom.getBoundingClientRect()).width||u.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&u.left>r.left||u.top>r.top?i=o.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(i=o.posAfter),a=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?o.posBefore:o.posAfter;s=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function J1(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let a=e.childNodes[s];if(a.nodeType==1){let o=a.getClientRects();for(let u=0;u<o.length;u++){let l=o[u];if(Hd(t,l))return J1(a,t,l)}}if((s=(s+1)%r)==i)break}return e}function $3(e,t){let n=e.dom.ownerDocument,r,i=0,s=_3(n,t.left,t.top);s&&({node:r,offset:i}=s);let a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),o;if(!a||!e.dom.contains(a.nodeType!=1?a.parentNode:a)){let l=e.dom.getBoundingClientRect();if(!Hd(t,l)||(a=J1(e.dom,t,l),!a))return null}if(Kt)for(let l=a;r&&l;l=Zi(l))l.draggable&&(r=void 0);if(a=U3(a,t),r){if(Ln&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let l;Sa&&i&&r.nodeType==1&&(l=r.childNodes[i-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=z3(e,r,i,t))}o==null&&(o=j3(e,a,t));let u=e.docView.nearestDesc(a,!0);return{pos:o,inside:u?u.posAtStart-u.border:-1}}function Zh(e){return e.top<e.bottom||e.left<e.right}function vr(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(Zh(r))return r}return Array.prototype.find.call(n,Zh)||e.getBoundingClientRect()}const V3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Z1(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),a=Sa||Ln;if(r.nodeType==3)if(a&&(V3.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=vr(cr(r,i,i),n);if(Ln&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let l=vr(cr(r,i-1,i-1),-1);if(l.top==u.top){let c=vr(cr(r,i,i+1),-1);if(c.top!=u.top)return Cs(c,c.left<l.left)}}return u}else{let u=i,l=i,c=n<0?1:-1;return n<0&&!i?(l++,c=-1):n>=0&&i==r.nodeValue.length?(u--,c=1):n<0?u--:l++,Cs(vr(cr(r,u,l),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Sn(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return Ol(u.getBoundingClientRect(),!1)}if(s==null&&i<Sn(r)){let u=r.childNodes[i];if(u.nodeType==1)return Ol(u.getBoundingClientRect(),!0)}return Ol(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Sn(r))){let u=r.childNodes[i-1],l=u.nodeType==3?cr(u,Sn(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(l)return Cs(vr(l,1),!1)}if(s==null&&i<Sn(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let l=u?u.nodeType==3?cr(u,0,a?0:1):u.nodeType==1?u:null:null;if(l)return Cs(vr(l,-1),!0)}return Cs(vr(r.nodeType==3?cr(r):r,-n),n>=0)}function Cs(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ol(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function eg(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function q3(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return eg(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(s,!0);if(!o)break;if(o.node.isBlock){s=o.contentDOM||o.dom;break}s=o.dom.parentNode}let a=Z1(e,i.pos,1);for(let o=s.firstChild;o;o=o.nextSibling){let u;if(o.nodeType==1)u=o.getClientRects();else if(o.nodeType==3)u=cr(o,0,o.nodeValue.length).getClientRects();else continue;for(let l=0;l<u.length;l++){let c=u[l];if(c.bottom>c.top+1&&(n=="up"?a.top-c.top>(c.bottom-a.top)*2:c.bottom-a.bottom>(a.bottom-c.top)*2))return!1}}return!0})}const W3=/[\u0590-\u08ac]/;function Y3(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,o=e.domSelection();return o?!W3.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?s:a:eg(e,t,()=>{let{focusNode:u,focusOffset:l,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),h=o.caretBidiLevel;o.modify("move",n,"character");let f=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:b}=e.domSelectionRange(),y=m&&!f.contains(m.nodeType==1?m:m.parentNode)||u==m&&l==b;try{o.collapse(c,d),u&&(u!=c||l!=d)&&o.extend&&o.extend(u,l)}catch(x){}return h!=null&&(o.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let e0=null,t0=null,n0=!1;function K3(e,t,n){return e0==t&&t0==n?n0:(e0=t,t0=n,n0=n=="up"||n=="down"?q3(e,t,n):Y3(e,t,n))}const wn=0,r0=1,li=2,Jn=3;class wa{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=wn,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,a;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>_t(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let o=i.children[a];if(o.size){i=o;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.size;if(o>t||a instanceof ng){i=t-s;break}s=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tg&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?_t(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?_t(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,o=0;;o++){let u=this.children[o],l=a+u.size;if(i==-1&&t<=l){let c=a+u.border;if(t>=c&&n<=l-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,c);t=a;for(let d=o;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=_t(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(l>n||o==this.children.length-1)){n=l;for(let c=o+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=_t(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=l}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),a=Math.max(t,n);for(let f=0,m=0;f<this.children.length;f++){let b=this.children[f],y=m+b.size;if(s>m&&a<y)return b.setSelection(t-m-b.border,n-m-b.border,r,i);m=y}let o=this.domFromPos(t,t?-1:1),u=n==t?o:this.domFromPos(n,n?-1:1),l=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Ln||Kt)&&t==n){let{node:f,offset:m}=o;if(f.nodeType==3){if(d=!!(m&&f.nodeValue[m-1]==`
`),d&&m==f.nodeValue.length)for(let b=f,y;b;b=b.parentNode){if(y=b.nextSibling){y.nodeName=="BR"&&(o=u={node:y.parentNode,offset:_t(y)+1});break}let x=b.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let b=f.childNodes[m-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Ln&&c.focusNode&&c.focusNode!=u.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&Kt)&&ki(o.node,o.offset,c.anchorNode,c.anchorOffset)&&ki(u.node,u.offset,c.focusNode,c.focusOffset))return;let h=!1;if((l.extend||t==n)&&!d){l.collapse(o.node,o.offset);try{t!=n&&l.extend(u.node,u.offset),h=!0}catch(f){}}if(!h){if(t>n){let m=o;o=u,u=m}let f=document.createRange();f.setEnd(u.node,u.offset),f.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?t<=a&&n>=r:t<a&&n>r){let o=r+s.border,u=a-s.border;if(t>=o&&n<=u){this.dirty=t==r||n==a?li:r0,t==o&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Jn:s.markDirty(t-o,n-o);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?li:Jn}r=a}this.dirty=li}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?li:r0;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class tg extends wa{constructor(t,n,r,i){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==wn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class G3 extends wa{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Si extends wa{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return(!a||!a.dom)&&(a=Ai.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Si(t,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Jn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Jn&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=wn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wn}}slice(t,n,r){let i=Si.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=Fc(s,n,a,r)),t>0&&(s=Fc(s,0,t,r));for(let o=0;o<s.length;o++)s[o].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class qr extends wa{constructor(t,n,r,i,s,a,o,u,l){super(t,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(t,n,r,i,s,a){let o=s.nodeViews[n.type.name],u,l=o&&o(n,s,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},r,i),c=l&&l.dom,d=l&&l.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Ai.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let h=c;return c=sg(c,r,n),l?u=new Q3(t,n,r,i,c,d||null,h,l,s,a+1):n.isText?new Fu(t,n,r,i,c,h,s):new qr(t,n,r,i,c,d||null,h,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>q.empty)}return t}matchesNode(t,n,r){return this.dirty==wn&&t.eq(this.node)&&Do(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,a=s&&s.pos>-1?s:null,o=s&&s.pos<0,u=new J3(this,a&&a.node,t);tk(this.node,this.innerDeco,(l,c,d)=>{l.spec.marks?u.syncToMarks(l.spec.marks,r,t):l.type.side>=0&&!d&&u.syncToMarks(c==this.node.childCount?ze.none:this.node.child(c).marks,r,t),u.placeWidget(l,t,i)},(l,c,d,h)=>{u.syncToMarks(l.marks,r,t);let f;u.findNodeMatch(l,c,d,h)||o&&t.state.selection.from>i&&t.state.selection.to<i+l.nodeSize&&(f=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(l,c,d,f,t)||u.updateNextNode(l,c,d,t,h,i)||u.addNode(l,c,d,t,i),i+=l.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==li)&&(a&&this.protectLocalComposition(t,a),rg(this.contentDOM,this.children,t),es&&nk(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Te)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,o=rk(this.node.content,a,r-n,i-n);return o<0?null:{node:s,pos:o,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new G3(this,s,n,i);t.input.compositionNodes.push(a),this.children=Fc(this.children,r,r+i.length,t,a)}update(t,n,r,i){return this.dirty==Jn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=wn}updateOuterDeco(t){if(Do(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ig(this.dom,this.nodeDOM,Bc(this.outerDeco,this.node,n),Bc(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function i0(e,t,n,r,i){sg(r,t,e);let s=new qr(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Fu extends qr{constructor(t,n,r,i,s,a,o){super(t,n,r,i,s,null,a,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==Jn||this.dirty!=wn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=wn,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new Fu(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Jn)}get domAtom(){return!1}isText(t){return this.node.text==t}}class ng extends wa{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==wn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Q3 extends qr{constructor(t,n,r,i,s,a,o,u,l,c){super(t,n,r,i,s,a,o,l,c),this.spec=u}update(t,n,r,i){if(this.dirty==Jn)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function rg(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let a=t[s],o=a.dom;if(o.parentNode==e){for(;o!=r;)r=s0(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(o,r);if(a instanceof Si){let u=r?r.previousSibling:e.lastChild;rg(a.contentDOM,a.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=s0(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const js=function(e){e&&(this.nodeName=e)};js.prototype=Object.create(null);const ci=[new js];function Bc(e,t,n){if(e.length==0)return ci;let r=n?ci[0]:new js,i=[r];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a){a.nodeName&&i.push(r=new js(a.nodeName));for(let o in a){let u=a[o];u!=null&&(n&&i.length==1&&i.push(r=new js(t.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+u:o=="style"?r.style=(r.style?r.style+";":"")+u:o!="nodeName"&&(r[o]=u))}}}return i}function ig(e,t,n,r){if(n==ci&&r==ci)return t;let i=t;for(let s=0;s<r.length;s++){let a=r[s],o=n[s];if(s){let u;o&&o.nodeName==a.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(i),o=ci[0]),i=u}X3(i,o||ci[0],a)}return i}function X3(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function sg(e,t,n){return ig(e,e,ci,Bc(t,n,e.nodeType!=1))}function Do(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function s0(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class J3{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Z3(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,a=Math.min(s,t.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=wn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let l=this.top.children[u];if(l.matchesMark(t[s])&&!this.isLocked(l.dom)){o=u;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let u=Si.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))s=this.top.children.indexOf(a,this.index);else for(let o=this.index,u=Math.min(this.top.children.length,o+5);o<u;o++){let l=this.top.children[o];if(l.matchesNode(t,n,r)&&!this.preMatch.matched.has(l)){s=o;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let a=this.top.children[i];return a.dirty==Jn&&a.dom==a.contentDOM&&(a.dirty=li),a.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,a){for(let o=this.index;o<this.top.children.length;o++){let u=this.top.children[o];if(u instanceof qr){let l=this.preMatch.matched.get(u);if(l!=null&&l!=s)return!1;let c=u.dom,d,h=this.isLocked(c)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=Jn&&Do(n,u.outerDeco));if(!h&&u.update(t,n,r,i))return this.destroyBetween(this.index,o),u.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(u,t,n,r,i,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=li,d.updateChildren(i,a+1),d.dirty=wn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Do(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=qr.create(this.top,n,r,i,s,a);if(o.contentDOM){o.children=t.children,t.children=[];for(let u of o.children)u.parent=o}return t.destroy(),o}addNode(t,n,r,i,s){let a=qr.create(this.top,t,n,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tg(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Si;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Fu)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Kt||Pt)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ng(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Z3(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,a=[];e:for(;i>0;){let o;for(;;)if(r){let l=n.children[r-1];if(l instanceof Si)n=l,r=l.children.length;else{o=l,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=o.node;if(u){if(u!=e.child(i-1))break;--i,s.set(o,i),a.push(o)}}return{index:i,matched:s,matches:a.reverse()}}function ek(e,t){return e.type.side-t.type.side}function tk(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let l=0;l<e.childCount;l++){let c=e.child(l);r(c,i,t.forChild(s,c),l),s+=c.nodeSize}return}let a=0,o=[],u=null;for(let l=0;;){let c,d;for(;a<i.length&&i[a].to==s;){let y=i[a++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(ek);for(let y=0;y<d.length;y++)n(d[y],l,!!u)}else n(c,l,!!u);let h,f;if(u)f=-1,h=u,u=null;else if(l<e.childCount)f=l,h=e.child(l++);else break;for(let y=0;y<o.length;y++)o[y].to<=s&&o.splice(y--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)o.push(i[a++]);let m=s+h.nodeSize;if(h.isText){let y=m;a<i.length&&i[a].from<y&&(y=i[a].from);for(let x=0;x<o.length;x++)o[x].to<y&&(y=o[x].to);y<m&&(u=h.cut(y-s),h=h.cut(0,y-s),m=y,f=-1)}else for(;a<i.length&&i[a].to<m;)a++;let b=h.isInline&&!h.isLeaf?o.filter(y=>!y.inline):o.slice();r(h,b,t.forChild(s,h),f),s=m}}function nk(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function rk(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let a=e.child(i++),o=s;if(s+=a.nodeSize,!a.isText)continue;let u=a.text;for(;i<e.childCount;){let l=e.child(i++);if(s+=l.nodeSize,!l.isText)break;u+=l.text}if(s>=n){if(s>=r&&u.slice(r-t.length-o,r-o)==t)return r-t.length;let l=o<r?u.lastIndexOf(t,r-o-1):-1;if(l>=0&&l+t.length+o>=n)return o+l;if(n==r&&u.length>=r+t.length-o&&u.slice(r-o,r-o+t.length)==t)return r}}return-1}function Fc(e,t,n,r,i){let s=[];for(let a=0,o=0;a<e.length;a++){let u=e[a],l=o,c=o+=u.size;l>=n||c<=t?s.push(u):(l<t&&s.push(u.slice(0,t-l,r)),i&&(s.push(i),i=void 0),c>n&&s.push(u.slice(n-l,u.size,r)))}return s}function Ud(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o=r.resolve(a),u,l;if(Bu(n)){for(u=a;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&he.isSelectable(d)&&i.parent&&!(d.isInline&&O3(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;l=new he(a==h?o:r.resolve(h))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=a,h=a;for(let f=0;f<n.rangeCount;f++){let m=n.getRangeAt(f);d=Math.min(d,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[u,a]=h==e.state.selection.anchor?[h,d]:[d,h],o=r.resolve(a)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let c=r.resolve(u);if(!l){let d=t=="pointer"||e.state.selection.head<o.pos&&!s?1:-1;l=jd(e,c,o,d)}return l}function ag(e){return e.editable?e.hasFocus():ug(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function xr(e,t=!1){let n=e.state.selection;if(og(e,n),!!ag(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Pt){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ki(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)sk(e);else{let{anchor:r,head:i}=n,s,a;a0&&!(n instanceof Te)&&(n.$from.parent.inlineContent||(s=o0(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=o0(e,n.to))),e.docView.setSelection(r,i,e,t),a0&&(s&&u0(s),a&&u0(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ik(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const a0=Kt||Pt&&K1<63;function o0(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Kt&&i&&i.contentEditable=="false")return vl(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return vl(i);if(s)return vl(s)}}function vl(e){return e.contentEditable="true",Kt&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function u0(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ik(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!ag(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function sk(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,_t(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&tn&&Vr<=11&&(r.disabled=!0,r.disabled=!1)}function og(e,t){if(t instanceof he){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(l0(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else l0(e)}function l0(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function jd(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Te.between(t,n,r)}function c0(e){return e.editable&&!e.hasFocus()?!1:ug(e)}function ug(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function ak(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ki(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Hc(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&be.findFrom(s,t)}function Rr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function d0(e,t,n){let r=e.state.selection;if(r instanceof Te)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Rr(e,new Te(r.$anchor,a))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Hc(e.state,t);return i&&i instanceof he?Rr(e,i):!1}else if(!(En&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let o=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=e.docView.descAt(o))&&!a.contentDOM?he.isSelectable(s)?Rr(e,new he(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Sa?Rr(e,new Te(e.state.doc.resolve(t<0?o:o+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof he&&r.node.isInline)return Rr(e,new Te(t>0?r.$to:r.$from));{let i=Hc(e.state,t);return i?Rr(e,i):!1}}}function Po(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function zs(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Mi(e,t){return t<0?ok(e):uk(e)}function ok(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,a=!1;for(Ln&&n.nodeType==1&&r<Po(n)&&zs(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(zs(o,-1))i=n,s=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(lg(n))break;{let o=n.previousSibling;for(;o&&zs(o,-1);)i=n.parentNode,s=_t(o),o=o.previousSibling;if(o)n=o,r=Po(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?Uc(e,n,r):i&&Uc(e,i,s)}function uk(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Po(n),s,a;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(zs(o,1))s=n,a=++r;else break}else{if(lg(n))break;{let o=n.nextSibling;for(;o&&zs(o,1);)s=o.parentNode,a=_t(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=Po(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&Uc(e,s,a)}function lg(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function lk(e,t){for(;e&&t==e.childNodes.length&&!ka(e);)t=_t(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function ck(e,t){for(;e&&!t&&!ka(e);)t=_t(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Uc(e,t,n){if(t.nodeType!=3){let s,a;(a=lk(t,n))?(t=a,n=0):(s=ck(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Bu(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&xr(e)},50)}function f0(e,t){let n=e.state.doc.resolve(t);if(!(Pt||L3)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function h0(e,t,n){let r=e.state.selection;if(r instanceof Te&&!r.empty||n.indexOf("s")>-1||En&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let a=Hc(e.state,t);if(a&&a instanceof he)return Rr(e,a)}if(!i.parent.inlineContent){let a=t<0?i:s,o=r instanceof dn?be.near(a,t):be.findFrom(a,t);return o?Rr(e,o):!1}return!1}function p0(e,t){if(!(e.state.selection instanceof Te))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function m0(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function dk(e){if(!Kt||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;m0(e,r,"true"),setTimeout(()=>m0(e,r,"false"),20)}return!1}function fk(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function hk(e,t){let n=t.keyCode,r=fk(t);if(n==8||En&&n==72&&r=="c")return p0(e,-1)||Mi(e,-1);if(n==46&&!t.shiftKey||En&&n==68&&r=="c")return p0(e,1)||Mi(e,1);if(n==13||n==27)return!0;if(n==37||En&&n==66&&r=="c"){let i=n==37?f0(e,e.state.selection.from)=="ltr"?-1:1:-1;return d0(e,i,r)||Mi(e,i)}else if(n==39||En&&n==70&&r=="c"){let i=n==39?f0(e,e.state.selection.from)=="ltr"?1:-1:1;return d0(e,i,r)||Mi(e,i)}else{if(n==38||En&&n==80&&r=="c")return h0(e,-1,r)||Mi(e,-1);if(n==40||En&&n==78&&r=="c")return dk(e)||h0(e,1,r)||Mi(e,1);if(r==(En?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function zd(e,t){e.someProp("transformCopied",f=>{t=f(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let a=e.someProp("clipboardSerializer")||Ai.fromSchema(e.state.schema),o=mg(),u=o.createElement("div");u.appendChild(a.serializeFragment(r,{document:o}));let l=u.firstChild,c,d=0;for(;l&&l.nodeType==1&&(c=pg[l.nodeName.toLowerCase()]);){for(let f=c.length-1;f>=0;f--){let m=o.createElement(c[f]);for(;u.firstChild;)m.appendChild(u.firstChild);u.appendChild(m),d++}l=u.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",f=>f(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:h,slice:t}}function cg(e,t,n,r,i){let s=i.parent.type.spec.code,a,o;if(!n&&!t)return null;let u=t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",h=>{t=h(t,s||r,e)}),s)return t?new ie(q.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):ie.empty;let d=e.someProp("clipboardTextParser",h=>h(t,i,r,e));if(d)o=d;else{let h=i.marks(),{schema:f}=e.state,m=Ai.fromSchema(f);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(b=>{let y=a.appendChild(document.createElement("p"));b&&y.appendChild(m.serializeNode(f.text(b,h)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),a=bk(n),Sa&&xk(a);let l=a&&a.querySelector("[data-pm-slice]"),c=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let h=a.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;a=h}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||Hs.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||c),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!pk.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)o=yk(g0(o,+c[1],+c[2]),c[4]);else if(o=ie.maxOpen(mk(o.content,i),!0),o.openStart||o.openEnd){let d=0,h=0;for(let f=o.content.firstChild;d<o.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=o.content.lastChild;h<o.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);o=g0(o,d,h)}return e.someProp("transformPasted",d=>{o=d(o,e)}),o}const pk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mk(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,a=[];if(e.forEach(o=>{if(!a)return;let u=i.findWrapping(o.type),l;if(!u)return a=null;if(l=a.length&&s.length&&fg(u,s,o,a[a.length-1],0))a[a.length-1]=l;else{a.length&&(a[a.length-1]=hg(a[a.length-1],s.length));let c=dg(o,u);a.push(c),i=i.matchType(c.type),s=u}}),a)return q.from(a)}return e}function dg(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,q.from(e));return e}function fg(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=fg(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(q.from(dg(n,e,i+1))))}}function hg(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,hg(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(q.empty,!0);return e.copy(n.append(r))}function jc(e,t,n,r,i,s){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(s=0),i<r-1&&(o=jc(o,t,n,r,i+1,s)),i>=n&&(o=t<0?a.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(q.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function g0(e,t,n){return t<e.openStart&&(e=new ie(jc(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ie(jc(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const pg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let b0=null;function mg(){return b0||(b0=document.implementation.createHTMLDocument("title"))}let _l=null;function gk(e){let t=window.trustedTypes;return t?(_l||(_l=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_l.createHTML(e)):e}function bk(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=mg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&pg[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=gk(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function xk(e){let t=e.querySelectorAll(Pt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function yk(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch(o){return e}let{content:i,openStart:s,openEnd:a}=e;for(let o=r.length-2;o>=0;o-=2){let u=n.nodes[r[o]];if(!u||u.hasRequiredAttrs())break;i=q.from(u.create(r[o+1],i)),s++,a++}return new ie(i,s,a)}const Gt={},Qt={},Ek={touchstart:!0,touchmove:!0};class Tk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kk(e){for(let t in Gt){let n=Gt[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{wk(e,r)&&!$d(e,r)&&(e.editable||!(r.type in Qt))&&n(e,r)},Ek[t]?{passive:!0}:void 0)}Kt&&e.dom.addEventListener("input",()=>null),zc(e)}function jr(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Sk(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function zc(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>$d(e,r))})}function $d(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function wk(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Ck(e,t){!$d(e,t)&&Gt[t.type]&&(e.editable||!(t.type in Qt))&&Gt[t.type](e,t)}Qt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!bg(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(mr&&Pt&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),es&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,si(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||hk(e,n)?n.preventDefault():jr(e,"key")};Qt.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Qt.keypress=(e,t)=>{let n=t;if(bg(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||En&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Te)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",a=>a(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Hu(e){return{left:e.clientX,top:e.clientY}}function Ak(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Vd(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(e.someProp(t,o=>a>s.depth?o(e,n,s.nodeAfter,s.before(a),i,!0):o(e,n,s.node(a),s.before(a),i,!1)))return!0;return!1}function Ki(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Nk(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&he.isSelectable(r)?(Ki(e,new he(n)),!0):!1}function Ik(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof he&&(r=n.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a);if(he.isSelectable(o)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(a);break}}return i!=null?(Ki(e,he.create(e.state.doc,i)),!0):!1}function Ok(e,t,n,r,i){return Vd(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?Ik(e,n):Nk(e,n))}function vk(e,t,n,r){return Vd(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function _k(e,t,n,r){return Vd(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||Lk(e,n,r)}function Lk(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Ki(e,Te.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),o=i.before(s);if(a.inlineContent)Ki(e,Te.create(r,o+1,o+1+a.content.size));else if(he.isSelectable(a))Ki(e,he.create(r,o));else continue;return!0}}function qd(e){return Bo(e)}const gg=En?"metaKey":"ctrlKey";Gt.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=qd(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Ak(n,e.input.lastClick)&&!n[gg]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=e.posAtCoords(Hu(n));a&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Rk(e,a,n,!!r)):(s=="doubleClick"?vk:_k)(e,a.pos,a.inside,n)?n.preventDefault():jr(e,"pointer"))};class Rk{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[gg],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,a=c.depth?c.before():0}const o=i?null:r.target,u=o?t.docView.nearestDesc(o,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:l}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||l instanceof he&&l.from<=a&&l.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ln&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),jr(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xr(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Hu(t))),this.updateAllowDefault(t),this.allowDefault||!n?jr(this.view,"pointer"):Ok(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Pt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ki(this.view,be.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):jr(this.view,"pointer")}move(t){this.updateAllowDefault(t),jr(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Gt.touchstart=e=>{e.input.lastTouch=Date.now(),qd(e),jr(e,"pointer")};Gt.touchmove=e=>{e.input.lastTouch=Date.now(),jr(e,"pointer")};Gt.contextmenu=e=>qd(e);function bg(e,t){return e.composing?!0:Kt&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Mk=mr?5e3:-1;Qt.compositionstart=Qt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Te&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Bo(e,!0),e.markCursor=null;else if(Bo(e,!t.selection.empty),Ln&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let o=e.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}e.input.composing=!0}xg(e,Mk)};Qt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,xg(e,20))};function xg(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Bo(e),t))}function yg(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Pk());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Dk(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=N3(t.focusNode,t.focusOffset),r=I3(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function Pk(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Bo(e,t=!1){if(!(mr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),yg(e),t||e.docView&&e.docView.dirty){let n=Ud(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function Bk(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const oa=tn&&Vr<15||es&&R3<604;Gt.copy=Qt.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=oa?null:n.clipboardData,a=r.content(),{dom:o,text:u}=zd(e,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",u)):Bk(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Fk(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Hk(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ua(e,r.value,null,i,t):ua(e,r.textContent,r.innerHTML,i,t)},50)}function ua(e,t,n,r,i){let s=cg(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||ie.empty)))return!0;if(!s)return!1;let a=Fk(s),o=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(s);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Eg(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Qt.paste=(e,t)=>{let n=t;if(e.composing&&!mr)return;let r=oa?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&ua(e,Eg(r),r.getData("text/html"),i,n)?n.preventDefault():Hk(e,n)};class Tg{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const Uk=En?"altKey":"ctrlKey";function kg(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n!=null?n:!t[Uk]}Gt.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Hu(n)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof he?i.to-1:i.to))){if(r&&r.mightDrag)a=he.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(a=he.create(e.state.doc,d.posBefore))}}let o=(a||e.state.selection).content(),{dom:u,text:l,slice:c}=zd(e,o);(!n.dataTransfer.files.length||!Pt||K1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(oa?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",oa||n.dataTransfer.setData("text/plain",l),e.dragging=new Tg(c,kg(e,n),a)};Gt.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Qt.dragover=Qt.dragenter=(e,t)=>t.preventDefault();Qt.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Hu(n));if(!i)return;let s=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e)}):a=cg(e,Eg(n.dataTransfer),oa?null:n.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&kg(e,n));if(e.someProp("handleDrop",m=>m(e,n,a||ie.empty,o))){n.preventDefault();return}if(!a)return;n.preventDefault();let u=a?F1(e.state.doc,s.pos,a):s.pos;u==null&&(u=s.pos);let l=e.state.tr;if(o){let{node:m}=r;m?m.replace(l):l.deleteSelection()}let c=l.mapping.map(u),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&he.isSelectable(a.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new he(f));else{let m=l.mapping.map(u);l.mapping.maps[l.mapping.maps.length-1].forEach((b,y,x,E)=>m=E),l.setSelection(jd(e,f,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))};Gt.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&xr(e)},20))};Gt.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Gt.beforeinput=(e,t)=>{if(Pt&&mr&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,si(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Qt)Gt[e]=Qt[e];function la(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Fo{constructor(t,n){this.toDOM=t,this.spec=n||gi,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:a}=t.mapResult(n.from+i,this.side<0?-1:1);return a?null:new Bt(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Fo&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&la(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Wr{constructor(t,n){this.attrs=t,this.spec=n||gi}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Bt(s,a,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Wr&&la(this.attrs,t.attrs)&&la(this.spec,t.spec)}static is(t){return t.type instanceof Wr}destroy(){}}class Wd{constructor(t,n){this.attrs=t,this.spec=n||gi}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Bt(s.pos-r,a.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof Wd&&la(this.attrs,t.attrs)&&la(this.spec,t.spec)}destroy(){}}class Bt{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Bt(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Bt(t,t,new Fo(n,r))}static inline(t,n,r,i){return new Bt(t,n,new Wr(r,i))}static node(t,n,r,i){return new Bt(t,n,new Wd(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Wr}get widget(){return this.type instanceof Fo}}const Hi=[],gi={};class et{constructor(t,n){this.local=t.length?t:Hi,this.children=n.length?n:Hi}static create(t,n){return n.length?Ho(n,t,0,gi):Mt}find(t,n,r){let i=[];return this.findInner(t==null?0:t,n==null?1e9:n,i,0,r),i}findInner(t,n,r,i,s){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=n&&o.to>=t&&(!s||s(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>t){let o=this.children[a]+1;this.children[a+2].findInner(t-o,n-o,r,i+o,s)}}map(t,n,r){return this==Mt||t.maps.length==0?this:this.mapInner(t,n,0,0,r||gi)}mapInner(t,n,r,i,s){let a;for(let o=0;o<this.local.length;o++){let u=this.local[o].map(t,r,i);u&&u.type.valid(n,u)?(a||(a=[])).push(u):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?jk(this.children,a||[],t,n,r,i,s):a?new et(a.sort(bi),Hi):Mt}add(t,n){return n.length?this==Mt?et.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((o,u)=>{let l=u+r,c;if(c=wg(n,o,l)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(o,c,l+1):i.splice(s,0,u,u+o.nodeSize,Ho(c,o,l+1,gi)),s+=3}});let a=Sg(s?Cg(n):n,-r);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||a.splice(o--,1);return new et(a.length?this.local.concat(a).sort(bi):this.local,i||this.children)}remove(t){return t.length==0||this==Mt?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,o=r[s]+n,u=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>o&&d.to<u&&(t[c]=null,(a||(a=[])).push(d));if(!a)continue;r==this.children&&(r=this.children.slice());let l=r[s+2].removeInner(a,o+1);l!=Mt?r[s+2]=l:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<t.length;s++)if(a=t[s])for(let o=0;o<i.length;o++)i[o].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new et(i,r):Mt}forChild(t,n){if(this==Mt)return this;if(n.isLeaf)return et.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}let s=t+1,a=s+n.content.size;for(let o=0;o<this.local.length;o++){let u=this.local[o];if(u.from<a&&u.to>s&&u.type instanceof Wr){let l=Math.max(s,u.from)-s,c=Math.min(a,u.to)-s;l<c&&(i||(i=[])).push(u.copy(l,c))}}if(i){let o=new et(i.sort(bi),Hi);return r?new Pr([o,r]):o}return r||Mt}eq(t){if(this==t)return!0;if(!(t instanceof et)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return Yd(this.localsInner(t))}localsInner(t){if(this==Mt)return Hi;if(t.inlineContent||!this.local.some(Wr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Wr||n.push(this.local[r]);return n}forEachSet(t){t(this)}}et.empty=new et([],[]);et.removeOverlap=Yd;const Mt=et.empty;class Pr{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,gi));return Pr.from(r)}forChild(t,n){if(n.isLeaf)return et.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Mt&&(s instanceof Pr?r=r.concat(s.members):r.push(s))}return Pr.from(r)}eq(t){if(!(t instanceof Pr)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?Yd(r?n:n.sort(bi)):Hi}static from(t){switch(t.length){case 0:return Mt;case 1:return t[0];default:return new Pr(t.every(n=>n instanceof et)?t:t.reduce((n,r)=>n.concat(r instanceof et?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function jk(e,t,n,r,i,s,a){let o=e.slice();for(let l=0,c=s;l<n.maps.length;l++){let d=0;n.maps[l].forEach((h,f,m,b)=>{let y=b-m-(f-h);for(let x=0;x<o.length;x+=3){let E=o[x+1];if(E<0||h>E+c-d)continue;let T=o[x]+c-d;f>=T?o[x+1]=h<=T?-2:-1:h>=c&&y&&(o[x]+=y,o[x+1]+=y)}d+=y}),c=n.maps[l].map(c,-1)}let u=!1;for(let l=0;l<o.length;l+=3)if(o[l+1]<0){if(o[l+1]==-2){u=!0,o[l+1]=-1;continue}let c=n.map(e[l]+s),d=c-i;if(d<0||d>=r.content.size){u=!0;continue}let h=n.map(e[l+1]+s,-1),f=h-i,{index:m,offset:b}=r.content.findIndex(d),y=r.maybeChild(m);if(y&&b==d&&b+y.nodeSize==f){let x=o[l+2].mapInner(n,y,c+1,e[l]+s+1,a);x!=Mt?(o[l]=d,o[l+1]=f,o[l+2]=x):(o[l+1]=-2,u=!0)}else u=!0}if(u){let l=zk(o,e,t,n,i,s,a),c=Ho(l,r,0,a);t=c.local;for(let d=0;d<o.length;d+=3)o[d+1]<0&&(o.splice(d,3),d-=3);for(let d=0,h=0;d<c.children.length;d+=3){let f=c.children[d];for(;h<o.length&&o[h]<f;)h+=3;o.splice(h,0,c.children[d],c.children[d+1],c.children[d+2])}}return new et(t.sort(bi),o)}function Sg(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Bt(i.from+t,i.to+t,i.type))}return n}function zk(e,t,n,r,i,s,a){function o(u,l){for(let c=0;c<u.local.length;c++){let d=u.local[c].map(r,i,l);d?n.push(d):a.onRemove&&a.onRemove(u.local[c].spec)}for(let c=0;c<u.children.length;c+=3)o(u.children[c+2],u.children[c]+l+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&o(e[u+2],t[u]+s+1);return n}function wg(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,a;s<e.length;s++)(a=e[s])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[s]=null);return i}function Cg(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Ho(e,t,n,r){let i=[],s=!1;t.forEach((o,u)=>{let l=wg(e,o,u+n);if(l){s=!0;let c=Ho(l,o,n+u+1,r);c!=Mt&&i.push(u,u+o.nodeSize,c)}});let a=Sg(s?Cg(e):e,-n).sort(bi);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||i.length?new et(a,i):Mt}function bi(e,t){return e.from-t.from||e.to-t.to}function Yd(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),x0(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),x0(t,i,r.copy(s.from,r.to)));break}}}return t}function x0(e,t,n){for(;t<e.length&&bi(n,e[t])>0;)t++;e.splice(t,0,n)}function Ll(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Mt&&t.push(r)}),e.cursorWrapper&&t.push(et.create(e.state.doc,[e.cursorWrapper.deco])),Pr.from(t)}const $k={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Vk=tn&&Vr<=11;class qk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Wk{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qk,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);tn&&Vr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Vk&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$k)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(c0(this.view)){if(this.suppressingSelectionUpdates)return xr(this.view);if(tn&&Vr<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ki(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Zi(s))n.add(s);for(let s=t.anchorNode;s;s=Zi(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&c0(t)&&!this.ignoreSelectionChange(r),s=-1,a=-1,o=!1,u=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],u);d&&(s=s<0?d.from:Math.min(d.from,s),a=a<0?d.to:Math.max(d.to,a),d.typeOver&&(o=!0))}if(Ln&&u.length){let c=u.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,h]=c;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of c){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||Gk(t,d)!=f)&&h.remove()}}}let l=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Bu(r)&&(l=Ud(t))&&l.eq(be.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,xr(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,a),Yk(t)),this.handleDOMChange(s,a,o,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||xr(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(tn&&Vr<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:h}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h)}let a=i&&i.parentNode==t.target?_t(i)+1:0,o=r.localPosFromDOM(t.target,a,-1),u=s&&s.parentNode==t.target?_t(s):t.target.childNodes.length,l=r.localPosFromDOM(t.target,u,1);return{from:o,to:l}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let y0=new WeakMap,E0=!1;function Yk(e){if(!y0.has(e)&&(y0.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Ln,E0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),E0=!0}}function T0(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return ki(a.node,a.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Kk(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return T0(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?T0(e,n):null}function Gk(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Qk(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:a,to:o}=e.docView.parseRange(t,n),u=e.domSelectionRange(),l,c=u.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(l=[{node:c,offset:u.anchorOffset}],Bu(u)||l.push({node:u.focusNode,offset:u.focusOffset})),Pt&&e.input.lastKeyCode===8)for(let y=s;y>i;y--){let x=r.childNodes[y-1],E=x.pmViewDesc;if(x.nodeName=="BR"&&!E){s=y;break}if(!E||E.size)break}let d=e.state.doc,h=e.someProp("domParser")||Hs.fromSchema(e.state.schema),f=d.resolve(a),m=null,b=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:Xk,context:f});if(l&&l[0].pos!=null){let y=l[0].pos,x=l[1]&&l[1].pos;x==null&&(x=y),m={anchor:y+a,head:x+a}}return{doc:b,sel:m,from:a,to:o}}function Xk(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Kt&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Kt&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Jk=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Zk(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let B=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,j=Ud(e,B);if(j&&!e.state.selection.eq(j)){if(Pt&&mr&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",$=>$(e,si(13,"Enter"))))return;let _=e.state.tr.setSelection(j);B=="pointer"?_.setMeta("pointer",!0):B=="key"&&_.scrollIntoView(),s&&_.setMeta("composition",s),e.dispatch(_)}return}let a=e.state.doc.resolve(t),o=a.sharedDepth(n);t=a.before(o+1),n=e.state.doc.resolve(n).after(o+1);let u=e.state.selection,l=Qk(e,t,n),c=e.state.doc,d=c.slice(l.from,l.to),h,f;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(h=e.state.selection.to,f="end"):(h=e.state.selection.from,f="start"),e.input.lastKeyCode=null;let m=n6(d.content,l.doc.content,l.from,h,f);if(m&&e.input.domChangeCount++,(es&&e.input.lastIOSEnter>Date.now()-225||mr)&&i.some(B=>B.nodeType==1&&!Jk.test(B.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",B=>B(e,si(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&u instanceof Te&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))m={start:u.from,endA:u.to,endB:u.to};else{if(l.sel){let B=k0(e,e.state.doc,l.sel);if(B&&!B.eq(e.state.selection)){let j=e.state.tr.setSelection(B);s&&j.setMeta("composition",s),e.dispatch(j)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Te&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),tn&&Vr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>l.from&&l.doc.textBetween(m.start-l.from-1,m.start-l.from+1)==" "&&(m.start--,m.endA--,m.endB--);let b=l.doc.resolveNoCache(m.start-l.from),y=l.doc.resolveNoCache(m.endB-l.from),x=c.resolve(m.start),E=b.sameParent(y)&&b.parent.inlineContent&&x.end()>=m.endA,T;if((es&&e.input.lastIOSEnter>Date.now()-225&&(!E||i.some(B=>B.nodeName=="DIV"||B.nodeName=="P"))||!E&&b.pos<l.doc.content.size&&(!b.sameParent(y)||!b.parent.inlineContent)&&!/\S/.test(l.doc.textBetween(b.pos,y.pos,"",""))&&(T=be.findFrom(l.doc.resolve(b.pos+1),1,!0))&&T.head>b.pos)&&e.someProp("handleKeyDown",B=>B(e,si(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&t6(c,m.start,m.endA,b,y)&&e.someProp("handleKeyDown",B=>B(e,si(8,"Backspace")))){mr&&Pt&&e.domObserver.suppressSelectionUpdates();return}Pt&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),mr&&!E&&b.start()!=y.start()&&y.parentOffset==0&&b.depth==y.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==m.endA&&(m.endB-=2,y=l.doc.resolveNoCache(m.endB-l.from),setTimeout(()=>{e.someProp("handleKeyDown",function(B){return B(e,si(13,"Enter"))})},20));let v=m.start,C=m.endA,w=B=>{let j=B||e.state.tr.replace(v,C,l.doc.slice(m.start-l.from,m.endB-l.from));if(l.sel){let _=k0(e,j.doc,l.sel);_&&!(Pt&&e.composing&&_.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(_.head==v||_.head==j.mapping.map(C)-1)||tn&&_.empty&&_.head==v)&&j.setSelection(_)}return s&&j.setMeta("composition",s),j.scrollIntoView()},D;if(E){if(b.pos==y.pos){tn&&Vr<=11&&b.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>xr(e),20));let B=w(e.state.tr.delete(v,C)),j=c.resolve(m.start).marksAcross(c.resolve(m.endA));j&&B.ensureMarks(j),e.dispatch(B)}else if(m.endA==m.endB&&(D=e6(b.parent.content.cut(b.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let B=w(e.state.tr);D.type=="add"?B.addMark(v,C,D.mark):B.removeMark(v,C,D.mark),e.dispatch(B)}else if(b.parent.child(b.index()).isText&&b.index()==y.index()-(y.textOffset?0:1)){let B=b.parent.textBetween(b.parentOffset,y.parentOffset),j=()=>w(e.state.tr.insertText(B,v,C));e.someProp("handleTextInput",_=>_(e,v,C,B,j))||e.dispatch(j())}}else e.dispatch(w())}function k0(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:jd(e,t.resolve(n.anchor),t.resolve(n.head))}function e6(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,a,o,u;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)o=i[0],a="add",u=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&s.length==1)o=s[0],a="remove",u=c=>c.mark(o.removeFromSet(c.marks));else return null;let l=[];for(let c=0;c<t.childCount;c++)l.push(u(t.child(c)));if(q.from(l).eq(e))return{mark:o,type:a}}function t6(e,t,n,r,i){if(n-t<=i.pos-r.pos||Rl(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let o=s.nodeAfter;return o!=null&&n==t+o.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(Rl(s,!0,!0));return!a.parent.isTextblock||a.pos>n||Rl(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Rl(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function n6(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(a,o));r-=a+u-s}if(a<s&&e.size<t.size){let u=r<=s&&r>=a?s-r:0;s-=u,s&&s<t.size&&S0(t.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-a),a=s}else if(o<s){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<e.size&&S0(e.textBetween(s-1,s+1))&&(s+=u?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}function S0(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Ag{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Tk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(I0),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=A0(this),C0(this),this.nodeViews=N0(this),this.docView=i0(this.state.doc,w0(this),Ll(this),this.dom,this),this.domObserver=new Wk(this,(r,i,s,a)=>Zk(this,r,i,s,a)),this.domObserver.start(),kk(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&zc(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(I0),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(yg(this),a=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=N0(this);i6(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&zc(this),this.editable=A0(this),C0(this);let u=Ll(this),l=w0(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,l,u);(d||!t.selection.eq(i.selection))&&(a=!0);let h=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&P3(this);if(a){this.domObserver.stop();let f=d&&(tn||Pt)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&r6(i.selection,t.selection);if(d){let m=Pt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Dk(this)),(s||!this.docView.update(t.doc,l,u,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=i0(t.doc,l,u,this.dom,this)),m&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ak(this))?xr(this,f):(og(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&B3(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof he){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Jh(this,n.getBoundingClientRect(),t)}else Jh(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Tg(t.slice,t.move,i<0?void 0:he.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[t];if(o!=null&&(i=n?n(o):o))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let o=s[a].props[t];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(tn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&F3(this.dom),xr(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return $3(this,t)}coordsAtPos(t,n=1){return Z1(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return K3(this,n||this.state,t)}pasteHTML(t,n){return ua(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return ua(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return zd(this,t)}destroy(){this.docView&&(Sk(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ll(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,C3())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Ck(this,t)}domSelectionRange(){let t=this.domSelection();return t?Kt&&this.root.nodeType===11&&v3(this.dom.ownerDocument)==this.dom&&Kk(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ag.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function w0(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Bt.node(0,e.state.doc.content.size,t)]}function C0(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Bt.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function A0(e){return!e.someProp("editable",t=>t(e.state)===!1)}function r6(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function N0(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function i6(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function I0(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Yr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s6=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),a6=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Lt=0;Lt<10;Lt++)Yr[48+Lt]=Yr[96+Lt]=String(Lt);for(var Lt=1;Lt<=24;Lt++)Yr[Lt+111]="F"+Lt;for(var Lt=65;Lt<=90;Lt++)Yr[Lt]=String.fromCharCode(Lt+32),Uo[Lt]=String.fromCharCode(Lt);for(var Ml in Yr)Uo.hasOwnProperty(Ml)||(Uo[Ml]=Yr[Ml]);function o6(e){var t=s6&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||a6&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Uo:Yr)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const u6=typeof navigator!="undefined"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),l6=typeof navigator!="undefined"&&/Win/.test(navigator.platform);function c6(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o++){let u=t[o];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))u6?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function d6(e){let t=Object.create(null);for(let n in e)t[c6(n)]=e[n];return t}function Dl(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function f6(e){return new Qe({props:{handleKeyDown:Kd(e)}})}function Kd(e){let t=d6(e);return function(n,r){let i=o6(r),s,a=t[Dl(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=t[Dl(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(l6&&r.ctrlKey&&r.altKey)&&(s=Yr[r.keyCode])&&s!=i){let o=t[Dl(s,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const Gd=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Ng(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Ig=(e,t,n)=>{let r=Ng(e,n);if(!r)return!1;let i=Qd(r);if(!i){let a=r.blockRange(),o=a&&hs(a);return o==null?!1:(t&&t(e.tr.lift(a,o).scrollIntoView()),!0)}let s=i.nodeBefore;if(Bg(e,i,t,-1))return!0;if(r.parent.content.size==0&&(ts(s,"end")||he.isSelectable(s)))for(let a=r.depth;;a--){let o=Du(e.doc,r.before(a),r.after(a),ie.empty);if(o&&o.slice.size<o.to-o.from){if(t){let u=e.tr.step(o);u.setSelection(ts(s,"end")?be.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):he.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},h6=(e,t,n)=>{let r=Ng(e,n);if(!r)return!1;let i=Qd(r);return i?Og(e,i,t):!1},p6=(e,t,n)=>{let r=_g(e,n);if(!r)return!1;let i=Xd(r);return i?Og(e,i,t):!1};function Og(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let a=t.nodeAfter,o=a,u=t.pos+1;for(;!o.isTextblock;u++){if(o.type.spec.isolating)return!1;let c=o.firstChild;if(!c)return!1;o=c}let l=Du(e.doc,s,u,ie.empty);if(!l||l.from!=s||l instanceof Ct&&l.slice.size>=u-s)return!1;if(n){let c=e.tr.step(l);c.setSelection(Te.create(c.doc,s)),n(c.scrollIntoView())}return!0}function ts(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const vg=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=Qd(r)}let a=s&&s.nodeBefore;return!a||!he.isSelectable(a)?!1:(t&&t(e.tr.setSelection(he.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Qd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function _g(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Lg=(e,t,n)=>{let r=_g(e,n);if(!r)return!1;let i=Xd(r);if(!i)return!1;let s=i.nodeAfter;if(Bg(e,i,t,1))return!0;if(r.parent.content.size==0&&(ts(s,"start")||he.isSelectable(s))){let a=Du(e.doc,r.before(),r.after(),ie.empty);if(a&&a.slice.size<a.to-a.from){if(t){let o=e.tr.step(a);o.setSelection(ts(s,"start")?be.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):he.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Rg=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=Xd(r)}let a=s&&s.nodeAfter;return!a||!he.isSelectable(a)?!1:(t&&t(e.tr.setSelection(he.create(e.doc,s.pos)).scrollIntoView()),!0)};function Xd(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const m6=(e,t)=>{let n=e.selection,r=n instanceof he,i;if(r){if(n.node.isTextblock||!Qr(e.doc,n.from))return!1;i=n.from}else if(i=Mu(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(he.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},g6=(e,t)=>{let n=e.selection,r;if(n instanceof he){if(n.node.isTextblock||!Qr(e.doc,n.to))return!1;r=n.to}else if(r=Mu(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},b6=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&hs(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},Mg=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Jd(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const x6=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=Jd(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let o=n.after(),u=e.tr.replaceWith(o,o,a.createAndFill());u.setSelection(be.near(u.doc.resolve(o),1)),t(u.scrollIntoView())}return!0},Dg=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof dn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Jd(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(a,s.createAndFill());o.setSelection(Te.create(o.doc,a+1)),t(o.scrollIntoView())}return!0},Pg=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(br(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&hs(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function y6(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof he&&t.selection.node.isBlock)return!r.parentOffset||!br(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,o,u=!1,l=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){u=r.end(f)==r.pos+(r.depth-f),l=r.start(f)==r.pos-(r.depth-f),o=Jd(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(u&&o?{type:o}:null),a=f;break}else{if(f==1)return!1;s.unshift(null)}let c=t.tr;(t.selection instanceof Te||t.selection instanceof dn)&&c.deleteSelection();let d=c.mapping.map(r.pos),h=br(c.doc,d,s.length,s);if(h||(s[0]=o?{type:o}:null,h=br(c.doc,d,s.length,s)),!h)return!1;if(c.split(d,s.length,s),!u&&l&&r.node(a).type!=o){let f=c.mapping.map(r.before(a)),m=c.doc.resolve(f);o&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,o)&&c.setNodeMarkup(c.mapping.map(r.before(a)),o)}return n&&n(c.scrollIntoView()),!0}}const E6=y6(),T6=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(he.create(e.doc,i))),!0)};function k6(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Qr(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function Bg(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,a,o,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&k6(e,t,n))return!0;let l=!u&&t.parent.canReplace(t.index(),t.index()+1);if(l&&(a=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(a[0]||s.type).validEnd){if(n){let f=t.pos+s.nodeSize,m=q.empty;for(let x=a.length-1;x>=0;x--)m=q.from(a[x].create(null,m));m=q.from(i.copy(m));let b=e.tr.step(new It(t.pos-1,f,t.pos,f,new ie(m,1,0),a.length,!0)),y=b.doc.resolve(f+2*a.length);y.nodeAfter&&y.nodeAfter.type==i.type&&Qr(b.doc,y.pos)&&b.join(y.pos),n(b.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&u?null:be.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),h=d&&hs(d);if(h!=null&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(l&&ts(s,"start",!0)&&ts(i,"end")){let f=i,m=[];for(;m.push(f),!f.isTextblock;)f=f.lastChild;let b=s,y=1;for(;!b.isTextblock;b=b.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,b.content)){if(n){let x=q.empty;for(let T=m.length-1;T>=0;T--)x=q.from(m[T].copy(x));let E=e.tr.step(new It(t.pos-m.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new ie(x,m.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function Fg(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Te.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const S6=Fg(-1),w6=Fg(1);function C6(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s),o=a&&Bd(a,e,t);return o?(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0):!1}}function O0(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[s];n.doc.nodesBetween(a,o,(u,l)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let c=n.doc.resolve(l),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:u}}=n.selection.ranges[a];s.setBlockType(o,u,e,t)}r(s.scrollIntoView())}return!0}}function Zd(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}Zd(Gd,Ig,vg);Zd(Gd,Lg,Rg);Zd(Mg,Dg,Pg,E6);typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform&&os.platform()=="darwin";function A6(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let o=r?n.tr:null;return N6(o,a,e,t)?(r&&r(o.scrollIntoView()),!0):!1}}function N6(e,t,n,r=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=a.resolve(t.start-2);s=new Ro(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Ro(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=Bd(s,n,r,t);return o?(e&&I6(e,t,o,i,n),!0):!1}function I6(e,t,n,r,i){let s=q.empty;for(let c=n.length-1;c>=0;c--)s=q.from(n[c].type.create(n[c].attrs,s));e.step(new It(t.start-(r?2:0),t.end,t.start,t.end,new ie(s,0,0),n.length,!0));let a=0;for(let c=0;c<n.length;c++)n[c].type==i&&(a=c+1);let o=n.length-a,u=t.start+n.length-(r?2:0),l=t.parent;for(let c=t.startIndex,d=t.endIndex,h=!0;c<d;c++,h=!1)!h&&br(e.doc,u,o)&&(e.split(u,o),u+=2*o),u+=l.child(c).nodeSize;return e}function O6(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?v6(t,n,e,s):_6(t,n,s):!0:!1}}function v6(e,t,n,r){let i=e.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new It(s-1,a,s,a,new ie(q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ro(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const o=hs(r);if(o==null)return!1;i.lift(r,o);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return Qr(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function _6(e,t,n){let r=e.tr,i=n.parent;for(let f=n.end,m=n.endIndex-1,b=n.startIndex;m>b;m--)f-=i.child(m).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,u=n.endIndex==i.childCount,l=s.node(-1),c=s.index(-1);if(!l.canReplace(c+(o?0:1),c+1,a.content.append(u?q.empty:q.from(i))))return!1;let d=s.pos,h=d+a.nodeSize;return r.step(new It(d-(o?1:0),h+(u?1:0),d+1,h-1,new ie((o?q.empty:q.from(i.copy(q.empty))).append(u?q.empty:q.from(i.copy(q.empty))),o?0:1,u?0:1),o?0:1)),t(r.scrollIntoView()),!0}function L6(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let o=s.parent,u=o.child(a-1);if(u.type!=e)return!1;if(n){let l=u.lastChild&&u.lastChild.type==o.type,c=q.from(l?e.create():null),d=new ie(q.from(e.create(null,q.from(o.type.create(null,c)))),l?3:1,0),h=s.start,f=s.end;n(t.tr.step(new It(h-(l?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}var R6=Object.defineProperty,Hg=(e,t)=>{for(var n in t)R6(e,n,{get:t[n],enumerable:!0})};function Uu(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return ne(I({},t),{apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}})}var ju=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,o])=>[a,(...l)=>{const c=o(...l)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a=[],o=!!e,u=e||i.tr,l=()=>(!o&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),c=ne(I({},Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...m)=>{const b=this.buildProps(u,t),y=h(...m)(b);return a.push(y),c}]))),{run:l});return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r),a=Object.fromEntries(Object.entries(t).map(([o,u])=>[o,(...l)=>u(...l)(ne(I({},s),{dispatch:void 0}))]));return ne(I({},a),{chain:()=>this.createChain(i,r)})}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a={tr:e,editor:r,view:s,state:Uu({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([o,u])=>[o,(...l)=>u(...l)(a)]))}};return a}},M6=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function Ug(e,t){const n=new $1(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var jg=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&jg(r)}return e};function Wa(e){if(typeof window=="undefined")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return jg(n)}function ca(e,t,n){if(e instanceof $r||e instanceof q)return e;n=I({slice:!0,parseOptions:{}},n);const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return q.fromArray(e.map(o=>t.nodeFromJSON(o)));const a=t.nodeFromJSON(e);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),ca("",t,n)}if(i){if(n.errorOnInvalidContent){let a=!1,o="";const u=new N1({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(a=!0,o=typeof l=="string"?l:l.outerHTML,null)}]}})});if(n.slice?Hs.fromSchema(u).parseSlice(Wa(e),n.parseOptions):Hs.fromSchema(u).parse(Wa(e),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const s=Hs.fromSchema(t);return n.slice?s.parseSlice(Wa(e),n.parseOptions).content:s.parse(Wa(e),n.parseOptions)}return ca("",t,n)}function $c(e,t,n={},r={}){return ca(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function D6(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function P6(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function B6(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function zu(e){return t=>B6(t.$from,e)}function fe(e,t,n){return e.config[t]===void 0&&e.parent?fe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind(ne(I({},n),{parent:e.parent?fe(e.parent,t,n):null})):e.config[t]}function ef(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=fe(t,"addExtensions",n);return r?[t,...ef(r())]:t}).flat(10)}function tf(e,t){const n=Ai.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function zg(e){return typeof e=="function"}function Fe(e,t=void 0,...n){return zg(e)?t?e.bind(t)(...n):e(...n):e}function F6(e={}){return Object.keys(e).length===0&&e.constructor===Object}function da(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function $g(e){const t=[],{nodeExtensions:n,markExtensions:r}=da(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:i},u=fe(a,"addGlobalAttributes",o);if(!u)return;u().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([h,f])=>{t.push({type:d,name:h,attribute:I(I({},s),f)})})})})}),i.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},u=fe(a,"addAttributes",o);if(!u)return;const l=u();Object.entries(l).forEach(([c,d])=>{const h=I(I({},s),d);typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,t.push({type:a.name,name:c,attribute:h})})}),t}function ht(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r=I({},t);return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const o=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],l=o.filter(c=>!u.includes(c));r[i]=[...u,...l].join(" ")}else if(i==="style"){const o=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],l=new Map;u.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());l.set(d,h)}),o.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());l.set(d,h)}),r[i]=Array.from(l.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function jo(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>ht(n,r),{})}function H6(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function v0(e,t){return"style"in e?e:ne(I({},e),{getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(n):H6(n.getAttribute(a.name));return o==null?s:ne(I({},s),{[a.name]:o})},{});return I(I({},r),i)}})}function _0(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&F6(n)?!1:n!=null))}function U6(e,t){var n;const r=$g(e),{nodeExtensions:i,markExtensions:s}=da(e),a=(n=i.find(l=>fe(l,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(l=>{const c=r.filter(x=>x.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:t},h=e.reduce((x,E)=>{const T=fe(E,"extendNodeSchema",d);return I(I({},x),T?T(l):{})},{}),f=_0(ne(I({},h),{content:Fe(fe(l,"content",d)),marks:Fe(fe(l,"marks",d)),group:Fe(fe(l,"group",d)),inline:Fe(fe(l,"inline",d)),atom:Fe(fe(l,"atom",d)),selectable:Fe(fe(l,"selectable",d)),draggable:Fe(fe(l,"draggable",d)),code:Fe(fe(l,"code",d)),whitespace:Fe(fe(l,"whitespace",d)),linebreakReplacement:Fe(fe(l,"linebreakReplacement",d)),defining:Fe(fe(l,"defining",d)),isolating:Fe(fe(l,"isolating",d)),attrs:Object.fromEntries(c.map(x=>{var E,T;return[x.name,{default:(E=x==null?void 0:x.attribute)==null?void 0:E.default,validate:(T=x==null?void 0:x.attribute)==null?void 0:T.validate}]}))})),m=Fe(fe(l,"parseHTML",d));m&&(f.parseDOM=m.map(x=>v0(x,c)));const b=fe(l,"renderHTML",d);b&&(f.toDOM=x=>b({node:x,HTMLAttributes:jo(x,c)}));const y=fe(l,"renderText",d);return y&&(f.toText=y),[l.name,f]})),u=Object.fromEntries(s.map(l=>{const c=r.filter(y=>y.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:t},h=e.reduce((y,x)=>{const E=fe(x,"extendMarkSchema",d);return I(I({},y),E?E(l):{})},{}),f=_0(ne(I({},h),{inclusive:Fe(fe(l,"inclusive",d)),excludes:Fe(fe(l,"excludes",d)),group:Fe(fe(l,"group",d)),spanning:Fe(fe(l,"spanning",d)),code:Fe(fe(l,"code",d)),attrs:Object.fromEntries(c.map(y=>{var x,E;return[y.name,{default:(x=y==null?void 0:y.attribute)==null?void 0:x.default,validate:(E=y==null?void 0:y.attribute)==null?void 0:E.validate}]}))})),m=Fe(fe(l,"parseHTML",d));m&&(f.parseDOM=m.map(y=>v0(y,c)));const b=fe(l,"renderHTML",d);return b&&(f.toDOM=y=>b({mark:y,HTMLAttributes:jo(y,c)})),[l.name,f]}));return new N1({topNode:a,nodes:o,marks:u})}function j6(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function nf(e){return e.sort((n,r)=>{const i=fe(n,"priority")||100,s=fe(r,"priority")||100;return i>s?-1:i<s?1:0})}function Vg(e){const t=nf(ef(e)),n=j6(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function qg(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let o="";return e.nodesBetween(r,i,(u,l,c,d)=>{var h;u.isBlock&&l>r&&(o+=s);const f=a==null?void 0:a[u.type.name];if(f)return c&&(o+=f({node:u,pos:l,parent:c,index:d,range:t})),!1;u.isText&&(o+=(h=u==null?void 0:u.text)==null?void 0:h.slice(Math.max(r,l)-l,i-l))}),o}function Wg(e,t){const n={from:0,to:e.content.size};return qg(e,n,t)}function rf(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function yr(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Yg(e,t){const n=yr(t,e.schema),{from:r,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{a.push(...u.marks)});const o=a.find(u=>u.type.name===n.name);return o?I({},o.attrs):{}}function yt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function z6(e,t){const n=yt(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,o=>{s.push(o)});const a=s.reverse().find(o=>o.type.name===n.name);return a?I({},a.attrs):{}}function $u(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Kg(e,t){const n=$u(typeof t=="string"?t:t.name,e.schema);return n==="node"?z6(e,t):n==="mark"?Yg(e,t):{}}function $6(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function V6(e){const t=$6(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Gg(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((o,u)=>{a.push({from:o,to:u})});else{const{from:o,to:u}=n[s];if(o===void 0||u===void 0)return;a.push({from:o,to:u})}a.forEach(({from:o,to:u})=>{const l=t.slice(s).map(o,-1),c=t.slice(s).map(u),d=t.invert().map(l,-1),h=t.invert().map(c);r.push({oldRange:{from:d,to:h},newRange:{from:l,to:c}})})}),V6(r)}function sf(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function zo(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:sf(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function Qg(e,t,n={}){return e.find(r=>r.type===t&&zo(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function L0(e,t,n={}){return!!Qg(e,t,n)}function af(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!Qg([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,u=a+1,l=o+i.node.nodeSize;for(;a>0&&L0([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;u<e.parent.childCount&&L0([...e.parent.child(u).marks],t,n);)l+=e.parent.child(u).nodeSize,u+=1;return{from:o,to:l}}function of(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),a=af(s,i.type);a&&r.push(I({mark:i},a))}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var q6=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,a=null;for(;s>0&&a===null;){const o=i.node(s);(o==null?void 0:o.type.name)===t?a=o:s-=1}return[a,s]};function Pl(e,t){return t.nodes[e]||t.marks[e]||null}function mo(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var W6=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,a,o)=>{var u,l;const c=((l=(u=i.type.spec).toText)==null?void 0:l.call(u,{node:i,pos:s,parent:a,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function Vc(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?yr(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>zo(d.attrs,n,{strict:!1}));let a=0;const o=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,m=h.pos;e.doc.nodesBetween(f,m,(b,y)=>{if(!b.isText&&!b.marks.length)return;const x=Math.max(f,y),E=Math.min(m,y+b.nodeSize),T=E-x;a+=T,o.push(...b.marks.map(v=>({mark:v,from:x,to:E})))})}),a===0)return!1;const u=o.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>zo(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),l=o.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(u>0?u+l:u)>=a}function Kr(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,a=t?yt(t,e.schema):null,o=[];e.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),m=Math.min(i,h+d.nodeSize);o.push({node:d,from:f,to:m})});const u=i-r,l=o.filter(d=>a?a.name===d.node.type.name:!0).filter(d=>zo(d.node.attrs,n,{strict:!1}));return s?!!l.length:l.reduce((d,h)=>d+h.to-h.from,0)>=u}function Y6(e,t,n={}){if(!t)return Kr(e,null,n)||Vc(e,null,n);const r=$u(t,e.schema);return r==="node"?Kr(e,t,n):r==="mark"?Vc(e,t,n):!1}var K6=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=zu(o=>o.type.name===t)(e.selection);if(!s)return!1;const a=e.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},G6=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function R0(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function M0(e,t){const{nodeExtensions:n}=da(t),r=n.find(a=>a.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Fe(fe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Vu(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(Vu(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function Xg(e){return e instanceof he}function uf(e){return e instanceof Te}function gr(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Jg(e,t,n){const i=e.state.doc.content.size,s=gr(t,0,i),a=gr(n,0,i),o=e.coordsAtPos(s),u=e.coordsAtPos(a,-1),l=Math.min(o.top,u.top),c=Math.max(o.bottom,u.bottom),d=Math.min(o.left,u.left),h=Math.max(o.right,u.right),f=h-d,m=c-l,x={top:l,bottom:c,left:d,right:h,width:f,height:m,x:d,y:l};return ne(I({},x),{toJSON:()=>x})}function Zg(e,t=null){if(!t)return null;const n=be.atStart(e),r=be.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Te.create(e,gr(0,i,s),gr(e.content.size,i,s)):Te.create(e,gr(t,i,s),gr(t,i,s))}function Q6(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Ct||i instanceof It))return;const s=e.mapping.maps[r];let a=0;s.forEach((o,u,l,c)=>{a===0&&(a=c)}),e.setSelection(be.near(e.doc.resolve(a),n))}var qu=class{constructor(e){this.find=e.find,this.handler=e.handler}},X6=(e,t)=>{if(sf(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ya(e){var t;const{editor:n,from:r,to:i,text:s,rules:a,plugin:o}=e,{view:u}=n;if(u.composing)return!1;const l=u.state.doc.resolve(r);if(l.parent.type.spec.code||(t=l.nodeBefore||l.nodeAfter)!=null&&t.marks.find(h=>h.type.spec.code))return!1;let c=!1;const d=W6(l)+s;return a.forEach(h=>{if(c)return;const f=X6(d,h.find);if(!f)return;const m=u.state.tr,b=Uu({state:u.state,transaction:m}),y={from:r-(f[0].length-s.length),to:i},{commands:x,chain:E,can:T}=new ju({editor:n,state:b});h.handler({state:b,range:y,match:f,commands:x,chain:E,can:T})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:s}),u.dispatch(m),c=!0)}),c}function J6(e){const{editor:t,rules:n}=e,r=new Qe({state:{init(){return null},apply(i,s,a){const o=i.getMeta(r);if(o)return o;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:c}=u;typeof c=="string"?c=c:c=tf(q.from(c),a.schema);const{from:d}=u,h=d+c.length;Ya({editor:t,from:d,to:h,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,o){return Ya({editor:t,from:s,to:a,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ya({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Ya({editor:t,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Z6(e){return Object.prototype.toString.call(e).slice(8,-1)}function Ka(e){return Z6(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function eb(e,t){const n=I({},e);return Ka(e)&&Ka(t)&&Object.keys(t).forEach(r=>{Ka(t[r])&&Ka(e[r])?n[r]=eb(e[r],t[r]):n[r]=t[r]}),n}var lf=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config=I(I({},this.config),e),this.name=this.config.name}get options(){return I({},Fe(fe(this,"addOptions",{name:this.name}))||{})}get storage(){return I({},Fe(fe(this,"addStorage",{name:this.name,options:this.options}))||{})}configure(e={}){const t=this.extend(ne(I({},this.config),{addOptions:()=>eb(this.options,e)}));return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor(I(I({},this.config),e));return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ni=class tb extends lf{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new tb(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(l=>(l==null?void 0:l.type.name)===n.name))return!1;const u=a.find(l=>(l==null?void 0:l.type.name)===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function eS(e){return typeof e=="number"}var tS=class{constructor(e){this.find=e.find,this.handler=e.handler}},nS=(e,t,n)=>{if(sf(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function rS(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:a,dropEvent:o}=e,{commands:u,chain:l,can:c}=new ju({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,m)=>{if(!f.isTextblock||f.type.spec.code)return;const b=Math.max(r,m),y=Math.min(i,m+f.content.size),x=f.textBetween(b-m,y-m,void 0,"");nS(x,s.find,a).forEach(T=>{if(T.index===void 0)return;const v=b+T.index+1,C=v+T[0].length,w={from:n.tr.mapping.map(v),to:n.tr.mapping.map(C)},D=s.handler({state:n,range:w,match:T,commands:u,chain:l,can:c,pasteEvent:a,dropEvent:o});d.push(D)})}),d.every(f=>f!==null)}var Ga=null,iS=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function sS(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(c){o=null}const u=({state:c,from:d,to:h,rule:f,pasteEvt:m})=>{const b=c.tr,y=Uu({state:c,transaction:b});if(!(!rS({editor:t,state:y,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:m,dropEvent:o})||!b.steps.length)){try{o=typeof DragEvent!="undefined"?new DragEvent("drop"):null}catch(E){o=null}return a=typeof ClipboardEvent!="undefined"?new ClipboardEvent("paste"):null,b}};return n.map(c=>new Qe({view(d){const h=m=>{var b;r=(b=d.dom.parentElement)!=null&&b.contains(m.target)?d.dom.parentElement:null,r&&(Ga=t)},f=()=>{Ga&&(Ga=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,o=h,!s){const f=Ga;f!=null&&f.isEditable&&setTimeout(()=>{const m=f.state.selection;m&&f.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var f;const m=(f=h.clipboardData)==null?void 0:f.getData("text/html");return a=h,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const m=d[0],b=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!s,x=m.getMeta("applyPasteRules"),E=!!x;if(!b&&!y&&!E)return;if(E){let{text:C}=x;typeof C=="string"?C=C:C=tf(q.from(C),f.schema);const{from:w}=x,D=w+C.length,B=iS(C);return u({rule:c,state:f,from:w,to:{b:D},pasteEvt:B})}const T=h.doc.content.findDiffStart(f.doc.content),v=h.doc.content.findDiffEnd(f.doc.content);if(!(!eS(T)||!v||T===v.b))return u({rule:c,state:f,from:T,to:v,pasteEvt:a})}}))}var Wu=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Vg(e),this.schema=U6(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Pl(t.name,this.schema)},r=fe(t,"addCommands",n);return r?I(I({},e),r()):e},{})}get plugins(){const{editor:e}=this,t=nf([...this.extensions].reverse()),n=[],r=[],i=t.map(s=>{const a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Pl(s.name,this.schema)},o=[],u=fe(s,"addKeyboardShortcuts",a);let l={};if(s.type==="mark"&&fe(s,"exitable",a)&&(l.ArrowRight=()=>Ni.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([b,y])=>[b,()=>y({editor:e})]));l=I(I({},l),m)}const c=f6(l);o.push(c);const d=fe(s,"addInputRules",a);R0(s,e.options.enableInputRules)&&d&&n.push(...d());const h=fe(s,"addPasteRules",a);R0(s,e.options.enablePasteRules)&&h&&r.push(...h());const f=fe(s,"addProseMirrorPlugins",a);if(f){const m=f();o.push(...m)}return o}).flat();return[J6({editor:e,rules:n}),...sS({editor:e,rules:r}),...i]}get attributes(){return $g(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=da(this.extensions);return Object.fromEntries(t.filter(n=>!!fe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:yt(n.name,this.schema)},s=fe(n,"addNodeView",i);if(!s)return[];const a=(o,u,l,c,d)=>{const h=jo(o,r);return s()({node:o,view:u,getPos:l,decorations:c,innerDecorations:d,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=da(this.extensions);return Object.fromEntries(t.filter(n=>!!fe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:yr(n.name,this.schema)},s=fe(n,"addMarkView",i);if(!s)return[];const a=(o,u,l)=>{const c=jo(o,r);return s()({mark:o,view:u,inline:l,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{Ew(o,e,d)}})};return[n.name,a]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Pl(t.name,this.schema)};t.type==="mark"&&((n=Fe(fe(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=fe(t,"onBeforeCreate",r),s=fe(t,"onCreate",r),a=fe(t,"onUpdate",r),o=fe(t,"onSelectionUpdate",r),u=fe(t,"onTransaction",r),l=fe(t,"onFocus",r),c=fe(t,"onBlur",r),d=fe(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),u&&this.editor.on("transaction",u),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};Wu.resolve=Vg;Wu.sort=nf;Wu.flatten=ef;var aS={};Hg(aS,{ClipboardTextSerializer:()=>rb,Commands:()=>ab,Delete:()=>ob,Drop:()=>ub,Editable:()=>lb,FocusEvents:()=>db,Keymap:()=>fb,Paste:()=>hb,Tabindex:()=>pb,focusEventsPluginKey:()=>cb});var nt=class nb extends lf{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new nb(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},rb=nt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Qe({key:new tt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,a=Math.min(...s.map(c=>c.$from.pos)),o=Math.max(...s.map(c=>c.$to.pos)),u=rf(n);return qg(r,{from:a,to:o},ne(I({},this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{}),{textSerializers:u}))}}})]}}),ib={};Hg(ib,{blur:()=>oS,clearContent:()=>uS,clearNodes:()=>lS,command:()=>cS,createParagraphNear:()=>dS,cut:()=>fS,deleteCurrentNode:()=>hS,deleteNode:()=>pS,deleteRange:()=>mS,deleteSelection:()=>gS,enter:()=>bS,exitCode:()=>xS,extendMarkRange:()=>yS,first:()=>ES,focus:()=>kS,forEach:()=>SS,insertContent:()=>wS,insertContentAt:()=>AS,joinBackward:()=>OS,joinDown:()=>IS,joinForward:()=>vS,joinItemBackward:()=>_S,joinItemForward:()=>LS,joinTextblockBackward:()=>RS,joinTextblockForward:()=>MS,joinUp:()=>NS,keyboardShortcut:()=>PS,lift:()=>BS,liftEmptyBlock:()=>FS,liftListItem:()=>HS,newlineInCode:()=>US,resetAttributes:()=>jS,scrollIntoView:()=>zS,selectAll:()=>$S,selectNodeBackward:()=>VS,selectNodeForward:()=>qS,selectParentNode:()=>WS,selectTextblockEnd:()=>YS,selectTextblockStart:()=>KS,setContent:()=>GS,setMark:()=>XS,setMeta:()=>JS,setNode:()=>ZS,setNodeSelection:()=>ew,setTextSelection:()=>tw,sinkListItem:()=>nw,splitBlock:()=>rw,splitListItem:()=>iw,toggleList:()=>sw,toggleMark:()=>aw,toggleNode:()=>ow,toggleWrap:()=>uw,undoInputRule:()=>lw,unsetAllMarks:()=>cw,unsetMark:()=>dw,updateAttributes:()=>fw,wrapIn:()=>hw,wrapInList:()=>pw});var oS=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),uS=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),lS=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:a})=>{e.doc.nodesBetween(s.pos,a.pos,(o,u)=>{if(o.type.isText)return;const{doc:l,mapping:c}=t,d=l.resolve(c.map(u)),h=l.resolve(c.map(u+o.nodeSize)),f=d.blockRange(h);if(!f)return;const m=hs(f);if(o.type.isTextblock){const{defaultType:b}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(f.start,b)}(m||m===0)&&t.lift(f,m)})}),!0},cS=e=>t=>e(t),dS=()=>({state:e,dispatch:t})=>Dg(e,t),fS=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const a=r.mapping.map(t);return r.insert(a,s.content),r.setSelection(new Te(r.doc.resolve(Math.max(a-1,0)))),!0},hS=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const o=i.before(s),u=i.after(s);e.delete(o,u).scrollIntoView()}return!0}return!1},pS=e=>({tr:t,state:n,dispatch:r})=>{const i=yt(e,n.schema),s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const u=s.before(a),l=s.after(a);t.delete(u,l).scrollIntoView()}return!0}return!1},mS=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},gS=()=>({state:e,dispatch:t})=>Gd(e,t),bS=()=>({commands:e})=>e.keyboardShortcut("Enter"),xS=()=>({state:e,dispatch:t})=>x6(e,t),yS=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=yr(e,r.schema),{doc:a,selection:o}=n,{$from:u,from:l,to:c}=o;if(i){const d=af(u,s,t);if(d&&d.from<=l&&d.to>=c){const h=Te.create(a,d.from,d.to);n.setSelection(h)}}return!0},ES=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function TS(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function cf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var kS=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t=I({scrollIntoView:!0},t);const a=()=>{(cf()||TS())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!uf(n.state.selection))return a(),!0;const o=Zg(i.doc,e)||n.state.selection,u=n.state.selection.eq(o);return s&&(u||i.setSelection(o),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},SS=(e,t)=>n=>e.every((r,i)=>t(r,ne(I({},n),{index:i}))),wS=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),CS=e=>!("type"in e),AS=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){n=I({parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1},n);let o;const{selection:u}=s.state,l=x=>{s.emit("contentError",{editor:s,error:x,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c=I({preserveWhitespace:"full"},n.parseOptions);if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{ca(t,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{o=ca(t,s.schema,{parseOptions:c,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},f=!0,m=!0;if((CS(o)?o:[o]).forEach(x=>{x.check(),f=f?x.isText&&x.marks.length===0:!1,m=m?x.isBlock:!1}),d===h&&m){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,h+=1)}let y;if(f){if(Array.isArray(t))y=t.map(x=>x.text||"").join("");else if(t instanceof q){let x="";t.forEach(E=>{E.text&&(x+=E.text)}),y=x}else typeof t=="object"&&t&&t.text?y=t.text:y=t;r.insertText(y,d,h)}else{y=o;const x=u.$from.parentOffset===0,E=u.$from.node().isText||u.$from.node().isTextblock,T=u.$from.node().content.size>0;x&&E&&T&&(d=Math.max(0,d-1)),r.replaceWith(d,h,y)}n.updateSelection&&Q6(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:y})}return!0},NS=()=>({state:e,dispatch:t})=>m6(e,t),IS=()=>({state:e,dispatch:t})=>g6(e,t),OS=()=>({state:e,dispatch:t})=>Ig(e,t),vS=()=>({state:e,dispatch:t})=>Lg(e,t),_S=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Mu(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch(r){return!1}},LS=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Mu(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch(r){return!1}},RS=()=>({state:e,dispatch:t})=>h6(e,t),MS=()=>({state:e,dispatch:t})=>p6(e,t);function sb(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function DS(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o+=1){const u=t[o];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))cf()||sb()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var PS=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=DS(e).split(/-(?!$)/),a=s.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,o))});return u==null||u.steps.forEach(l=>{const c=l.map(r.mapping);c&&i&&r.maybeStep(c)}),!0},BS=(e,t={})=>({state:n,dispatch:r})=>{const i=yt(e,n.schema);return Kr(n,i,t)?b6(n,r):!1},FS=()=>({state:e,dispatch:t})=>Pg(e,t),HS=e=>({state:t,dispatch:n})=>{const r=yt(e,t.schema);return O6(r)(t,n)},US=()=>({state:e,dispatch:t})=>Mg(e,t);function D0(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var jS=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=$u(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=yt(e,r.schema)),o==="mark"&&(a=yr(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(l,c)=>{s&&s===l.type&&n.setNodeMarkup(c,void 0,D0(l.attrs,t)),a&&l.marks.length&&l.marks.forEach(d=>{a===d.type&&n.addMark(c,c+l.nodeSize,a.create(D0(d.attrs,t)))})})}),!0):!1},zS=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),$S=()=>({tr:e,dispatch:t})=>{if(t){const n=new dn(e.doc);e.setSelection(n)}return!0},VS=()=>({state:e,dispatch:t})=>vg(e,t),qS=()=>({state:e,dispatch:t})=>Rg(e,t),WS=()=>({state:e,dispatch:t})=>T6(e,t),YS=()=>({state:e,dispatch:t})=>w6(e,t),KS=()=>({state:e,dispatch:t})=>S6(e,t),GS=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:o})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const l=$c(e,i.schema,r,{errorOnInvalidContent:t!=null?t:i.options.enableContentCheck});return a&&s.replaceWith(0,u.content.size,l).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t!=null?t:i.options.enableContentCheck})};function QS(e,t,n){var r;const{selection:i}=t;let s=null;if(uf(i)&&(s=i.$cursor),s){const o=(r=e.storedMarks)!=null?r:s.marks();return!!n.isInSet(o)||!o.some(u=>u.type.excludes(n))}const{ranges:a}=i;return a.some(({$from:o,$to:u})=>{let l=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(o.pos,u.pos,(c,d,h)=>{if(l)return!1;if(c.isInline){const f=!h||h.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(b=>b.type.excludes(n));l=f&&m}return!l}),l})}var XS=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:a,ranges:o}=s,u=yr(e,r.schema);if(i)if(a){const l=Yg(r,u);n.addStoredMark(u.create(I(I({},l),t)))}else o.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(c,d,(h,f)=>{const m=Math.max(f,c),b=Math.min(f+h.nodeSize,d);h.marks.find(x=>x.type===u)?h.marks.forEach(x=>{u===x.type&&n.addMark(m,b,u.create(I(I({},x.attrs),t)))}):n.addMark(m,b,u.create(t))})});return QS(r,n,u)},JS=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),ZS=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=yt(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:o})=>O0(s,I(I({},a),t))(n)?!0:o.clearNodes()).command(({state:o})=>O0(s,I(I({},a),t))(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ew=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=gr(e,0,r.content.size),s=he.create(r,i);t.setSelection(s)}return!0},tw=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,a=Te.atStart(r).from,o=Te.atEnd(r).to,u=gr(i,a,o),l=gr(s,a,o),c=Te.create(r,u,l);t.setSelection(c)}return!0},nw=e=>({state:t,dispatch:n})=>{const r=yt(e,t.schema);return L6(r)(t,n)};function P0(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var rw=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:a}=t,{$from:o,$to:u}=s,l=i.extensionManager.attributes,c=mo(l,o.node().type.name,o.node().attrs);if(s instanceof he&&s.node.isBlock)return!o.parentOffset||!br(a,o.pos)?!1:(r&&(e&&P0(n,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const d=u.parentOffset===u.parent.content.size,h=o.depth===0?void 0:D6(o.node(-1).contentMatchAt(o.indexAfter(-1)));let f=d&&h?[{type:h,attrs:c}]:void 0,m=br(t.doc,t.mapping.map(o.pos),1,f);if(!f&&!m&&br(t.doc,t.mapping.map(o.pos),1,h?[{type:h}]:void 0)&&(m=!0,f=h?[{type:h,attrs:c}]:void 0),r){if(m&&(s instanceof Te&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,f),h&&!d&&!o.parentOffset&&o.parent.type!==h)){const b=t.mapping.map(o.before()),y=t.doc.resolve(b);o.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&t.setNodeMarkup(t.mapping.map(o.before()),h)}e&&P0(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return m},iw=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var a;const o=yt(e,r.schema),{$from:u,$to:l}=r.selection,c=r.selection.node;if(c&&c.isBlock||u.depth<2||!u.sameParent(l))return!1;const d=u.node(-1);if(d.type!==o)return!1;const h=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==o||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let x=q.empty;const E=u.index(-1)?1:u.index(-2)?2:3;for(let B=u.depth-E;B>=u.depth-3;B-=1)x=q.from(u.node(B).copy(x));const T=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,v=I(I({},mo(h,u.node().type.name,u.node().attrs)),t),C=((a=o.contentMatch.defaultType)==null?void 0:a.createAndFill(v))||void 0;x=x.append(q.from(o.createAndFill(null,C)||void 0));const w=u.before(u.depth-(E-1));n.replace(w,u.after(-T),new ie(x,4-E,0));let D=-1;n.doc.nodesBetween(w,n.doc.content.size,(B,j)=>{if(D>-1)return!1;B.isTextblock&&B.content.size===0&&(D=j+1)}),D>-1&&n.setSelection(Te.near(n.doc.resolve(D))),n.scrollIntoView()}return!0}const f=l.pos===u.end()?d.contentMatchAt(0).defaultType:null,m=I(I({},mo(h,d.type.name,d.attrs)),t),b=I(I({},mo(h,u.node().type.name,u.node().attrs)),t);n.delete(u.pos,l.pos);const y=f?[{type:o,attrs:m},{type:f,attrs:b}]:[{type:o,attrs:m}];if(!br(n.doc,u.pos,2))return!1;if(i){const{selection:x,storedMarks:E}=r,{splittableMarks:T}=s.extensionManager,v=E||x.$to.parentOffset&&x.$from.marks();if(n.split(u.pos,2,y).scrollIntoView(),!v||!i)return!0;const C=v.filter(w=>T.includes(w.type.name));n.ensureMarks(C)}return!0},Bl=(e,t)=>{const n=zu(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qr(e.doc,n.pos)&&e.join(n.pos),!0},Fl=(e,t)=>{const n=zu(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qr(e.doc,r)&&e.join(r),!0},sw=(e,t,n,r={})=>({editor:i,tr:s,state:a,dispatch:o,chain:u,commands:l,can:c})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=yt(e,a.schema),m=yt(t,a.schema),{selection:b,storedMarks:y}=a,{$from:x,$to:E}=b,T=x.blockRange(E),v=y||b.$to.parentOffset&&b.$from.marks();if(!T)return!1;const C=zu(w=>M0(w.type.name,d))(b);if(T.depth>=1&&C&&T.depth-C.depth<=1){if(C.node.type===f)return l.liftListItem(m);if(M0(C.node.type.name,d)&&f.validContent(C.node.content)&&o)return u().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>Bl(s,f)).command(()=>Fl(s,f)).run()}return!n||!v||!o?u().command(()=>c().wrapInList(f,r)?!0:l.clearNodes()).wrapInList(f,r).command(()=>Bl(s,f)).command(()=>Fl(s,f)).run():u().command(()=>{const w=c().wrapInList(f,r),D=v.filter(B=>h.includes(B.type.name));return s.ensureMarks(D),w?!0:l.clearNodes()}).wrapInList(f,r).command(()=>Bl(s,f)).command(()=>Fl(s,f)).run()},aw=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,a=yr(e,r.schema);return Vc(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)},ow=(e,t,n={})=>({state:r,commands:i})=>{const s=yt(e,r.schema),a=yt(t,r.schema),o=Kr(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),o?i.setNode(a,u):i.setNode(s,I(I({},u),n))},uw=(e,t={})=>({state:n,commands:r})=>{const i=yt(e,n.schema);return Kr(n,i,t)?r.lift(i):r.wrapIn(i,t)},lw=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const a=e.tr,o=s.transform;for(let u=o.steps.length-1;u>=0;u-=1)a.step(o.steps[u].invert(o.docs[u]));if(s.text){const u=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else a.delete(s.from,s.to)}return!0}}return!1},cw=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},dw=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=t,{selection:o}=n,u=yr(e,r.schema),{$from:l,empty:c,ranges:d}=o;if(!i)return!0;if(c&&a){let{from:h,to:f}=o;const m=(s=l.marks().find(y=>y.type===u))==null?void 0:s.attrs,b=af(l,u,m);b&&(h=b.from,f=b.to),n.removeMark(h,f,u)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,u)});return n.removeStoredMark(u),!0},fw=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=$u(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=yt(e,r.schema)),o==="mark"&&(a=yr(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const l=u.$from.pos,c=u.$to.pos;let d,h,f,m;n.selection.empty?r.doc.nodesBetween(l,c,(b,y)=>{s&&s===b.type&&(f=Math.max(y,l),m=Math.min(y+b.nodeSize,c),d=y,h=b)}):r.doc.nodesBetween(l,c,(b,y)=>{y<l&&s&&s===b.type&&(f=Math.max(y,l),m=Math.min(y+b.nodeSize,c),d=y,h=b),y>=l&&y<=c&&(s&&s===b.type&&n.setNodeMarkup(y,void 0,I(I({},b.attrs),t)),a&&b.marks.length&&b.marks.forEach(x=>{if(a===x.type){const E=Math.max(y,l),T=Math.min(y+b.nodeSize,c);n.addMark(E,T,a.create(I(I({},x.attrs),t)))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,I(I({},h.attrs),t)),a&&h.marks.length&&h.marks.forEach(b=>{a===b.type&&n.addMark(f,m,a.create(I(I({},b.attrs),t)))}))}),!0):!1},hw=(e,t={})=>({state:n,dispatch:r})=>{const i=yt(e,n.schema);return C6(i,t)(n,r)},pw=(e,t={})=>({state:n,dispatch:r})=>{const i=yt(e,n.schema);return A6(i,t)(n,r)},ab=nt.create({name:"commands",addCommands(){return I({},ib)}}),ob=nt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var a,o,u,l;if((l=(u=(o=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:o.filterTransaction)==null?void 0:u.call(o,e))!=null?l:e.getMeta("y-sync$"))return;const c=Ug(e.before,[e,...t]);Gg(c).forEach(f=>{c.mapping.mapResult(f.oldRange.from).deletedAfter&&c.mapping.mapResult(f.oldRange.to).deletedBefore&&c.before.nodesBetween(f.oldRange.from,f.oldRange.to,(m,b)=>{const y=b+m.nodeSize-2,x=f.oldRange.from<=b&&y<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:b,to:y,newFrom:c.mapping.map(b),newTo:c.mapping.map(y),deletedRange:f.oldRange,newRange:f.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const h=c.mapping;c.steps.forEach((f,m)=>{var b,y;if(f instanceof In){const x=h.slice(m).map(f.from,-1),E=h.slice(m).map(f.to),T=h.invert().map(x,-1),v=h.invert().map(E),C=(b=c.doc.nodeAt(x-1))==null?void 0:b.marks.some(D=>D.eq(f.mark)),w=(y=c.doc.nodeAt(E))==null?void 0:y.marks.some(D=>D.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:T,to:v},newRange:{from:x,to:E},partial:!!(w||C),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),ub=nt.create({name:"drop",addProseMirrorPlugins(){return[new Qe({key:new tt("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),lb=nt.create({name:"editable",addProseMirrorPlugins(){return[new Qe({key:new tt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cb=new tt("focusEvents"),db=nt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Qe({key:cb,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),fb=nt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:u,doc:l}=o,{empty:c,$anchor:d}=u,{pos:h,parent:f}=d,m=d.parent.isTextblock&&h>0?o.doc.resolve(h-1):d,b=m.parent.type.spec.isolating,y=d.pos-d.parentOffset,x=b&&m.parent.childCount===1?y===d.pos:be.atStart(l).from===h;return!c||!f.type.isTextblock||f.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i=I({},r),s=ne(I({},r),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return cf()||sb()?s:i},addProseMirrorPlugins(){return[new Qe({key:new tt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(b=>b.getMeta("composition")))return;const r=e.some(b=>b.docChanged)&&!t.doc.eq(n.doc),i=e.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:o}=t.selection,u=be.atStart(t.doc).from,l=be.atEnd(t.doc).to;if(s||!(a===u&&o===l)||!Vu(n.doc))return;const h=n.tr,f=Uu({state:n,transaction:h}),{commands:m}=new ju({editor:this.editor,state:f});if(m.clearNodes(),!!h.steps.length)return h}})]}}),hb=nt.create({name:"paste",addProseMirrorPlugins(){return[new Qe({key:new tt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),pb=nt.create({name:"tabindex",addProseMirrorPlugins(){return[new Qe({key:new tt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),mw=class Ui{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Ui(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Ui(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Ui(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!i&&o.depth<=this.depth)return;const u=new Ui(o,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new Ui(o,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,a=Object.keys(n);for(let o=0;o<a.length;o+=1){const u=a[o];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===t&&s.every(u=>n[u]===a.node.attrs[u])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,I(I({},this.node.attrs),t)),this.editor.view.dispatch(n)}},gw=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bw(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var xw=class extends M6{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document!="undefined"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=Zg(t,this.options.autofocus);this.editorState=Vi.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document=="undefined")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document!="undefined"&&(this.css=bw(gw,this.options.injectNonce))}setOptions(e={}){this.options=I(I({},this.options),e),!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=zg(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[lb,rb.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),ab,db,fb,pb,ub,hb,ob].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Wu(r,this)}createCommandManager(){this.commandManager=new ju({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=$c(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=$c(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new Ag(e,ne(I({},this.options.editorProps),{attributes:I({role:"textbox"},(t=this.options.editorProps)==null?void 0:t.attributes),dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState}));const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(l)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=n.findLast(l=>l.getMeta("focus")||l.getMeta("blur")),o=a==null?void 0:a.getMeta("focus"),u=a==null?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),u&&this.emit("blur",{editor:this,event:u.event,transaction:a}),!(e.getMeta("preventUpdate")||!n.some(l=>l.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return Kg(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return Y6(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Wg(this.state.doc,{blockSeparator:t,textSerializers:I(I({},rf(this.schema)),n)})}get isEmpty(){return Vu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new mw(t,this)}get $doc(){return this.$pos(0)}};function ns(e){return new qu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Fe(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],o=r[0];if(a){const u=o.search(/\S/),l=n.from+o.indexOf(a),c=l+a.length;if(of(n.from,n.to,t.doc).filter(f=>f.mark.type.excluded.find(b=>b===e.type&&b!==f.mark.type)).filter(f=>f.to>l).length)return null;c<n.to&&s.delete(c,n.to),l>n.from&&s.delete(n.from+u,l);const h=n.from+u+a.length;s.addMark(n.from+u,h,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function mb(e){return new qu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Fe(e.getAttributes,void 0,r)||{},{tr:s}=t,a=n.from;let o=n.to;const u=e.type.create(i);if(r[1]){const l=r[0].lastIndexOf(r[1]);let c=a+l;c>o?c=o:o=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,a+r[0].length-1),s.replaceWith(c,o,u)}else if(r[0]){const l=e.type.isInline?a:a-1;s.insert(l,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(o))}s.scrollIntoView()}})}function qc(e){return new qu({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=Fe(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function rs(e){return new qu({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=Fe(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),u=a.doc.resolve(n.from).blockRange(),l=u&&Bd(u,e.type,s);if(!l)return null;if(a.wrap(u,l),e.keepMarks&&e.editor){const{selection:d,storedMarks:h}=t,{splittableMarks:f}=e.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const b=m.filter(y=>f.includes(y.type.name));a.ensureMarks(b)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=a.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Qr(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&a.join(n.from-1)}})}function yw(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof he){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function Ew(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,a=e;i.descendants((o,u)=>{const l=s.mapping.map(u),c=s.mapping.map(u)+o.nodeSize;let d=null;if(o.marks.forEach(f=>{if(f!==a)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=e.type.create(I(I({},e.attrs),n));s.removeMark(l,c,e.type),s.addMark(l,c,f)}}),s.docChanged&&t.view.dispatch(s)}var rn=class gb extends lf{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new gb(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function wi(e){return new tS({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=Fe(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=t,o=r[r.length-1],u=r[0];let l=n.to;if(o){const c=u.search(/\S/),d=n.from+u.indexOf(o),h=d+o.length;if(of(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(y=>y===e.type&&y!==m.mark.type)).filter(m=>m.to>d).length)return null;h<n.to&&a.delete(h,n.to),d>n.from&&a.delete(n.from+c,d),l=n.from+c+o.length,a.addMark(n.from+c,l,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}var Hl,B0;function Tw(){return B0||(B0=1,Hl=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),Hl}var kw=Tw();const Sw=Ta(kw);var Ul={exports:{}},jl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function ww(){if(F0)return jl;F0=1;var e=n1(),t=c1();function n(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,u=e.useDebugValue;return jl.useSyncExternalStoreWithSelector=function(l,c,d,h,f){var m=s(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=o(function(){function x(w){if(!E){if(E=!0,T=w,w=h(w),f!==void 0&&b.hasValue){var D=b.value;if(f(D,w))return v=D}return v=w}if(D=v,r(T,w))return D;var B=h(w);return f!==void 0&&f(D,B)?(T=w,D):(T=w,v=B)}var E=!1,T,v,C=d===void 0?null:d;return[function(){return x(c())},C===null?void 0:function(){return x(C())}]},[c,d,h,f]);var y=i(l,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=y},[y]),u(y),y},jl}var H0;function Cw(){return H0||(H0=1,Ul.exports=ww()),Ul.exports}var Aw=Cw(),Nw=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},Iw=({contentComponent:e})=>{const t=d1.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(t)})};function Ow(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t=ne(I({},t),{[n]:xE.createPortal(r.reactElement,r.element,n)}),e.forEach(i=>i())},removeRenderer(n){const r=I({},t);delete r[n],t=r,e.forEach(i=>i())}}}var vw=class extends Qn.Component{constructor(e){var t;super(e),this.editorContentRef=Qn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Ow(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!((e=t.options.element)!=null&&e.firstChild)))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const r=this.props,{editor:e,innerRef:t}=r,n=on(r,["editor","innerRef"]);return g.jsxs(g.Fragment,{children:[g.jsx("div",I({ref:Nw(t,this.editorContentRef)},n)),(e==null?void 0:e.contentComponent)&&g.jsx(Iw,{contentComponent:e.contentComponent})]})}},_w=F.forwardRef((e,t)=>{const n=Qn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Qn.createElement(vw,I({key:n,innerRef:t},e))}),Lw=Qn.memo(_w),Rw=typeof window!="undefined"?F.useLayoutEffect:F.useEffect,Mw=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Dw(e){var t;const[n]=F.useState(()=>new Mw(e.editor)),r=Aw.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:Sw);return Rw(()=>n.watch(e.editor),[e.editor,n]),F.useDebugValue(r),r}var Pw=!1,Wc=typeof window=="undefined",Bw=Wc||!!(typeof window!="undefined"&&window.next),Fw=class bb{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Wc||Bw?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t=ne(I({},this.options.current),{onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}});return new xw(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var a;return i===((a=n.extensions)==null?void 0:a[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?bb.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions(ne(I({},this.options.current),{editable:this.editor.isEditable})):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function Hw(e={},t=[]){const n=F.useRef(e);n.current=e;const[r]=F.useState(()=>new Fw(n)),i=d1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return F.useDebugValue(i),F.useEffect(r.onRender(t)),Dw({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var xb=F.createContext({editor:null});xb.Consumer;var yb=()=>F.useContext(xb),Uw=F.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),jw=()=>F.useContext(Uw);Qn.forwardRef((e,t)=>{const{onDragStart:n}=jw(),r=e.as||"div";return g.jsx(r,ne(I({},e),{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:I({whiteSpace:"normal"},e.style)}))});Qn.createContext({markViewContentRef:()=>{}});const Eb=["top","right","bottom","left"],U0=["start","end"],j0=Eb.reduce((e,t)=>e.concat(t,t+"-"+U0[0],t+"-"+U0[1]),[]),Zn=Math.min,qt=Math.max,$o=Math.round,Kn=e=>({x:e,y:e}),zw={left:"right",right:"left",bottom:"top",top:"bottom"},$w={start:"end",end:"start"};function Yc(e,t,n){return qt(e,Zn(t,n))}function Er(e,t){return typeof e=="function"?e(t):e}function Cn(e){return e.split("-")[0]}function vn(e){return e.split("-")[1]}function Tb(e){return e==="x"?"y":"x"}function df(e){return e==="y"?"height":"width"}const Vw=new Set(["top","bottom"]);function Wn(e){return Vw.has(Cn(e))?"y":"x"}function ff(e){return Tb(Wn(e))}function kb(e,t,n){n===void 0&&(n=!1);const r=vn(e),i=ff(e),s=df(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=qo(a)),[a,qo(a)]}function qw(e){const t=qo(e);return[Vo(e),t,Vo(t)]}function Vo(e){return e.replace(/start|end/g,t=>$w[t])}const z0=["left","right"],$0=["right","left"],Ww=["top","bottom"],Yw=["bottom","top"];function Kw(e,t,n){switch(e){case"top":case"bottom":return n?t?$0:z0:t?z0:$0;case"left":case"right":return t?Ww:Yw;default:return[]}}function Gw(e,t,n,r){const i=vn(e);let s=Kw(Cn(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(Vo)))),s}function qo(e){return e.replace(/left|right|bottom|top/g,t=>zw[t])}function Qw(e){return I({top:0,right:0,bottom:0,left:0},e)}function hf(e){return typeof e!="number"?Qw(e):{top:e,right:e,bottom:e,left:e}}function is(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function V0(e,t,n){let{reference:r,floating:i}=e;const s=Wn(t),a=ff(t),o=df(a),u=Cn(t),l=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let f;switch(u){case"top":f={x:c,y:r.y-i.height};break;case"bottom":f={x:c,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(vn(t)){case"start":f[a]-=h*(n&&l?-1:1);break;case"end":f[a]+=h*(n&&l?-1:1);break}return f}const Xw=(e,t,n)=>Xe(null,null,function*(){const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),u=yield a.isRTL==null?void 0:a.isRTL(t);let l=yield a.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=V0(l,r,u),h=r,f={},m=0;for(let b=0;b<o.length;b++){const{name:y,fn:x}=o[b],{x:E,y:T,data:v,reset:C}=yield x({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:e,floating:t}});c=E!=null?E:c,d=T!=null?T:d,f=ne(I({},f),{[y]:I(I({},f[y]),v)}),C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(l=C.rects===!0?yield a.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:c,y:d}=V0(l,h,u)),b=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}});function ss(e,t){return Xe(this,null,function*(){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Er(t,e),m=hf(f),y=o[h?d==="floating"?"reference":"floating":d],x=is(yield s.getClippingRect({element:(n=yield s.isElement==null?void 0:s.isElement(y))==null||n?y:y.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:u})),E=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,T=yield s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating),v=(yield s.isElement==null?void 0:s.isElement(T))?(yield s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},C=is(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:E,offsetParent:T,strategy:u}):E);return{top:(x.top-C.top+m.top)/v.y,bottom:(C.bottom-x.bottom+m.bottom)/v.y,left:(x.left-C.left+m.left)/v.x,right:(C.right-x.right+m.right)/v.x}})}const Jw=e=>({name:"arrow",options:e,fn(n){return Xe(this,null,function*(){const{x:r,y:i,placement:s,rects:a,platform:o,elements:u,middlewareData:l}=n,{element:c,padding:d=0}=Er(e,n)||{};if(c==null)return{};const h=hf(d),f={x:r,y:i},m=ff(s),b=df(m),y=yield o.getDimensions(c),x=m==="y",E=x?"top":"left",T=x?"bottom":"right",v=x?"clientHeight":"clientWidth",C=a.reference[b]+a.reference[m]-f[m]-a.floating[b],w=f[m]-a.reference[m],D=yield o.getOffsetParent==null?void 0:o.getOffsetParent(c);let B=D?D[v]:0;(!B||!(yield o.isElement==null?void 0:o.isElement(D)))&&(B=u.floating[v]||a.floating[b]);const j=C/2-w/2,_=B/2-y[b]/2-1,$=Zn(h[E],_),H=Zn(h[T],_),Y=$,G=B-y[b]-H,Z=B/2-y[b]/2+j,ue=Yc(Y,Z,G),ye=!l.arrow&&vn(s)!=null&&Z!==ue&&a.reference[b]/2-(Z<Y?$:H)-y[b]/2<0,me=ye?Z<Y?Z-Y:Z-G:0;return{[m]:f[m]+me,data:I({[m]:ue,centerOffset:Z-ue-me},ye&&{alignmentOffset:me}),reset:ye}})}});function Zw(e,t,n){return(e?[...n.filter(i=>vn(i)===e),...n.filter(i=>vn(i)!==e)]:n.filter(i=>Cn(i)===i)).filter(i=>e?vn(i)===e||(t?Vo(i)!==i:!1):!0)}const eC=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,fn(n){return Xe(this,null,function*(){var r,i,s;const{rects:a,middlewareData:o,placement:u,platform:l,elements:c}=n,$=Er(e,n),{crossAxis:d=!1,alignment:h,allowedPlacements:f=j0,autoAlignment:m=!0}=$,b=on($,["crossAxis","alignment","allowedPlacements","autoAlignment"]),y=h!==void 0||f===j0?Zw(h||null,m,f):f,x=yield ss(n,b),E=((r=o.autoPlacement)==null?void 0:r.index)||0,T=y[E];if(T==null)return{};const v=kb(T,a,yield l.isRTL==null?void 0:l.isRTL(c.floating));if(u!==T)return{reset:{placement:y[0]}};const C=[x[Cn(T)],x[v[0]],x[v[1]]],w=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:T,overflows:C}],D=y[E+1];if(D)return{data:{index:E+1,overflows:w},reset:{placement:D}};const B=w.map(H=>{const Y=vn(H.placement);return[H.placement,Y&&d?H.overflows.slice(0,2).reduce((G,Z)=>G+Z,0):H.overflows[0],H.overflows]}).sort((H,Y)=>H[1]-Y[1]),_=((s=B.filter(H=>H[2].slice(0,vn(H[0])?2:3).every(Y=>Y<=0))[0])==null?void 0:s[0])||B[0][0];return _!==u?{data:{index:E+1,overflows:w},reset:{placement:_}}:{}})}}},tC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return Xe(this,null,function*(){var r,i;const{placement:s,middlewareData:a,rects:o,initialPlacement:u,platform:l,elements:c}=n,Z=Er(e,n),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0}=Z,x=on(Z,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const E=Cn(s),T=Wn(u),v=Cn(u)===u,C=yield l.isRTL==null?void 0:l.isRTL(c.floating),w=f||(v||!y?[qo(u)]:qw(u)),D=b!=="none";!f&&D&&w.push(...Gw(u,y,b,C));const B=[u,...w],j=yield ss(n,x),_=[];let $=((i=a.flip)==null?void 0:i.overflows)||[];if(d&&_.push(j[E]),h){const ue=kb(s,o,C);_.push(j[ue[0]],j[ue[1]])}if($=[...$,{placement:s,overflows:_}],!_.every(ue=>ue<=0)){var H,Y;const ue=(((H=a.flip)==null?void 0:H.index)||0)+1,ye=B[ue];if(ye&&(!(h==="alignment"?T!==Wn(ye):!1)||$.every(S=>Wn(S.placement)===T?S.overflows[0]>0:!0)))return{data:{index:ue,overflows:$},reset:{placement:ye}};let me=(Y=$.filter(z=>z.overflows[0]<=0).sort((z,S)=>z.overflows[1]-S.overflows[1])[0])==null?void 0:Y.placement;if(!me)switch(m){case"bestFit":{var G;const z=(G=$.filter(S=>{if(D){const pe=Wn(S.placement);return pe===T||pe==="y"}return!0}).map(S=>[S.placement,S.overflows.filter(pe=>pe>0).reduce((pe,Ae)=>pe+Ae,0)]).sort((S,pe)=>S[1]-pe[1])[0])==null?void 0:G[0];z&&(me=z);break}case"initialPlacement":me=u;break}if(s!==me)return{reset:{placement:me}}}return{}})}}};function q0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function W0(e){return Eb.some(t=>e[t]>=0)}const nC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return Xe(this,null,function*(){const{rects:r}=n,a=Er(e,n),{strategy:i="referenceHidden"}=a,s=on(a,["strategy"]);switch(i){case"referenceHidden":{const o=yield ss(n,ne(I({},s),{elementContext:"reference"})),u=q0(o,r.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:W0(u)}}}case"escaped":{const o=yield ss(n,ne(I({},s),{altBoundary:!0})),u=q0(o,r.floating);return{data:{escapedOffsets:u,escaped:W0(u)}}}default:return{}}})}}};function Sb(e){const t=Zn(...e.map(s=>s.left)),n=Zn(...e.map(s=>s.top)),r=qt(...e.map(s=>s.right)),i=qt(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function rC(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>is(Sb(i)))}const iC=function(e){return e===void 0&&(e={}),{name:"inline",options:e,fn(n){return Xe(this,null,function*(){const{placement:r,elements:i,rects:s,platform:a,strategy:o}=n,{padding:u=2,x:l,y:c}=Er(e,n),d=Array.from((yield a.getClientRects==null?void 0:a.getClientRects(i.reference))||[]),h=rC(d),f=is(Sb(d)),m=hf(u);function b(){if(h.length===2&&h[0].left>h[1].right&&l!=null&&c!=null)return h.find(x=>l>x.left-m.left&&l<x.right+m.right&&c>x.top-m.top&&c<x.bottom+m.bottom)||f;if(h.length>=2){if(Wn(r)==="y"){const $=h[0],H=h[h.length-1],Y=Cn(r)==="top",G=$.top,Z=H.bottom,ue=Y?$.left:H.left,ye=Y?$.right:H.right,me=ye-ue,z=Z-G;return{top:G,bottom:Z,left:ue,right:ye,width:me,height:z,x:ue,y:G}}const x=Cn(r)==="left",E=qt(...h.map($=>$.right)),T=Zn(...h.map($=>$.left)),v=h.filter($=>x?$.left===T:$.right===E),C=v[0].top,w=v[v.length-1].bottom,D=T,B=E,j=B-D,_=w-C;return{top:C,bottom:w,left:D,right:B,width:j,height:_,x:D,y:C}}return f}const y=yield a.getElementRects({reference:{getBoundingClientRect:b},floating:i.floating,strategy:o});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}})}}},sC=new Set(["left","top"]);function aC(e,t){return Xe(this,null,function*(){const{placement:n,platform:r,elements:i}=e,s=yield r.isRTL==null?void 0:r.isRTL(i.floating),a=Cn(n),o=vn(n),u=Wn(n)==="y",l=sC.has(a)?-1:1,c=s&&u?-1:1,d=Er(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(f=o==="end"?m*-1:m),u?{x:f*c,y:h*l}:{x:h*l,y:f*c}})}const oC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return Xe(this,null,function*(){var r,i;const{x:s,y:a,placement:o,middlewareData:u}=n,l=yield aC(n,e);return o===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:ne(I({},l),{placement:o})}})}}},uC=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return Xe(this,null,function*(){const{x:r,y:i,placement:s}=n,x=Er(e,n),{mainAxis:a=!0,crossAxis:o=!1,limiter:u={fn:E=>{let{x:T,y:v}=E;return{x:T,y:v}}}}=x,l=on(x,["mainAxis","crossAxis","limiter"]),c={x:r,y:i},d=yield ss(n,l),h=Wn(Cn(s)),f=Tb(h);let m=c[f],b=c[h];if(a){const E=f==="y"?"top":"left",T=f==="y"?"bottom":"right",v=m+d[E],C=m-d[T];m=Yc(v,m,C)}if(o){const E=h==="y"?"top":"left",T=h==="y"?"bottom":"right",v=b+d[E],C=b-d[T];b=Yc(v,b,C)}const y=u.fn(ne(I({},n),{[f]:m,[h]:b}));return ne(I({},y),{data:{x:y.x-r,y:y.y-i,enabled:{[f]:a,[h]:o}}})})}}},lC=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return Xe(this,null,function*(){var r,i;const{placement:s,rects:a,platform:o,elements:u}=n,$=Er(e,n),{apply:l=()=>{}}=$,c=on($,["apply"]),d=yield ss(n,c),h=Cn(s),f=vn(s),m=Wn(s)==="y",{width:b,height:y}=a.floating;let x,E;h==="top"||h==="bottom"?(x=h,E=f===((yield o.isRTL==null?void 0:o.isRTL(u.floating))?"start":"end")?"left":"right"):(E=h,x=f==="end"?"top":"bottom");const T=y-d.top-d.bottom,v=b-d.left-d.right,C=Zn(y-d[x],T),w=Zn(b-d[E],v),D=!n.middlewareData.shift;let B=C,j=w;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(j=v),(i=n.middlewareData.shift)!=null&&i.enabled.y&&(B=T),D&&!f){const H=qt(d.left,0),Y=qt(d.right,0),G=qt(d.top,0),Z=qt(d.bottom,0);m?j=b-2*(H!==0||Y!==0?H+Y:qt(d.left,d.right)):B=y-2*(G!==0||Z!==0?G+Z:qt(d.top,d.bottom))}yield l(ne(I({},n),{availableWidth:j,availableHeight:B}));const _=yield o.getDimensions(u.floating);return b!==_.width||y!==_.height?{reset:{rects:!0}}:{}})}}};function Yu(){return typeof window!="undefined"}function ps(e){return wb(e)?(e.nodeName||"").toLowerCase():"#document"}function fn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Tr(e){var t;return(t=(wb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wb(e){return Yu()?e instanceof Node||e instanceof fn(e).Node:!1}function Rn(e){return Yu()?e instanceof Element||e instanceof fn(e).Element:!1}function er(e){return Yu()?e instanceof HTMLElement||e instanceof fn(e).HTMLElement:!1}function Y0(e){return!Yu()||typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof fn(e).ShadowRoot}const cC=new Set(["inline","contents"]);function Ca(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!cC.has(i)}const dC=new Set(["table","td","th"]);function fC(e){return dC.has(ps(e))}const hC=[":popover-open",":modal"];function Ku(e){return hC.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const pC=["transform","translate","scale","rotate","perspective"],mC=["transform","translate","scale","rotate","perspective","filter"],gC=["paint","layout","strict","content"];function pf(e){const t=mf(),n=Rn(e)?Mn(e):e;return pC.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||mC.some(r=>(n.willChange||"").includes(r))||gC.some(r=>(n.contain||"").includes(r))}function bC(e){let t=Gr(e);for(;er(t)&&!as(t);){if(pf(t))return t;if(Ku(t))return null;t=Gr(t)}return null}function mf(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xC=new Set(["html","body","#document"]);function as(e){return xC.has(ps(e))}function Mn(e){return fn(e).getComputedStyle(e)}function Gu(e){return Rn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gr(e){if(ps(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Y0(e)&&e.host||Tr(e);return Y0(t)?t.host:t}function Cb(e){const t=Gr(e);return as(t)?e.ownerDocument?e.ownerDocument.body:e.body:er(t)&&Ca(t)?t:Cb(t)}function Ab(e,t,n){var r;t===void 0&&(t=[]);const i=Cb(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=fn(i);return s?(Kc(a),t.concat(a,a.visualViewport||[],Ca(i)?i:[],[])):t.concat(i,Ab(i,[]))}function Kc(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Nb(e){const t=Mn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=er(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=$o(n)!==s||$o(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Ib(e){return Rn(e)?e:e.contextElement}function Gi(e){const t=Ib(e);if(!er(t))return Kn(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Nb(t);let a=(s?$o(n.width):n.width)/r,o=(s?$o(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const yC=Kn(0);function Ob(e){const t=fn(e);return!mf()||!t.visualViewport?yC:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EC(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==fn(e)?!1:t}function fa(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Ib(e);let a=Kn(1);t&&(r?Rn(r)&&(a=Gi(r)):a=Gi(e));const o=EC(s,n,r)?Ob(s):Kn(0);let u=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(s){const h=fn(s),f=r&&Rn(r)?fn(r):r;let m=h,b=Kc(m);for(;b&&r&&f!==m;){const y=Gi(b),x=b.getBoundingClientRect(),E=Mn(b),T=x.left+(b.clientLeft+parseFloat(E.paddingLeft))*y.x,v=x.top+(b.clientTop+parseFloat(E.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,d*=y.y,u+=T,l+=v,m=fn(b),b=Kc(m)}}return is({width:c,height:d,x:u,y:l})}function gf(e,t){const n=Gu(e).scrollLeft;return t?t.left+n:fa(Tr(e)).left+n}function vb(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:gf(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function TC(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=Tr(r),o=t?Ku(t.floating):!1;if(r===a||o&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Kn(1);const c=Kn(0),d=er(r);if((d||!d&&!s)&&((ps(r)!=="body"||Ca(a))&&(u=Gu(r)),er(r))){const f=fa(r);l=Gi(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}const h=a&&!d&&!s?vb(a,u,!0):Kn(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+h.x,y:n.y*l.y-u.scrollTop*l.y+c.y+h.y}}function kC(e){return Array.from(e.getClientRects())}function SC(e){const t=Tr(e),n=Gu(e),r=e.ownerDocument.body,i=qt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=qt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+gf(e);const o=-n.scrollTop;return Mn(r).direction==="rtl"&&(a+=qt(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function wC(e,t){const n=fn(e),r=Tr(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;const l=mf();(!l||l&&t==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:o,y:u}}const CC=new Set(["absolute","fixed"]);function AC(e,t){const n=fa(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=er(e)?Gi(e):Kn(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:a,height:o,x:u,y:l}}function K0(e,t,n){let r;if(t==="viewport")r=wC(e,n);else if(t==="document")r=SC(Tr(e));else if(Rn(t))r=AC(t,n);else{const i=Ob(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return is(r)}function _b(e,t){const n=Gr(e);return n===t||!Rn(n)||as(n)?!1:Mn(n).position==="fixed"||_b(n,t)}function NC(e,t){const n=t.get(e);if(n)return n;let r=Ab(e,[]).filter(o=>Rn(o)&&ps(o)!=="body"),i=null;const s=Mn(e).position==="fixed";let a=s?Gr(e):e;for(;Rn(a)&&!as(a);){const o=Mn(a),u=pf(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&CC.has(i.position)||Ca(a)&&!u&&_b(e,a))?r=r.filter(c=>c!==a):i=o,a=Gr(a)}return t.set(e,r),r}function IC(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Ku(t)?[]:NC(t,this._c):[].concat(n),r],o=a[0],u=a.reduce((l,c)=>{const d=K0(t,c,i);return l.top=qt(d.top,l.top),l.right=Zn(d.right,l.right),l.bottom=Zn(d.bottom,l.bottom),l.left=qt(d.left,l.left),l},K0(t,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function OC(e){const{width:t,height:n}=Nb(e);return{width:t,height:n}}function vC(e,t,n){const r=er(t),i=Tr(t),s=n==="fixed",a=fa(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const u=Kn(0);function l(){u.x=gf(i)}if(r||!r&&!s)if((ps(t)!=="body"||Ca(i))&&(o=Gu(t)),r){const f=fa(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&l();s&&!r&&i&&l();const c=i&&!r&&!s?vb(i,o):Kn(0),d=a.left+o.scrollLeft-u.x-c.x,h=a.top+o.scrollTop-u.y-c.y;return{x:d,y:h,width:a.width,height:a.height}}function zl(e){return Mn(e).position==="static"}function G0(e,t){if(!er(e)||Mn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Tr(e)===n&&(n=n.ownerDocument.body),n}function Lb(e,t){const n=fn(e);if(Ku(e))return n;if(!er(e)){let i=Gr(e);for(;i&&!as(i);){if(Rn(i)&&!zl(i))return i;i=Gr(i)}return n}let r=G0(e,t);for(;r&&fC(r)&&zl(r);)r=G0(r,t);return r&&as(r)&&zl(r)&&!pf(r)?n:r||bC(e)||n}const _C=function(e){return Xe(this,null,function*(){const t=this.getOffsetParent||Lb,n=this.getDimensions,r=yield n(e.floating);return{reference:vC(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})};function LC(e){return Mn(e).direction==="rtl"}const RC={convertOffsetParentRelativeRectToViewportRelativeRect:TC,getDocumentElement:Tr,getClippingRect:IC,getOffsetParent:Lb,getElementRects:_C,getClientRects:kC,getDimensions:OC,getScale:Gi,isElement:Rn,isRTL:LC},Rb=oC,Mb=eC,Db=uC,Pb=tC,Bb=lC,Fb=nC,Hb=Jw,Ub=iC,jb=(e,t,n)=>{const r=new Map,i=I({platform:RC},n),s=ne(I({},i.platform),{_c:r});return Xw(e,t,ne(I({},i),{platform:s}))};var Gc,Qc;if(typeof WeakMap!="undefined"){let e=new WeakMap;Gc=t=>e.get(t),Qc=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;Gc=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},Qc=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var fr=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,a=i+1;for(let o=1;s<this.width&&this.map[t+o]==n;o++)s++;for(let o=1;a<this.height&&this.map[t+this.width*o]==n;o++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:a}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:a,right:o,top:u,bottom:l}=this.findCell(t);return{left:Math.min(n,a),top:Math.min(i,u),right:Math.max(r,o),bottom:Math.max(s,l)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,a=this.map[s];n[a]||(n[a]=!0,!(i==e.left&&i&&this.map[s-1]==a||r==e.top&&r&&this.map[s-this.width]==a)&&t.push(a))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let a=t+e*this.width;const o=(e+1)*this.width;for(;a<o&&this.map[a]<i;)a++;return a==o?s-1:this.map[a]}i=s}}static get(e){return Gc(e)||Qc(e,MC(e))}};function MC(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=DC(e),n=e.childCount,r=[];let i=0,s=null;const a=[];for(let l=0,c=t*n;l<c;l++)r[l]=0;for(let l=0,c=0;l<n;l++){const d=e.child(l);c++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==d.childCount)break;const b=d.child(m),{colspan:y,rowspan:x,colwidth:E}=b.attrs;for(let T=0;T<x;T++){if(T+l>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:c,n:x-T});break}const v=i+T*t;for(let C=0;C<y;C++){r[v+C]==0?r[v+C]=c:(s||(s=[])).push({type:"collision",row:l,pos:c,n:y-C});const w=E&&E[C];if(w){const D=(v+C)%t*2,B=a[D];B==null||B!=w&&a[D+1]==1?(a[D]=w,a[D+1]=1):B==w&&a[D+1]++}}}i+=y,c+=b.nodeSize}const h=(l+1)*t;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:l,n:f}),c++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const o=new fr(t,n,r,s);let u=!1;for(let l=0;!u&&l<a.length;l+=2)a[l]!=null&&a[l+1]<n&&(u=!0);return u&&PC(o,a,e),o}function DC(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let a=0;a<r;a++){const o=e.child(a);for(let u=0;u<o.childCount;u++){const l=o.child(u);a+l.attrs.rowspan>r&&(s+=l.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const o=i.child(a);s+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function PC(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let o=null;const u=a.attrs;for(let l=0;l<u.colspan;l++){const c=(i+l)%e.width,d=t[c*2];d!=null&&(!u.colwidth||u.colwidth[l]!=d)&&((o||(o=BC(u)))[l]=d)}o&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:o})}}function BC(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function bf(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}new tt("selectingCells");function FC(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function zb(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function HC(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=FC(t.$head)||UC(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function UC(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function Q0(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function $b(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Vb(e,t,n){const r=e.node(-1),i=fr.get(r),s=e.start(-1),a=i.nextCell(e.pos-s,t,n);return a==null?null:e.node(0).resolve(s+a)}function X0(e,t,n=1){const r=ne(I({},e),{colspan:e.colspan-n});return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var Gn=class or extends be{constructor(t,n=t){const r=t.node(-1),i=fr.get(r),s=t.start(-1),a=i.rectBetween(t.pos-s,n.pos-s),o=t.node(0),u=i.cellsInRect(a).filter(c=>c!=n.pos-s);u.unshift(n.pos-s);const l=u.map(c=>{const d=r.nodeAt(c);if(!d)throw RangeError(`No cell with offset ${c} found`);const h=s+c+1;return new V1(o.resolve(h),o.resolve(h+d.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(Q0(r)&&Q0(i)&&$b(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?or.rowSelection(r,i):s&&this.isColSelection()?or.colSelection(r,i):new or(r,i)}return Te.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=fr.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let u=i.top;u<i.bottom;u++){const l=[];for(let c=u*n.width+i.left,d=i.left;d<i.right;d++,c++){const h=n.map[c];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let m=t.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const b=i.left-f.left,y=f.right-i.right;if(b>0||y>0){let x=m.attrs;if(b>0&&(x=X0(x,0,b)),y>0&&(x=X0(x,x.colspan-y,y)),f.left<i.left){if(m=m.type.createAndFill(x),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(x)}`)}else m=m.type.create(x,m.content)}if(f.top<i.top||f.bottom>i.bottom){const x=ne(I({},m.attrs),{rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)});f.top<i.top?m=m.type.createAndFill(x):m=m.type.create(x,m.content)}l.push(m)}a.push(t.child(u).copy(q.from(l)))}const o=this.isColSelection()&&this.isRowSelection()?t:a;return new ie(q.from(o),1,1)}replace(t,n=ie.empty){const r=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:o,$to:u}=i[a],l=t.mapping.slice(r);t.replace(l.map(o.pos),l.map(u.pos),a?ie.empty:n)}const s=be.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new ie(q.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=fr.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)t(n.nodeAt(s[a]),i+s[a])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=fr.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),u=t.node(0);return a.top<=o.top?(a.top>0&&(t=u.resolve(s+i.map[a.left])),o.bottom<i.height&&(n=u.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=u.resolve(s+i.map[o.left])),a.bottom<i.height&&(t=u.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new or(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=fr.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,o=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,o)==n.width}eq(t){return t instanceof or&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=fr.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),u=t.node(0);return a.left<=o.left?(a.left>0&&(t=u.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(n=u.resolve(s+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=u.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(t=u.resolve(s+i.map[i.width*(a.top+1)-1]))),new or(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new or(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new or(t.resolve(n),t.resolve(r))}getBookmark(){return new jC(this.$anchorCell.pos,this.$headCell.pos)}};Gn.prototype.visible=!1;be.jsonID("cell",Gn);var jC=class qb{constructor(t,n){this.anchor=t,this.head=n}map(t){return new qb(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&$b(n,r)?new Gn(n,r):be.near(r,1)}};new tt("fix-tables");function Wb(e){const t=e.selection,n=HC(e),r=n.node(-1),i=n.start(-1),s=fr.get(r),a=t instanceof Gn?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i);return ne(I({},a),{tableStart:i,map:s,table:r})}function zC(e){return function(t,n){if(!zb(t))return!1;if(n){const r=bf(t.schema),i=Wb(t),s=t.tr,a=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=a.map(u=>i.table.nodeAt(u));for(let u=0;u<a.length;u++)o[u].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[u],r.cell,o[u].attrs);if(s.steps.length==0)for(let u=0;u<a.length;u++)s.setNodeMarkup(i.tableStart+a[u],r.header_cell,o[u].attrs);n(s)}return!0}}function J0(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const s=t.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function xf(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?zC(e):function(n,r){if(!zb(n))return!1;if(r){const i=bf(n.schema),s=Wb(n),a=n.tr,o=J0("row",s,i),u=J0("column",s,i),c=(e==="column"?o:e==="row"?u:!1)?1:0,d=e=="column"?{left:0,top:c,right:1,bottom:s.map.height}:e=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,h=e=="column"?u?i.cell:i.header_cell:e=="row"?o?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(f=>{const m=f+s.tableStart,b=a.doc.nodeAt(m);b&&a.setNodeMarkup(m,h,b.attrs)}),r(a)}return!0}}xf("row",{useDeprecatedLogic:!0});xf("column",{useDeprecatedLogic:!0});xf("cell",{useDeprecatedLogic:!0});function Qa(e,t){const n=e.selection;if(!(n instanceof Gn))return!1;if(t){const r=e.tr,i=bf(e.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new ie(i,0,0))}),r.docChanged&&t(r)}return!0}Kd({ArrowLeft:Xa("horiz",-1),ArrowRight:Xa("horiz",1),ArrowUp:Xa("vert",-1),ArrowDown:Xa("vert",1),"Shift-ArrowLeft":Ja("horiz",-1),"Shift-ArrowRight":Ja("horiz",1),"Shift-ArrowUp":Ja("vert",-1),"Shift-ArrowDown":Ja("vert",1),Backspace:Qa,"Mod-Backspace":Qa,Delete:Qa,"Mod-Delete":Qa});function go(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Xa(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Gn)return go(n,r,be.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const a=Yb(i,e,t);if(a==null)return!1;if(e=="horiz")return go(n,r,be.near(n.doc.resolve(s.head+t),t));{const o=n.doc.resolve(a),u=Vb(o,e,t);let l;return u?l=be.near(u,1):t<0?l=be.near(n.doc.resolve(o.before(-1)),-1):l=be.near(n.doc.resolve(o.after(-1)),1),go(n,r,l)}}}function Ja(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let a;if(s instanceof Gn)a=s;else{const u=Yb(i,e,t);if(u==null)return!1;a=new Gn(n.doc.resolve(u))}const o=Vb(a.$headCell,e,t);return o?go(n,r,new Gn(a.$anchorCell,o)):!1}}function Yb(e,t,n){if(!(e.state.selection instanceof Te))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),u=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(u)?o:null}}return null}new tt("tableColumnResizing");function $C(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),i=Math.min(e.left,t.left),a=Math.max(e.right,t.right)-i,o=r-n,u=i,l=n;return new DOMRect(u,l,a,o)}var VC=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:s,appendTo:a,options:o}){this.preventHide=!1,this.isVisible=!1,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:l,from:c,to:d})=>{const{doc:h,selection:f}=l,{empty:m}=f,b=!h.textBetween(c,d).length&&uf(l.selection),y=this.element.contains(document.activeElement);return!(!(u.hasFocus()||y)||m||b||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var l;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((l=this.element.parentNode)!=null&&l.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,l)=>{const c=!(l!=null&&l.selection.eq(u.state.selection)),d=!(l!=null&&l.doc.eq(u.state.doc));!c&&!d||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,c,d,l)},this.updateDelay))},this.updateHandler=(u,l,c,d)=>{const{composing:h}=u;if(h||!l&&!c)return;if(!this.getShouldShow(d)){this.hide();return}this.updatePosition(),this.show()},this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=a,this.floatingUIOptions=I(I({},this.floatingUIOptions),o),this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),window.addEventListener("resize",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(Pb(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(Db(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(Rb(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(Hb(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(Bb(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(Mb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(Fb(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(Ub(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}updatePosition(){const{selection:e}=this.editor.state,t=Jg(this.view,e.from,e.to);let n={getBoundingClientRect:()=>t,getClientRects:()=>[t]};if(e instanceof he){let r=this.view.nodeDOM(e.from);const i=r.dataset.nodeViewWrapper?r:r.querySelector("[data-node-view-wrapper]");i&&(r=i),r&&(n={getBoundingClientRect:()=>r.getBoundingClientRect(),getClientRects:()=>[r.getBoundingClientRect()]})}if(e instanceof Gn){const{$anchorCell:r,$headCell:i}=e,s=r?r.pos:i.pos,a=i?i.pos:r.pos,o=this.view.nodeDOM(s),u=this.view.nodeDOM(a);if(!o||!u)return;const l=o===u?o.getBoundingClientRect():$C(o.getBoundingClientRect(),u.getBoundingClientRect());n={getBoundingClientRect:()=>l,getClientRects:()=>[l]}}jb(n,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const i=!(t!=null&&t.selection.eq(e.state.selection)),s=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,i,s,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:s,to:a})}show(){var e,t;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(t=(e=this.appendTo)!=null?e:this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Kb=e=>new Qe({key:typeof e.pluginKey=="string"?new tt(e.pluginKey):e.pluginKey,view:t=>new VC(I({view:t},e))});nt.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Kb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var qC=class{constructor({editor:e,element:t,view:n,options:r,shouldShow:i}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:s,state:a})=>{const{selection:o}=a,{$anchor:u,empty:l}=o,c=u.depth===1,d=u.parent.isTextblock&&!u.parent.type.spec.code&&!u.parent.textContent&&u.parent.childCount===0&&!this.getTextContent(u.parent);return!(!s.hasFocus()||!l||!c||!d||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(s,a,o,u)=>{const{composing:l}=s;if(l||!a&&!o)return;if(!this.getShouldShow(u)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&((a=this.element.parentNode)!=null&&a.contains(s.relatedTarget))||(s==null?void 0:s.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.floatingUIOptions=I(I({},this.floatingUIOptions),r),this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}getTextContent(e){return Wg(e,{textSerializers:rf(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(Pb(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(Db(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(Rb(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(Hb(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(Bb(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(Mb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(Fb(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(Ub(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:s,to:a})}updatePosition(){const{selection:e}=this.editor.state,t=Jg(this.view,e.from,e.to);jb({getBoundingClientRect:()=>t,getClientRects:()=>[t]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(t!=null&&t.selection.eq(e.state.selection)),r=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",(e=this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Gb=e=>new Qe({key:typeof e.pluginKey=="string"?new tt(e.pluginKey):e.pluginKey,view:t=>new qC(I({view:t},e))});nt.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Gb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,shouldShow:this.options.shouldShow})]:[]}});var WC=Qn.forwardRef((l,u)=>{var c=l,{pluginKey:e="bubbleMenu",editor:t,updateDelay:n,resizeDelay:r,shouldShow:i=null,options:s,children:a}=c,o=on(c,["pluginKey","editor","updateDelay","resizeDelay","shouldShow","options","children"]);const d=F.useRef(document.createElement("div"));typeof u=="function"?u(d.current):u&&(u.current=d.current);const{editor:h}=yb();return F.useEffect(()=>{const f=d.current;if(f.style.visibility="hidden",f.style.position="absolute",t!=null&&t.isDestroyed||h!=null&&h.isDestroyed)return;const m=t||h;if(!m){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const b=Kb({updateDelay:n,resizeDelay:r,editor:m,element:f,pluginKey:e,shouldShow:i,options:s});return m.registerPlugin(b),()=>{m.unregisterPlugin(e),window.requestAnimationFrame(()=>{f.parentNode&&f.parentNode.removeChild(f)})}},[t,h]),r1.createPortal(g.jsx("div",ne(I({},o),{children:a})),d.current)});Qn.forwardRef((o,a)=>{var u=o,{pluginKey:e="floatingMenu",editor:t,shouldShow:n=null,options:r,children:i}=u,s=on(u,["pluginKey","editor","shouldShow","options","children"]);const l=F.useRef(document.createElement("div"));typeof a=="function"?a(l.current):a&&(a.current=l.current);const{editor:c}=yb();return F.useEffect(()=>{const d=l.current;if(d.style.visibility="hidden",d.style.position="absolute",t!=null&&t.isDestroyed||c!=null&&c.isDestroyed)return;const h=t||c;if(!h){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const f=Gb({editor:h,element:d,pluginKey:e,shouldShow:n,options:r});return h.registerPlugin(f),()=>{h.unregisterPlugin(e),window.requestAnimationFrame(()=>{d.parentNode&&d.parentNode.removeChild(d)})}},[t,c]),r1.createPortal(g.jsx("div",ne(I({},s),{children:i})),l.current)});var Wo=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const i=t!=null?t:{},{children:n}=i,r=on(i,["children"]);if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},YC=/^\s*>\s$/,KC=rn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Wo("blockquote",ne(I({},ht(this.options.HTMLAttributes,e)),{children:Wo("slot",{})}))},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[rs({find:YC,type:this.type})]}}),GC=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,QC=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,XC=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,JC=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ZC=Ni.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Wo("strong",ne(I({},ht(this.options.HTMLAttributes,e)),{children:Wo("slot",{})}))},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ns({find:GC,type:this.type}),ns({find:XC,type:this.type})]},addPasteRules(){return[wi({find:QC,type:this.type}),wi({find:JC,type:this.type})]}}),eA=/(^|[^`])`([^`]+)`(?!`)/,tA=/(^|[^`])`([^`]+)`(?!`)/g,nA=Ni.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ns({find:eA,type:this.type})]},addPasteRules(){return[wi({find:tA,type:this.type})]}}),rA=/^```([a-z]+)?[\s\n]$/,iA=/^~~~([a-z]+)?[\s\n]$/,sA=rn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",ht(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:e.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?e.commands.command(({tr:l})=>(l.setSelection(be.near(r.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[qc({find:rA,type:this.type,getAttributes:e=>({language:e[1]})}),qc({find:iA,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Qe({key:new tt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:a,schema:o}=e.state,u=o.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},u)),a.selection.$from.parent.type!==this.type&&a.setSelection(Te.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),aA=rn.create({name:"doc",topNode:!0,content:"block+"}),oA=rn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",ht(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:l,dispatch:c})=>{if(c&&u&&a){const d=u.filter(h=>o.includes(h.type.name));l.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),uA=rn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>ne(I({},e),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>qc({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),lA=rn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",ht(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!yw(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return Xg(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var o;if(a){const{$to:u}=s.selection,l=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Te.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(he.create(s.doc,u.pos)):s.setSelection(Te.create(s.doc,u.pos));else{const c=(o=u.parent.type.contentMatch.defaultType)==null?void 0:o.create();c&&(s.insert(l,c),s.setSelection(Te.create(s.doc,l+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[mb({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),cA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,dA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,fA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,hA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,pA=Ni.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ns({find:cA,type:this.type}),ns({find:fA,type:this.type})]},addPasteRules(){return[wi({find:dA,type:this.type}),wi({find:hA,type:this.type})]}});const mA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",gA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Xc="numeric",Jc="ascii",Zc="alpha",$s="asciinumeric",Ps="alphanumeric",ed="domain",Qb="emoji",bA="scheme",xA="slashscheme",$l="whitespace";function yA(e,t){return e in t||(t[e]=[]),t[e]}function di(e,t,n){t[Xc]&&(t[$s]=!0,t[Ps]=!0),t[Jc]&&(t[$s]=!0,t[Zc]=!0),t[$s]&&(t[Ps]=!0),t[Zc]&&(t[Ps]=!0),t[Ps]&&(t[ed]=!0),t[Qb]&&(t[ed]=!0);for(const r in t){const i=yA(r,n);i.indexOf(e)<0&&i.push(e)}}function EA(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function en(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}en.groups={};en.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||en.groups;let i;return t&&t.j?i=t:(i=new en(t),n&&r&&di(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(e[a]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||en.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let a,o=i.go(e);if(o?(a=new en,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new en,s){if(r)if(a.t&&typeof a.t=="string"){const u=Object.assign(EA(a.t,r),n);di(s,u,r)}else n&&di(s,n,r);a.t=s}return i.j[e]=a,a}};const Oe=(e,t,n,r,i)=>e.ta(t,n,r,i),ut=(e,t,n,r,i)=>e.tr(t,n,r,i),Z0=(e,t,n,r,i)=>e.ts(t,n,r,i),X=(e,t,n,r,i)=>e.tt(t,n,r,i),ur="WORD",td="UWORD",Xb="ASCIINUMERICAL",Jb="ALPHANUMERICAL",ha="LOCALHOST",nd="TLD",rd="UTLD",bo="SCHEME",ji="SLASH_SCHEME",yf="NUM",id="WS",Ef="NL",Vs="OPENBRACE",qs="CLOSEBRACE",Yo="OPENBRACKET",Ko="CLOSEBRACKET",Go="OPENPAREN",Qo="CLOSEPAREN",Xo="OPENANGLEBRACKET",Jo="CLOSEANGLEBRACKET",Zo="FULLWIDTHLEFTPAREN",eu="FULLWIDTHRIGHTPAREN",tu="LEFTCORNERBRACKET",nu="RIGHTCORNERBRACKET",ru="LEFTWHITECORNERBRACKET",iu="RIGHTWHITECORNERBRACKET",su="FULLWIDTHLESSTHAN",au="FULLWIDTHGREATERTHAN",ou="AMPERSAND",uu="APOSTROPHE",lu="ASTERISK",Mr="AT",cu="BACKSLASH",du="BACKTICK",fu="CARET",Br="COLON",Tf="COMMA",hu="DOLLAR",Hn="DOT",pu="EQUALS",kf="EXCLAMATION",yn="HYPHEN",Ws="PERCENT",mu="PIPE",gu="PLUS",bu="POUND",Ys="QUERY",Sf="QUOTE",Zb="FULLWIDTHMIDDLEDOT",wf="SEMI",Un="SLASH",Ks="TILDE",xu="UNDERSCORE",e2="EMOJI",yu="SYM";var t2=Object.freeze({__proto__:null,ALPHANUMERICAL:Jb,AMPERSAND:ou,APOSTROPHE:uu,ASCIINUMERICAL:Xb,ASTERISK:lu,AT:Mr,BACKSLASH:cu,BACKTICK:du,CARET:fu,CLOSEANGLEBRACKET:Jo,CLOSEBRACE:qs,CLOSEBRACKET:Ko,CLOSEPAREN:Qo,COLON:Br,COMMA:Tf,DOLLAR:hu,DOT:Hn,EMOJI:e2,EQUALS:pu,EXCLAMATION:kf,FULLWIDTHGREATERTHAN:au,FULLWIDTHLEFTPAREN:Zo,FULLWIDTHLESSTHAN:su,FULLWIDTHMIDDLEDOT:Zb,FULLWIDTHRIGHTPAREN:eu,HYPHEN:yn,LEFTCORNERBRACKET:tu,LEFTWHITECORNERBRACKET:ru,LOCALHOST:ha,NL:Ef,NUM:yf,OPENANGLEBRACKET:Xo,OPENBRACE:Vs,OPENBRACKET:Yo,OPENPAREN:Go,PERCENT:Ws,PIPE:mu,PLUS:gu,POUND:bu,QUERY:Ys,QUOTE:Sf,RIGHTCORNERBRACKET:nu,RIGHTWHITECORNERBRACKET:iu,SCHEME:bo,SEMI:wf,SLASH:Un,SLASH_SCHEME:ji,SYM:yu,TILDE:Ks,TLD:nd,UNDERSCORE:xu,UTLD:rd,UWORD:td,WORD:ur,WS:id});const sr=/[a-z]/,As=new RegExp("\\p{L}","u"),Vl=new RegExp("\\p{Emoji}","u"),ar=/\d/,ql=/\s/,ep="\r",Wl=`
`,TA="",kA="",Yl="";let Za=null,eo=null;function SA(e=[]){const t={};en.groups=t;const n=new en;Za==null&&(Za=tp(mA)),eo==null&&(eo=tp(gA)),X(n,"'",uu),X(n,"{",Vs),X(n,"}",qs),X(n,"[",Yo),X(n,"]",Ko),X(n,"(",Go),X(n,")",Qo),X(n,"<",Xo),X(n,">",Jo),X(n,"",Zo),X(n,"",eu),X(n,"",tu),X(n,"",nu),X(n,"",ru),X(n,"",iu),X(n,"",su),X(n,"",au),X(n,"&",ou),X(n,"*",lu),X(n,"@",Mr),X(n,"`",du),X(n,"^",fu),X(n,":",Br),X(n,",",Tf),X(n,"$",hu),X(n,".",Hn),X(n,"=",pu),X(n,"!",kf),X(n,"-",yn),X(n,"%",Ws),X(n,"|",mu),X(n,"+",gu),X(n,"#",bu),X(n,"?",Ys),X(n,'"',Sf),X(n,"/",Un),X(n,";",wf),X(n,"~",Ks),X(n,"_",xu),X(n,"\\",cu),X(n,"",Zb);const r=ut(n,ar,yf,{[Xc]:!0});ut(r,ar,r);const i=ut(r,sr,Xb,{[$s]:!0}),s=ut(r,As,Jb,{[Ps]:!0}),a=ut(n,sr,ur,{[Jc]:!0});ut(a,ar,i),ut(a,sr,a),ut(i,ar,i),ut(i,sr,i);const o=ut(n,As,td,{[Zc]:!0});ut(o,sr),ut(o,ar,s),ut(o,As,o),ut(s,ar,s),ut(s,sr),ut(s,As,s);const u=X(n,Wl,Ef,{[$l]:!0}),l=X(n,ep,id,{[$l]:!0}),c=ut(n,ql,id,{[$l]:!0});X(n,Yl,c),X(l,Wl,u),X(l,Yl,c),ut(l,ql,c),X(c,ep),X(c,Wl),ut(c,ql,c),X(c,Yl,c);const d=ut(n,Vl,e2,{[Qb]:!0});X(d,"#"),ut(d,Vl,d),X(d,TA,d);const h=X(d,kA);X(h,"#"),ut(h,Vl,d);const f=[[sr,a],[ar,i]],m=[[sr,null],[As,o],[ar,s]];for(let b=0;b<Za.length;b++)Ir(n,Za[b],nd,ur,f);for(let b=0;b<eo.length;b++)Ir(n,eo[b],rd,td,m);di(nd,{tld:!0,ascii:!0},t),di(rd,{utld:!0,alpha:!0},t),Ir(n,"file",bo,ur,f),Ir(n,"mailto",bo,ur,f),Ir(n,"http",ji,ur,f),Ir(n,"https",ji,ur,f),Ir(n,"ftp",ji,ur,f),Ir(n,"ftps",ji,ur,f),di(bo,{scheme:!0,ascii:!0},t),di(ji,{slashscheme:!0,ascii:!0},t),e=e.sort((b,y)=>b[0]>y[0]?1:-1);for(let b=0;b<e.length;b++){const y=e[b][0],E=e[b][1]?{[bA]:!0}:{[xA]:!0};y.indexOf("-")>=0?E[ed]=!0:sr.test(y)?ar.test(y)?E[$s]=!0:E[Jc]=!0:E[Xc]=!0,Z0(n,y,y,E)}return Z0(n,"localhost",ha,{ascii:!0}),n.jd=new en(yu),{start:n,tokens:Object.assign({groups:t},t2)}}function n2(e,t){const n=wA(t.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let s=0,a=0;for(;a<r;){let o=e,u=null,l=0,c=null,d=-1,h=-1;for(;a<r&&(u=o.go(n[a]));)o=u,o.accepts()?(d=0,h=0,c=o):d>=0&&(d+=n[a].length,h++),l+=n[a].length,s+=n[a].length,a++;s-=d,a-=h,l-=d,i.push({t:c.t,v:t.slice(s-l,s),s:s-l,e:s})}return i}function wA(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,a=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}function Ir(e,t,n,r,i){let s;const a=t.length;for(let o=0;o<a-1;o++){const u=t[o];e.j[u]?s=e.j[u]:(s=new en(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new en(n),s.jr=i.slice(),e.j[t[a-1]]=s,s}function tp(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let a=parseInt(e.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(e[r]),r++}return t}const pa={defaultProtocol:"http",events:null,format:np,formatHref:np,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Cf(e,t=null){let n=Object.assign({},pa);e&&(n=Object.assign(n,e instanceof Cf?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}Cf.prototype={o:pa,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:pa[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function np(e){return e}function r2(e,t){this.t="token",this.v=e,this.tk=t}r2.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=pa.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),a={},o=e.get("className",n,t),u=e.get("target",n,t),l=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return a.href=r,o&&(a.class=o),u&&(a.target=u),l&&(a.rel=l),c&&Object.assign(a,c),{tagName:i,attributes:a,content:s,eventListeners:d}}};function Qu(e,t){class n extends r2{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const rp=Qu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ip=Qu("text"),CA=Qu("nl"),to=Qu("url",{isLink:!0,toHref(e=pa.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ha&&e[1].t===Br}}),xn=e=>new en(e);function AA({groups:e}){const t=e.domain.concat([ou,lu,Mr,cu,du,fu,hu,pu,yn,yf,Ws,mu,gu,bu,Un,yu,Ks,xu]),n=[uu,Br,Tf,Hn,kf,Ws,Ys,Sf,wf,Xo,Jo,Vs,qs,Ko,Yo,Go,Qo,Zo,eu,tu,nu,ru,iu,su,au],r=[ou,uu,lu,cu,du,fu,hu,pu,yn,Vs,qs,Ws,mu,gu,bu,Ys,Un,yu,Ks,xu],i=xn(),s=X(i,Ks);Oe(s,r,s),Oe(s,e.domain,s);const a=xn(),o=xn(),u=xn();Oe(i,e.domain,a),Oe(i,e.scheme,o),Oe(i,e.slashscheme,u),Oe(a,r,s),Oe(a,e.domain,a);const l=X(a,Mr);X(s,Mr,l),X(o,Mr,l),X(u,Mr,l);const c=X(s,Hn);Oe(c,r,s),Oe(c,e.domain,s);const d=xn();Oe(l,e.domain,d),Oe(d,e.domain,d);const h=X(d,Hn);Oe(h,e.domain,d);const f=xn(rp);Oe(h,e.tld,f),Oe(h,e.utld,f),X(l,ha,f);const m=X(d,yn);X(m,yn,m),Oe(m,e.domain,d),Oe(f,e.domain,d),X(f,Hn,h),X(f,yn,m);const b=X(f,Br);Oe(b,e.numeric,rp);const y=X(a,yn),x=X(a,Hn);X(y,yn,y),Oe(y,e.domain,a),Oe(x,r,s),Oe(x,e.domain,a);const E=xn(to);Oe(x,e.tld,E),Oe(x,e.utld,E),Oe(E,e.domain,a),Oe(E,r,s),X(E,Hn,x),X(E,yn,y),X(E,Mr,l);const T=X(E,Br),v=xn(to);Oe(T,e.numeric,v);const C=xn(to),w=xn();Oe(C,t,C),Oe(C,n,w),Oe(w,t,C),Oe(w,n,w),X(E,Un,C),X(v,Un,C);const D=X(o,Br),B=X(u,Br),j=X(B,Un),_=X(j,Un);Oe(o,e.domain,a),X(o,Hn,x),X(o,yn,y),Oe(u,e.domain,a),X(u,Hn,x),X(u,yn,y),Oe(D,e.domain,C),X(D,Un,C),X(D,Ys,C),Oe(_,e.domain,C),Oe(_,t,C),X(_,Un,C);const $=[[Vs,qs],[Yo,Ko],[Go,Qo],[Xo,Jo],[Zo,eu],[tu,nu],[ru,iu],[su,au]];for(let H=0;H<$.length;H++){const[Y,G]=$[H],Z=X(C,Y);X(w,Y,Z),X(Z,G,C);const ue=xn(to);Oe(Z,t,ue);const ye=xn();Oe(Z,n),Oe(ue,t,ue),Oe(ue,n,ye),Oe(ye,t,ue),Oe(ye,n,ye),X(ue,G,C),X(ye,G,C)}return X(i,ha,E),X(i,Ef,CA),{start:i,tokens:t2}}function NA(e,t,n){let r=n.length,i=0,s=[],a=[];for(;i<r;){let o=e,u=null,l=null,c=0,d=null,h=-1;for(;i<r&&!(u=o.go(n[i].t));)a.push(n[i++]);for(;i<r&&(l=u||o.go(n[i].t));)u=null,o=l,o.accepts()?(h=0,d=o):h>=0&&h++,i++,c++;if(h<0)i-=c,i<r&&(a.push(n[i]),i++);else{a.length>0&&(s.push(Kl(ip,t,a)),a=[]),i-=h,c-=h;const f=d.t,m=n.slice(i-c,i);s.push(Kl(f,t,m))}}return a.length>0&&s.push(Kl(ip,t,a)),s}function Kl(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const IA=typeof console!="undefined"&&console&&console.warn||(()=>{}),OA="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ge={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function vA(){return en.groups={},Ge.scanner=null,Ge.parser=null,Ge.tokenQueue=[],Ge.pluginQueue=[],Ge.customSchemes=[],Ge.initialized=!1,Ge}function sp(e,t=!1){if(Ge.initialized&&IA(`linkifyjs: already initialized - will not register custom scheme "${e}" ${OA}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ge.customSchemes.push([e,t])}function _A(){Ge.scanner=SA(Ge.customSchemes);for(let e=0;e<Ge.tokenQueue.length;e++)Ge.tokenQueue[e][1]({scanner:Ge.scanner});Ge.parser=AA(Ge.scanner.tokens);for(let e=0;e<Ge.pluginQueue.length;e++)Ge.pluginQueue[e][1]({scanner:Ge.scanner,parser:Ge.parser});return Ge.initialized=!0,Ge}function Af(e){return Ge.initialized||_A(),NA(Ge.parser.start,e,n2(Ge.scanner.start,e))}Af.scan=n2;function i2(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new Cf(n),i=Af(e),s=[];for(let a=0;a<i.length;a++){const o=i[a];o.isLink&&(!t||o.t===t)&&r.check(o)&&s.push(o.toFormattedObject(r))}return s}var Nf="[\0- -\u2029]",LA=new RegExp(Nf),RA=new RegExp(`${Nf}$`),MA=new RegExp(Nf,"g");function DA(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function PA(e){return new Qe({key:new tt("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(l=>l.docChanged)&&!n.doc.eq(r.doc),s=t.some(l=>l.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,o=Ug(n.doc,[...t]);if(Gg(o).forEach(({newRange:l})=>{const c=P6(r.doc,l,f=>f.isTextblock);let d,h;if(c.length>1)d=c[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const f=r.doc.textBetween(l.from,l.to," "," ");if(!RA.test(f))return;d=c[0],h=r.doc.textBetween(d.pos,l.to,void 0," ")}if(d&&h){const f=h.split(LA).filter(Boolean);if(f.length<=0)return!1;const m=f[f.length-1],b=d.pos+h.lastIndexOf(m);if(!m)return!1;const y=Af(m).map(x=>x.toObject(e.defaultProtocol));if(!DA(y))return!1;y.filter(x=>x.isLink).map(x=>ne(I({},x),{from:b+x.start+1,to:b+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{of(x.from,x.to,r.doc).some(E=>E.mark.type===e.type)||a.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function BA(e){return new Qe({key:new tt("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let c=r.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;a=d.find(h=>h.nodeName==="A")}if(!a)return!1;const o=Kg(t.state,e.type.name),u=(i=a==null?void 0:a.href)!=null?i:o.href,l=(s=a==null?void 0:a.target)!=null?s:o.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),a&&u?(window.open(u,l),!0):!1}}})}function FA(e){return new Qe({key:new tt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:a}=s;if(a)return!1;let o="";r.content.forEach(l=>{o+=l.textContent});const u=i2(o,{defaultProtocol:e.defaultProtocol}).find(l=>l.isLink&&l.value===o);return!o||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function ni(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(MA,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var HA=Ni.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){sp(e);return}sp(e.scheme,e.optionalSlashes)})},onDestroy(){vA()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ni(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ni(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ni(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ht(this.options.HTMLAttributes,e),0]:["a",ht(this.options.HTMLAttributes,ne(I({},e),{href:""})),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ni(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ni(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[wi({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=i2(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!ni(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(PA({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ni(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(BA({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(FA({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),UA=Object.defineProperty,jA=(e,t)=>{for(var n in t)UA(e,n,{get:t[n],enumerable:!0})},zA="listItem",ap="textStyle",op=/^\s*([-+*])\s$/,s2=rn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zA,this.editor.getAttributes(ap)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=rs({find:op,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=rs({find:op,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ap),editor:this.editor})),[e]}}),a2=rn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",ht(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$A={};jA($A,{findListItemPos:()=>Aa,getNextListDepth:()=>If,handleBackspace:()=>sd,handleDelete:()=>ad,hasListBefore:()=>o2,hasListItemAfter:()=>VA,hasListItemBefore:()=>u2,listItemHasSubList:()=>l2,nextListIsDeeper:()=>c2,nextListIsHigher:()=>d2});var Aa=(e,t)=>{const{$from:n}=t.selection,r=yt(e,t.schema);let i=null,s=n.depth,a=n.pos,o=null;for(;s>0&&o===null;)i=n.node(s),i.type===r?o=s:(s-=1,a-=1);return o===null?null:{$pos:t.doc.resolve(a),depth:o}},If=(e,t)=>{const n=Aa(e,t);if(!n)return!1;const[,r]=q6(t,e,n.$pos.pos+4);return r},o2=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},u2=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},l2=(e,t,n)=>{if(!n)return!1;const r=yt(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},sd=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Kr(e.state,t)&&o2(e.state,t,n)){const{$anchor:o}=e.state.selection,u=e.state.doc.resolve(o.before()-1),l=[];u.node().descendants((h,f)=>{h.type.name===t&&l.push({node:h,pos:f})});const c=l.at(-1);if(!c)return!1;const d=e.state.doc.resolve(u.start()+c.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},d.end()).joinForward().run()}if(!Kr(e.state,t)||!G6(e.state))return!1;const r=Aa(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=l2(t,e.state,s);return u2(t,e.state)&&!a?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},c2=(e,t)=>{const n=If(e,t),r=Aa(e,t);return!r||!n?!1:n>r.depth},d2=(e,t)=>{const n=If(e,t),r=Aa(e,t);return!r||!n?!1:n<r.depth},ad=(e,t)=>{if(!Kr(e.state,t)||!K6(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:c2(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():d2(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},VA=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},f2=nt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&ad(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&ad(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&sd(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&sd(e,n,r)&&(t=!0)}),t}}}}),qA="listItem",up="textStyle",lp=/^(\d+)\.\s$/,h2=rn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const r=e,{start:t}=r,n=on(r,["start"]);return t===1?["ol",ht(this.options.HTMLAttributes,n),0]:["ol",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qA,this.editor.getAttributes(up)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=rs({find:lp,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=rs({find:lp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>I({start:+t[1]},this.editor.getAttributes(up)),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),WA=/^\s*(\[([( |x])?\])\s$/,YA=rn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",ht(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?ne(I({},e),{Tab:()=>this.editor.commands.sinkListItem(this.name)}):e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),u=document.createElement("div"),l=c=>{var d,h;o.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,c,o.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return l(e),s.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",c=>c.preventDefault()),o.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const m=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,ne(I({},m==null?void 0:m.attrs),{checked:d})),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,d)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{i.setAttribute(c,d)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,s.append(o,a),i.append(s,u),Object.entries(t).forEach(([c,d])=>{i.setAttribute(c,d)}),{dom:i,contentDOM:u,update:c=>c.type!==this.type?!1:(i.dataset.checked=c.attrs.checked,o.checked=c.attrs.checked,l(c),!0)}}},addInputRules(){return[rs({find:WA,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),KA=rn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",ht(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});nt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(s2.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(a2.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(f2.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(h2.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(YA.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(KA.configure(this.options.taskList)),e}});var GA=rn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JA=Ni.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ns({find:QA,type:this.type})]},addPasteRules(){return[wi({find:XA,type:this.type})]}}),ZA=rn.create({name:"text",group:"inline"}),e4=Ni.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function t4(e={}){return new Qe({view(t){return new n4(t,e)}})}class n4{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,o=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,h=t.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let m=f.getBoundingClientRect(),b=d?m.bottom:m.top;d&&h&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*o;r={left:m.left,right:m.right,top:b-y,bottom:b+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*a;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let l,c;if(!u||u==document.body&&getComputedStyle(u).position=="static")l=-pageXOffset,c=-pageYOffset;else{let d=u.getBoundingClientRect(),h=d.width/u.offsetWidth,f=d.height/u.offsetHeight;l=d.left-u.scrollLeft*h,c=d.top-u.scrollTop*f}this.element.style.left=(r.left-l)/a+"px",this.element.style.top=(r.top-c)/o+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=F1(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class lt extends be{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return lt.valid(r)?new lt(r):be.near(r)}content(){return ie.empty}eq(t){return t instanceof lt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new lt(t.resolve(n.pos))}getBookmark(){return new Of(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!r4(t)||!i4(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&lt.valid(t))return t;let i=t.pos,s=null;for(let a=t.depth;;a--){let o=t.node(a);if(n>0?t.indexAfter(a)<o.childCount:t.index(a)>0){s=o.child(n>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=n;let u=t.doc.resolve(i);if(lt.valid(u))return u}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!he.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=a,i+=n;let o=t.doc.resolve(i);if(lt.valid(o))return o}return null}}}lt.prototype.visible=!1;lt.findFrom=lt.findGapCursorFrom;be.jsonID("gapcursor",lt);class Of{constructor(t){this.pos=t}map(t){return new Of(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return lt.valid(n)?new lt(n):be.near(n)}}function r4(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function i4(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function s4(){return new Qe({props:{decorations:l4,createSelectionBetween(e,t,n){return t.pos==n.pos&&lt.valid(n)?new lt(n):null},handleClick:o4,handleKeyDown:a4,handleDOMEvents:{beforeinput:u4}}})}const a4=Kd({ArrowLeft:no("horiz",-1),ArrowRight:no("horiz",1),ArrowUp:no("vert",-1),ArrowDown:no("vert",1)});function no(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let a=r.selection,o=t>0?a.$to:a.$from,u=a.empty;if(a instanceof Te){if(!s.endOfTextblock(n)||o.depth==0)return!1;u=!1,o=r.doc.resolve(t>0?o.after():o.before())}let l=lt.findGapCursorFrom(o,t,u);return l?(i&&i(r.tr.setSelection(new lt(l))),!0):!1}}function o4(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!lt.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&he.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new lt(r))),!0)}function u4(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof lt))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=q.empty;for(let a=r.length-1;a>=0;a--)i=q.from(r[a].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new ie(i,0,0));return s.setSelection(Te.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function l4(e){if(!(e.selection instanceof lt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",et.create(e.doc,[Bt.widget(e.selection.head,t,{key:"gapcursor"})])}var Eu=200,Ot=function(){};Ot.prototype.append=function(t){return t.length?(t=Ot.from(t),!this.length&&t||t.length<Eu&&this.leafAppend(t)||this.length<Eu&&t.leafPrepend(this)||this.appendInner(t)):this};Ot.prototype.prepend=function(t){return t.length?Ot.from(t).append(this):this};Ot.prototype.appendInner=function(t){return new c4(this,t)};Ot.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ot.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ot.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ot.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ot.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(t(s,a))},n,r),i};Ot.from=function(t){return t instanceof Ot?t:t&&t.length?new p2(t):Ot.empty};var p2=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,a,o){for(var u=s;u<a;u++)if(i(this.values[u],o+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,a,o){for(var u=s-1;u>=a;u--)if(i(this.values[u],o+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Eu)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Eu)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Ot);Ot.empty=new p2([]);var c4=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,a){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),a)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,a+o)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,a){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,a+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Ot);const d4=500;class Nn{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=t.tr,o,u,l=[],c=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new jn(d.map));let f=d.step.map(i.slice(s)),m;f&&a.maybeStep(f).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],l.push(new jn(m,void 0,void 0,l.length+c.length))),s--,m&&i.appendMap(m,s)}else a.maybeStep(d.step);if(d.selection)return o=i?d.selection.map(i.slice(s)):d.selection,u=new Nn(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:o}}addTransform(t,n,r,i){let s=[],a=this.eventCount,o=this.items,u=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),h=new jn(t.mapping.maps[c],d,n),f;(f=u&&u.merge(h))&&(h=f,c?s.pop():o=o.slice(0,o.length-1)),s.push(h),n&&(a++,n=void 0),i||(u=h)}let l=a-r.depth;return l>h4&&(o=f4(o,l),a-=l),new Nn(o.append(s),a)}remapping(t,n){let r=new sa;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,n),r}addMaps(t){return this.eventCount==0?this:new Nn(this.items.append(t.map(n=>new jn(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,a=t.steps.length,o=this.eventCount;this.items.forEach(h=>{h.selection&&o--},i);let u=n;this.items.forEach(h=>{let f=s.getMirror(--u);if(f==null)return;a=Math.min(a,f);let m=s.maps[f];if(h.step){let b=t.steps[f].invert(t.docs[f]),y=h.selection&&h.selection.map(s.slice(u+1,f));y&&o++,r.push(new jn(m,b,y))}else r.push(new jn(m))},i);let l=[];for(let h=n;h<a;h++)l.push(new jn(s.maps[h]));let c=this.items.slice(0,i).append(l).append(r),d=new Nn(c,o);return d.emptyItemCount()>d4&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((a,o)=>{if(o>=t)i.push(a),a.selection&&s++;else if(a.step){let u=a.step.map(n.slice(r)),l=u&&u.getMap();if(r--,l&&n.appendMap(l,r),u){let c=a.selection&&a.selection.map(n.slice(r));c&&s++;let d=new jn(l.invert(),u,c),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else a.map&&r--},this.items.length,0),new Nn(Ot.from(i.reverse()),s)}}Nn.empty=new Nn(Ot.empty,0);function f4(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class jn{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new jn(n.getMap().invert(),n,this.selection)}}}class Dr{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const h4=20;function p4(e,t,n,r){let i=n.getMeta(xi),s;if(i)return i.historyState;n.getMeta(b4)&&(e=new Dr(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(xi))return a.getMeta(xi).redo?new Dr(e.done.addTransform(n,void 0,r,xo(t)),e.undone,cp(n.mapping.maps),e.prevTime,e.prevComposition):new Dr(e.done,e.undone.addTransform(n,void 0,r,xo(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),u=e.prevTime==0||!a&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!m4(n,e.prevRanges)),l=a?Gl(e.prevRanges,n.mapping):cp(n.mapping.maps);return new Dr(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,xo(t)),Nn.empty,l,n.time,o==null?e.prevComposition:o)}else return(s=n.getMeta("rebased"))?new Dr(e.done.rebased(n,s),e.undone.rebased(n,s),Gl(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Dr(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Gl(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function m4(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function cp(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,a)=>t.push(s,a));return t}function Gl(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function g4(e,t,n){let r=xo(t),i=xi.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Dr(n?o:s.remaining,n?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(xi,{redo:n,historyState:u})}let Ql=!1,dp=null;function xo(e){let t=e.plugins;if(dp!=t){Ql=!1,dp=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ql=!0;break}}return Ql}const xi=new tt("history"),b4=new tt("closeHistory");function x4(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Qe({key:xi,state:{init(){return new Dr(Nn.empty,Nn.empty,null,0,-1)},apply(t,n,r){return p4(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?g2:r=="historyRedo"?b2:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function m2(e,t){return(n,r)=>{let i=xi.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=g4(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const g2=m2(!1,!0),b2=m2(!0,!0);nt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Qe({key:new tt("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,o=0,u=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const l=r.tr.deleteRange(o,u);return e=!0,l}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,u=s-r,l=o-u,c=o;return t.deleteRange(l,c),!(this.storage.characters({node:t.doc})>r)}})]}});var y4=nt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[t4(this.options)]}});nt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Qe({key:new tt("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return et.create(e,[]);let a=0;this.options.mode==="deepest"&&e.descendants((u,l)=>{if(u.isText)return;if(!(i>=l&&i<=l+u.nodeSize-1))return!1;a+=1});let o=0;return e.descendants((u,l)=>{if(u.isText||!(i>=l&&i<=l+u.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&a-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";s.push(Bt.node(l,l+u.nodeSize,{class:this.options.className}))}),et.create(e,s)}}})]}});var E4=nt.create({name:"gapCursor",addProseMirrorPlugins(){return[s4()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Fe(fe(e,"allowGapCursor",n)))!=null?t:null}}});nt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Qe({key:new tt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((a,o)=>{const u=r>=o&&r<=o+a.nodeSize,l=!a.isLeaf&&Vu(a);if((u||!this.options.showOnlyCurrent)&&l){const c=[this.options.emptyNodeClass];s&&c.push(this.options.emptyEditorClass);const d=Bt.node(o,o+a.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:u}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),et.create(e,i)}}})]}});nt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Qe({key:new tt("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||Xg(n.selection)||e.view.dragging?null:et.create(n.doc,[Bt.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function fp({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var T4=nt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new tt(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Qe({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:a,schema:o}=i,u=e.getState(i),l=s.content.size,c=o.nodes[this.options.node];if(u)return a.insert(l,c.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!fp({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!fp({node:i,types:t})}}})]}}),k4=nt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>g2(e,t),redo:()=>({state:e,dispatch:t})=>b2(e,t)}},addProseMirrorPlugins(){return[x4(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),S4=nt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(ZC.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(KC.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(s2.configure(this.options.bulletList)),this.options.code!==!1&&i.push(nA.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(sA.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(aA.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(y4.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(E4.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(oA.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(uA.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(k4.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(lA.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(pA.configure(this.options.italic)),this.options.listItem!==!1&&i.push(a2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(f2.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(HA.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(h2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(GA.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(JA.configure(this.options.strike)),this.options.text!==!1&&i.push(ZA.configure(this.options.text)),this.options.underline!==!1&&i.push(e4.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(T4.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),w4=S4,C4=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,A4=rn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",ht(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[mb({find:C4,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),N4=A4,I4=nt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),O4=I4;function hp(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const a=n.slice(i,r).trim();(a||!s)&&t.push(a),i=r+1,r=n.indexOf(",",i)}return t}function x2(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const v4=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_4=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,L4={};function pp(e,t){return(L4.jsx?_4:v4).test(e)}const R4=/[ \t\n\f\r]/g;function M4(e){return typeof e=="object"?e.type==="text"?mp(e.value):!1:mp(e)}function mp(e){return e.replace(R4,"")===""}let Na=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};Na.prototype.normal={};Na.prototype.property={};Na.prototype.space=void 0;function y2(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Na(n,r,t)}function ma(e){return e.toLowerCase()}let sn=class{constructor(t,n){this.attribute=n,this.property=t}};sn.prototype.attribute="";sn.prototype.booleanish=!1;sn.prototype.boolean=!1;sn.prototype.commaOrSpaceSeparated=!1;sn.prototype.commaSeparated=!1;sn.prototype.defined=!1;sn.prototype.mustUseProperty=!1;sn.prototype.number=!1;sn.prototype.overloadedBoolean=!1;sn.prototype.property="";sn.prototype.spaceSeparated=!1;sn.prototype.space=void 0;let D4=0;const Ne=Ii(),gt=Ii(),od=Ii(),ee=Ii(),We=Ii(),Qi=Ii(),un=Ii();function Ii(){return gl(2,++D4)}const ud=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ne,booleanish:gt,commaOrSpaceSeparated:un,commaSeparated:Qi,number:ee,overloadedBoolean:od,spaceSeparated:We},Symbol.toStringTag,{value:"Module"})),Xl=Object.keys(ud);let vf=class extends sn{constructor(t,n,r,i){let s=-1;if(super(t,n),gp(this,"space",i),typeof r=="number")for(;++s<Xl.length;){const a=Xl[s];gp(this,Xl[s],(r&ud[a])===ud[a])}}};vf.prototype.defined=!0;function gp(e,t,n){n&&(e[t]=n)}function ms(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new vf(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[ma(r)]=r,n[ma(s.attribute)]=r}return new Na(t,n,e.space)}const E2=ms({properties:{ariaActiveDescendant:null,ariaAtomic:gt,ariaAutoComplete:null,ariaBusy:gt,ariaChecked:gt,ariaColCount:ee,ariaColIndex:ee,ariaColSpan:ee,ariaControls:We,ariaCurrent:null,ariaDescribedBy:We,ariaDetails:null,ariaDisabled:gt,ariaDropEffect:We,ariaErrorMessage:null,ariaExpanded:gt,ariaFlowTo:We,ariaGrabbed:gt,ariaHasPopup:null,ariaHidden:gt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:We,ariaLevel:ee,ariaLive:null,ariaModal:gt,ariaMultiLine:gt,ariaMultiSelectable:gt,ariaOrientation:null,ariaOwns:We,ariaPlaceholder:null,ariaPosInSet:ee,ariaPressed:gt,ariaReadOnly:gt,ariaRelevant:null,ariaRequired:gt,ariaRoleDescription:We,ariaRowCount:ee,ariaRowIndex:ee,ariaRowSpan:ee,ariaSelected:gt,ariaSetSize:ee,ariaSort:null,ariaValueMax:ee,ariaValueMin:ee,ariaValueNow:ee,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function T2(e,t){return t in e?e[t]:t}function k2(e,t){return T2(e,t.toLowerCase())}const P4=ms({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qi,acceptCharset:We,accessKey:We,action:null,allow:null,allowFullScreen:Ne,allowPaymentRequest:Ne,allowUserMedia:Ne,alt:null,as:null,async:Ne,autoCapitalize:null,autoComplete:We,autoFocus:Ne,autoPlay:Ne,blocking:We,capture:null,charSet:null,checked:Ne,cite:null,className:We,cols:ee,colSpan:null,content:null,contentEditable:gt,controls:Ne,controlsList:We,coords:ee|Qi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ne,defer:Ne,dir:null,dirName:null,disabled:Ne,download:od,draggable:gt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ne,formTarget:null,headers:We,height:ee,hidden:od,high:ee,href:null,hrefLang:null,htmlFor:We,httpEquiv:We,id:null,imageSizes:null,imageSrcSet:null,inert:Ne,inputMode:null,integrity:null,is:null,isMap:Ne,itemId:null,itemProp:We,itemRef:We,itemScope:Ne,itemType:We,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ne,low:ee,manifest:null,max:null,maxLength:ee,media:null,method:null,min:null,minLength:ee,multiple:Ne,muted:Ne,name:null,nonce:null,noModule:Ne,noValidate:Ne,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ne,optimum:ee,pattern:null,ping:We,placeholder:null,playsInline:Ne,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ne,referrerPolicy:null,rel:We,required:Ne,reversed:Ne,rows:ee,rowSpan:ee,sandbox:We,scope:null,scoped:Ne,seamless:Ne,selected:Ne,shadowRootClonable:Ne,shadowRootDelegatesFocus:Ne,shadowRootMode:null,shape:null,size:ee,sizes:null,slot:null,span:ee,spellCheck:gt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ee,step:null,style:null,tabIndex:ee,target:null,title:null,translate:null,type:null,typeMustMatch:Ne,useMap:null,value:gt,width:ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:We,axis:null,background:null,bgColor:null,border:ee,borderColor:null,bottomMargin:ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ne,declare:Ne,event:null,face:null,frame:null,frameBorder:null,hSpace:ee,leftMargin:ee,link:null,longDesc:null,lowSrc:null,marginHeight:ee,marginWidth:ee,noResize:Ne,noHref:Ne,noShade:Ne,noWrap:Ne,object:null,profile:null,prompt:null,rev:null,rightMargin:ee,rules:null,scheme:null,scrolling:gt,standby:null,summary:null,text:null,topMargin:ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ne,disableRemotePlayback:Ne,prefix:null,property:null,results:ee,security:null,unselectable:null},space:"html",transform:k2}),B4=ms({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:un,accentHeight:ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ee,amplitude:ee,arabicForm:null,ascent:ee,attributeName:null,attributeType:null,azimuth:ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ee,by:null,calcMode:null,capHeight:ee,className:We,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ee,diffuseConstant:ee,direction:null,display:null,dur:null,divisor:ee,dominantBaseline:null,download:Ne,dx:null,dy:null,edgeMode:null,editable:null,elevation:ee,enableBackground:null,end:null,event:null,exponent:ee,externalResourcesRequired:null,fill:null,fillOpacity:ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qi,g2:Qi,glyphName:Qi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ee,horizOriginX:ee,horizOriginY:ee,id:null,ideographic:ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ee,k:ee,k1:ee,k2:ee,k3:ee,k4:ee,kernelMatrix:un,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ee,overlineThickness:ee,paintOrder:null,panose1:null,path:null,pathLength:ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:We,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ee,pointsAtY:ee,pointsAtZ:ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:un,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:un,rev:un,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:un,requiredFeatures:un,requiredFonts:un,requiredFormats:un,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ee,specularExponent:ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ee,strikethroughThickness:ee,string:null,stroke:null,strokeDashArray:un,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ee,strokeOpacity:ee,strokeWidth:null,style:null,surfaceScale:ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:un,tabIndex:ee,tableValues:null,target:null,targetX:ee,targetY:ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:un,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ee,underlineThickness:ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ee,values:null,vAlphabetic:ee,vMathematical:ee,vectorEffect:null,vHanging:ee,vIdeographic:ee,version:null,vertAdvY:ee,vertOriginX:ee,vertOriginY:ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:T2}),S2=ms({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),w2=ms({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:k2}),C2=ms({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),F4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},H4=/[A-Z]/g,bp=/-[a-z]/g,U4=/^data[-\w.:]+$/i;function _f(e,t){const n=ma(t);let r=t,i=sn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&U4.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(bp,z4);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!bp.test(s)){let a=s.replace(H4,j4);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=vf}return new i(r,t)}function j4(e){return"-"+e.toLowerCase()}function z4(e){return e.charAt(1).toUpperCase()}const Xu=y2([E2,P4,S2,w2,C2],"html"),gs=y2([E2,B4,S2,w2,C2],"svg");function xp(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function A2(e){return e.join(" ").trim()}var Di={},Jl,yp;function $4(){if(yp)return Jl;yp=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,l="/",c="*",d="",h="comment",f="declaration";Jl=function(b,y){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];y=y||{};var x=1,E=1;function T(Y){var G=Y.match(t);G&&(x+=G.length);var Z=Y.lastIndexOf(u);E=~Z?Y.length-Z:E+Y.length}function v(){var Y={line:x,column:E};return function(G){return G.position=new C(Y),B(),G}}function C(Y){this.start=Y,this.end={line:x,column:E},this.source=y.source}C.prototype.content=b;function w(Y){var G=new Error(y.source+":"+x+":"+E+": "+Y);if(G.reason=Y,G.filename=y.source,G.line=x,G.column=E,G.source=b,!y.silent)throw G}function D(Y){var G=Y.exec(b);if(G){var Z=G[0];return T(Z),b=b.slice(Z.length),G}}function B(){D(n)}function j(Y){var G;for(Y=Y||[];G=_();)G!==!1&&Y.push(G);return Y}function _(){var Y=v();if(!(l!=b.charAt(0)||c!=b.charAt(1))){for(var G=2;d!=b.charAt(G)&&(c!=b.charAt(G)||l!=b.charAt(G+1));)++G;if(G+=2,d===b.charAt(G-1))return w("End of comment missing");var Z=b.slice(2,G-2);return E+=2,T(Z),b=b.slice(G),E+=2,Y({type:h,comment:Z})}}function $(){var Y=v(),G=D(r);if(G){if(_(),!D(i))return w("property missing ':'");var Z=D(s),ue=Y({type:f,property:m(G[0].replace(e,d)),value:Z?m(Z[0].replace(e,d)):d});return D(a),ue}}function H(){var Y=[];j(Y);for(var G;G=$();)G!==!1&&(Y.push(G),j(Y));return Y}return B(),H()};function m(b){return b?b.replace(o,d):d}return Jl}var Ep;function V4(){if(Ep)return Di;Ep=1;var e=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=n;var t=e($4());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var a=(0,t.default)(r),o=typeof i=="function";return a.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;o?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return Di}var Ns={},Tp;function q4(){if(Tp)return Ns;Tp=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(l){return!l||n.test(l)||e.test(l)},a=function(l,c){return c.toUpperCase()},o=function(l,c){return"".concat(c,"-")},u=function(l,c){return c===void 0&&(c={}),s(l)?l:(l=l.toLowerCase(),c.reactCompat?l=l.replace(i,o):l=l.replace(r,o),l.replace(t,a))};return Ns.camelCase=u,Ns}var Is,kp;function W4(){if(kp)return Is;kp=1;var e=Is&&Is.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(V4()),n=q4();function r(i,s){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(o,u){o&&u&&(a[(0,n.camelCase)(o,s)]=u)}),a}return r.default=r,Is=r,Is}var Y4=W4();const K4=Ta(Y4),Ju=N2("end"),tr=N2("start");function N2(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function G4(e){const t=tr(e),n=Ju(e);if(t&&n)return{start:t,end:n}}function Gs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Sp(e.position):"start"in e||"end"in e?Sp(e):"line"in e||"column"in e?ld(e):""}function ld(e){return wp(e&&e.line)+":"+wp(e&&e.column)}function Sp(e){return ld(e&&e.start)+"-"+ld(e&&e.end)}function wp(e){return e&&typeof e=="number"?e:1}class Ut extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s=I({},n)),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Gs(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ut.prototype.file="";Ut.prototype.name="";Ut.prototype.reason="";Ut.prototype.message="";Ut.prototype.stack="";Ut.prototype.column=void 0;Ut.prototype.line=void 0;Ut.prototype.ancestors=void 0;Ut.prototype.cause=void 0;Ut.prototype.fatal=void 0;Ut.prototype.place=void 0;Ut.prototype.ruleId=void 0;Ut.prototype.source=void 0;const Lf={}.hasOwnProperty,Q4=new Map,X4=/[A-Z]/g,J4=new Set(["table","tbody","thead","tfoot","tr"]),Z4=new Set(["td","th"]),I2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=uN(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=oN(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?gs:Xu,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=O2(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function O2(e,t,n){if(t.type==="element")return tN(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return nN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return iN(e,t,n);if(t.type==="mdxjsEsm")return rN(e,t);if(t.type==="root")return sN(e,t,n);if(t.type==="text")return aN(e,t)}function tN(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=gs,e.schema=i),e.ancestors.push(t);const s=_2(e,t.tagName,!1),a=lN(e,t);let o=Mf(e,t);return J4.has(t.tagName)&&(o=o.filter(function(u){return typeof u=="string"?!M4(u):!0})),v2(e,a,s,t),Rf(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function nN(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ga(e,t.position)}function rN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ga(e,t.position)}function iN(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=gs,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:_2(e,t.name,!0),a=cN(e,t),o=Mf(e,t);return v2(e,a,s,t),Rf(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function sN(e,t,n){const r={};return Rf(r,Mf(e,t)),e.create(t,e.Fragment,r,n)}function aN(e,t){return t.value}function v2(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Rf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function oN(e,t,n){return r;function r(i,s,a,o){const l=Array.isArray(a.children)?n:t;return o?l(s,a,o):l(s,a)}}function uN(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),u=tr(r);return t(i,s,a,o,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function lN(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Lf.call(t.properties,i)){const s=dN(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&Z4.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function cN(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else ga(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else ga(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Mf(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Q4;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;a=u+"-"+l,i.set(u,l+1)}}const o=O2(e,s,a);o!==void 0&&n.push(o)}return n}function dN(e,t,n){const r=_f(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?x2(n):A2(n)),r.property==="style"){let i=typeof n=="object"?n:fN(e,String(n));return e.stylePropertyNameCase==="css"&&(i=hN(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?F4[r.property]||r.property:r.attribute,n]}}function fN(e,t){try{return K4(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Ut("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=I2+"#cannot-parse-style-attribute",i}}function _2(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=pp(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=pp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Lf.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ga(e)}function ga(e,t){const n=new Ut("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=I2+"#cannot-handle-mdx-estrees-without-createevaluater",n}function hN(e){const t={};let n;for(n in e)Lf.call(e,n)&&(t[pN(n)]=e[n]);return t}function pN(e){let t=e.replace(X4,mN);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function mN(e){return"-"+e.toLowerCase()}const Zl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gN={};function Df(e,t){const n=gN,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return L2(e,r,i)}function L2(e,t,n){if(bN(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Cp(e.children,t,n)}return Array.isArray(e)?Cp(e,t,n):""}function Cp(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=L2(e[i],t,n);return r.join("")}function bN(e){return!!(e&&typeof e=="object")}const Ap=document.createElement("i");function Pf(e){const t="&"+e+";";Ap.innerHTML=t;const n=Ap.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hn(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Tn(e,t){return e.length>0?(hn(e,e.length,0,t),e):t}const Np={}.hasOwnProperty;function R2(e){const t={};let n=-1;for(;++n<e.length;)xN(t,e[n]);return t}function xN(e,t){let n;for(n in t){const i=(Np.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){Np.call(i,a)||(i[a]=[]);const o=s[a];yN(i[a],Array.isArray(o)?o:o?[o]:[])}}}function yN(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hn(e,0,0,r)}function M2(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function _n(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Wt=Jr(/[A-Za-z]/),Ft=Jr(/[\dA-Za-z]/),EN=Jr(/[#-'*+\--9=?A-Z^-~]/);function Tu(e){return e!==null&&(e<32||e===127)}const cd=Jr(/\d/),TN=Jr(/[\dA-Fa-f]/),kN=Jr(/[!-/:-@[-`{-~]/);function ge(e){return e!==null&&e<-2}function $e(e){return e!==null&&(e<0||e===32)}function Le(e){return e===-2||e===-1||e===32}const Zu=Jr(new RegExp("\\p{P}|\\p{S}","u")),Ci=Jr(/\s/);function Jr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function bs(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&Ft(e.charCodeAt(n+1))&&Ft(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function De(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(u){return Le(u)?(e.enter(n),o(u)):t(u)}function o(u){return Le(u)&&s++<i?(e.consume(u),o):(e.exit(n),t(u))}}const SN={tokenize:wN};function wN(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),De(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return ge(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const CN={tokenize:AN},Ip={tokenize:NN};function AN(e){const t=this,n=[];let r=0,i,s,a;return o;function o(T){if(r<n.length){const v=n[r];return t.containerState=v[1],e.attempt(v[0].continuation,u,l)(T)}return l(T)}function u(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&E();const v=t.events.length;let C=v,w;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){w=t.events[C][1].end;break}x(r);let D=v;for(;D<t.events.length;)t.events[D][1].end=I({},w),D++;return hn(t.events,C+1,0,t.events.slice(v)),t.events.length=D,l(T)}return o(T)}function l(T){if(r===n.length){if(!i)return h(T);if(i.currentConstruct&&i.currentConstruct.concrete)return m(T);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ip,c,d)(T)}function c(T){return i&&E(),x(r),h(T)}function d(T){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(T)}function h(T){return t.containerState={},e.attempt(Ip,f,m)(T)}function f(T){return r++,n.push([t.currentConstruct,t.containerState]),h(T)}function m(T){if(T===null){i&&E(),x(0),e.consume(T);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(T)}function b(T){if(T===null){y(e.exit("chunkFlow"),!0),x(0),e.consume(T);return}return ge(T)?(e.consume(T),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(T),b)}function y(T,v){const C=t.sliceStream(T);if(v&&C.push(null),T.previous=s,s&&(s.next=T),s=T,i.defineSkip(T.start),i.write(C),t.parser.lazy[T.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<a&&(!i.events[w][1].end||i.events[w][1].end.offset>a))return;const D=t.events.length;let B=D,j,_;for(;B--;)if(t.events[B][0]==="exit"&&t.events[B][1].type==="chunkFlow"){if(j){_=t.events[B][1].end;break}j=!0}for(x(r),w=D;w<t.events.length;)t.events[w][1].end=I({},_),w++;hn(t.events,B+1,0,t.events.slice(D)),t.events.length=w}}function x(T){let v=n.length;for(;v-- >T;){const C=n[v];t.containerState=C[1],C[0].exit.call(t,e)}n.length=T}function E(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function NN(e,t,n){return De(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function us(e){if(e===null||$e(e)||Ci(e))return 1;if(Zu(e))return 2}function el(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const dd={name:"attention",resolveAll:IN,tokenize:ON};function IN(e,t){let n=-1,r,i,s,a,o,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=I({},e[r][1].end),h=I({},e[n][1].start);Op(d,-u),Op(h,u),a={type:u>1?"strongSequence":"emphasisSequence",start:d,end:I({},e[r][1].end)},o={type:u>1?"strongSequence":"emphasisSequence",start:I({},e[n][1].start),end:h},s={type:u>1?"strongText":"emphasisText",start:I({},e[r][1].end),end:I({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:I({},a.start),end:I({},o.end)},e[r][1].end=I({},a.start),e[n][1].start=I({},o.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Tn(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Tn(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=Tn(l,el(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Tn(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Tn(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,hn(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function ON(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=us(r);let s;return a;function a(u){return s=u,e.enter("attentionSequence"),o(u)}function o(u){if(u===s)return e.consume(u),o;const l=e.exit("attentionSequence"),c=us(u),d=!c||c===2&&i||n.includes(u),h=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?d:d&&(i||!h)),l._close=!!(s===42?h:h&&(c||!d)),t(u)}}function Op(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const vN={name:"autolink",tokenize:_N};function _N(e,t,n){let r=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(f){return Wt(f)?(e.consume(f),a):f===64?n(f):l(f)}function a(f){return f===43||f===45||f===46||Ft(f)?(r=1,o(f)):l(f)}function o(f){return f===58?(e.consume(f),r=0,u):(f===43||f===45||f===46||Ft(f))&&r++<32?(e.consume(f),o):(r=0,l(f))}function u(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Tu(f)?n(f):(e.consume(f),u)}function l(f){return f===64?(e.consume(f),c):EN(f)?(e.consume(f),l):n(f)}function c(f){return Ft(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,c):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):h(f)}function h(f){if((f===45||Ft(f))&&r++<63){const m=f===45?h:d;return e.consume(f),m}return n(f)}}const Ia={partial:!0,tokenize:LN};function LN(e,t,n){return r;function r(s){return Le(s)?De(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||ge(s)?t(s):n(s)}}const D2={continuation:{tokenize:MN},exit:DN,name:"blockQuote",tokenize:RN};function RN(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Le(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function MN(e,t,n){const r=this;return i;function i(a){return Le(a)?De(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(D2,t,n)(a)}}function DN(e){e.exit("blockQuote")}const P2={name:"characterEscape",tokenize:PN};function PN(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return kN(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const B2={name:"characterReference",tokenize:BN};function BN(e,t,n){const r=this;let i=0,s,a;return o;function o(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=Ft,c(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=TN,c):(e.enter("characterReferenceValue"),s=7,a=cd,c(d))}function c(d){if(d===59&&i){const h=e.exit("characterReferenceValue");return a===Ft&&!Pf(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&i++<s?(e.consume(d),c):n(d)}}const vp={partial:!0,tokenize:HN},_p={concrete:!0,name:"codeFenced",tokenize:FN};function FN(e,t,n){const r=this,i={partial:!0,tokenize:C};let s=0,a=0,o;return u;function u(w){return l(w)}function l(w){const D=r.events[r.events.length-1];return s=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,o=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===o?(a++,e.consume(w),c):a<3?n(w):(e.exit("codeFencedFenceSequence"),Le(w)?De(e,d,"whitespace")(w):d(w))}function d(w){return w===null||ge(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(vp,b,v)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||ge(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):Le(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),De(e,f,"whitespace")(w)):w===96&&w===o?n(w):(e.consume(w),h)}function f(w){return w===null||ge(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||ge(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===o?n(w):(e.consume(w),m)}function b(w){return e.attempt(i,v,y)(w)}function y(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),x}function x(w){return s>0&&Le(w)?De(e,E,"linePrefix",s+1)(w):E(w)}function E(w){return w===null||ge(w)?e.check(vp,b,v)(w):(e.enter("codeFlowValue"),T(w))}function T(w){return w===null||ge(w)?(e.exit("codeFlowValue"),E(w)):(e.consume(w),T)}function v(w){return e.exit("codeFenced"),t(w)}function C(w,D,B){let j=0;return _;function _(Z){return w.enter("lineEnding"),w.consume(Z),w.exit("lineEnding"),$}function $(Z){return w.enter("codeFencedFence"),Le(Z)?De(w,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):H(Z)}function H(Z){return Z===o?(w.enter("codeFencedFenceSequence"),Y(Z)):B(Z)}function Y(Z){return Z===o?(j++,w.consume(Z),Y):j>=a?(w.exit("codeFencedFenceSequence"),Le(Z)?De(w,G,"whitespace")(Z):G(Z)):B(Z)}function G(Z){return Z===null||ge(Z)?(w.exit("codeFencedFence"),D(Z)):B(Z)}}}function HN(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const ec={name:"codeIndented",tokenize:jN},UN={partial:!0,tokenize:zN};function jN(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),De(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?u(l):ge(l)?e.attempt(UN,a,u)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||ge(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function u(l){return e.exit("codeIndented"),t(l)}}function zN(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):ge(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):De(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):ge(a)?i(a):n(a)}}const $N={name:"codeText",previous:qN,resolve:VN,tokenize:WN};function VN(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function qN(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WN(e,t,n){let r=0,i,s;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),o(d)}function o(d){return d===96?(e.consume(d),r++,o):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):ge(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||ge(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),l)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}class YN{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n==null?Number.POSITIVE_INFINITY:n;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Os(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Os(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Os(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Os(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Os(this.left,n.reverse())}}}function Os(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function F2(e){const t={};let n=-1,r,i,s,a,o,u,l;const c=new YN(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,KN(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=c.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end=I({},c.get(i)[1].start),o=c.slice(i,n),o.unshift(r),c.splice(i,n-i+1,o))}}return hn(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function KN(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,u=[],l={};let c,d,h=-1,f=n,m=0,b=0;const y=[b];for(;f;){for(;e.get(++i)[1]!==f;);s.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(b=h+1,y.push(b),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const x=o.slice(y[h],y[h+1]),E=s.pop();u.push([E,E+x.length-1]),e.splice(E,2,x)}for(u.reverse(),h=-1;++h<u.length;)l[m+u[h][0]]=m+u[h][1],m+=u[h][1]-u[h][0]-1;return l}const GN={resolve:XN,tokenize:JN},QN={partial:!0,tokenize:ZN};function XN(e){return F2(e),e}function JN(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):ge(o)?e.check(QN,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ZN(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),De(e,s,"linePrefix")}function s(a){if(a===null||ge(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function H2(e,t,n,r,i,s,a,o,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return x===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(x),e.exit(s),h):x===null||x===32||x===41||Tu(x)?n(x):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),b(x))}function h(x){return x===62?(e.enter(s),e.consume(x),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===62?(e.exit("chunkString"),e.exit(o),h(x)):x===null||x===60||ge(x)?n(x):(e.consume(x),x===92?m:f)}function m(x){return x===60||x===62||x===92?(e.consume(x),f):f(x)}function b(x){return!c&&(x===null||x===41||$e(x))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(x)):c<l&&x===40?(e.consume(x),c++,b):x===41?(e.consume(x),c--,b):x===null||x===32||x===40||Tu(x)?n(x):(e.consume(x),x===92?y:b)}function y(x){return x===40||x===41||x===92?(e.consume(x),b):b(x)}}function U2(e,t,n,r,i,s){const a=this;let o=0,u;return l;function l(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(s),c}function c(f){return o>999||f===null||f===91||f===93&&!u||f===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(s),e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):ge(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||ge(f)||o++>999?(e.exit("chunkString"),c(f)):(e.consume(f),u||(u=!Le(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(e.consume(f),o++,d):d(f)}}function j2(e,t,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,u):n(h)}function u(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(s),l(h))}function l(h){return h===a?(e.exit(s),u(a)):h===null?n(h):ge(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),De(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===a||h===null||ge(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?d:c)}function d(h){return h===a||h===92?(e.consume(h),c):c(h)}}function Qs(e,t){let n;return r;function r(i){return ge(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Le(i)?De(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const eI={name:"definition",tokenize:nI},tI={partial:!0,tokenize:rI};function nI(e,t,n){const r=this;let i;return s;function s(f){return e.enter("definition"),a(f)}function a(f){return U2.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return i=_n(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),u):n(f)}function u(f){return $e(f)?Qs(e,l)(f):l(f)}function l(f){return H2(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return e.attempt(tI,d,d)(f)}function d(f){return Le(f)?De(e,h,"whitespace")(f):h(f)}function h(f){return f===null||ge(f)?(e.exit("definition"),r.parser.defined.push(i),t(f)):n(f)}}function rI(e,t,n){return r;function r(o){return $e(o)?Qs(e,i)(o):n(o)}function i(o){return j2(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Le(o)?De(e,a,"whitespace")(o):a(o)}function a(o){return o===null||ge(o)?t(o):n(o)}}const iI={name:"hardBreakEscape",tokenize:sI};function sI(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return ge(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const aI={name:"headingAtx",resolve:oI,tokenize:uI};function oI(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hn(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function uI(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(e.consume(c),a):c===null||$e(c)?(e.exit("atxHeadingSequence"),o(c)):n(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||ge(c)?(e.exit("atxHeading"),t(c)):Le(c)?De(e,o,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),o(c))}function l(c){return c===null||c===35||$e(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),l)}}const lI=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lp=["pre","script","style","textarea"],cI={concrete:!0,name:"htmlFlow",resolveTo:hI,tokenize:pI},dI={partial:!0,tokenize:gI},fI={partial:!0,tokenize:mI};function hI(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function pI(e,t,n){const r=this;let i,s,a,o,u;return l;function l(O){return c(O)}function c(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),d}function d(O){return O===33?(e.consume(O),h):O===47?(e.consume(O),s=!0,b):O===63?(e.consume(O),i=3,r.interrupt?t:S):Wt(O)?(e.consume(O),a=String.fromCharCode(O),y):n(O)}function h(O){return O===45?(e.consume(O),i=2,f):O===91?(e.consume(O),i=5,o=0,m):Wt(O)?(e.consume(O),i=4,r.interrupt?t:S):n(O)}function f(O){return O===45?(e.consume(O),r.interrupt?t:S):n(O)}function m(O){const ke="CDATA[";return O===ke.charCodeAt(o++)?(e.consume(O),o===ke.length?r.interrupt?t:H:m):n(O)}function b(O){return Wt(O)?(e.consume(O),a=String.fromCharCode(O),y):n(O)}function y(O){if(O===null||O===47||O===62||$e(O)){const ke=O===47,st=a.toLowerCase();return!ke&&!s&&Lp.includes(st)?(i=1,r.interrupt?t(O):H(O)):lI.includes(a.toLowerCase())?(i=6,ke?(e.consume(O),x):r.interrupt?t(O):H(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):s?E(O):T(O))}return O===45||Ft(O)?(e.consume(O),a+=String.fromCharCode(O),y):n(O)}function x(O){return O===62?(e.consume(O),r.interrupt?t:H):n(O)}function E(O){return Le(O)?(e.consume(O),E):_(O)}function T(O){return O===47?(e.consume(O),_):O===58||O===95||Wt(O)?(e.consume(O),v):Le(O)?(e.consume(O),T):_(O)}function v(O){return O===45||O===46||O===58||O===95||Ft(O)?(e.consume(O),v):C(O)}function C(O){return O===61?(e.consume(O),w):Le(O)?(e.consume(O),C):T(O)}function w(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),u=O,D):Le(O)?(e.consume(O),w):B(O)}function D(O){return O===u?(e.consume(O),u=null,j):O===null||ge(O)?n(O):(e.consume(O),D)}function B(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||$e(O)?C(O):(e.consume(O),B)}function j(O){return O===47||O===62||Le(O)?T(O):n(O)}function _(O){return O===62?(e.consume(O),$):n(O)}function $(O){return O===null||ge(O)?H(O):Le(O)?(e.consume(O),$):n(O)}function H(O){return O===45&&i===2?(e.consume(O),ue):O===60&&i===1?(e.consume(O),ye):O===62&&i===4?(e.consume(O),pe):O===63&&i===3?(e.consume(O),S):O===93&&i===5?(e.consume(O),z):ge(O)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(dI,Ae,Y)(O)):O===null||ge(O)?(e.exit("htmlFlowData"),Y(O)):(e.consume(O),H)}function Y(O){return e.check(fI,G,Ae)(O)}function G(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),Z}function Z(O){return O===null||ge(O)?Y(O):(e.enter("htmlFlowData"),H(O))}function ue(O){return O===45?(e.consume(O),S):H(O)}function ye(O){return O===47?(e.consume(O),a="",me):H(O)}function me(O){if(O===62){const ke=a.toLowerCase();return Lp.includes(ke)?(e.consume(O),pe):H(O)}return Wt(O)&&a.length<8?(e.consume(O),a+=String.fromCharCode(O),me):H(O)}function z(O){return O===93?(e.consume(O),S):H(O)}function S(O){return O===62?(e.consume(O),pe):O===45&&i===2?(e.consume(O),S):H(O)}function pe(O){return O===null||ge(O)?(e.exit("htmlFlowData"),Ae(O)):(e.consume(O),pe)}function Ae(O){return e.exit("htmlFlow"),t(O)}}function mI(e,t,n){const r=this;return i;function i(a){return ge(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function gI(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ia,t,n)}}const bI={name:"htmlText",tokenize:xI};function xI(e,t,n){const r=this;let i,s,a;return o;function o(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),u}function u(S){return S===33?(e.consume(S),l):S===47?(e.consume(S),C):S===63?(e.consume(S),T):Wt(S)?(e.consume(S),B):n(S)}function l(S){return S===45?(e.consume(S),c):S===91?(e.consume(S),s=0,m):Wt(S)?(e.consume(S),E):n(S)}function c(S){return S===45?(e.consume(S),f):n(S)}function d(S){return S===null?n(S):S===45?(e.consume(S),h):ge(S)?(a=d,ye(S)):(e.consume(S),d)}function h(S){return S===45?(e.consume(S),f):d(S)}function f(S){return S===62?ue(S):S===45?h(S):d(S)}function m(S){const pe="CDATA[";return S===pe.charCodeAt(s++)?(e.consume(S),s===pe.length?b:m):n(S)}function b(S){return S===null?n(S):S===93?(e.consume(S),y):ge(S)?(a=b,ye(S)):(e.consume(S),b)}function y(S){return S===93?(e.consume(S),x):b(S)}function x(S){return S===62?ue(S):S===93?(e.consume(S),x):b(S)}function E(S){return S===null||S===62?ue(S):ge(S)?(a=E,ye(S)):(e.consume(S),E)}function T(S){return S===null?n(S):S===63?(e.consume(S),v):ge(S)?(a=T,ye(S)):(e.consume(S),T)}function v(S){return S===62?ue(S):T(S)}function C(S){return Wt(S)?(e.consume(S),w):n(S)}function w(S){return S===45||Ft(S)?(e.consume(S),w):D(S)}function D(S){return ge(S)?(a=D,ye(S)):Le(S)?(e.consume(S),D):ue(S)}function B(S){return S===45||Ft(S)?(e.consume(S),B):S===47||S===62||$e(S)?j(S):n(S)}function j(S){return S===47?(e.consume(S),ue):S===58||S===95||Wt(S)?(e.consume(S),_):ge(S)?(a=j,ye(S)):Le(S)?(e.consume(S),j):ue(S)}function _(S){return S===45||S===46||S===58||S===95||Ft(S)?(e.consume(S),_):$(S)}function $(S){return S===61?(e.consume(S),H):ge(S)?(a=$,ye(S)):Le(S)?(e.consume(S),$):j(S)}function H(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),i=S,Y):ge(S)?(a=H,ye(S)):Le(S)?(e.consume(S),H):(e.consume(S),G)}function Y(S){return S===i?(e.consume(S),i=void 0,Z):S===null?n(S):ge(S)?(a=Y,ye(S)):(e.consume(S),Y)}function G(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||$e(S)?j(S):(e.consume(S),G)}function Z(S){return S===47||S===62||$e(S)?j(S):n(S)}function ue(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):n(S)}function ye(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),me}function me(S){return Le(S)?De(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):z(S)}function z(S){return e.enter("htmlTextData"),a(S)}}const Bf={name:"labelEnd",resolveAll:kI,resolveTo:SI,tokenize:wI},yI={tokenize:CI},EI={tokenize:AI},TI={tokenize:NI};function kI(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&hn(e,0,e.length,n),e}function SI(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:I({},e[s][1].start),end:I({},e[e.length-1][1].end)},l={type:"label",start:I({},e[s][1].start),end:I({},e[a][1].end)},c={type:"labelText",start:I({},e[s+r+2][1].end),end:I({},e[a-2][1].start)};return o=[["enter",u,t],["enter",l,t]],o=Tn(o,e.slice(s+1,s+r+3)),o=Tn(o,[["enter",c,t]]),o=Tn(o,el(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=Tn(o,[["exit",c,t],e[a-2],e[a-1],["exit",l,t]]),o=Tn(o,e.slice(a+1)),o=Tn(o,[["exit",u,t]]),hn(e,s,e.length,o),e}function wI(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?d(h):(a=r.parser.defined.includes(_n(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),u):n(h)}function u(h){return h===40?e.attempt(yI,c,a?c:d)(h):h===91?e.attempt(EI,c,a?l:d)(h):a?c(h):d(h)}function l(h){return e.attempt(TI,c,d)(h)}function c(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function CI(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return $e(d)?Qs(e,s)(d):s(d)}function s(d){return d===41?c(d):H2(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return $e(d)?Qs(e,u)(d):c(d)}function o(d){return n(d)}function u(d){return d===34||d===39||d===40?j2(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return $e(d)?Qs(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function AI(e,t,n){const r=this;return i;function i(o){return U2.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(_n(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function NI(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const II={name:"labelStartImage",resolveAll:Bf.resolveAll,tokenize:OI};function OI(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const vI={name:"labelStartLink",resolveAll:Bf.resolveAll,tokenize:_I};function _I(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const tc={name:"lineEnding",tokenize:LI};function LI(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),De(e,t,"linePrefix")}}const yo={name:"thematicBreak",tokenize:RI};function RI(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||ge(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Le(l)?De(e,o,"whitespace")(l):o(l))}}const Zt={continuation:{tokenize:BI},exit:HI,name:"list",tokenize:PI},MI={partial:!0,tokenize:UI},DI={partial:!0,tokenize:FI};function PI(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:cd(f)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(yo,n,l)(f):l(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(f)}return n(f)}function u(f){return cd(f)&&++a<10?(e.consume(f),u):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),l(f)):n(f)}function l(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Ia,r.interrupt?n:c,e.attempt(MI,h,d))}function c(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function d(f){return Le(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function BI(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ia,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,De(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!Le(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(DI,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,De(e,e.attempt(Zt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function FI(e,t,n){const r=this;return De(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function HI(e){e.exit(this.containerState.type)}function UI(e,t,n){const r=this;return De(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Le(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Rp={name:"setextUnderline",resolveTo:jI,tokenize:zI};function jI(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:I({},e[r][1].start),end:I({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=I({},e[s][1].end)):e[r][1]=a,e.push(["exit",a,t]),e}function zI(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),Le(l)?De(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||ge(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const $I={tokenize:VI};function VI(e){const t=this,n=e.attempt(Ia,r,e.attempt(this.parser.constructs.flowInitial,i,De(e,e.attempt(this.parser.constructs.flow,i,e.attempt(GN,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qI={resolveAll:$2()},WI=z2("string"),YI=z2("text");function z2(e){return{resolveAll:$2(e==="text"?KI:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(c){return l(c)?s(c):o(c)}function o(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const d=i[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function $2(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function KI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)u=!0,o++;else if(l!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const l={type:n===e.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:I({},r.end)};r.end=I({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const GI={42:Zt,43:Zt,45:Zt,48:Zt,49:Zt,50:Zt,51:Zt,52:Zt,53:Zt,54:Zt,55:Zt,56:Zt,57:Zt,62:D2},QI={91:eI},XI={[-2]:ec,[-1]:ec,32:ec},JI={35:aI,42:yo,45:[Rp,yo],60:cI,61:Rp,95:yo,96:_p,126:_p},ZI={38:B2,92:P2},e5={[-5]:tc,[-4]:tc,[-3]:tc,33:II,38:B2,42:dd,60:[vN,bI],91:vI,92:[iI,P2],93:Bf,95:dd,96:$N},t5={null:[dd,qI]},n5={null:[42,95]},r5={null:[]},i5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:n5,contentInitial:QI,disable:r5,document:GI,flow:JI,flowInitial:XI,insideSpan:t5,string:ZI,text:e5},Symbol.toStringTag,{value:"Module"}));function s5(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const u={attempt:D(C),check:D(w),consume:E,enter:T,exit:v,interrupt:D(w,{interrupt:!0})},l={code:null,containerState:{},defineSkip:b,events:[],now:m,parser:e,previous:null,sliceSerialize:h,sliceStream:f,write:d};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function d($){return a=Tn(a,$),y(),a[a.length-1]!==null?[]:(B(t,0),l.events=el(s,l.events,l),l.events)}function h($,H){return o5(f($),H)}function f($){return a5(a,$)}function m(){const{_bufferIndex:$,_index:H,line:Y,column:G,offset:Z}=r;return{_bufferIndex:$,_index:H,line:Y,column:G,offset:Z}}function b($){i[$.line]=$.column,_()}function y(){let $;for(;r._index<a.length;){const H=a[r._index];if(typeof H=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<H.length;)x(H.charCodeAt(r._bufferIndex));else x(H)}}function x($){c=c($)}function E($){ge($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,_()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=$}function T($,H){const Y=H||{};return Y.type=$,Y.start=m(),l.events.push(["enter",Y,l]),o.push(Y),Y}function v($){const H=o.pop();return H.end=m(),l.events.push(["exit",H,l]),H}function C($,H){B($,H.from)}function w($,H){H.restore()}function D($,H){return Y;function Y(G,Z,ue){let ye,me,z,S;return Array.isArray(G)?Ae(G):"tokenize"in G?Ae([G]):pe(G);function pe(Se){return Et;function Et(mt){const kt=mt!==null&&Se[mt],Rt=mt!==null&&Se.null,He=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(Rt)?Rt:Rt?[Rt]:[]];return Ae(He)(mt)}}function Ae(Se){return ye=Se,me=0,Se.length===0?ue:O(Se[me])}function O(Se){return Et;function Et(mt){return S=j(),z=Se,Se.partial||(l.currentConstruct=Se),Se.name&&l.parser.constructs.disable.null.includes(Se.name)?st():Se.tokenize.call(H?Object.assign(Object.create(l),H):l,u,ke,st)(mt)}}function ke(Se){return $(z,S),Z}function st(Se){return S.restore(),++me<ye.length?O(ye[me]):ue}}}function B($,H){$.resolveAll&&!s.includes($)&&s.push($),$.resolve&&hn(l.events,H,l.events.length-H,$.resolve(l.events.slice(H),l)),$.resolveTo&&(l.events=$.resolveTo(l.events,l))}function j(){const $=m(),H=l.previous,Y=l.currentConstruct,G=l.events.length,Z=Array.from(o);return{from:G,restore:ue};function ue(){r=$,l.previous=H,l.currentConstruct=Y,l.events.length=G,o=Z,_()}}function _(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function a5(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function o5(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function u5(e){const r={constructs:R2([i5,...(e||{}).extensions||[]]),content:i(SN),defined:[],document:i(CN),flow:i($I),lazy:{},string:i(WI),text:i(YI)};return r;function i(s){return a;function a(o){return s5(r,s,o)}}}function l5(e){for(;!F2(e););return e}const Mp=/[\0\t\n\r]/g;function c5(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const u=[];let l,c,d,h,f;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Mp.lastIndex=d,l=Mp.exec(s),h=l&&l.index!==void 0?l.index:s.length,f=s.charCodeAt(h),!l){t=s.slice(d);break}if(f===10&&d===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<h&&(u.push(s.slice(d,h)),e+=h-d),f){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return o&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const d5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function f5(e){return e.replace(d5,h5)}function h5(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return M2(n.slice(s?2:1),s?16:10)}return Pf(n)||e}const V2={}.hasOwnProperty;function p5(e,t,n){return typeof t!="string"&&(n=t,t=void 0),m5(n)(l5(u5(n).document().write(c5()(e,t,!0))))}function m5(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s($t),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(Cr),blockQuote:s(Rt),characterEscape:j,characterReference:j,codeFenced:s(He),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(He,a),codeText:s(at,a),codeTextData:j,data:j,codeFlowValue:j,definition:s(pn),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(wr),hardBreakEscape:s(mn),hardBreakTrailing:s(mn),htmlFlow:s(an,a),htmlFlowData:j,htmlText:s(an,a),htmlTextData:j,image:s(Pn),label:a,link:s($t),listItem:s(Ee),listItemValue:h,listOrdered:s(Bn,d),listUnordered:s(Bn),paragraph:s(Me),reference:O,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Cr),strong:s(ot),thematicBreak:s(rt)},exit:{atxHeading:u(),atxHeadingSequence:C,autolink:u(),autolinkEmail:kt,autolinkProtocol:mt,blockQuote:u(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:st,characterReferenceMarkerNumeric:st,characterReferenceValue:Se,characterReference:Et,codeFenced:u(y),codeFencedFence:b,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:_,codeIndented:u(x),codeText:u(Z),codeTextData:_,data:_,definition:u(),definitionDestinationString:v,definitionLabelString:E,definitionTitleString:T,emphasis:u(),hardBreakEscape:u(H),hardBreakTrailing:u(H),htmlFlow:u(Y),htmlFlowData:_,htmlText:u(G),htmlTextData:_,image:u(ye),label:z,labelText:me,lineEnding:$,link:u(ue),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ke,resourceDestinationString:S,resourceTitleString:pe,resource:Ae,setextHeading:u(B),setextHeadingLineSequence:D,setextHeadingText:w,strong:u(),thematicBreak:u()}};q2(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(P){let J={type:"root",children:[]};const xe={stack:[J],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:c,data:n},le=[];let Ie=-1;for(;++Ie<P.length;)if(P[Ie][1].type==="listOrdered"||P[Ie][1].type==="listUnordered")if(P[Ie][0]==="enter")le.push(Ie);else{const dt=le.pop();Ie=i(P,dt,Ie)}for(Ie=-1;++Ie<P.length;){const dt=t[P[Ie][0]];V2.call(dt,P[Ie][1].type)&&dt[P[Ie][1].type].call(Object.assign({sliceSerialize:P[Ie][2].sliceSerialize},xe),P[Ie][1])}if(xe.tokenStack.length>0){const dt=xe.tokenStack[xe.tokenStack.length-1];(dt[1]||Dp).call(xe,void 0,dt[0])}for(J.position={start:Or(P.length>0?P[0][1].start:{line:1,column:1,offset:0}),end:Or(P.length>0?P[P.length-2][1].end:{line:1,column:1,offset:0})},Ie=-1;++Ie<t.transforms.length;)J=t.transforms[Ie](J)||J;return J}function i(P,J,xe){let le=J-1,Ie=-1,dt=!1,gn,L,oe,ve;for(;++le<=xe;){const Re=P[le];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?Ie++:Ie--,ve=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(gn&&!ve&&!Ie&&!oe&&(oe=le),ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ve=void 0}if(!Ie&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||Ie===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(gn){let je=le;for(L=void 0;je--;){const ce=P[je];if(ce[1].type==="lineEnding"||ce[1].type==="lineEndingBlank"){if(ce[0]==="exit")continue;L&&(P[L][1].type="lineEndingBlank",dt=!0),ce[1].type="lineEnding",L=je}else if(!(ce[1].type==="linePrefix"||ce[1].type==="blockQuotePrefix"||ce[1].type==="blockQuotePrefixWhitespace"||ce[1].type==="blockQuoteMarker"||ce[1].type==="listItemIndent"))break}oe&&(!L||oe<L)&&(gn._spread=!0),gn.end=Object.assign({},L?P[L][1].start:Re[1].end),P.splice(L||le,0,["exit",gn,Re[2]]),le++,xe++}if(Re[1].type==="listItemPrefix"){const je={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};gn=je,P.splice(le,0,["enter",je,Re[2]]),le++,xe++,oe=void 0,ve=!0}}}return P[J][1]._spread=dt,xe}function s(P,J){return xe;function xe(le){o.call(this,P(le),le),J&&J.call(this,le)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(P,J,xe){this.stack[this.stack.length-1].children.push(P),this.stack.push(P),this.tokenStack.push([J,xe||void 0]),P.position={start:Or(J.start),end:void 0}}function u(P){return J;function J(xe){P&&P.call(this,xe),l.call(this,xe)}}function l(P,J){const xe=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==P.type&&(J?J.call(this,P,le[0]):(le[1]||Dp).call(this,P,le[0]));else throw new Error("Cannot close `"+P.type+"` ("+Gs({start:P.start,end:P.end})+"): its not open");xe.position.end=Or(P.end)}function c(){return Df(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(P){if(this.data.expectingFirstListItemValue){const J=this.stack[this.stack.length-2];J.start=Number.parseInt(this.sliceSerialize(P),10),this.data.expectingFirstListItemValue=void 0}}function f(){const P=this.resume(),J=this.stack[this.stack.length-1];J.lang=P}function m(){const P=this.resume(),J=this.stack[this.stack.length-1];J.meta=P}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const P=this.resume(),J=this.stack[this.stack.length-1];J.value=P.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const P=this.resume(),J=this.stack[this.stack.length-1];J.value=P.replace(/(\r?\n|\r)$/g,"")}function E(P){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.label=J,xe.identifier=_n(this.sliceSerialize(P)).toLowerCase()}function T(){const P=this.resume(),J=this.stack[this.stack.length-1];J.title=P}function v(){const P=this.resume(),J=this.stack[this.stack.length-1];J.url=P}function C(P){const J=this.stack[this.stack.length-1];if(!J.depth){const xe=this.sliceSerialize(P).length;J.depth=xe}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function D(P){const J=this.stack[this.stack.length-1];J.depth=this.sliceSerialize(P).codePointAt(0)===61?1:2}function B(){this.data.setextHeadingSlurpLineEnding=void 0}function j(P){const xe=this.stack[this.stack.length-1].children;let le=xe[xe.length-1];(!le||le.type!=="text")&&(le=ct(),le.position={start:Or(P.start),end:void 0},xe.push(le)),this.stack.push(le)}function _(P){const J=this.stack.pop();J.value+=this.sliceSerialize(P),J.position.end=Or(P.end)}function $(P){const J=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=J.children[J.children.length-1];xe.position.end=Or(P.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(J.type)&&(j.call(this,P),_.call(this,P))}function H(){this.data.atHardBreak=!0}function Y(){const P=this.resume(),J=this.stack[this.stack.length-1];J.value=P}function G(){const P=this.resume(),J=this.stack[this.stack.length-1];J.value=P}function Z(){const P=this.resume(),J=this.stack[this.stack.length-1];J.value=P}function ue(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const J=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=J,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function ye(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const J=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=J,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function me(P){const J=this.sliceSerialize(P),xe=this.stack[this.stack.length-2];xe.label=f5(J),xe.identifier=_n(J).toLowerCase()}function z(){const P=this.stack[this.stack.length-1],J=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const le=P.children;xe.children=le}else xe.alt=J}function S(){const P=this.resume(),J=this.stack[this.stack.length-1];J.url=P}function pe(){const P=this.resume(),J=this.stack[this.stack.length-1];J.title=P}function Ae(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ke(P){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.label=J,xe.identifier=_n(this.sliceSerialize(P)).toLowerCase(),this.data.referenceType="full"}function st(P){this.data.characterReferenceType=P.type}function Se(P){const J=this.sliceSerialize(P),xe=this.data.characterReferenceType;let le;xe?(le=M2(J,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=Pf(J);const Ie=this.stack[this.stack.length-1];Ie.value+=le}function Et(P){const J=this.stack.pop();J.position.end=Or(P.end)}function mt(P){_.call(this,P);const J=this.stack[this.stack.length-1];J.url=this.sliceSerialize(P)}function kt(P){_.call(this,P);const J=this.stack[this.stack.length-1];J.url="mailto:"+this.sliceSerialize(P)}function Rt(){return{type:"blockquote",children:[]}}function He(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function pn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function wr(){return{type:"emphasis",children:[]}}function Cr(){return{type:"heading",depth:0,children:[]}}function mn(){return{type:"break"}}function an(){return{type:"html",value:""}}function Pn(){return{type:"image",title:null,url:"",alt:null}}function $t(){return{type:"link",title:null,url:"",children:[]}}function Bn(P){return{type:"list",ordered:P.type==="listOrdered",start:null,spread:P._spread,children:[]}}function Ee(P){return{type:"listItem",spread:P._spread,checked:null,children:[]}}function Me(){return{type:"paragraph",children:[]}}function ot(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function rt(){return{type:"thematicBreak"}}}function Or(e){return{line:e.line,column:e.column,offset:e.offset}}function q2(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?q2(e,r):g5(e,r)}}function g5(e,t){let n;for(n in t)if(V2.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Dp(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Gs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Gs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Gs({start:t.start,end:t.end})+") is still open")}function b5(e){const t=this;t.parser=n;function n(r){return p5(r,ne(I(I({},t.data("settings")),e),{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}function x5(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function y5(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function E5(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function T5(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function k5(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function S5(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=bs(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function w5(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function C5(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function W2(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function A5(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return W2(e,t);const i={src:bs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function N5(e,t){const n={src:bs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function I5(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function O5(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return W2(e,t);const i={href:bs(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function v5(e,t){const n={href:bs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _5(e,t,n){const r=e.all(t),i=n?L5(n):Y2(t),s={},a=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?a.push(...c.children):a.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,l),e.applyData(t,l)}function L5(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Y2(n[r])}return t}function Y2(e){const t=e.spread;return t==null?e.children.length>1:t}function R5(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function M5(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function D5(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function P5(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function B5(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=tr(t.children[1]),u=Ju(t.children[t.children.length-1]);o&&u&&(a.position={start:o,end:u}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function F5(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let u=-1;const l=[];for(;++u<o;){const d=t.children[u],h={},f=a?a[u]:void 0;f&&(h.align=f);let m={type:"element",tagName:s,properties:h,children:[]};d&&(m.children=e.all(d),e.patch(d,m),m=e.applyData(d,m)),l.push(m)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function H5(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Pp=9,Bp=32;function U5(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Fp(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Fp(t.slice(i),i>0,!1)),s.join("")}function Fp(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Pp||s===Bp;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Pp||s===Bp;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function j5(e,t){const n={type:"text",value:U5(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function z5(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const $5={blockquote:x5,break:y5,code:E5,delete:T5,emphasis:k5,footnoteReference:S5,heading:w5,html:C5,imageReference:A5,image:N5,inlineCode:I5,linkReference:O5,link:v5,listItem:_5,list:R5,paragraph:M5,root:D5,strong:P5,table:B5,tableCell:H5,tableRow:F5,text:j5,thematicBreak:z5,toml:ro,yaml:ro,definition:ro,footnoteDefinition:ro};function ro(){}const K2=-1,tl=0,Xs=1,ku=2,Ff=3,Hf=4,Uf=5,jf=6,G2=7,Q2=8,Hp=typeof self=="object"?self:globalThis,V5=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case tl:case K2:return n(a,i);case Xs:{const o=n([],i);for(const u of a)o.push(r(u));return o}case ku:{const o=n({},i);for(const[u,l]of a)o[r(u)]=r(l);return o}case Ff:return n(new Date(a),i);case Hf:{const{source:o,flags:u}=a;return n(new RegExp(o,u),i)}case Uf:{const o=n(new Map,i);for(const[u,l]of a)o.set(r(u),r(l));return o}case jf:{const o=n(new Set,i);for(const u of a)o.add(r(u));return o}case G2:{const{name:o,message:u}=a;return n(new Hp[o](u),i)}case Q2:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new Hp[s](a),i)};return r},Up=e=>V5(new Map,e)(0),Pi="",{toString:q5}={},{keys:W5}=Object,vs=e=>{const t=typeof e;if(t!=="object"||!e)return[tl,t];const n=q5.call(e).slice(8,-1);switch(n){case"Array":return[Xs,Pi];case"Object":return[ku,Pi];case"Date":return[Ff,Pi];case"RegExp":return[Hf,Pi];case"Map":return[Uf,Pi];case"Set":return[jf,Pi];case"DataView":return[Xs,n]}return n.includes("Array")?[Xs,n]:n.includes("Error")?[G2,n]:[ku,n]},io=([e,t])=>e===tl&&(t==="function"||t==="symbol"),Y5=(e,t,n,r)=>{const i=(a,o)=>{const u=r.push(a)-1;return n.set(o,u),u},s=a=>{if(n.has(a))return n.get(a);let[o,u]=vs(a);switch(o){case tl:{let c=a;switch(u){case"bigint":o=Q2,c=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([K2],a)}return i([o,c],a)}case Xs:{if(u){let h=a;return u==="DataView"?h=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(h=new Uint8Array(a)),i([u,[...h]],a)}const c=[],d=i([o,c],a);for(const h of a)c.push(s(h));return d}case ku:{if(u)switch(u){case"BigInt":return i([u,a.toString()],a);case"Boolean":case"Number":case"String":return i([u,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const c=[],d=i([o,c],a);for(const h of W5(a))(e||!io(vs(a[h])))&&c.push([s(h),s(a[h])]);return d}case Ff:return i([o,a.toISOString()],a);case Hf:{const{source:c,flags:d}=a;return i([o,{source:c,flags:d}],a)}case Uf:{const c=[],d=i([o,c],a);for(const[h,f]of a)(e||!(io(vs(h))||io(vs(f))))&&c.push([s(h),s(f)]);return d}case jf:{const c=[],d=i([o,c],a);for(const h of a)(e||!io(vs(h)))&&c.push(s(h));return d}}const{message:l}=a;return i([o,{name:u,message:l}],a)};return s},jp=(e,{json:t,lossy:n}={})=>{const r=[];return Y5(!(t||n),!!t,new Map,r)(e),r},ls=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Up(jp(e,t)):structuredClone(e):(e,t)=>Up(jp(e,t));function K5(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function G5(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Q5(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||K5,r=e.options.footnoteBackLabel||G5,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),d=String(l.identifier).toUpperCase(),h=bs(d.toLowerCase());let f=0;const m=[],b=e.footnoteCounts.get(d);for(;b!==void 0&&++f<=b;){m.length>0&&m.push({type:"text",value:" "});let E=typeof n=="string"?n:n(u,f);typeof E=="string"&&(E={type:"text",value:E}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,f),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const E=y.children[y.children.length-1];E&&E.type==="text"?E.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else c.push(...m);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(c,!0)};e.patch(l,x),o.push(x)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:ne(I({},ls(a)),{id:"footnote-label"}),children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const nl=(function(e){if(e==null)return eO;if(typeof e=="function")return rl(e);if(typeof e=="object")return Array.isArray(e)?X5(e):J5(e);if(typeof e=="string")return Z5(e);throw new Error("Expected function, string, or object as test")});function X5(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=nl(e[n]);return rl(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function J5(e){const t=e;return rl(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Z5(e){return rl(t);function t(n){return n&&n.type===e}}function rl(e){return t;function t(n,r,i){return!!(tO(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function eO(){return!0}function tO(e){return e!==null&&typeof e=="object"&&"type"in e}const X2=[],nO=!0,fd=!1,rO="skip";function J2(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=nl(i),a=r?-1:1;o(e,void 0,[])();function o(u,l,c){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(u.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=X2,m,b,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(f=iO(n(u,c)),f[0]===fd))return f;if("children"in u&&u.children){const x=u;if(x.children&&f[0]!==rO)for(b=(r?x.children.length:-1)+a,y=c.concat(x);b>-1&&b<x.children.length;){const E=x.children[b];if(m=o(E,b,y)(),m[0]===fd)return m;b=typeof m[1]=="number"?m[1]:b+a}}return f}}}function iO(e){return Array.isArray(e)?e:typeof e=="number"?[nO,e]:e==null?X2:[e]}function il(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),J2(e,s,o,i);function o(u,l){const c=l[l.length-1],d=c?c.children.indexOf(u):void 0;return a(u,d,c)}}const hd={}.hasOwnProperty,sO={};function aO(e,t){const n=t||sO,r=new Map,i=new Map,s=new Map,a=I(I({},$5),n.handlers),o={all:l,applyData:uO,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:u,options:n,patch:oO,wrap:cO};return il(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,h=String(c.identifier).toUpperCase();d.has(h)||d.set(h,c)}}),o;function u(c,d){const h=c.type,f=o.handlers[h];if(hd.call(o.handlers,h)&&f)return f(o,c,d);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in c){const b=c,{children:y}=b,x=on(b,["children"]),E=ls(x);return E.children=o.all(c),E}return ls(c)}return(o.options.unknownHandler||lO)(o,c,d)}function l(c){const d=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const m=o.one(h[f],c);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=zp(m.value)),!Array.isArray(m)&&m.type==="element")){const b=m.children[0];b&&b.type==="text"&&(b.value=zp(b.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function oO(e,t){e.position&&(t.position=G4(e))}function uO(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,ls(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function lO(e,t){const n=t.data||{},r="value"in t&&!(hd.call(n,"hProperties")||hd.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cO(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function zp(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function $p(e,t){const n=aO(e,t),r=n.one(e,void 0),i=Q5(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function dO(e,t){return e&&"run"in e?function(n,r){return Xe(this,null,function*(){const i=$p(n,I({file:r},t));yield e.run(i,r)})}:function(n,r){return $p(n,I({file:r},e||t))}}function Vp(e){if(e)throw e}var nc,qp;function fO(){if(qp)return nc;qp=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!d)return!1;var h;for(h in l);return typeof h=="undefined"||e.call(l,h)},a=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},o=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return nc=function u(){var l,c,d,h,f,m,b=arguments[0],y=1,x=arguments.length,E=!1;for(typeof b=="boolean"&&(E=b,b=arguments[1]||{},y=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});y<x;++y)if(l=arguments[y],l!=null)for(c in l)d=o(b,c),h=o(l,c),b!==h&&(E&&h&&(s(h)||(f=i(h)))?(f?(f=!1,m=d&&i(d)?d:[]):m=d&&s(d)?d:{},a(b,{name:c,newValue:u(E,m,h)})):typeof h!="undefined"&&a(b,{name:c,newValue:h}));return b},nc}var hO=fO();const rc=Ta(hO);function pd(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pO(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(u,...l){const c=e[++s];let d=-1;if(u){a(u);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,c?mO(c,o)(...l):a(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function mO(e,t){let n;return r;function r(...a){const o=e.length>a.length;let u;o&&a.push(i);try{u=e.apply(this,a)}catch(l){const c=l;if(o&&n)throw c;return i(c)}o||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const zn={basename:gO,dirname:bO,extname:xO,join:yO,sep:"/"};function gO(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Oa(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function bO(e){if(Oa(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function xO(e){Oa(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function yO(...e){let t=-1,n;for(;++t<e.length;)Oa(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":EO(n)}function EO(e){Oa(e);const t=e.codePointAt(0)===47;let n=TO(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function TO(e,t){let n="",r=0,i=-1,s=0,a=-1,o,u;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Oa(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kO={cwd:SO};function SO(){return"/"}function md(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function wO(e){if(typeof e=="string")e=new URL(e);else if(!md(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return CO(e)}function CO(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const ic=["history","path","basename","stem","extname","dirname"];class Z2{constructor(t){let n;t?md(t)?n={path:t}:typeof t=="string"||AO(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":kO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ic.length;){const s=ic[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)ic.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?zn.basename(this.path):void 0}set basename(t){ac(t,"basename"),sc(t,"basename"),this.path=zn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?zn.dirname(this.path):void 0}set dirname(t){Wp(this.basename,"dirname"),this.path=zn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?zn.extname(this.path):void 0}set extname(t){if(sc(t,"extname"),Wp(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){md(t)&&(t=wO(t)),ac(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?zn.basename(this.path,this.extname):void 0}set stem(t){ac(t,"stem"),sc(t,"stem"),this.path=zn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ut(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function sc(e,t){if(e&&e.includes(zn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+zn.sep+"`")}function ac(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Wp(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function AO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const NO=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),IO={}.hasOwnProperty;class zf extends NO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pO()}copy(){const t=new zf;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(rc(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(lc("data",this.frozen),this.namespace[t]=n,this):IO.call(this.namespace,t)&&this.namespace[t]||void 0:t?(lc("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=so(t),r=this.parser||this.Parser;return oc("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),oc("process",this.parser||this.Parser),uc("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=so(t),u=r.parse(o);r.run(u,o,function(c,d,h){if(c||!d||!h)return l(c);const f=d,m=r.stringify(f,h);_O(m)?h.value=m:h.result=m,l(c,h)});function l(c,d){c||!d?a(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),oc("processSync",this.parser||this.Parser),uc("processSync",this.compiler||this.Compiler),this.process(t,i),Kp("processSync","process",n),r;function i(s,a){n=!0,Vp(s),r=a}}run(t,n,r){Yp(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const u=so(n);i.run(t,u,l);function l(c,d,h){const f=d||t;c?o(c):a?a(f):r(void 0,f,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Kp("runSync","run",r),i;function s(a,o){Vp(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=so(n),i=this.compiler||this.Compiler;return uc("stringify",i),Yp(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(lc("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...d]=l;u(c,d)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=rc(!0,i.settings,l.settings))}function o(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const d=l[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===l){h=d;break}if(h===-1)r.push([l,...c]);else if(c.length>0){let[f,...m]=c;const b=r[h][1];pd(b)&&pd(f)&&(f=rc(!0,b,f)),r[h]=[l,f,...m]}}}}const OO=new zf().freeze();function oc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function uc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function lc(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Yp(e){if(!pd(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Kp(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function so(e){return vO(e)?e:new Z2(e)}function vO(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function _O(e){return typeof e=="string"||LO(e)}function LO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const RO="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Gp=[],Qp={allowDangerousHtml:!0},MO=/^(https?|ircs?|mailto|xmpp)$/i,DO=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Eo(e){const t=PO(e),n=BO(e);return FO(t.runSync(t.parse(n),n),e)}function PO(e){const t=e.rehypePlugins||Gp,n=e.remarkPlugins||Gp,r=e.remarkRehypeOptions?I(I({},e.remarkRehypeOptions),Qp):Qp;return OO().use(b5).use(n).use(dO,r).use(t)}function BO(e){const t=e.children||"",n=new Z2;return typeof t=="string"&&(n.value=t),n}function FO(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,u=t.urlTransform||HO;for(const c of DO)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+RO+c.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),il(e,l),eN(e,{Fragment:g.Fragment,components:i,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function l(c,d,h){if(c.type==="raw"&&h&&typeof d=="number")return a?h.children.splice(d,1):h.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let f;for(f in Zl)if(Object.hasOwn(Zl,f)&&Object.hasOwn(c.properties,f)){const m=c.properties[f],b=Zl[f];(b===null||b.includes(c.tagName))&&(c.properties[f]=u(String(m||""),f,c))}}if(c.type==="element"){let f=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(c,d,h)),f&&h&&typeof d=="number")return o&&c.children?h.children.splice(d,1,...c.children):h.children.splice(d,1),d}}}function HO(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||MO.test(e.slice(0,t))?e:""}function Xp(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function UO(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function jO(e,t,n){const i=nl((n||{}).ignore||[]),s=zO(t);let a=-1;for(;++a<s.length;)J2(e,"text",o);function o(l,c){let d=-1,h;for(;++d<c.length;){const f=c[d],m=h?h.children:void 0;if(i(f,m?m.indexOf(f):void 0,h))return;h=f}if(h)return u(l,c)}function u(l,c){const d=c[c.length-1],h=s[a][0],f=s[a][1];let m=0;const y=d.children.indexOf(l);let x=!1,E=[];h.lastIndex=0;let T=h.exec(l.value);for(;T;){const v=T.index,C={index:T.index,input:T.input,stack:[...c,l]};let w=f(...T,C);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?h.lastIndex=v+1:(m!==v&&E.push({type:"text",value:l.value.slice(m,v)}),Array.isArray(w)?E.push(...w):w&&E.push(w),m=v+T[0].length,x=!0),!h.global)break;T=h.exec(l.value)}return x?(m<l.value.length&&E.push({type:"text",value:l.value.slice(m)}),d.children.splice(y,1,...E)):E=[l],y+E.length}}function zO(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([$O(i[0]),VO(i[1])])}return t}function $O(e){return typeof e=="string"?new RegExp(UO(e),"g"):e}function VO(e){return typeof e=="function"?e:function(){return e}}const cc="phrasing",dc=["autolink","link","image","label"];function qO(){return{transforms:[JO],enter:{literalAutolink:YO,literalAutolinkEmail:fc,literalAutolinkHttp:fc,literalAutolinkWww:fc},exit:{literalAutolink:XO,literalAutolinkEmail:QO,literalAutolinkHttp:KO,literalAutolinkWww:GO}}}function WO(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:cc,notInConstruct:dc},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:cc,notInConstruct:dc},{character:":",before:"[ps]",after:"\\/",inConstruct:cc,notInConstruct:dc}]}}function YO(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function fc(e){this.config.enter.autolinkProtocol.call(this,e)}function KO(e){this.config.exit.autolinkProtocol.call(this,e)}function GO(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function QO(e){this.config.exit.autolinkEmail.call(this,e)}function XO(e){this.exit(e)}function JO(e){jO(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ZO],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),e8]],{ignore:["link","linkReference"]})}function ZO(e,t,n,r,i){let s="";if(!ex(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!t8(n)))return!1;const a=n8(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function e8(e,t,n,r){return!ex(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function t8(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function n8(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Xp(e,"(");let s=Xp(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function ex(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ci(n)||Zu(n))&&(!t||n!==47)}tx.peek=d8;function r8(){this.buffer()}function i8(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function s8(){this.buffer()}function a8(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function o8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_n(this.sliceSerialize(e)).toLowerCase(),n.label=t}function u8(e){this.exit(e)}function l8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_n(this.sliceSerialize(e)).toLowerCase(),n.label=t}function c8(e){this.exit(e)}function d8(){return"["}function tx(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function f8(){return{enter:{gfmFootnoteCallString:r8,gfmFootnoteCall:i8,gfmFootnoteDefinitionLabelString:s8,gfmFootnoteDefinition:a8},exit:{gfmFootnoteCallString:o8,gfmFootnoteCall:u8,gfmFootnoteDefinitionLabelString:l8,gfmFootnoteDefinition:c8}}}function h8(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:tx},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let u=o.move("[^");const l=s.enter("footnoteDefinition"),c=s.enter("label");return u+=o.move(s.safe(s.associationId(r),{before:u,after:"]"})),c(),u+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),u+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?nx:p8))),l(),u}}function p8(e,t,n){return t===0?e:nx(e,t,n)}function nx(e,t,n){return(n?"":"    ")+e}const m8=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];rx.peek=E8;function g8(){return{canContainEols:["delete"],enter:{strikethrough:x8},exit:{strikethrough:y8}}}function b8(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:m8}],handlers:{delete:rx}}}function x8(e){this.enter({type:"delete",children:[]},e)}function y8(e){this.exit(e)}function rx(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,ne(I({},i.current()),{before:a,after:"~"})),a+=i.move("~~"),s(),a}function E8(){return"~"}function T8(e){return e.length}function k8(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||T8,s=[],a=[],o=[],u=[];let l=0,c=-1;for(;++c<e.length;){const b=[],y=[];let x=-1;for(e[c].length>l&&(l=e[c].length);++x<e[c].length;){const E=S8(e[c][x]);if(n.alignDelimiters!==!1){const T=i(E);y[x]=T,(u[x]===void 0||T>u[x])&&(u[x]=T)}b.push(E)}a[c]=b,o[c]=y}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<l;)s[d]=Jp(r[d]);else{const b=Jp(r);for(;++d<l;)s[d]=b}d=-1;const h=[],f=[];for(;++d<l;){const b=s[d];let y="",x="";b===99?(y=":",x=":"):b===108?y=":":b===114&&(x=":");let E=n.alignDelimiters===!1?1:Math.max(1,u[d]-y.length-x.length);const T=y+"-".repeat(E)+x;n.alignDelimiters!==!1&&(E=y.length+E+x.length,E>u[d]&&(u[d]=E),f[d]=E),h[d]=T}a.splice(1,0,h),o.splice(1,0,f),c=-1;const m=[];for(;++c<a.length;){const b=a[c],y=o[c];d=-1;const x=[];for(;++d<l;){const E=b[d]||"";let T="",v="";if(n.alignDelimiters!==!1){const C=u[d]-(y[d]||0),w=s[d];w===114?T=" ".repeat(C):w===99?C%2?(T=" ".repeat(C/2+.5),v=" ".repeat(C/2-.5)):(T=" ".repeat(C/2),v=T):v=" ".repeat(C)}n.delimiterStart!==!1&&!d&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||d)&&x.push(" "),n.alignDelimiters!==!1&&x.push(T),x.push(E),n.alignDelimiters!==!1&&x.push(v),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||d!==l-1)&&x.push("|")}m.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return m.join(`
`)}function S8(e){return e==null?"":String(e)}function Jp(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const Zp={}.hasOwnProperty;function ix(e,t){const n=t||{};function r(i,...s){let a=r.invalid;const o=r.handlers;if(i&&Zp.call(i,e)){const u=String(i[e]);a=Zp.call(o,u)?o[u]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function w8(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),C8);return i(),a}function C8(e,t,n){return">"+(n?"":" ")+e}function A8(e,t){return em(e,t.inConstruct,!0)&&!em(e,t.notInConstruct,!1)}function em(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function tm(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&A8(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function N8(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function I8(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function O8(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function v8(e,t,n,r){const i=O8(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(I8(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,_8);return d(),h}const o=n.createTracker(r),u=i.repeat(Math.max(N8(s,i)+1,3)),l=n.enter("codeFenced");let c=o.move(u);if(e.lang){const d=n.enter(`codeFencedLang${a}`);c+=o.move(n.safe(e.lang,I({before:c,after:" ",encode:["`"]},o.current()))),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);c+=o.move(" "),c+=o.move(n.safe(e.meta,I({before:c,after:`
`,encode:["`"]},o.current()))),d()}return c+=o.move(`
`),s&&(c+=o.move(s+`
`)),c+=o.move(u),l(),c}function _8(e,t,n){return(n?"":"    ")+e}function $f(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function L8(e,t,n,r){const i=$f(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const u=n.createTracker(r);let l=u.move("[");return l+=u.move(n.safe(n.associationId(e),I({before:l,after:"]"},u.current()))),l+=u.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(n.safe(e.url,I({before:l,after:">"},u.current()))),l+=u.move(">")):(o=n.enter("destinationRaw"),l+=u.move(n.safe(e.url,I({before:l,after:e.title?" ":`
`},u.current())))),o(),e.title&&(o=n.enter(`title${s}`),l+=u.move(" "+i),l+=u.move(n.safe(e.title,I({before:l,after:i},u.current()))),l+=u.move(i),o()),a(),l}function R8(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ba(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Su(e,t,n){const r=us(e),i=us(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}sx.peek=M8;function sx(e,t,n,r){const i=R8(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let u=a.move(n.containerPhrasing(e,I({after:i,before:o},a.current())));const l=u.charCodeAt(0),c=Su(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=ba(l)+u.slice(1));const d=u.charCodeAt(u.length-1),h=Su(r.after.charCodeAt(0),d,i);h.inside&&(u=u.slice(0,-1)+ba(d));const f=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+u+f}function M8(e,t,n){return n.options.emphasis||"*"}function D8(e,t){let n=!1;return il(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fd}),!!((!e.depth||e.depth<3)&&Df(e)&&(t.options.setext||n))}function P8(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(D8(e,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,ne(I({},s.current()),{before:`
`,after:`
`}));return d(),c(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),u=n.enter("phrasing");s.move(a+" ");let l=n.containerPhrasing(e,I({before:"# ",after:`
`},s.current()));return/^[\t ]/.test(l)&&(l=ba(l.charCodeAt(0))+l.slice(1)),l=l?a+" "+l:a,n.options.closeAtx&&(l+=" "+a),u(),o(),l}ax.peek=B8;function ax(e){return e.value||""}function B8(){return"<"}ox.peek=F8;function ox(e,t,n,r){const i=$f(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const u=n.createTracker(r);let l=u.move("![");return l+=u.move(n.safe(e.alt,I({before:l,after:"]"},u.current()))),l+=u.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(n.safe(e.url,I({before:l,after:">"},u.current()))),l+=u.move(">")):(o=n.enter("destinationRaw"),l+=u.move(n.safe(e.url,I({before:l,after:e.title?" ":")"},u.current())))),o(),e.title&&(o=n.enter(`title${s}`),l+=u.move(" "+i),l+=u.move(n.safe(e.title,I({before:l,after:i},u.current()))),l+=u.move(i),o()),l+=u.move(")"),a(),l}function F8(){return"!"}ux.peek=H8;function ux(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let u=o.move("![");const l=n.safe(e.alt,I({before:u,after:"]"},o.current()));u+=o.move(l+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),I({before:u,after:"]"},o.current()));return a(),n.stack=c,s(),i==="full"||!l||l!==d?u+=o.move(d+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function H8(){return"!"}lx.peek=U8;function lx(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let u;if(a.atBreak)for(;u=o.exec(r);){let l=u.index;r.charCodeAt(l)===10&&r.charCodeAt(l-1)===13&&l--,r=r.slice(0,l)+" "+r.slice(u.index+1)}}return i+r+i}function U8(){return"`"}function cx(e,t){const n=Df(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}dx.peek=j8;function dx(e,t,n,r){const i=$f(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,u;if(cx(e,n)){const c=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,I({before:d,after:">"},a.current()))),d+=a.move(">"),o(),n.stack=c,d}o=n.enter("link"),u=n.enter("label");let l=a.move("[");return l+=a.move(n.containerPhrasing(e,I({before:l,after:"]("},a.current()))),l+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(n.safe(e.url,I({before:l,after:">"},a.current()))),l+=a.move(">")):(u=n.enter("destinationRaw"),l+=a.move(n.safe(e.url,I({before:l,after:e.title?" ":")"},a.current())))),u(),e.title&&(u=n.enter(`title${s}`),l+=a.move(" "+i),l+=a.move(n.safe(e.title,I({before:l,after:i},a.current()))),l+=a.move(i),u()),l+=a.move(")"),o(),l}function j8(e,t,n){return cx(e,n)?"<":"["}fx.peek=z8;function fx(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let u=o.move("[");const l=n.containerPhrasing(e,I({before:u,after:"]"},o.current()));u+=o.move(l+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),I({before:u,after:"]"},o.current()));return a(),n.stack=c,s(),i==="full"||!l||l!==d?u+=o.move(d+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function z8(){return"["}function Vf(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function $8(e){const t=Vf(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function V8(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function hx(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function q8(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?V8(n):Vf(n);const o=e.ordered?a==="."?")":".":$8(n);let u=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),hx(n)===a&&c){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=o),n.bulletCurrent=a;const l=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),l}function W8(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Y8(e,t,n,r){const i=W8(n);let s=n.bulletCurrent||Vf(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const u=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,o.current()),c);return u(),l;function c(d,h,f){return h?(f?"":" ".repeat(a))+d:(f?s:s+" ".repeat(a-s.length))+d}}function K8(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const G8=nl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Q8(e,t,n,r){return(e.children.some(function(a){return G8(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function X8(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}px.peek=J8;function px(e,t,n,r){const i=X8(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let u=a.move(n.containerPhrasing(e,I({after:i,before:o},a.current())));const l=u.charCodeAt(0),c=Su(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=ba(l)+u.slice(1));const d=u.charCodeAt(u.length-1),h=Su(r.after.charCodeAt(0),d,i);h.inside&&(u=u.slice(0,-1)+ba(d));const f=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+u+f}function J8(e,t,n){return n.options.strong||"*"}function Z8(e,t,n,r){return n.safe(e.value,r)}function ev(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function tv(e,t,n){const r=(hx(n)+(n.options.ruleSpaces?" ":"")).repeat(ev(n));return n.options.ruleSpaces?r.slice(0,-1):r}const mx={blockquote:w8,break:tm,code:v8,definition:L8,emphasis:sx,hardBreak:tm,heading:P8,html:ax,image:ox,imageReference:ux,inlineCode:lx,link:dx,linkReference:fx,list:q8,listItem:Y8,paragraph:K8,root:Q8,strong:px,text:Z8,thematicBreak:tv};function nv(){return{enter:{table:rv,tableData:nm,tableHeader:nm,tableRow:sv},exit:{codeText:av,table:iv,tableData:hc,tableHeader:hc,tableRow:hc}}}function rv(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function iv(e){this.exit(e),this.data.inTable=void 0}function sv(e){this.enter({type:"tableRow",children:[]},e)}function hc(e){this.exit(e)}function nm(e){this.enter({type:"tableCell",children:[]},e)}function av(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,ov));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function ov(e,t){return t==="|"?t:e}function uv(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:u,tableRow:o}};function a(f,m,b,y){return l(c(f,b,y),f.align)}function o(f,m,b,y){const x=d(f,b,y),E=l([x]);return E.slice(0,E.indexOf(`
`))}function u(f,m,b,y){const x=b.enter("tableCell"),E=b.enter("phrasing"),T=b.containerPhrasing(f,ne(I({},y),{before:s,after:s}));return E(),x(),T}function l(f,m){return k8(f,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function c(f,m,b){const y=f.children;let x=-1;const E=[],T=m.enter("table");for(;++x<y.length;)E[x]=d(y[x],m,b);return T(),E}function d(f,m,b){const y=f.children;let x=-1;const E=[],T=m.enter("tableRow");for(;++x<y.length;)E[x]=u(y[x],f,m,b);return T(),E}function h(f,m,b){let y=mx.inlineCode(f,m,b);return b.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function lv(){return{exit:{taskListCheckValueChecked:rm,taskListCheckValueUnchecked:rm,paragraph:dv}}}function cv(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:fv}}}function rm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function dv(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function fv(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let u=mx.listItem(e,t,n,I(I({},r),o.current()));return s&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),u;function l(c){return c+a}}function hv(){return[qO(),f8(),g8(),nv(),lv()]}function pv(e){return{extensions:[WO(),h8(e),b8(),uv(e),cv()]}}const mv={tokenize:Tv,partial:!0},gx={tokenize:kv,partial:!0},bx={tokenize:Sv,partial:!0},xx={tokenize:wv,partial:!0},gv={tokenize:Cv,partial:!0},yx={name:"wwwAutolink",tokenize:yv,previous:Tx},Ex={name:"protocolAutolink",tokenize:Ev,previous:kx},kr={name:"emailAutolink",tokenize:xv,previous:Sx},nr={};function bv(){return{text:nr}}let ri=48;for(;ri<123;)nr[ri]=kr,ri++,ri===58?ri=65:ri===91&&(ri=97);nr[43]=kr;nr[45]=kr;nr[46]=kr;nr[95]=kr;nr[72]=[kr,Ex];nr[104]=[kr,Ex];nr[87]=[kr,yx];nr[119]=[kr,yx];function xv(e,t,n){const r=this;let i,s;return a;function a(d){return!gd(d)||!Sx.call(r,r.previous)||qf(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(d))}function o(d){return gd(d)?(e.consume(d),o):d===64?(e.consume(d),u):n(d)}function u(d){return d===46?e.check(gv,c,l)(d):d===45||d===95||Ft(d)?(s=!0,e.consume(d),u):c(d)}function l(d){return e.consume(d),i=!0,u}function c(d){return s&&i&&Wt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function yv(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!Tx.call(r,r.previous)||qf(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(mv,e.attempt(gx,e.attempt(bx,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function Ev(e,t,n){const r=this;let i="",s=!1;return a;function a(d){return(d===72||d===104)&&kx.call(r,r.previous)&&!qf(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),o):n(d)}function o(d){if(Wt(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),o;if(d===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(d),u}return n(d)}function u(d){return d===47?(e.consume(d),s?l:(s=!0,u)):n(d)}function l(d){return d===null||Tu(d)||$e(d)||Ci(d)||Zu(d)?n(d):e.attempt(gx,e.attempt(bx,c),n)(d)}function c(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function Tv(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function kv(e,t,n){let r,i,s;return a;function a(l){return l===46||l===95?e.check(xx,u,o)(l):l===null||$e(l)||Ci(l)||l!==45&&Zu(l)?u(l):(s=!0,e.consume(l),a)}function o(l){return l===95?r=!0:(i=r,r=void 0),e.consume(l),a}function u(l){return i||r||!s?n(l):t(l)}}function Sv(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(xx,t,s)(a):a===null||$e(a)||Ci(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function wv(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||$e(o)||Ci(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||$e(o)||Ci(o)?t(o):r(o)}function s(o){return Wt(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):Wt(o)?(e.consume(o),a):n(o)}}function Cv(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Ft(s)?n(s):t(s)}}function Tx(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||$e(e)}function kx(e){return!Wt(e)}function Sx(e){return!(e===47||gd(e))}function gd(e){return e===43||e===45||e===46||e===95||Ft(e)}function qf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Av={tokenize:Mv,partial:!0};function Nv(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:_v,continuation:{tokenize:Lv},exit:Rv}},text:{91:{name:"gfmFootnoteCall",tokenize:vv},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Iv,resolveTo:Ov}}}}function Iv(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return o;function o(u){if(!a||!a._balanced)return n(u);const l=_n(r.sliceSerialize({start:a.end,end:r.now()}));return l.codePointAt(0)!==94||!s.includes(l.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function Ov(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function vv(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),u}function u(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(d){if(s>999||d===93&&!a||d===null||d===91||$e(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(_n(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return $e(d)||(a=!0),s++,e.consume(d),d===92?c:l}function c(d){return d===91||d===92||d===93?(e.consume(d),s++,l):l(d)}}function _v(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return u;function u(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(m)}function c(m){if(a>999||m===93&&!o||m===null||m===91||$e(m))return n(m);if(m===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return s=_n(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return $e(m)||(o=!0),a++,e.consume(m),m===92?d:c}function d(m){return m===91||m===92||m===93?(e.consume(m),a++,c):c(m)}function h(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),i.includes(s)||i.push(s),De(e,f,"gfmFootnoteDefinitionWhitespace")):n(m)}function f(m){return t(m)}}function Lv(e,t,n){return e.check(Ia,t,e.attempt(Av,t,n))}function Rv(e){e.exit("gfmFootnoteDefinition")}function Mv(e,t,n){const r=this;return De(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function Dv(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let l=u;for(;l--;)if(a[l][0]==="exit"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[l][1].end.offset-a[l][1].start.offset){a[u][1].type="strikethroughSequence",a[l][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},a[l][1].start),end:Object.assign({},a[u][1].end)},d={type:"strikethroughText",start:Object.assign({},a[l][1].end),end:Object.assign({},a[u][1].start)},h=[["enter",c,o],["enter",a[l][1],o],["exit",a[l][1],o],["enter",d,o]],f=o.parser.constructs.insideSpan.null;f&&hn(h,h.length,0,el(f,a.slice(l+1,u),o)),hn(h,h.length,0,[["exit",d,o],["enter",a[u][1],o],["exit",a[u][1],o],["exit",c,o]]),hn(a,l-1,u-l+3,h),u=l+h.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function s(a,o,u){const l=this.previous,c=this.events;let d=0;return h;function h(m){return l===126&&c[c.length-1][1].type!=="characterEscape"?u(m):(a.enter("strikethroughSequenceTemporary"),f(m))}function f(m){const b=us(l);if(m===126)return d>1?u(m):(a.consume(m),d++,f);if(d<2&&!n)return u(m);const y=a.exit("strikethroughSequenceTemporary"),x=us(m);return y._open=!x||x===2&&!!b,y._close=!b||b===2&&!!x,o(m)}}}class Pv{constructor(){this.map=[]}add(t,n,r){Bv(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function Bv(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function Fv(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function Hv(){return{flow:{null:{name:"table",tokenize:Uv,resolveAll:jv}}}}function Uv(e,t,n){const r=this;let i=0,s=0,a;return o;function o(_){let $=r.events.length-1;for(;$>-1;){const G=r.events[$][1].type;if(G==="lineEnding"||G==="linePrefix")$--;else break}const H=$>-1?r.events[$][1].type:null,Y=H==="tableHead"||H==="tableRow"?w:u;return Y===w&&r.parser.lazy[r.now().line]?n(_):Y(_)}function u(_){return e.enter("tableHead"),e.enter("tableRow"),l(_)}function l(_){return _===124||(a=!0,s+=1),c(_)}function c(_){return _===null?n(_):ge(_)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),f):n(_):Le(_)?De(e,c,"whitespace")(_):(s+=1,a&&(a=!1,i+=1),_===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),a=!0,c):(e.enter("data"),d(_)))}function d(_){return _===null||_===124||$e(_)?(e.exit("data"),c(_)):(e.consume(_),_===92?h:d)}function h(_){return _===92||_===124?(e.consume(_),d):d(_)}function f(_){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(_):(e.enter("tableDelimiterRow"),a=!1,Le(_)?De(e,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):m(_))}function m(_){return _===45||_===58?y(_):_===124?(a=!0,e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),b):C(_)}function b(_){return Le(_)?De(e,y,"whitespace")(_):y(_)}function y(_){return _===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),x):_===45?(s+=1,x(_)):_===null||ge(_)?v(_):C(_)}function x(_){return _===45?(e.enter("tableDelimiterFiller"),E(_)):C(_)}function E(_){return _===45?(e.consume(_),E):_===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(_),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T(_))}function T(_){return Le(_)?De(e,v,"whitespace")(_):v(_)}function v(_){return _===124?m(_):_===null||ge(_)?!a||i!==s?C(_):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(_)):C(_)}function C(_){return n(_)}function w(_){return e.enter("tableRow"),D(_)}function D(_){return _===124?(e.enter("tableCellDivider"),e.consume(_),e.exit("tableCellDivider"),D):_===null||ge(_)?(e.exit("tableRow"),t(_)):Le(_)?De(e,D,"whitespace")(_):(e.enter("data"),B(_))}function B(_){return _===null||_===124||$e(_)?(e.exit("data"),D(_)):(e.consume(_),_===92?j:B)}function j(_){return _===92||_===124?(e.consume(_),B):B(_)}}function jv(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,u=0,l,c,d;const h=new Pv;for(;++n<e.length;){const f=e[n],m=f[1];f[0]==="enter"?m.type==="tableHead"?(o=!1,u!==0&&(im(h,t,u,l,c),c=void 0,u=0),l={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",l,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,c={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",c,t]])),i=m.type==="tableDelimiterRow"?2:c?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],d=ao(h,t,s,i,void 0,d),s=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],d=ao(h,t,s,i,void 0,d)),s=a,a=[s[1],n,0,0])):m.type==="tableHead"?(o=!0,u=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(u=n,s[1]!==0?(a[0]=a[1],d=ao(h,t,s,i,n,d)):a[1]!==0&&(d=ao(h,t,a,i,n,d)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&im(h,t,u,l,c),h.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=Fv(t.events,n))}return e}function ao(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},zi(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const u=zi(t.events,n[1]);if(s={type:a,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const l=zi(t.events,n[2]),c=zi(t.events,n[3]),d={type:o,start:Object.assign({},l),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],f=t.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,b=n[3]-n[2]-1;e.add(m,b,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},zi(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function im(e,t,n,r,i){const s=[],a=zi(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function zi(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const zv={name:"tasklistCheck",tokenize:Vv};function $v(){return{text:{91:zv}}}function Vv(e,t,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),s)}function s(u){return $e(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(u)}function o(u){return ge(u)?t(u):Le(u)?e.check({tokenize:qv},t,n)(u):n(u)}}function qv(e,t,n){return De(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Wv(e){return R2([bv(),Nv(),Dv(e),Hv(),$v()])}const Yv={};function To(e){const t=this,n=e||Yv,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Wv(n)),s.push(hv()),a.push(pv(n))}const sm=/[#.]/g;function Kv(e,t){const n=e||"",r={};let i=0,s,a;for(;i<n.length;){sm.lastIndex=i;const o=sm.exec(n),u=n.slice(i,o?o.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:a=u,i+=u.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||t||"div",properties:r,children:[]}}function wx(e,t,n){const r=n?Jv(n):void 0;function i(s,a,...o){let u;if(s==null){u={type:"root",children:[]};const l=a;o.unshift(l)}else{u=Kv(s,t);const l=u.tagName.toLowerCase(),c=r?r.get(l):void 0;if(u.tagName=c||l,Gv(a))o.unshift(a);else for(const[d,h]of Object.entries(a))Qv(e,u.properties,d,h)}for(const l of o)bd(u.children,l);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function Gv(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Qv(e,t,n,r){const i=_f(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=xp(r):i.commaSeparated?s=hp(r):i.commaOrSpaceSeparated?s=xp(hp(r).join(" ")):s=am(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?Xv(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(am(i,i.property,o));s=a}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function bd(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)bd(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?bd(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function am(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ma(n)===ma(t)))return!0}return n}function Xv(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function Jv(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const Zv=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],e_=wx(Xu,"div"),t_=wx(gs,"g",Zv);function n_(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const u=om(t,n[a-1]);o=u===-1?t.length+1:u+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],u=om(t,o),l=u===-1?t.length+1:u+1;if(o===l)break;n.push(l)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function om(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const fi={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Cx={}.hasOwnProperty,r_=Object.prototype;function i_(e,t){const n=t||{};return Wf({file:n.file||void 0,location:!1,schema:n.space==="svg"?gs:Xu,verbose:n.verbose||!1},e)}function Wf(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},ko(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Ax(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),a=n_(s),o=a.toPoint(0),u=a.toPoint(s.length);n.position={start:o,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},ko(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},ko(e,r,n),n}default:return n=s_(e,t),n}}function Ax(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Wf(e,t[n]);r.push(i)}return r}function s_(e,t){const n=e.schema;e.schema=t.namespaceURI===fi.svg?gs:Xu;let r=-1;const i={};for(;++r<t.attrs.length;){const o=t.attrs[r],u=(o.prefix?o.prefix+":":"")+o.name;Cx.call(r_,u)||(i[u]=o.value)}const a=(e.schema.space==="svg"?t_:e_)(t.tagName,i,Ax(e,t.childNodes));if(ko(e,t,a),a.tagName==="template"){const o=t,u=o.sourceCodeLocation,l=u&&u.startTag&&qi(u.startTag),c=u&&u.endTag&&qi(u.endTag),d=Wf(e,o.content);l&&c&&e.file&&(d.position={start:l.end,end:c.start}),a.content=d}return e.schema=n,a}function ko(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=a_(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function a_(e,t,n){const r=qi(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)Cx.call(n.attrs,a)&&(s[_f(e.schema,a).property]=qi(n.attrs[a]));n.startTag;const o=qi(n.startTag),u=n.endTag?qi(n.endTag):void 0,l={opening:o};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function qi(e){const t=um({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=um({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function um(e){return e.line&&e.column?e:void 0}class va{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}va.prototype.property={};va.prototype.normal={};va.prototype.space=null;function Nx(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new va(n,r,t)}function xd(e){return e.toLowerCase()}class An{constructor(t,n){this.property=t,this.attribute=n}}An.prototype.space=null;An.prototype.boolean=!1;An.prototype.booleanish=!1;An.prototype.overloadedBoolean=!1;An.prototype.number=!1;An.prototype.commaSeparated=!1;An.prototype.spaceSeparated=!1;An.prototype.commaOrSpaceSeparated=!1;An.prototype.mustUseProperty=!1;An.prototype.defined=!1;let o_=0;const Ce=Oi(),bt=Oi(),Ix=Oi(),te=Oi(),Ye=Oi(),Xi=Oi(),ln=Oi();function Oi(){return gl(2,++o_)}const yd=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ce,booleanish:bt,commaOrSpaceSeparated:ln,commaSeparated:Xi,number:te,overloadedBoolean:Ix,spaceSeparated:Ye},Symbol.toStringTag,{value:"Module"})),pc=Object.keys(yd);class Yf extends An{constructor(t,n,r,i){let s=-1;if(super(t,n),lm(this,"space",i),typeof r=="number")for(;++s<pc.length;){const a=pc[s];lm(this,pc[s],(r&yd[a])===yd[a])}}}Yf.prototype.defined=!0;function lm(e,t,n){n&&(e[t]=n)}const u_={}.hasOwnProperty;function xs(e){const t={},n={};let r;for(r in e.properties)if(u_.call(e.properties,r)){const i=e.properties[r],s=new Yf(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[xd(r)]=r,n[xd(s.attribute)]=r}return new va(t,n,e.space)}const Ox=xs({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),vx=xs({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function _x(e,t){return t in e?e[t]:t}function Lx(e,t){return _x(e,t.toLowerCase())}const Rx=xs({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Lx,properties:{xmlns:null,xmlnsXLink:null}}),Mx=xs({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bt,ariaAutoComplete:null,ariaBusy:bt,ariaChecked:bt,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:Ye,ariaCurrent:null,ariaDescribedBy:Ye,ariaDetails:null,ariaDisabled:bt,ariaDropEffect:Ye,ariaErrorMessage:null,ariaExpanded:bt,ariaFlowTo:Ye,ariaGrabbed:bt,ariaHasPopup:null,ariaHidden:bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ye,ariaLevel:te,ariaLive:null,ariaModal:bt,ariaMultiLine:bt,ariaMultiSelectable:bt,ariaOrientation:null,ariaOwns:Ye,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:bt,ariaReadOnly:bt,ariaRelevant:null,ariaRequired:bt,ariaRoleDescription:Ye,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:bt,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null}}),l_=xs({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Lx,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xi,acceptCharset:Ye,accessKey:Ye,action:null,allow:null,allowFullScreen:Ce,allowPaymentRequest:Ce,allowUserMedia:Ce,alt:null,as:null,async:Ce,autoCapitalize:null,autoComplete:Ye,autoFocus:Ce,autoPlay:Ce,blocking:Ye,capture:null,charSet:null,checked:Ce,cite:null,className:Ye,cols:te,colSpan:null,content:null,contentEditable:bt,controls:Ce,controlsList:Ye,coords:te|Xi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ce,defer:Ce,dir:null,dirName:null,disabled:Ce,download:Ix,draggable:bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ce,formTarget:null,headers:Ye,height:te,hidden:Ce,high:te,href:null,hrefLang:null,htmlFor:Ye,httpEquiv:Ye,id:null,imageSizes:null,imageSrcSet:null,inert:Ce,inputMode:null,integrity:null,is:null,isMap:Ce,itemId:null,itemProp:Ye,itemRef:Ye,itemScope:Ce,itemType:Ye,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ce,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:Ce,muted:Ce,name:null,nonce:null,noModule:Ce,noValidate:Ce,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ce,optimum:te,pattern:null,ping:Ye,placeholder:null,playsInline:Ce,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ce,referrerPolicy:null,rel:Ye,required:Ce,reversed:Ce,rows:te,rowSpan:te,sandbox:Ye,scope:null,scoped:Ce,seamless:Ce,selected:Ce,shadowRootClonable:Ce,shadowRootDelegatesFocus:Ce,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:Ce,useMap:null,value:bt,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ye,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ce,declare:Ce,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:Ce,noHref:Ce,noShade:Ce,noWrap:Ce,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:bt,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ce,disableRemotePlayback:Ce,prefix:null,property:null,results:te,security:null,unselectable:null}}),c_=xs({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:_x,properties:{about:ln,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:Ye,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:Ce,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xi,g2:Xi,glyphName:Xi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:ln,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ye,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ln,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ln,rev:ln,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ln,requiredFeatures:ln,requiredFonts:ln,requiredFormats:ln,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:ln,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ln,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ln,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),d_=/^data[-\w.:]+$/i,cm=/-[a-z]/g,f_=/[A-Z]/g;function h_(e,t){const n=xd(t);let r=t,i=An;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&d_.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(cm,m_);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!cm.test(s)){let a=s.replace(f_,p_);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=Yf}return new i(r,t)}function p_(e){return"-"+e.toLowerCase()}function m_(e){return e.charAt(1).toUpperCase()}const g_=Nx([vx,Ox,Rx,Mx,l_],"html"),Dx=Nx([vx,Ox,Rx,Mx,c_],"svg"),b_={},x_={}.hasOwnProperty,Px=ix("type",{handlers:{root:E_,element:C_,text:S_,comment:w_,doctype:k_}});function y_(e,t){const r=(t||b_).space;return Px(e,r==="svg"?Dx:g_)}function E_(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Kf(e.children,n,t),ys(e,n),n}function T_(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Kf(e.children,n,t),ys(e,n),n}function k_(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return ys(e,t),t}function S_(e){const t={nodeName:"#text",value:e.value,parentNode:null};return ys(e,t),t}function w_(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return ys(e,t),t}function C_(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Dx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&x_.call(e.properties,s)){const u=A_(r,s,e.properties[s]);u&&i.push(u)}}const a=r.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:fi[a],childNodes:[],parentNode:null};return o.childNodes=Kf(e.children,o,r),ys(e,o),e.tagName==="template"&&e.content&&(o.content=T_(e.content,r)),o}function A_(e,t,n){const r=h_(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?x2(n):A2(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=fi[r.space]}return i}function Kf(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Px(e[r],n);s.parentNode=t,i.push(s)}return i}function ys(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const N_=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],I_=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Je="";var k;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(k||(k={}));const Xt={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Bx(e){return e>=55296&&e<=57343}function O_(e){return e>=56320&&e<=57343}function v_(e,t){return(e-55296)*1024+9216+t}function Fx(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Hx(e){return e>=64976&&e<=65007||I_.has(e)}var U;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(U||(U={}));const __=65536;class L_{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=__,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:s}=this,a=i+n,o=s+n;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(O_(n))return this.pos++,this._addGap(),v_(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,k.EOF;return this._err(U.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,k.EOF;const r=this.html.charCodeAt(n);return r===k.CARRIAGE_RETURN?k.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,k.EOF;let t=this.html.charCodeAt(this.pos);return t===k.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,k.LINE_FEED):t===k.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Bx(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===k.LINE_FEED||t===k.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Fx(t)?this._err(U.controlCharacterInInputStream):Hx(t)&&this._err(U.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var _e;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(_e||(_e={}));function Ux(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const R_=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),M_=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function D_(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=M_.get(e))!==null&&t!==void 0?t:e}var At;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(At||(At={}));const P_=32;var zr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(zr||(zr={}));function Ed(e){return e>=At.ZERO&&e<=At.NINE}function B_(e){return e>=At.UPPER_A&&e<=At.UPPER_F||e>=At.LOWER_A&&e<=At.LOWER_F}function F_(e){return e>=At.UPPER_A&&e<=At.UPPER_Z||e>=At.LOWER_A&&e<=At.LOWER_Z||Ed(e)}function H_(e){return e===At.EQUALS||F_(e)}var St;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(St||(St={}));var hr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(hr||(hr={}));let U_=class{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=St.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=hr.Strict}startEntity(t){this.decodeMode=t,this.state=St.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case St.EntityStart:return t.charCodeAt(n)===At.NUM?(this.state=St.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=St.NamedEntity,this.stateNamedEntity(t,n));case St.NumericStart:return this.stateNumericStart(t,n);case St.NumericDecimal:return this.stateNumericDecimal(t,n);case St.NumericHex:return this.stateNumericHex(t,n);case St.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|P_)===At.LOWER_X?(this.state=St.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=St.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Ed(i)||B_(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Ed(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===At.SEMI)this.consumed+=1;else if(this.decodeMode===hr.Strict)return 0;return this.emitCodePoint(D_(this.result),this.consumed),this.errors&&(t!==At.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&zr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=j_(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===hr.Attribute&&(s===0||H_(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&zr.VALUE_LENGTH)>>14,s!==0){if(a===At.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==hr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&zr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~zr.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case St.NamedEntity:return this.result!==0&&(this.decodeMode!==hr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case St.NumericDecimal:return this.emitNumericEntity(0,2);case St.NumericHex:return this.emitNumericEntity(0,3);case St.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case St.EntityStart:return 0}}};function j_(e,t,n,r){const i=(t&zr.BRANCH_LENGTH)>>7,s=t&zr.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let a=n,o=a+i-1;for(;a<=o;){const u=a+o>>>1,l=e[u];if(l<r)a=u+1;else if(l>r)o=u-1;else return e[u+i]}return-1}var W;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(W||(W={}));var yi;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(yi||(yi={}));var kn;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(kn||(kn={}));var M;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(M||(M={}));var p;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(p||(p={}));const z_=new Map([[M.A,p.A],[M.ADDRESS,p.ADDRESS],[M.ANNOTATION_XML,p.ANNOTATION_XML],[M.APPLET,p.APPLET],[M.AREA,p.AREA],[M.ARTICLE,p.ARTICLE],[M.ASIDE,p.ASIDE],[M.B,p.B],[M.BASE,p.BASE],[M.BASEFONT,p.BASEFONT],[M.BGSOUND,p.BGSOUND],[M.BIG,p.BIG],[M.BLOCKQUOTE,p.BLOCKQUOTE],[M.BODY,p.BODY],[M.BR,p.BR],[M.BUTTON,p.BUTTON],[M.CAPTION,p.CAPTION],[M.CENTER,p.CENTER],[M.CODE,p.CODE],[M.COL,p.COL],[M.COLGROUP,p.COLGROUP],[M.DD,p.DD],[M.DESC,p.DESC],[M.DETAILS,p.DETAILS],[M.DIALOG,p.DIALOG],[M.DIR,p.DIR],[M.DIV,p.DIV],[M.DL,p.DL],[M.DT,p.DT],[M.EM,p.EM],[M.EMBED,p.EMBED],[M.FIELDSET,p.FIELDSET],[M.FIGCAPTION,p.FIGCAPTION],[M.FIGURE,p.FIGURE],[M.FONT,p.FONT],[M.FOOTER,p.FOOTER],[M.FOREIGN_OBJECT,p.FOREIGN_OBJECT],[M.FORM,p.FORM],[M.FRAME,p.FRAME],[M.FRAMESET,p.FRAMESET],[M.H1,p.H1],[M.H2,p.H2],[M.H3,p.H3],[M.H4,p.H4],[M.H5,p.H5],[M.H6,p.H6],[M.HEAD,p.HEAD],[M.HEADER,p.HEADER],[M.HGROUP,p.HGROUP],[M.HR,p.HR],[M.HTML,p.HTML],[M.I,p.I],[M.IMG,p.IMG],[M.IMAGE,p.IMAGE],[M.INPUT,p.INPUT],[M.IFRAME,p.IFRAME],[M.KEYGEN,p.KEYGEN],[M.LABEL,p.LABEL],[M.LI,p.LI],[M.LINK,p.LINK],[M.LISTING,p.LISTING],[M.MAIN,p.MAIN],[M.MALIGNMARK,p.MALIGNMARK],[M.MARQUEE,p.MARQUEE],[M.MATH,p.MATH],[M.MENU,p.MENU],[M.META,p.META],[M.MGLYPH,p.MGLYPH],[M.MI,p.MI],[M.MO,p.MO],[M.MN,p.MN],[M.MS,p.MS],[M.MTEXT,p.MTEXT],[M.NAV,p.NAV],[M.NOBR,p.NOBR],[M.NOFRAMES,p.NOFRAMES],[M.NOEMBED,p.NOEMBED],[M.NOSCRIPT,p.NOSCRIPT],[M.OBJECT,p.OBJECT],[M.OL,p.OL],[M.OPTGROUP,p.OPTGROUP],[M.OPTION,p.OPTION],[M.P,p.P],[M.PARAM,p.PARAM],[M.PLAINTEXT,p.PLAINTEXT],[M.PRE,p.PRE],[M.RB,p.RB],[M.RP,p.RP],[M.RT,p.RT],[M.RTC,p.RTC],[M.RUBY,p.RUBY],[M.S,p.S],[M.SCRIPT,p.SCRIPT],[M.SEARCH,p.SEARCH],[M.SECTION,p.SECTION],[M.SELECT,p.SELECT],[M.SOURCE,p.SOURCE],[M.SMALL,p.SMALL],[M.SPAN,p.SPAN],[M.STRIKE,p.STRIKE],[M.STRONG,p.STRONG],[M.STYLE,p.STYLE],[M.SUB,p.SUB],[M.SUMMARY,p.SUMMARY],[M.SUP,p.SUP],[M.TABLE,p.TABLE],[M.TBODY,p.TBODY],[M.TEMPLATE,p.TEMPLATE],[M.TEXTAREA,p.TEXTAREA],[M.TFOOT,p.TFOOT],[M.TD,p.TD],[M.TH,p.TH],[M.THEAD,p.THEAD],[M.TITLE,p.TITLE],[M.TR,p.TR],[M.TRACK,p.TRACK],[M.TT,p.TT],[M.U,p.U],[M.UL,p.UL],[M.SVG,p.SVG],[M.VAR,p.VAR],[M.WBR,p.WBR],[M.XMP,p.XMP]]);function Es(e){var t;return(t=z_.get(e))!==null&&t!==void 0?t:p.UNKNOWN}const Q=p,$_={[W.HTML]:new Set([Q.ADDRESS,Q.APPLET,Q.AREA,Q.ARTICLE,Q.ASIDE,Q.BASE,Q.BASEFONT,Q.BGSOUND,Q.BLOCKQUOTE,Q.BODY,Q.BR,Q.BUTTON,Q.CAPTION,Q.CENTER,Q.COL,Q.COLGROUP,Q.DD,Q.DETAILS,Q.DIR,Q.DIV,Q.DL,Q.DT,Q.EMBED,Q.FIELDSET,Q.FIGCAPTION,Q.FIGURE,Q.FOOTER,Q.FORM,Q.FRAME,Q.FRAMESET,Q.H1,Q.H2,Q.H3,Q.H4,Q.H5,Q.H6,Q.HEAD,Q.HEADER,Q.HGROUP,Q.HR,Q.HTML,Q.IFRAME,Q.IMG,Q.INPUT,Q.LI,Q.LINK,Q.LISTING,Q.MAIN,Q.MARQUEE,Q.MENU,Q.META,Q.NAV,Q.NOEMBED,Q.NOFRAMES,Q.NOSCRIPT,Q.OBJECT,Q.OL,Q.P,Q.PARAM,Q.PLAINTEXT,Q.PRE,Q.SCRIPT,Q.SECTION,Q.SELECT,Q.SOURCE,Q.STYLE,Q.SUMMARY,Q.TABLE,Q.TBODY,Q.TD,Q.TEMPLATE,Q.TEXTAREA,Q.TFOOT,Q.TH,Q.THEAD,Q.TITLE,Q.TR,Q.TRACK,Q.UL,Q.WBR,Q.XMP]),[W.MATHML]:new Set([Q.MI,Q.MO,Q.MN,Q.MS,Q.MTEXT,Q.ANNOTATION_XML]),[W.SVG]:new Set([Q.TITLE,Q.FOREIGN_OBJECT,Q.DESC]),[W.XLINK]:new Set,[W.XML]:new Set,[W.XMLNS]:new Set},Td=new Set([Q.H1,Q.H2,Q.H3,Q.H4,Q.H5,Q.H6]);M.STYLE,M.SCRIPT,M.XMP,M.IFRAME,M.NOEMBED,M.NOFRAMES,M.PLAINTEXT;var A;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(A||(A={}));const ft={DATA:A.DATA,RCDATA:A.RCDATA,RAWTEXT:A.RAWTEXT,SCRIPT_DATA:A.SCRIPT_DATA,PLAINTEXT:A.PLAINTEXT,CDATA_SECTION:A.CDATA_SECTION};function V_(e){return e>=k.DIGIT_0&&e<=k.DIGIT_9}function Bs(e){return e>=k.LATIN_CAPITAL_A&&e<=k.LATIN_CAPITAL_Z}function q_(e){return e>=k.LATIN_SMALL_A&&e<=k.LATIN_SMALL_Z}function _r(e){return q_(e)||Bs(e)}function dm(e){return _r(e)||V_(e)}function oo(e){return e+32}function jx(e){return e===k.SPACE||e===k.LINE_FEED||e===k.TABULATION||e===k.FORM_FEED}function fm(e){return jx(e)||e===k.SOLIDUS||e===k.GREATER_THAN_SIGN}function W_(e){return e===k.NULL?U.nullCharacterReference:e>1114111?U.characterReferenceOutsideUnicodeRange:Bx(e)?U.surrogateCharacterReference:Hx(e)?U.noncharacterCharacterReference:Fx(e)||e===k.CARRIAGE_RETURN?U.controlCharacterReference:null}let Y_=class{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=A.DATA,this.returnState=A.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new L_(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new U_(R_,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(U.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(U.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=W_(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:_e.START_TAG,tagName:"",tagID:p.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:_e.END_TAG,tagName:"",tagID:p.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:_e.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:_e.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Ux(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(U.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Es(t.tagName),t.type===_e.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(U.endTagWithAttributes),t.selfClosing&&this._err(U.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case _e.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case _e.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case _e.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:_e.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=jx(t)?_e.WHITESPACE_CHARACTER:t===k.NULL?_e.NULL_CHARACTER:_e.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(_e.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=A.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?hr.Attribute:hr.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===A.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===A.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===A.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case A.DATA:{this._stateData(t);break}case A.RCDATA:{this._stateRcdata(t);break}case A.RAWTEXT:{this._stateRawtext(t);break}case A.SCRIPT_DATA:{this._stateScriptData(t);break}case A.PLAINTEXT:{this._statePlaintext(t);break}case A.TAG_OPEN:{this._stateTagOpen(t);break}case A.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case A.TAG_NAME:{this._stateTagName(t);break}case A.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case A.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case A.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case A.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case A.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case A.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case A.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case A.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case A.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case A.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case A.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case A.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case A.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case A.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case A.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case A.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case A.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case A.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case A.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case A.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case A.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case A.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case A.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case A.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case A.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case A.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case A.BOGUS_COMMENT:{this._stateBogusComment(t);break}case A.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case A.COMMENT_START:{this._stateCommentStart(t);break}case A.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case A.COMMENT:{this._stateComment(t);break}case A.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case A.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case A.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case A.COMMENT_END:{this._stateCommentEnd(t);break}case A.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case A.DOCTYPE:{this._stateDoctype(t);break}case A.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case A.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case A.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case A.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case A.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case A.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case A.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case A.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case A.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case A.CDATA_SECTION:{this._stateCdataSection(t);break}case A.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case A.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case A.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case A.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.TAG_OPEN;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitCodePoint(t);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case k.AMPERSAND:{this._startCharacterReference();break}case k.LESS_THAN_SIGN:{this.state=A.RCDATA_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.RAWTEXT_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(_r(t))this._createStartTagToken(),this.state=A.TAG_NAME,this._stateTagName(t);else switch(t){case k.EXCLAMATION_MARK:{this.state=A.MARKUP_DECLARATION_OPEN;break}case k.SOLIDUS:{this.state=A.END_TAG_OPEN;break}case k.QUESTION_MARK:{this._err(U.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t);break}case k.EOF:{this._err(U.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(U.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=A.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(_r(t))this._createEndTagToken(),this.state=A.TAG_NAME,this._stateTagName(t);else switch(t){case k.GREATER_THAN_SIGN:{this._err(U.missingEndTagName),this.state=A.DATA;break}case k.EOF:{this._err(U.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(U.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.SOLIDUS:{this.state=A.SELF_CLOSING_START_TAG;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentTagToken();break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.tagName+=Je;break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Bs(t)?oo(t):t)}}_stateRcdataLessThanSign(t){t===k.SOLIDUS?this.state=A.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=A.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){_r(t)?(this.state=A.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=A.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=A.BEFORE_ATTRIBUTE_NAME,!1;case k.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=A.SELF_CLOSING_START_TAG,!1;case k.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=A.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===k.SOLIDUS?this.state=A.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){_r(t)?(this.state=A.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case k.SOLIDUS:{this.state=A.SCRIPT_DATA_END_TAG_OPEN;break}case k.EXCLAMATION_MARK:{this.state=A.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=A.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){_r(t)?(this.state=A.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===k.HYPHEN_MINUS?(this.state=A.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===k.HYPHEN_MINUS?(this.state=A.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=A.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_ESCAPED,this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case k.HYPHEN_MINUS:{this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case k.GREATER_THAN_SIGN:{this.state=A.SCRIPT_DATA,this._emitChars(">");break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_ESCAPED,this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===k.SOLIDUS?this.state=A.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_r(t)?(this._emitChars("<"),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){_r(t)?(this.state=A.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Xt.SCRIPT,!1)&&fm(this.preprocessor.peek(Xt.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Xt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=A.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.NULL:{this._err(U.unexpectedNullCharacter),this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case k.HYPHEN_MINUS:{this._emitChars("-");break}case k.LESS_THAN_SIGN:{this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case k.GREATER_THAN_SIGN:{this.state=A.SCRIPT_DATA,this._emitChars(">");break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Je);break}case k.EOF:{this._err(U.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===k.SOLIDUS?(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Xt.SCRIPT,!1)&&fm(this.preprocessor.peek(Xt.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Xt.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=A.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=A.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.SOLIDUS:case k.GREATER_THAN_SIGN:case k.EOF:{this.state=A.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case k.EQUALS_SIGN:{this._err(U.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=A.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=A.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:case k.SOLIDUS:case k.GREATER_THAN_SIGN:case k.EOF:{this._leaveAttrName(),this.state=A.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case k.EQUALS_SIGN:{this._leaveAttrName(),this.state=A.BEFORE_ATTRIBUTE_VALUE;break}case k.QUOTATION_MARK:case k.APOSTROPHE:case k.LESS_THAN_SIGN:{this._err(U.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.currentAttr.name+=Je;break}default:this.currentAttr.name+=String.fromCodePoint(Bs(t)?oo(t):t)}}_stateAfterAttributeName(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.SOLIDUS:{this.state=A.SELF_CLOSING_START_TAG;break}case k.EQUALS_SIGN:{this.state=A.BEFORE_ATTRIBUTE_VALUE;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=A.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{this.state=A.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this.state=A.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(U.missingAttributeValue),this.state=A.DATA,this.emitCurrentTagToken();break}default:this.state=A.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.currentAttr.value+=Je;break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case k.APOSTROPHE:{this.state=A.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.currentAttr.value+=Je;break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this._leaveAttrValue(),this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.AMPERSAND:{this._startCharacterReference();break}case k.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=A.DATA,this.emitCurrentTagToken();break}case k.NULL:{this._err(U.unexpectedNullCharacter),this.currentAttr.value+=Je;break}case k.QUOTATION_MARK:case k.APOSTROPHE:case k.LESS_THAN_SIGN:case k.EQUALS_SIGN:case k.GRAVE_ACCENT:{this._err(U.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this._leaveAttrValue(),this.state=A.BEFORE_ATTRIBUTE_NAME;break}case k.SOLIDUS:{this._leaveAttrValue(),this.state=A.SELF_CLOSING_START_TAG;break}case k.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this._err(U.missingWhitespaceBetweenAttributes),this.state=A.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case k.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=A.DATA,this.emitCurrentTagToken();break}case k.EOF:{this._err(U.eofInTag),this._emitEOFToken();break}default:this._err(U.unexpectedSolidusInTag),this.state=A.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.data+=Je;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Xt.DASH_DASH,!0)?(this._createCommentToken(Xt.DASH_DASH.length+1),this.state=A.COMMENT_START):this._consumeSequenceIfMatch(Xt.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Xt.DOCTYPE.length+1),this.state=A.DOCTYPE):this._consumeSequenceIfMatch(Xt.CDATA_START,!0)?this.inForeignNode?this.state=A.CDATA_SECTION:(this._err(U.cdataInHtmlContent),this._createCommentToken(Xt.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=A.BOGUS_COMMENT):this._ensureHibernation()||(this._err(U.incorrectlyOpenedComment),this._createCommentToken(2),this.state=A.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_START_DASH;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptClosingOfEmptyComment),this.state=A.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=A.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptClosingOfEmptyComment),this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this._err(U.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=A.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END_DASH;break}case k.LESS_THAN_SIGN:{n.data+="<",this.state=A.COMMENT_LESS_THAN_SIGN;break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.data+=Je;break}case k.EOF:{this._err(U.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case k.EXCLAMATION_MARK:{n.data+="!",this.state=A.COMMENT_LESS_THAN_SIGN_BANG;break}case k.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=A.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===k.HYPHEN_MINUS?this.state=A.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=A.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===k.HYPHEN_MINUS?this.state=A.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=A.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==k.GREATER_THAN_SIGN&&t!==k.EOF&&this._err(U.nestedComment),this.state=A.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{this.state=A.COMMENT_END;break}case k.EOF:{this._err(U.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=A.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentComment(n);break}case k.EXCLAMATION_MARK:{this.state=A.COMMENT_END_BANG;break}case k.HYPHEN_MINUS:{n.data+="-";break}case k.EOF:{this._err(U.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=A.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case k.HYPHEN_MINUS:{n.data+="--!",this.state=A.COMMENT_END_DASH;break}case k.GREATER_THAN_SIGN:{this._err(U.incorrectlyClosedComment),this.state=A.DATA,this.emitCurrentComment(n);break}case k.EOF:{this._err(U.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=A.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this.state=A.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case k.EOF:{this._err(U.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingWhitespaceBeforeDoctypeName),this.state=A.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Bs(t))this._createDoctypeToken(String.fromCharCode(oo(t))),this.state=A.DOCTYPE_NAME;else switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.NULL:{this._err(U.unexpectedNullCharacter),this._createDoctypeToken(Je),this.state=A.DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this._err(U.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=A.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.AFTER_DOCTYPE_NAME;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.name+=Je;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Bs(t)?oo(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Xt.PUBLIC,!1)?this.state=A.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Xt.SYSTEM,!1)?this.state=A.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(U.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.QUOTATION_MARK:{this._err(U.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(U.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(U.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.publicId="",this.state=A.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(U.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.publicId+=Je;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case k.APOSTROPHE:{this.state=A.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.publicId+=Je;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case k.GREATER_THAN_SIGN:{this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.QUOTATION_MARK:{this._err(U.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(U.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.QUOTATION_MARK:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:{this.state=A.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.QUOTATION_MARK:{this._err(U.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{this._err(U.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(U.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.QUOTATION_MARK:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case k.APOSTROPHE:{n.systemId="",this.state=A.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case k.GREATER_THAN_SIGN:{this._err(U.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.DATA,this.emitCurrentDoctype(n);break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case k.QUOTATION_MARK:{this.state=A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.systemId+=Je;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case k.APOSTROPHE:{this.state=A.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case k.NULL:{this._err(U.unexpectedNullCharacter),n.systemId+=Je;break}case k.GREATER_THAN_SIGN:{this._err(U.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case k.SPACE:case k.LINE_FEED:case k.TABULATION:case k.FORM_FEED:break;case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.EOF:{this._err(U.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(U.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=A.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case k.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=A.DATA;break}case k.NULL:{this._err(U.unexpectedNullCharacter);break}case k.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case k.RIGHT_SQUARE_BRACKET:{this.state=A.CDATA_SECTION_BRACKET;break}case k.EOF:{this._err(U.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===k.RIGHT_SQUARE_BRACKET?this.state=A.CDATA_SECTION_END:(this._emitChars("]"),this.state=A.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case k.GREATER_THAN_SIGN:{this.state=A.DATA;break}case k.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=A.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(k.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&dm(this.preprocessor.peek(1))?A.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){dm(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===k.SEMICOLON&&this._err(U.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}};const zx=new Set([p.DD,p.DT,p.LI,p.OPTGROUP,p.OPTION,p.P,p.RB,p.RP,p.RT,p.RTC]),hm=new Set([...zx,p.CAPTION,p.COLGROUP,p.TBODY,p.TD,p.TFOOT,p.TH,p.THEAD,p.TR]),wu=new Set([p.APPLET,p.CAPTION,p.HTML,p.MARQUEE,p.OBJECT,p.TABLE,p.TD,p.TEMPLATE,p.TH]),K_=new Set([...wu,p.OL,p.UL]),G_=new Set([...wu,p.BUTTON]),pm=new Set([p.ANNOTATION_XML,p.MI,p.MN,p.MO,p.MS,p.MTEXT]),mm=new Set([p.DESC,p.FOREIGN_OBJECT,p.TITLE]),Q_=new Set([p.TR,p.TEMPLATE,p.HTML]),X_=new Set([p.TBODY,p.TFOOT,p.THEAD,p.TEMPLATE,p.HTML]),J_=new Set([p.TABLE,p.TEMPLATE,p.HTML]),Z_=new Set([p.TD,p.TH]);class eL{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=p.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===p.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===W.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==W.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Td,W.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Z_,W.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(J_,W.HTML)}clearBackToTableBodyContext(){this.clearBackTo(X_,W.HTML)}clearBackToTableRowContext(){this.clearBackTo(Q_,W.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===p.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===p.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case W.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case W.SVG:{if(mm.has(i))return!1;break}case W.MATHML:{if(pm.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,wu)}hasInListItemScope(t){return this.hasInDynamicScope(t,K_)}hasInButtonScope(t){return this.hasInDynamicScope(t,G_)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case W.HTML:{if(Td.has(n))return!0;if(wu.has(n))return!1;break}case W.SVG:{if(mm.has(n))return!1;break}case W.MATHML:{if(pm.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===W.HTML)switch(this.tagIDs[n]){case t:return!0;case p.TABLE:case p.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===W.HTML)switch(this.tagIDs[t]){case p.TBODY:case p.THEAD:case p.TFOOT:return!0;case p.TABLE:case p.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===W.HTML)switch(this.tagIDs[n]){case t:return!0;case p.OPTION:case p.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&zx.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&hm.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&hm.has(this.currentTagId);)this.pop()}}const mc=3;var $n;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})($n||($n={}));const gm={type:$n.Marker};class tL{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const u=this.entries[o];if(u.type===$n.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===a){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:o,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<mc)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<mc)return;const i=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<r.length;a++){const o=r[a];o.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=mc&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(gm)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:$n.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:$n.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(gm);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===$n.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===$n.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===$n.Element&&n.element===t)}}const Lr={createDocument(){return{nodeName:"#document",mode:kn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Lr.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Lr.isTextNode(n)){n.value+=t;return}}Lr.appendChild(e,Lr.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Lr.isTextNode(r)?r.value+=t:Lr.insertBefore(e,Lr.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation=I(I({},e.sourceCodeLocation),t)}},$x="html",nL="about:legacy-compat",rL="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Vx=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],iL=[...Vx,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],sL=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),qx=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],aL=[...qx,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function bm(e,t){return t.some(n=>e.startsWith(n))}function oL(e){return e.name===$x&&e.publicId===null&&(e.systemId===null||e.systemId===nL)}function uL(e){if(e.name!==$x)return kn.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===rL)return kn.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),sL.has(n))return kn.QUIRKS;let r=t===null?iL:Vx;if(bm(n,r))return kn.QUIRKS;if(r=t===null?qx:aL,bm(n,r))return kn.LIMITED_QUIRKS}return kn.NO_QUIRKS}const xm={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},lL="definitionurl",cL="definitionURL",dL=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),fL=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:W.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:W.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:W.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:W.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:W.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:W.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:W.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:W.XML}],["xml:space",{prefix:"xml",name:"space",namespace:W.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:W.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:W.XMLNS}]]),hL=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),pL=new Set([p.B,p.BIG,p.BLOCKQUOTE,p.BODY,p.BR,p.CENTER,p.CODE,p.DD,p.DIV,p.DL,p.DT,p.EM,p.EMBED,p.H1,p.H2,p.H3,p.H4,p.H5,p.H6,p.HEAD,p.HR,p.I,p.IMG,p.LI,p.LISTING,p.MENU,p.META,p.NOBR,p.OL,p.P,p.PRE,p.RUBY,p.S,p.SMALL,p.SPAN,p.STRONG,p.STRIKE,p.SUB,p.SUP,p.TABLE,p.TT,p.U,p.UL,p.VAR]);function mL(e){const t=e.tagID;return t===p.FONT&&e.attrs.some(({name:r})=>r===yi.COLOR||r===yi.SIZE||r===yi.FACE)||pL.has(t)}function Wx(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===lL){e.attrs[t].name=cL;break}}function Yx(e){for(let t=0;t<e.attrs.length;t++){const n=dL.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Gf(e){for(let t=0;t<e.attrs.length;t++){const n=fL.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function gL(e){const t=hL.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Es(e.tagName))}function bL(e,t){return t===W.MATHML&&(e===p.MI||e===p.MO||e===p.MN||e===p.MS||e===p.MTEXT)}function xL(e,t,n){if(t===W.MATHML&&e===p.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===yi.ENCODING){const i=n[r].value.toLowerCase();return i===xm.TEXT_HTML||i===xm.APPLICATION_XML}}return t===W.SVG&&(e===p.FOREIGN_OBJECT||e===p.DESC||e===p.TITLE)}function yL(e,t,n,r){return(!r||r===W.HTML)&&xL(e,t,n)||(!r||r===W.MATHML)&&bL(e,t)}const EL="hidden",TL=8,kL=3;var N;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(N||(N={}));const SL={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Kx=new Set([p.TABLE,p.TBODY,p.TFOOT,p.THEAD,p.TR]),ym={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Lr,onParseError:null};let Em=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=N.INITIAL,this.originalInsertionMode=N.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=I(I({},ym),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n!=null?n:this.treeAdapter.createDocument(),this.tokenizer=new Y_(this.options,this),this.activeFormattingElements=new tL(this.treeAdapter),this.fragmentContextID=r?Es(this.treeAdapter.getTagName(r)):p.UNKNOWN,this._setContextModes(r!=null?r:this.document,this.fragmentContextID),this.openElements=new eL(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r=I(I({},ym),n);t!=null||(t=r.treeAdapter.createElement(M.TEMPLATE,W.HTML,[]));const i=r.treeAdapter.createElement("documentmock",W.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===p.TEMPLATE&&s.tmplInsertionModeStack.unshift(N.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:SL,a={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===W.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,W.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=N.TEXT}switchToPlaintextParsing(){this.insertionMode=N.TEXT,this.originalInsertionMode=N.IN_BODY,this.tokenizer.state=ft.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===M.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==W.HTML))switch(this.fragmentContextID){case p.TITLE:case p.TEXTAREA:{this.tokenizer.state=ft.RCDATA;break}case p.STYLE:case p.XMP:case p.IFRAME:case p.NOEMBED:case p.NOFRAMES:case p.NOSCRIPT:{this.tokenizer.state=ft.RAWTEXT;break}case p.SCRIPT:{this.tokenizer.state=ft.SCRIPT_DATA;break}case p.PLAINTEXT:{this.tokenizer.state=ft.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&ne(I({},n),{startTag:n});this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r!=null?r:this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,W.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,W.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(M.HTML,W.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,p.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,a=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===_e.END_TAG&&i===n.tagName?{endTag:I({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===p.SVG&&this.treeAdapter.getTagName(n)===M.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===W.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===p.MGLYPH||t.tagID===p.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,W.HTML)}_processToken(t){switch(t.type){case _e.CHARACTER:{this.onCharacter(t);break}case _e.NULL_CHARACTER:{this.onNullCharacter(t);break}case _e.COMMENT:{this.onComment(t);break}case _e.DOCTYPE:{this.onDoctype(t);break}case _e.START_TAG:{this._processStartTag(t);break}case _e.END_TAG:{this.onEndTag(t);break}case _e.EOF:{this.onEof(t);break}case _e.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return yL(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===$n.Marker||this.openElements.contains(i.element)),r=n===-1?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=N.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(p.P),this.openElements.popUntilTagNamePopped(p.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case p.TR:{this.insertionMode=N.IN_ROW;return}case p.TBODY:case p.THEAD:case p.TFOOT:{this.insertionMode=N.IN_TABLE_BODY;return}case p.CAPTION:{this.insertionMode=N.IN_CAPTION;return}case p.COLGROUP:{this.insertionMode=N.IN_COLUMN_GROUP;return}case p.TABLE:{this.insertionMode=N.IN_TABLE;return}case p.BODY:{this.insertionMode=N.IN_BODY;return}case p.FRAMESET:{this.insertionMode=N.IN_FRAMESET;return}case p.SELECT:{this._resetInsertionModeForSelect(t);return}case p.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case p.HTML:{this.insertionMode=this.headElement?N.AFTER_HEAD:N.BEFORE_HEAD;return}case p.TD:case p.TH:{if(t>0){this.insertionMode=N.IN_CELL;return}break}case p.HEAD:{if(t>0){this.insertionMode=N.IN_HEAD;return}break}}this.insertionMode=N.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===p.TEMPLATE)break;if(r===p.TABLE){this.insertionMode=N.IN_SELECT_IN_TABLE;return}}this.insertionMode=N.IN_SELECT}_isElementCausesFosterParenting(t){return Kx.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case p.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===W.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case p.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return $_[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ZR(this,t);return}switch(this.insertionMode){case N.INITIAL:{_s(this,t);break}case N.BEFORE_HTML:{Js(this,t);break}case N.BEFORE_HEAD:{Zs(this,t);break}case N.IN_HEAD:{ea(this,t);break}case N.IN_HEAD_NO_SCRIPT:{ta(this,t);break}case N.AFTER_HEAD:{na(this,t);break}case N.IN_BODY:case N.IN_CAPTION:case N.IN_CELL:case N.IN_TEMPLATE:{Qx(this,t);break}case N.TEXT:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{gc(this,t);break}case N.IN_TABLE_TEXT:{ny(this,t);break}case N.IN_COLUMN_GROUP:{Cu(this,t);break}case N.AFTER_BODY:{Au(this,t);break}case N.AFTER_AFTER_BODY:{So(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){JR(this,t);return}switch(this.insertionMode){case N.INITIAL:{_s(this,t);break}case N.BEFORE_HTML:{Js(this,t);break}case N.BEFORE_HEAD:{Zs(this,t);break}case N.IN_HEAD:{ea(this,t);break}case N.IN_HEAD_NO_SCRIPT:{ta(this,t);break}case N.AFTER_HEAD:{na(this,t);break}case N.TEXT:{this._insertCharacters(t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{gc(this,t);break}case N.IN_COLUMN_GROUP:{Cu(this,t);break}case N.AFTER_BODY:{Au(this,t);break}case N.AFTER_AFTER_BODY:{So(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){kd(this,t);return}switch(this.insertionMode){case N.INITIAL:case N.BEFORE_HTML:case N.BEFORE_HEAD:case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:case N.IN_BODY:case N.IN_TABLE:case N.IN_CAPTION:case N.IN_COLUMN_GROUP:case N.IN_TABLE_BODY:case N.IN_ROW:case N.IN_CELL:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:case N.IN_TEMPLATE:case N.IN_FRAMESET:case N.AFTER_FRAMESET:{kd(this,t);break}case N.IN_TABLE_TEXT:{Ls(this,t);break}case N.AFTER_BODY:{vL(this,t);break}case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{_L(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case N.INITIAL:{LL(this,t);break}case N.BEFORE_HEAD:case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:{this._err(t,U.misplacedDoctype);break}case N.IN_TABLE_TEXT:{Ls(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,U.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?eM(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case N.INITIAL:{_s(this,t);break}case N.BEFORE_HTML:{RL(this,t);break}case N.BEFORE_HEAD:{DL(this,t);break}case N.IN_HEAD:{Dn(this,t);break}case N.IN_HEAD_NO_SCRIPT:{FL(this,t);break}case N.AFTER_HEAD:{UL(this,t);break}case N.IN_BODY:{jt(this,t);break}case N.IN_TABLE:{cs(this,t);break}case N.IN_TABLE_TEXT:{Ls(this,t);break}case N.IN_CAPTION:{PR(this,t);break}case N.IN_COLUMN_GROUP:{Jf(this,t);break}case N.IN_TABLE_BODY:{ol(this,t);break}case N.IN_ROW:{ul(this,t);break}case N.IN_CELL:{HR(this,t);break}case N.IN_SELECT:{sy(this,t);break}case N.IN_SELECT_IN_TABLE:{jR(this,t);break}case N.IN_TEMPLATE:{$R(this,t);break}case N.AFTER_BODY:{qR(this,t);break}case N.IN_FRAMESET:{WR(this,t);break}case N.AFTER_FRAMESET:{KR(this,t);break}case N.AFTER_AFTER_BODY:{QR(this,t);break}case N.AFTER_AFTER_FRAMESET:{XR(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?tM(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case N.INITIAL:{_s(this,t);break}case N.BEFORE_HTML:{ML(this,t);break}case N.BEFORE_HEAD:{PL(this,t);break}case N.IN_HEAD:{BL(this,t);break}case N.IN_HEAD_NO_SCRIPT:{HL(this,t);break}case N.AFTER_HEAD:{jL(this,t);break}case N.IN_BODY:{al(this,t);break}case N.TEXT:{AR(this,t);break}case N.IN_TABLE:{xa(this,t);break}case N.IN_TABLE_TEXT:{Ls(this,t);break}case N.IN_CAPTION:{BR(this,t);break}case N.IN_COLUMN_GROUP:{FR(this,t);break}case N.IN_TABLE_BODY:{Sd(this,t);break}case N.IN_ROW:{iy(this,t);break}case N.IN_CELL:{UR(this,t);break}case N.IN_SELECT:{ay(this,t);break}case N.IN_SELECT_IN_TABLE:{zR(this,t);break}case N.IN_TEMPLATE:{VR(this,t);break}case N.AFTER_BODY:{uy(this,t);break}case N.IN_FRAMESET:{YR(this,t);break}case N.AFTER_FRAMESET:{GR(this,t);break}case N.AFTER_AFTER_BODY:{So(this,t);break}}}onEof(t){switch(this.insertionMode){case N.INITIAL:{_s(this,t);break}case N.BEFORE_HTML:{Js(this,t);break}case N.BEFORE_HEAD:{Zs(this,t);break}case N.IN_HEAD:{ea(this,t);break}case N.IN_HEAD_NO_SCRIPT:{ta(this,t);break}case N.AFTER_HEAD:{na(this,t);break}case N.IN_BODY:case N.IN_TABLE:case N.IN_CAPTION:case N.IN_COLUMN_GROUP:case N.IN_TABLE_BODY:case N.IN_ROW:case N.IN_CELL:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:{ey(this,t);break}case N.TEXT:{NR(this,t);break}case N.IN_TABLE_TEXT:{Ls(this,t);break}case N.IN_TEMPLATE:{oy(this,t);break}case N.AFTER_BODY:case N.IN_FRAMESET:case N.AFTER_FRAMESET:case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{Xf(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===k.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case N.IN_HEAD:case N.IN_HEAD_NO_SCRIPT:case N.AFTER_HEAD:case N.TEXT:case N.IN_COLUMN_GROUP:case N.IN_SELECT:case N.IN_SELECT_IN_TABLE:case N.IN_FRAMESET:case N.AFTER_FRAMESET:{this._insertCharacters(t);break}case N.IN_BODY:case N.IN_CAPTION:case N.IN_CELL:case N.IN_TEMPLATE:case N.AFTER_BODY:case N.AFTER_AFTER_BODY:case N.AFTER_AFTER_FRAMESET:{Gx(this,t);break}case N.IN_TABLE:case N.IN_TABLE_BODY:case N.IN_ROW:{gc(this,t);break}case N.IN_TABLE_TEXT:{ty(this,t);break}}}};function wL(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Zx(e,t),n}function CL(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function AL(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,a=i;a!==n;s++,a=i){i=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),u=o&&s>=kL;!o||u?(u&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=NL(e,o),r===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function NL(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function IL(e,t,n){const r=e.treeAdapter.getTagName(t),i=Es(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===p.TEMPLATE&&s===W.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function OL(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function Qf(e,t){for(let n=0;n<TL;n++){const r=wL(e,t);if(!r)break;const i=CL(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=AL(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),a&&IL(e,a,s),OL(e,i,r)}}function kd(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function vL(e,t){e._appendCommentNode(t,e.openElements.items[0])}function _L(e,t){e._appendCommentNode(t,e.document)}function Xf(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function LL(e,t){e._setDocumentType(t);const n=t.forceQuirks?kn.QUIRKS:uL(t);oL(t)||e._err(t,U.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=N.BEFORE_HTML}function _s(e,t){e._err(t,U.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,kn.QUIRKS),e.insertionMode=N.BEFORE_HTML,e._processToken(t)}function RL(e,t){t.tagID===p.HTML?(e._insertElement(t,W.HTML),e.insertionMode=N.BEFORE_HEAD):Js(e,t)}function ML(e,t){const n=t.tagID;(n===p.HTML||n===p.HEAD||n===p.BODY||n===p.BR)&&Js(e,t)}function Js(e,t){e._insertFakeRootElement(),e.insertionMode=N.BEFORE_HEAD,e._processToken(t)}function DL(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.HEAD:{e._insertElement(t,W.HTML),e.headElement=e.openElements.current,e.insertionMode=N.IN_HEAD;break}default:Zs(e,t)}}function PL(e,t){const n=t.tagID;n===p.HEAD||n===p.BODY||n===p.HTML||n===p.BR?Zs(e,t):e._err(t,U.endTagWithoutMatchingOpenElement)}function Zs(e,t){e._insertFakeElement(M.HEAD,p.HEAD),e.headElement=e.openElements.current,e.insertionMode=N.IN_HEAD,e._processToken(t)}function Dn(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case p.TITLE:{e._switchToTextParsing(t,ft.RCDATA);break}case p.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ft.RAWTEXT):(e._insertElement(t,W.HTML),e.insertionMode=N.IN_HEAD_NO_SCRIPT);break}case p.NOFRAMES:case p.STYLE:{e._switchToTextParsing(t,ft.RAWTEXT);break}case p.SCRIPT:{e._switchToTextParsing(t,ft.SCRIPT_DATA);break}case p.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=N.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(N.IN_TEMPLATE);break}case p.HEAD:{e._err(t,U.misplacedStartTagForHeadElement);break}default:ea(e,t)}}function BL(e,t){switch(t.tagID){case p.HEAD:{e.openElements.pop(),e.insertionMode=N.AFTER_HEAD;break}case p.BODY:case p.BR:case p.HTML:{ea(e,t);break}case p.TEMPLATE:{vi(e,t);break}default:e._err(t,U.endTagWithoutMatchingOpenElement)}}function vi(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==p.TEMPLATE&&e._err(t,U.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(p.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,U.endTagWithoutMatchingOpenElement)}function ea(e,t){e.openElements.pop(),e.insertionMode=N.AFTER_HEAD,e._processToken(t)}function FL(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.BASEFONT:case p.BGSOUND:case p.HEAD:case p.LINK:case p.META:case p.NOFRAMES:case p.STYLE:{Dn(e,t);break}case p.NOSCRIPT:{e._err(t,U.nestedNoscriptInHead);break}default:ta(e,t)}}function HL(e,t){switch(t.tagID){case p.NOSCRIPT:{e.openElements.pop(),e.insertionMode=N.IN_HEAD;break}case p.BR:{ta(e,t);break}default:e._err(t,U.endTagWithoutMatchingOpenElement)}}function ta(e,t){const n=t.type===_e.EOF?U.openElementsLeftAfterEof:U.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=N.IN_HEAD,e._processToken(t)}function UL(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.BODY:{e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=N.IN_BODY;break}case p.FRAMESET:{e._insertElement(t,W.HTML),e.insertionMode=N.IN_FRAMESET;break}case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:case p.NOFRAMES:case p.SCRIPT:case p.STYLE:case p.TEMPLATE:case p.TITLE:{e._err(t,U.abandonedHeadElementChild),e.openElements.push(e.headElement,p.HEAD),Dn(e,t),e.openElements.remove(e.headElement);break}case p.HEAD:{e._err(t,U.misplacedStartTagForHeadElement);break}default:na(e,t)}}function jL(e,t){switch(t.tagID){case p.BODY:case p.HTML:case p.BR:{na(e,t);break}case p.TEMPLATE:{vi(e,t);break}default:e._err(t,U.endTagWithoutMatchingOpenElement)}}function na(e,t){e._insertFakeElement(M.BODY,p.BODY),e.insertionMode=N.IN_BODY,sl(e,t)}function sl(e,t){switch(t.type){case _e.CHARACTER:{Qx(e,t);break}case _e.WHITESPACE_CHARACTER:{Gx(e,t);break}case _e.COMMENT:{kd(e,t);break}case _e.START_TAG:{jt(e,t);break}case _e.END_TAG:{al(e,t);break}case _e.EOF:{ey(e,t);break}}}function Gx(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Qx(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function zL(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function $L(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function VL(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_FRAMESET)}function qL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML)}function WL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&Td.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,W.HTML)}function YL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function KL(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML),n||(e.formElement=e.openElements.current))}function GL(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===p.LI&&i===p.LI||(n===p.DD||n===p.DT)&&(i===p.DD||i===p.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==p.ADDRESS&&i!==p.DIV&&i!==p.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML)}function QL(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.tokenizer.state=ft.PLAINTEXT}function XL(e,t){e.openElements.hasInScope(p.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.framesetOk=!1}function JL(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(M.A);n&&(Qf(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ZL(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function eR(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(p.NOBR)&&(Qf(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,W.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function tR(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function nR(e,t){e.treeAdapter.getDocumentMode(e.document)!==kn.QUIRKS&&e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=N.IN_TABLE}function Xx(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,W.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Jx(e){const t=Ux(e,yi.TYPE);return t!=null&&t.toLowerCase()===EL}function rR(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,W.HTML),Jx(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function iR(e,t){e._appendElement(t,W.HTML),t.ackSelfClosing=!0}function sR(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._appendElement(t,W.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function aR(e,t){t.tagName=M.IMG,t.tagID=p.IMG,Xx(e,t)}function oR(e,t){e._insertElement(t,W.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ft.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=N.TEXT}function uR(e,t){e.openElements.hasInButtonScope(p.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ft.RAWTEXT)}function lR(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ft.RAWTEXT)}function Tm(e,t){e._switchToTextParsing(t,ft.RAWTEXT)}function cR(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===N.IN_TABLE||e.insertionMode===N.IN_CAPTION||e.insertionMode===N.IN_TABLE_BODY||e.insertionMode===N.IN_ROW||e.insertionMode===N.IN_CELL?N.IN_SELECT_IN_TABLE:N.IN_SELECT}function dR(e,t){e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML)}function fR(e,t){e.openElements.hasInScope(p.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,W.HTML)}function hR(e,t){e.openElements.hasInScope(p.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(p.RTC),e._insertElement(t,W.HTML)}function pR(e,t){e._reconstructActiveFormattingElements(),Wx(t),Gf(t),t.selfClosing?e._appendElement(t,W.MATHML):e._insertElement(t,W.MATHML),t.ackSelfClosing=!0}function mR(e,t){e._reconstructActiveFormattingElements(),Yx(t),Gf(t),t.selfClosing?e._appendElement(t,W.SVG):e._insertElement(t,W.SVG),t.ackSelfClosing=!0}function km(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,W.HTML)}function jt(e,t){switch(t.tagID){case p.I:case p.S:case p.B:case p.U:case p.EM:case p.TT:case p.BIG:case p.CODE:case p.FONT:case p.SMALL:case p.STRIKE:case p.STRONG:{ZL(e,t);break}case p.A:{JL(e,t);break}case p.H1:case p.H2:case p.H3:case p.H4:case p.H5:case p.H6:{WL(e,t);break}case p.P:case p.DL:case p.OL:case p.UL:case p.DIV:case p.DIR:case p.NAV:case p.MAIN:case p.MENU:case p.ASIDE:case p.CENTER:case p.FIGURE:case p.FOOTER:case p.HEADER:case p.HGROUP:case p.DIALOG:case p.DETAILS:case p.ADDRESS:case p.ARTICLE:case p.SEARCH:case p.SECTION:case p.SUMMARY:case p.FIELDSET:case p.BLOCKQUOTE:case p.FIGCAPTION:{qL(e,t);break}case p.LI:case p.DD:case p.DT:{GL(e,t);break}case p.BR:case p.IMG:case p.WBR:case p.AREA:case p.EMBED:case p.KEYGEN:{Xx(e,t);break}case p.HR:{sR(e,t);break}case p.RB:case p.RTC:{fR(e,t);break}case p.RT:case p.RP:{hR(e,t);break}case p.PRE:case p.LISTING:{YL(e,t);break}case p.XMP:{uR(e,t);break}case p.SVG:{mR(e,t);break}case p.HTML:{zL(e,t);break}case p.BASE:case p.LINK:case p.META:case p.STYLE:case p.TITLE:case p.SCRIPT:case p.BGSOUND:case p.BASEFONT:case p.TEMPLATE:{Dn(e,t);break}case p.BODY:{$L(e,t);break}case p.FORM:{KL(e,t);break}case p.NOBR:{eR(e,t);break}case p.MATH:{pR(e,t);break}case p.TABLE:{nR(e,t);break}case p.INPUT:{rR(e,t);break}case p.PARAM:case p.TRACK:case p.SOURCE:{iR(e,t);break}case p.IMAGE:{aR(e,t);break}case p.BUTTON:{XL(e,t);break}case p.APPLET:case p.OBJECT:case p.MARQUEE:{tR(e,t);break}case p.IFRAME:{lR(e,t);break}case p.SELECT:{cR(e,t);break}case p.OPTION:case p.OPTGROUP:{dR(e,t);break}case p.NOEMBED:case p.NOFRAMES:{Tm(e,t);break}case p.FRAMESET:{VL(e,t);break}case p.TEXTAREA:{oR(e,t);break}case p.NOSCRIPT:{e.options.scriptingEnabled?Tm(e,t):km(e,t);break}case p.PLAINTEXT:{QL(e,t);break}case p.COL:case p.TH:case p.TD:case p.TR:case p.HEAD:case p.FRAME:case p.TBODY:case p.TFOOT:case p.THEAD:case p.CAPTION:case p.COLGROUP:break;default:km(e,t)}}function gR(e,t){if(e.openElements.hasInScope(p.BODY)&&(e.insertionMode=N.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function bR(e,t){e.openElements.hasInScope(p.BODY)&&(e.insertionMode=N.AFTER_BODY,uy(e,t))}function xR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function yR(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(p.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(p.FORM):n&&e.openElements.remove(n))}function ER(e){e.openElements.hasInButtonScope(p.P)||e._insertFakeElement(M.P,p.P),e._closePElement()}function TR(e){e.openElements.hasInListItemScope(p.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(p.LI),e.openElements.popUntilTagNamePopped(p.LI))}function kR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function SR(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function wR(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function CR(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(M.BR,p.BR),e.openElements.pop(),e.framesetOk=!1}function Zx(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==p.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,a))break}}function al(e,t){switch(t.tagID){case p.A:case p.B:case p.I:case p.S:case p.U:case p.EM:case p.TT:case p.BIG:case p.CODE:case p.FONT:case p.NOBR:case p.SMALL:case p.STRIKE:case p.STRONG:{Qf(e,t);break}case p.P:{ER(e);break}case p.DL:case p.UL:case p.OL:case p.DIR:case p.DIV:case p.NAV:case p.PRE:case p.MAIN:case p.MENU:case p.ASIDE:case p.BUTTON:case p.CENTER:case p.FIGURE:case p.FOOTER:case p.HEADER:case p.HGROUP:case p.DIALOG:case p.ADDRESS:case p.ARTICLE:case p.DETAILS:case p.SEARCH:case p.SECTION:case p.SUMMARY:case p.LISTING:case p.FIELDSET:case p.BLOCKQUOTE:case p.FIGCAPTION:{xR(e,t);break}case p.LI:{TR(e);break}case p.DD:case p.DT:{kR(e,t);break}case p.H1:case p.H2:case p.H3:case p.H4:case p.H5:case p.H6:{SR(e);break}case p.BR:{CR(e);break}case p.BODY:{gR(e,t);break}case p.HTML:{bR(e,t);break}case p.FORM:{yR(e);break}case p.APPLET:case p.OBJECT:case p.MARQUEE:{wR(e,t);break}case p.TEMPLATE:{vi(e,t);break}default:Zx(e,t)}}function ey(e,t){e.tmplInsertionModeStack.length>0?oy(e,t):Xf(e,t)}function AR(e,t){var n;t.tagID===p.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function NR(e,t){e._err(t,U.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function gc(e,t){if(e.openElements.currentTagId!==void 0&&Kx.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=N.IN_TABLE_TEXT,t.type){case _e.CHARACTER:{ny(e,t);break}case _e.WHITESPACE_CHARACTER:{ty(e,t);break}}else _a(e,t)}function IR(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_CAPTION}function OR(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_COLUMN_GROUP}function vR(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M.COLGROUP,p.COLGROUP),e.insertionMode=N.IN_COLUMN_GROUP,Jf(e,t)}function _R(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_TABLE_BODY}function LR(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M.TBODY,p.TBODY),e.insertionMode=N.IN_TABLE_BODY,ol(e,t)}function RR(e,t){e.openElements.hasInTableScope(p.TABLE)&&(e.openElements.popUntilTagNamePopped(p.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function MR(e,t){Jx(t)?e._appendElement(t,W.HTML):_a(e,t),t.ackSelfClosing=!0}function DR(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,W.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function cs(e,t){switch(t.tagID){case p.TD:case p.TH:case p.TR:{LR(e,t);break}case p.STYLE:case p.SCRIPT:case p.TEMPLATE:{Dn(e,t);break}case p.COL:{vR(e,t);break}case p.FORM:{DR(e,t);break}case p.TABLE:{RR(e,t);break}case p.TBODY:case p.TFOOT:case p.THEAD:{_R(e,t);break}case p.INPUT:{MR(e,t);break}case p.CAPTION:{IR(e,t);break}case p.COLGROUP:{OR(e,t);break}default:_a(e,t)}}function xa(e,t){switch(t.tagID){case p.TABLE:{e.openElements.hasInTableScope(p.TABLE)&&(e.openElements.popUntilTagNamePopped(p.TABLE),e._resetInsertionMode());break}case p.TEMPLATE:{vi(e,t);break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TBODY:case p.TD:case p.TFOOT:case p.TH:case p.THEAD:case p.TR:break;default:_a(e,t)}}function _a(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,sl(e,t),e.fosterParentingEnabled=n}function ty(e,t){e.pendingCharacterTokens.push(t)}function ny(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Ls(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)_a(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ry=new Set([p.CAPTION,p.COL,p.COLGROUP,p.TBODY,p.TD,p.TFOOT,p.TH,p.THEAD,p.TR]);function PR(e,t){const n=t.tagID;ry.has(n)?e.openElements.hasInTableScope(p.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_TABLE,cs(e,t)):jt(e,t)}function BR(e,t){const n=t.tagID;switch(n){case p.CAPTION:case p.TABLE:{e.openElements.hasInTableScope(p.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(p.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_TABLE,n===p.TABLE&&xa(e,t));break}case p.BODY:case p.COL:case p.COLGROUP:case p.HTML:case p.TBODY:case p.TD:case p.TFOOT:case p.TH:case p.THEAD:case p.TR:break;default:al(e,t)}}function Jf(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.COL:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case p.TEMPLATE:{Dn(e,t);break}default:Cu(e,t)}}function FR(e,t){switch(t.tagID){case p.COLGROUP:{e.openElements.currentTagId===p.COLGROUP&&(e.openElements.pop(),e.insertionMode=N.IN_TABLE);break}case p.TEMPLATE:{vi(e,t);break}case p.COL:break;default:Cu(e,t)}}function Cu(e,t){e.openElements.currentTagId===p.COLGROUP&&(e.openElements.pop(),e.insertionMode=N.IN_TABLE,e._processToken(t))}function ol(e,t){switch(t.tagID){case p.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_ROW;break}case p.TH:case p.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(M.TR,p.TR),e.insertionMode=N.IN_ROW,ul(e,t);break}case p.CAPTION:case p.COL:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE,cs(e,t));break}default:cs(e,t)}}function Sd(e,t){const n=t.tagID;switch(t.tagID){case p.TBODY:case p.TFOOT:case p.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE);break}case p.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE,xa(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TD:case p.TH:case p.TR:break;default:xa(e,t)}}function ul(e,t){switch(t.tagID){case p.TH:case p.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,W.HTML),e.insertionMode=N.IN_CELL,e.activeFormattingElements.insertMarker();break}case p.CAPTION:case p.COL:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:case p.TR:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,ol(e,t));break}default:cs(e,t)}}function iy(e,t){switch(t.tagID){case p.TR:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY);break}case p.TABLE:{e.openElements.hasInTableScope(p.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,Sd(e,t));break}case p.TBODY:case p.TFOOT:case p.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(p.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=N.IN_TABLE_BODY,Sd(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:case p.TD:case p.TH:break;default:xa(e,t)}}function HR(e,t){const n=t.tagID;ry.has(n)?(e.openElements.hasInTableScope(p.TD)||e.openElements.hasInTableScope(p.TH))&&(e._closeTableCell(),ul(e,t)):jt(e,t)}function UR(e,t){const n=t.tagID;switch(n){case p.TD:case p.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=N.IN_ROW);break}case p.TABLE:case p.TBODY:case p.TFOOT:case p.THEAD:case p.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),iy(e,t));break}case p.BODY:case p.CAPTION:case p.COL:case p.COLGROUP:case p.HTML:break;default:al(e,t)}}function sy(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.OPTION:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e._insertElement(t,W.HTML);break}case p.OPTGROUP:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop(),e._insertElement(t,W.HTML);break}case p.HR:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop(),e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case p.INPUT:case p.KEYGEN:case p.TEXTAREA:case p.SELECT:{e.openElements.hasInSelectScope(p.SELECT)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),t.tagID!==p.SELECT&&e._processStartTag(t));break}case p.SCRIPT:case p.TEMPLATE:{Dn(e,t);break}}}function ay(e,t){switch(t.tagID){case p.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===p.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===p.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===p.OPTGROUP&&e.openElements.pop();break}case p.OPTION:{e.openElements.currentTagId===p.OPTION&&e.openElements.pop();break}case p.SELECT:{e.openElements.hasInSelectScope(p.SELECT)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode());break}case p.TEMPLATE:{vi(e,t);break}}}function jR(e,t){const n=t.tagID;n===p.CAPTION||n===p.TABLE||n===p.TBODY||n===p.TFOOT||n===p.THEAD||n===p.TR||n===p.TD||n===p.TH?(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),e._processStartTag(t)):sy(e,t)}function zR(e,t){const n=t.tagID;n===p.CAPTION||n===p.TABLE||n===p.TBODY||n===p.TFOOT||n===p.THEAD||n===p.TR||n===p.TD||n===p.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(p.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ay(e,t)}function $R(e,t){switch(t.tagID){case p.BASE:case p.BASEFONT:case p.BGSOUND:case p.LINK:case p.META:case p.NOFRAMES:case p.SCRIPT:case p.STYLE:case p.TEMPLATE:case p.TITLE:{Dn(e,t);break}case p.CAPTION:case p.COLGROUP:case p.TBODY:case p.TFOOT:case p.THEAD:{e.tmplInsertionModeStack[0]=N.IN_TABLE,e.insertionMode=N.IN_TABLE,cs(e,t);break}case p.COL:{e.tmplInsertionModeStack[0]=N.IN_COLUMN_GROUP,e.insertionMode=N.IN_COLUMN_GROUP,Jf(e,t);break}case p.TR:{e.tmplInsertionModeStack[0]=N.IN_TABLE_BODY,e.insertionMode=N.IN_TABLE_BODY,ol(e,t);break}case p.TD:case p.TH:{e.tmplInsertionModeStack[0]=N.IN_ROW,e.insertionMode=N.IN_ROW,ul(e,t);break}default:e.tmplInsertionModeStack[0]=N.IN_BODY,e.insertionMode=N.IN_BODY,jt(e,t)}}function VR(e,t){t.tagID===p.TEMPLATE&&vi(e,t)}function oy(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(p.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Xf(e,t)}function qR(e,t){t.tagID===p.HTML?jt(e,t):Au(e,t)}function uy(e,t){var n;if(t.tagID===p.HTML){if(e.fragmentContext||(e.insertionMode=N.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===p.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else Au(e,t)}function Au(e,t){e.insertionMode=N.IN_BODY,sl(e,t)}function WR(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.FRAMESET:{e._insertElement(t,W.HTML);break}case p.FRAME:{e._appendElement(t,W.HTML),t.ackSelfClosing=!0;break}case p.NOFRAMES:{Dn(e,t);break}}}function YR(e,t){t.tagID===p.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==p.FRAMESET&&(e.insertionMode=N.AFTER_FRAMESET))}function KR(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.NOFRAMES:{Dn(e,t);break}}}function GR(e,t){t.tagID===p.HTML&&(e.insertionMode=N.AFTER_AFTER_FRAMESET)}function QR(e,t){t.tagID===p.HTML?jt(e,t):So(e,t)}function So(e,t){e.insertionMode=N.IN_BODY,sl(e,t)}function XR(e,t){switch(t.tagID){case p.HTML:{jt(e,t);break}case p.NOFRAMES:{Dn(e,t);break}}}function JR(e,t){t.chars=Je,e._insertCharacters(t)}function ZR(e,t){e._insertCharacters(t),e.framesetOk=!1}function ly(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==W.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function eM(e,t){if(mL(t))ly(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===W.MATHML?Wx(t):r===W.SVG&&(gL(t),Yx(t)),Gf(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function tM(e,t){if(t.tagID===p.P||t.tagID===p.BR){ly(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===W.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}M.AREA,M.BASE,M.BASEFONT,M.BGSOUND,M.BR,M.COL,M.EMBED,M.FRAME,M.HR,M.IMG,M.INPUT,M.KEYGEN,M.LINK,M.META,M.PARAM,M.SOURCE,M.TRACK,M.WBR;const nM=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,rM=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Sm={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function cy(e,t){const n=hM(e),r=ix("type",{handlers:{root:iM,element:sM,text:aM,comment:fy,doctype:oM,raw:lM},unknown:cM}),i={parser:n?new Em(Sm):Em.getFragmentParser(void 0,Sm),handle(o){r(o,i)},stitches:!1,options:t||{}};r(e,i),Ts(i,tr());const s=n?i.parser.document:i.parser.getFragment(),a=i_(s,{file:i.options.file});return i.stitches&&il(a,"comment",function(o,u,l){const c=o;if(c.value.stitch&&l&&u!==void 0){const d=l.children;return d[u]=c.value.stitch,u}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function dy(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function iM(e,t){dy(e.children,t)}function sM(e,t){dM(e,t),dy(e.children,t),fM(e,t)}function aM(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:_e.CHARACTER,chars:e.value,location:La(e)};Ts(t,tr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function oM(e,t){const n={type:_e.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:La(e)};Ts(t,tr(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function uM(e,t){t.stitches=!0;const n=pM(e);if("children"in e&&"children"in n){const r=cy({type:"root",children:e.children},t.options);n.children=r.children}fy({type:"comment",value:{stitch:n}},t)}function fy(e,t){const n=e.value,r={type:_e.COMMENT,data:n,location:La(e)};Ts(t,tr(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function lM(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,hy(t,tr(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(nM,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function cM(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))uM(n,t);else{let r="";throw rM.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Ts(e,t){hy(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ft.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function hy(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function dM(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ft.PLAINTEXT)return;Ts(t,tr(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:fi.html;i===fi.html&&n==="svg"&&(i=fi.svg);const s=y_(ne(I({},e),{children:[]}),{space:i===fi.svg?"svg":"html"}),a={type:_e.START_TAG,tagName:n,tagID:Es(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:La(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function fM(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&N_.includes(n)||t.parser.tokenizer.state===ft.PLAINTEXT)return;Ts(t,Ju(e));const r={type:_e.END_TAG,tagName:n,tagID:Es(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:La(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ft.RCDATA||t.parser.tokenizer.state===ft.RAWTEXT||t.parser.tokenizer.state===ft.SCRIPT_DATA)&&(t.parser.tokenizer.state=ft.DATA)}function hM(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function La(e){const t=tr(e)||{line:void 0,column:void 0,offset:void 0},n=Ju(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function pM(e){return"children"in e?ls(ne(I({},e),{children:[]})):ls(e)}function wo(e){return function(t,n){return cy(t,ne(I({},e),{file:n}))}}var bc={exports:{}},wm;function mM(){return wm||(wm=1,(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=(function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function E(T){return T instanceof u?new u(T.type,E(T.content),T.alias):Array.isArray(T)?T.map(E):T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(E){return Object.prototype.toString.call(E).slice(8,-1)},objId:function(E){return E.__id||Object.defineProperty(E,"__id",{value:++s}),E.__id},clone:function E(T,v){v=v||{};var C,w;switch(o.util.type(T)){case"Object":if(w=o.util.objId(T),v[w])return v[w];C={},v[w]=C;for(var D in T)T.hasOwnProperty(D)&&(C[D]=E(T[D],v));return C;case"Array":return w=o.util.objId(T),v[w]?v[w]:(C=[],v[w]=C,T.forEach(function(B,j){C[j]=E(B,v)}),C);default:return T}},getLanguage:function(E){for(;E;){var T=i.exec(E.className);if(T)return T[1].toLowerCase();E=E.parentElement}return"none"},setLanguage:function(E,T){E.className=E.className.replace(RegExp(i,"gi"),""),E.classList.add("language-"+T)},currentScript:function(){if(typeof document=="undefined")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var E=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(E){var T=document.getElementsByTagName("script");for(var v in T)if(T[v].src==E)return T[v]}return null}},isActive:function(E,T,v){for(var C="no-"+T;E;){var w=E.classList;if(w.contains(T))return!0;if(w.contains(C))return!1;E=E.parentElement}return!!v}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(E,T){var v=o.util.clone(o.languages[E]);for(var C in T)v[C]=T[C];return v},insertBefore:function(E,T,v,C){C=C||o.languages;var w=C[E],D={};for(var B in w)if(w.hasOwnProperty(B)){if(B==T)for(var j in v)v.hasOwnProperty(j)&&(D[j]=v[j]);v.hasOwnProperty(B)||(D[B]=w[B])}var _=C[E];return C[E]=D,o.languages.DFS(o.languages,function($,H){H===_&&$!=E&&(this[$]=D)}),D},DFS:function E(T,v,C,w){w=w||{};var D=o.util.objId;for(var B in T)if(T.hasOwnProperty(B)){v.call(T,B,T[B],C||B);var j=T[B],_=o.util.type(j);_==="Object"&&!w[D(j)]?(w[D(j)]=!0,E(j,v,null,w)):_==="Array"&&!w[D(j)]&&(w[D(j)]=!0,E(j,v,B,w))}}},plugins:{},highlightAll:function(E,T){o.highlightAllUnder(document,E,T)},highlightAllUnder:function(E,T,v){var C={callback:v,container:E,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),o.hooks.run("before-all-elements-highlight",C);for(var w=0,D;D=C.elements[w++];)o.highlightElement(D,T===!0,C.callback)},highlightElement:function(E,T,v){var C=o.util.getLanguage(E),w=o.languages[C];o.util.setLanguage(E,C);var D=E.parentElement;D&&D.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(D,C);var B=E.textContent,j={element:E,language:C,grammar:w,code:B};function _(H){j.highlightedCode=H,o.hooks.run("before-insert",j),j.element.innerHTML=j.highlightedCode,o.hooks.run("after-highlight",j),o.hooks.run("complete",j),v&&v.call(j.element)}if(o.hooks.run("before-sanity-check",j),D=j.element.parentElement,D&&D.nodeName.toLowerCase()==="pre"&&!D.hasAttribute("tabindex")&&D.setAttribute("tabindex","0"),!j.code){o.hooks.run("complete",j),v&&v.call(j.element);return}if(o.hooks.run("before-highlight",j),!j.grammar){_(o.util.encode(j.code));return}if(T&&r.Worker){var $=new Worker(o.filename);$.onmessage=function(H){_(H.data)},$.postMessage(JSON.stringify({language:j.language,code:j.code,immediateClose:!0}))}else _(o.highlight(j.code,j.grammar,j.language))},highlight:function(E,T,v){var C={code:E,grammar:T,language:v};if(o.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=o.tokenize(C.code,C.grammar),o.hooks.run("after-tokenize",C),u.stringify(o.util.encode(C.tokens),C.language)},tokenize:function(E,T){var v=T.rest;if(v){for(var C in v)T[C]=v[C];delete T.rest}var w=new d;return h(w,w.head,E),c(E,w,T,w.head,0),m(w)},hooks:{all:{},add:function(E,T){var v=o.hooks.all;v[E]=v[E]||[],v[E].push(T)},run:function(E,T){var v=o.hooks.all[E];if(!(!v||!v.length))for(var C=0,w;w=v[C++];)w(T)}},Token:u};r.Prism=o;function u(E,T,v,C){this.type=E,this.content=T,this.alias=v,this.length=(C||"").length|0}u.stringify=function E(T,v){if(typeof T=="string")return T;if(Array.isArray(T)){var C="";return T.forEach(function(_){C+=E(_,v)}),C}var w={type:T.type,content:E(T.content,v),tag:"span",classes:["token",T.type],attributes:{},language:v},D=T.alias;D&&(Array.isArray(D)?Array.prototype.push.apply(w.classes,D):w.classes.push(D)),o.hooks.run("wrap",w);var B="";for(var j in w.attributes)B+=" "+j+'="'+(w.attributes[j]||"").replace(/"/g,"&quot;")+'"';return"<"+w.tag+' class="'+w.classes.join(" ")+'"'+B+">"+w.content+"</"+w.tag+">"};function l(E,T,v,C){E.lastIndex=T;var w=E.exec(v);if(w&&C&&w[1]){var D=w[1].length;w.index+=D,w[0]=w[0].slice(D)}return w}function c(E,T,v,C,w,D){for(var B in v)if(!(!v.hasOwnProperty(B)||!v[B])){var j=v[B];j=Array.isArray(j)?j:[j];for(var _=0;_<j.length;++_){if(D&&D.cause==B+","+_)return;var $=j[_],H=$.inside,Y=!!$.lookbehind,G=!!$.greedy,Z=$.alias;if(G&&!$.pattern.global){var ue=$.pattern.toString().match(/[imsuy]*$/)[0];$.pattern=RegExp($.pattern.source,ue+"g")}for(var ye=$.pattern||$,me=C.next,z=w;me!==T.tail&&!(D&&z>=D.reach);z+=me.value.length,me=me.next){var S=me.value;if(T.length>E.length)return;if(!(S instanceof u)){var pe=1,Ae;if(G){if(Ae=l(ye,z,E,Y),!Ae||Ae.index>=E.length)break;var Se=Ae.index,O=Ae.index+Ae[0].length,ke=z;for(ke+=me.value.length;Se>=ke;)me=me.next,ke+=me.value.length;if(ke-=me.value.length,z=ke,me.value instanceof u)continue;for(var st=me;st!==T.tail&&(ke<O||typeof st.value=="string");st=st.next)pe++,ke+=st.value.length;pe--,S=E.slice(z,ke),Ae.index-=z}else if(Ae=l(ye,0,S,Y),!Ae)continue;var Se=Ae.index,Et=Ae[0],mt=S.slice(0,Se),kt=S.slice(Se+Et.length),Rt=z+S.length;D&&Rt>D.reach&&(D.reach=Rt);var He=me.prev;mt&&(He=h(T,He,mt),z+=mt.length),f(T,He,pe);var at=new u(B,H?o.tokenize(Et,H):Et,Z,Et);if(me=h(T,He,at),kt&&h(T,me,kt),pe>1){var pn={cause:B+","+_,reach:Rt};c(E,T,v,me.prev,z,pn),D&&pn.reach>D.reach&&(D.reach=pn.reach)}}}}}}function d(){var E={value:null,prev:null,next:null},T={value:null,prev:E,next:null};E.next=T,this.head=E,this.tail=T,this.length=0}function h(E,T,v){var C=T.next,w={value:v,prev:T,next:C};return T.next=w,C.prev=w,E.length++,w}function f(E,T,v){for(var C=T.next,w=0;w<v&&C!==E.tail;w++)C=C.next;T.next=C,C.prev=T,E.length-=w}function m(E){for(var T=[],v=E.head.next;v!==E.tail;)T.push(v.value),v=v.next;return T}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(E){var T=JSON.parse(E.data),v=T.language,C=T.code,w=T.immediateClose;r.postMessage(o.highlight(C,o.languages[v],v)),w&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function y(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return o})(t);e.exports&&(e.exports=n),typeof Eh!="undefined"&&(Eh.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(b,y){return" Error "+b+" while fetching file: "+y},s=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",u="loading",l="loaded",c="failed",d="pre[data-src]:not(["+o+'="'+l+'"]):not(['+o+'="'+u+'"])';function h(b,y,x){var E=new XMLHttpRequest;E.open("GET",b,!0),E.onreadystatechange=function(){E.readyState==4&&(E.status<400&&E.responseText?y(E.responseText):E.status>=400?x(i(E.status,E.statusText)):x(s))},E.send(null)}function f(b){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(y){var x=Number(y[1]),E=y[2],T=y[3];return E?T?[x,Number(T)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+d}),n.hooks.add("before-sanity-check",function(b){var y=b.element;if(y.matches(d)){b.code="",y.setAttribute(o,u);var x=y.appendChild(document.createElement("CODE"));x.textContent=r;var E=y.getAttribute("data-src"),T=b.language;if(T==="none"){var v=(/\.(\w+)$/.exec(E)||[,"none"])[1];T=a[v]||v}n.util.setLanguage(x,T),n.util.setLanguage(y,T);var C=n.plugins.autoloader;C&&C.loadLanguages(T),h(E,function(w){y.setAttribute(o,l);var D=f(y.getAttribute("data-range"));if(D){var B=w.split(/\r\n?|\n/g),j=D[0],_=D[1]==null?B.length:D[1];j<0&&(j+=B.length),j=Math.max(0,Math.min(j-1,B.length)),_<0&&(_+=B.length),_=Math.max(0,Math.min(_,B.length)),w=B.slice(j,_).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(j+1))}x.textContent=w,n.highlightElement(x)},function(w){y.setAttribute(o,c),x.textContent=w})}}),n.plugins.fileHighlight={highlight:function(y){for(var x=(y||document).querySelectorAll(d),E=0,T;T=x[E++];)n.highlightElement(T)}};var m=!1;n.fileHighlight=function(){m||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),m=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(bc)),bc.exports}var gM=mM();const bM=Ta(gM);function xM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function wd(e,t){return Array(t+1).join(e)}function yM(e){return e.replace(/^\n*/,"")}function EM(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var TM=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Zf(e){return eh(e,TM)}var py=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function my(e){return eh(e,py)}function kM(e){return by(e,py)}var gy=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function SM(e){return eh(e,gy)}function wM(e){return by(e,gy)}function eh(e,t){return t.indexOf(e.nodeName)>=0}function by(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var zt={};zt.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};zt.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}};zt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var i=wd(r===1?"=":"-",e.length);return`

`+e+`
`+i+`

`}else return`

`+wd("#",r)+" "+e+`

`}};zt.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};zt.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}};zt.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",i=t.parentNode;if(i.nodeName==="OL"){var s=i.getAttribute("start"),a=Array.prototype.indexOf.call(i.children,t);r=(s?Number(s)+a:a+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};zt.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};zt.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",i=(r.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,a=n.fence.charAt(0),o=3,u=new RegExp("^"+a+"{3,}","gm"),l;l=u.exec(s);)l[0].length>=o&&(o=l[0].length+1);var c=wd(a,o);return`

`+c+i+`
`+s.replace(/\n$/,"")+`
`+c+`

`}};zt.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}};zt.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=Nu(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+r+")"}};zt.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),i=Nu(t.getAttribute("title"));i&&(i=' "'+i+'"');var s,a;switch(n.linkReferenceStyle){case"collapsed":s="["+e+"][]",a="["+e+"]: "+r+i;break;case"shortcut":s="["+e+"]",a="["+e+"]: "+r+i;break;default:var o=this.references.length+1;s="["+e+"]["+o+"]",a="["+o+"]: "+r+i}return this.references.push(a),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};zt.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}};zt.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}};zt.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}};zt.image={filter:"img",replacement:function(e,t){var n=Nu(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=Nu(t.getAttribute("title")),s=i?' "'+i+'"':"";return r?"!["+n+"]("+r+s+")":""}};function Nu(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function xy(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}xy.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=xc(this.array,e,this.options))||(t=xc(this._keep,e,this.options))||(t=xc(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function xc(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(CM(i,t,n))return i}}function CM(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function AM(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(d){return d.nodeName==="PRE"};if(!(!t.firstChild||i(t))){for(var s=null,a=!1,o=null,u=Cm(o,t,i);u!==t;){if(u.nodeType===3||u.nodeType===4){var l=u.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!a&&l[0]===" "&&(l=l.substr(1)),!l){u=yc(u);continue}u.data=l,s=u}else if(u.nodeType===1)n(u)||u.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,a=!1):r(u)||i(u)?(s=null,a=!0):s&&(a=!1);else{u=yc(u);continue}var c=Cm(o,u,i);o=u,u=c}s&&(s.data=s.data.replace(/ $/,""),s.data||yc(s))}}function yc(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function Cm(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var th=typeof window!="undefined"?window:{};function NM(){var e=th.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch(n){}return t}function IM(){var e=function(){};return OM()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function OM(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){th.ActiveXObject&&(e=!0)}return e}var vM=NM()?th.DOMParser:IM();function _M(e,t){var n;if(typeof e=="string"){var r=LM().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return AM({element:n,isBlock:Zf,isVoid:my,isPre:t.preformattedCode?RM:null}),n}var Ec;function LM(){return Ec=Ec||new vM,Ec}function RM(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function MM(e,t){return e.isBlock=Zf(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=DM(e),e.flankingWhitespace=PM(e,t),e}function DM(e){return!my(e)&&!SM(e)&&/^\s*$/i.test(e.textContent)&&!kM(e)&&!wM(e)}function PM(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=BM(e.textContent);return n.leadingAscii&&Am("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&Am("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function BM(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function Am(e,t,n){var r,i,s;return e==="left"?(r=t.previousSibling,i=/ $/):(r=t.nextSibling,i=/^ /),r&&(r.nodeType===3?s=i.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!Zf(r)&&(s=i.test(r.textContent))),s}var FM=Array.prototype.reduce,HM=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Iu(e){if(!(this instanceof Iu))return new Iu(e);var t={rules:zt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=xM({},t,e),this.rules=new xy(this.options)}Iu.prototype={turndown:function(e){if(!zM(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=yy.call(this,new _M(e,this.options));return UM.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return HM.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function yy(e){var t=this;return FM.call(e.childNodes,function(n,r){r=new MM(r,t.options);var i="";return r.nodeType===3?i=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(i=jM.call(t,r)),Ey(n,i)},"")}function UM(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=Ey(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function jM(e){var t=this.rules.forNode(e),n=yy.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function Ey(e,t){var n=EM(e),r=yM(t),i=Math.max(e.length-n.length,t.length-r.length),s=`

`.substring(0,i);return n+s+r}function zM(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}const $M=new tt("proofreading"),VM=nt.create({name:"proofreadingDecoration",addOptions(){return{suggestions:[]}},addProseMirrorPlugins(){return[new Qe({key:$M,props:{decorations:e=>{const t=[],{doc:n}=e,r=this.options.suggestions;return n.descendants((i,s)=>{if(!i.isText)return;const a=i.text||"";r.forEach(({original:o,change:u})=>{let l=0;for(;l<a.length;){const c=a.indexOf(o,l);if(c===-1)break;const d=s+c,h=d+o.length;t.push(Bt.inline(d,h,{class:"proofreading-mark",nodeName:"span","data-original":o,"data-suggestion":u,"data-from":d,"data-to":h})),l=c+o.length}})}),et.create(n,t)}}})]}});function qM(e){const[t,n]=F.useState(null),r=F.useRef(null);return F.useEffect(()=>{if(!e)return;const a=u=>{const l=u.target.closest(".proofreading-mark");l&&l.dataset.suggestion?n(l):n(null)},o=e.view.dom;return o&&o.addEventListener("mousedown",a),()=>{o&&o.removeEventListener("mousedown",a)}},[e]),{activeSpan:t,bubbleRef:r,applyChange:()=>{var c,d,h;if(!t||!e){console.error("Cannot apply change: activeSpan or editor is null");return}const a=Number(t.dataset.from),o=Number(t.dataset.to),u=t.dataset.suggestion,l=t.dataset.original;if(!u||isNaN(a)||isNaN(o)){console.error("Invalid data attributes:",{from:a,to:o,suggestion:u,original:l});return}try{e.chain().focus().deleteRange({from:a,to:o}).insertContent(u).run();const f=((h=(d=(c=e.extensionManager.extensions.find(b=>b.name==="proofreadingDecoration"))==null?void 0:c.options)==null?void 0:d.suggestions)==null?void 0:h.filter(b=>b.original!==l))||[],m=e.extensionManager.extensions.find(b=>b.name==="proofreadingDecoration");m&&(m.options.suggestions=f,e.view.dispatch(e.state.tr)),n(null)}catch(f){console.error("Error applying change:",f)}},rejectChange:()=>{var o,u,l;if(!t||!e){console.error("Cannot reject change: activeSpan or editor is null");return}const a=t.dataset.original;if(!a){console.error("No original data attribute found");return}try{const c=((l=(u=(o=e.extensionManager.extensions.find(h=>h.name==="proofreadingDecoration"))==null?void 0:o.options)==null?void 0:u.suggestions)==null?void 0:l.filter(h=>h.original!==a))||[],d=e.extensionManager.extensions.find(h=>h.name==="proofreadingDecoration");d&&(d.options.suggestions=c,e.view.dispatch(e.state.tr)),n(null)}catch(c){console.error("Error rejecting change:",c)}}}}Wi.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1});const Nm=[{label:"Arial",value:"font-arial"},{label:"Georgia",value:"font-georgia"},{label:"Mono",value:"font-mono"},{label:"Comic Sans",value:"font-comic"}],WM=({blog:e,activeTab:t,setActiveTab:n,content:r,setContent:i,title:s,proofreadingResults:a,handleReplace:o,isSavingKeyword:u})=>{var mh,gh;const[l,c]=F.useState(!0),[d,h]=F.useState(Nm[0].value),[f,m]=F.useState(!1),[b,y]=F.useState(!1),[x,E]=F.useState(""),[T,v]=F.useState(""),[C,w]=F.useState(""),[D,B]=F.useState(!1),[j,_]=F.useState(!1),[$,H]=F.useState(null),[Y,G]=F.useState(!1),[Z,ue]=F.useState(null),[ye,me]=F.useState(null),[z,S]=F.useState({from:0,to:0}),[pe,Ae]=F.useState(!1),[O,ke]=F.useState(null),[st,Se]=F.useState(!1),[Et,mt]=F.useState(null),[kt,Rt]=F.useState(""),He=F.useRef(null),at=F.useRef(null),pn=F.useRef(null),[wr,Cr]=F.useState({top:0,left:0}),mn=Rd(),{handlePopup:an}=i1(),Pn=hi(R=>R.auth.user),$t=(mh=Pn==null?void 0:Pn.subscription)==null?void 0:mh.plan,Bn=F.useRef(!1),Ee=s1(),Me=F.useRef(null),ot=Ee.pathname===`/blog-editor/${e==null?void 0:e._id}`,[ct,rt]=F.useState(!1),[P,J]=F.useState(null),xe=Lu(),le=(gh=r!=null?r:e==null?void 0:e.content)!=null?gh:"",Ie=F.useCallback(R=>{if(!R)return"<p></p>";try{const K=Wi.parse(R.replace(/!\[(["'""])(.*?)\1\]\((.*?)\)/g,(we,qe,it,Vt)=>`![${it}](${Vt})`).replace(/'/g,"&apos;")),de=new DOMParser().parseFromString(K,"text/html");return de.querySelectorAll("script").forEach(we=>we.remove()),de.body.innerHTML}catch(K){return console.warn("Failed to parse markdown:",K),`<p>${R}</p>`}},[]),dt=F.useCallback(R=>{if(!R)return"";try{const se=new DOMParser().parseFromString(R,"text/html");se.querySelectorAll("script").forEach(it=>it.remove());const de=se.body.innerHTML,we=new Iu({strongDelimiter:"**",emDelimiter:"*",headingStyle:"atx",bulletListMarker:"-",codeDelimiter:"```",fence:"```",hr:"---"});return we.addRule("heading",{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(it,Vt){const Tt=parseInt(Vt.nodeName.charAt(1));return`
`+"#".repeat(Tt)+" "+it+`

`}}),we.addRule("list",{filter:["ul","ol"],replacement:function(it,Vt){return`
`+it+`
`}}),we.addRule("listItem",{filter:"li",replacement:function(it,Vt){return(Vt.parentNode.nodeName==="OL"?"1. ":"- ")+it.trim()+`
`}}),we.turndown(R)}catch(K){return console.warn("Failed to convert HTML to markdown:",K),R}},[]),gn=F.useMemo(()=>le?Wi.parse(le,{gfm:!0}):"<p></p>",[le]),L=Hw({extensions:[w4.configure({heading:{levels:[1,2,3]},bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}},underline:{HTMLAttributes:{class:"underline"}},link:{HTMLAttributes:{class:"text-blue-600 underline"}}}),N4.configure({HTMLAttributes:{class:"rounded-lg mx-auto w-3/4 h-auto object-contain",style:"display: block;;"}}),O4.configure({types:["heading","paragraph","right"]}),VM.configure({suggestions:a})],content:gn,onUpdate:({editor:R})=>{const K=R.getHTML(),se=dt(K);se!==le&&(i(se),Se(!0))},editorProps:{attributes:{class:`prose max-w-none focus:outline-none p-4 min-h-[400px] opacity-100 ${d} blog-content editor-container`}},onSelectionUpdate:({editor:R})=>{const{from:K,to:se}=R.state.selection;S({from:K,to:se})}},[d,a,dt,i]),{activeSpan:oe,bubbleRef:ve,applyChange:Re,rejectChange:je}=qM(L);F.useEffect(()=>{(()=>{var K;if(t==="Normal"&&L&&((K=L==null?void 0:L.view)!=null&&K.dom)){const se=L.view.dom;se&&(se.scrollTop=0)}else if(t==="Markdown"){const se=at.current;se&&(se.scrollTop=0)}else if(t==="HTML"){const se=He.current;se&&(se.scrollTop=0)}})()},[t,L]),F.useEffect(()=>{c(!0);const R=setTimeout(()=>{c(!1),L&&t==="Normal"&&L.commands.focus()},300);return()=>clearTimeout(R)},[t,L]),F.useEffect(()=>{(e==null?void 0:e.status)==="failed"&&!Bn.current&&(re.error("Your blog generation failed. You can write blog manually."),Bn.current=!0)},[e==null?void 0:e.status]),F.useEffect(()=>{const R=document.createElement("style");return R.id="text-editor-styles",R.textContent=`
      .font-arial { font-family: Arial, sans-serif; }
      .font-georgia { font-family: Georgia, serif; }
      .font-mono { font-family: 'SF Mono', monospace; }
      .font-comic { font-family: "Comic Sans MS", cursive; }
      .bubble-menu {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 0.25rem;
        display: flex;
        gap: 0.25rem;
        z-index: 50;
      }
      .suggestion-highlight {
        background: #fefcbf;
        cursor: pointer;
      }
      .editor-container {
        width: 100% !important;
        background: white;
      }
      .editor-container h1 {
        font-size: 1.5rem;
      }
      .editor-container h2 {
        font-size: 1.25rem;
      }
      .editor-container h3 {
        font-size: 1rem;
      }
      .editor-container ul, .editor-container ol {
        margin: 1rem 0;
        padding-left: 1.5rem;
      }
      .editor-container ul {
        list-style-type: disc;
      }
      .editor-container ol {
        list-style-type: decimal;
      }
      .editor-container li {
        margin: 0.5rem 0;
      }
      .editor-container p {
        color: #374151;
      }
      .editor-container strong {
        font-weight: bold;
        color: #1f2937;
      }
      .editor-container em {
        font-style: italic;
      }
      .editor-container a {
        color: #2563eb;
        text-decoration: underline;
        position: relative;
      }
      .editor-container a:hover {
        color: #1d4ed8;
      }
      .editor-container img {
        display: block;
        margin: 1.5rem auto;
        max-width: 100%;
        height: auto;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .editor-tab {
        padding: 0.75rem 1.5rem;
        font-weight: 500;
        border-bottom: 2px solid transparent;
        color: #6b7280;
        transition: all 0.2s ease;
        cursor: pointer;
      }
      .editor-tab:hover {
        color: #3b82f6;
        background: #f8fafc;
      }
      .editor-tab.active {
        color: #3b82f6;
        border-bottom-color: #3b82f6;
        background: white;
      }
      .code-textarea {
        font-family: 'SF Mono', monospace;
        font-size: 14px;
        border: none;
        outline: none;
        resize: none;
        background: #f8fafc;
        color: #1f2937;
        padding: 1.5rem;
        border-radius: 0.5rem;
        white-space: pre-wrap;
      }
      .code-textarea:focus {
        background: white;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
      }
      .suggestion-tooltip {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        padding: 0.75rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 60;
        max-width: 300px;
        font-size: 0.875rem;
      }
      .proof-ui-bubble {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        padding: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 60;
      }
    `,document.head.appendChild(R),()=>{const K=document.getElementById("text-editor-styles");K&&K.parentNode&&K.parentNode.removeChild(K)}},[]),F.useEffect(()=>{if(L&&t==="Normal"&&!L.isDestroyed){const R=L.getHTML(),K=Ie(le);if(R!==K){const{from:se,to:de}=L.state.selection;L.commands.setContent(K,!1),L.commands.setTextSelection({from:se,to:de})}}},[le,t,L,Ie]),F.useEffect(()=>{if(L){const R=L.extensionManager.extensions.find(K=>K.name==="proofreadingDecoration");R&&(R.options.suggestions=a,L.view.dispatch(L.view.state.tr))}},[a,L]),F.useEffect(()=>{if(L)return _(!0),()=>{L.isDestroyed||L.destroy()}},[L]),F.useEffect(()=>{t==="HTML"&&!D&&requestAnimationFrame(()=>bM.highlightAll())},[le,t,D]),F.useEffect(()=>{var K;const R=(K=e==null?void 0:e.content)!=null?K:"";if(le!==R&&i(R),L&&!L.isDestroyed&&t==="Normal"){const se=R?Wi.parse(R.replace(/!\[(["'""])(.*?)\1\]\((.*?)\)/g,(de,we,qe,it)=>`![${qe}](${it})`).replace(/'/g,"&apos;"),{gfm:!0}):"<p></p>";if(L.getHTML()!==se){const{from:de,to:we}=L.state.selection;L.commands.setContent(se,!1),L.commands.setTextSelection({from:de,to:we})}}},[e,L,t,i]),F.useEffect(()=>{t==="HTML"&&Rt(Ie(le).replace(/>\s*</g,`>
<`))},[le,t,Ie]),F.useEffect(()=>{const R=K=>{pn.current&&!pn.current.contains(K.target)&&setShowModelDropdown(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),F.useLayoutEffect(()=>{if(oe instanceof HTMLElement&&ve.current){const R=oe.getBoundingClientRect(),K=ve.current.offsetHeight,se=R.top+window.scrollY-K-8,de=R.left+window.scrollX;Cr({top:se,left:de})}},[oe]);const ce=F.useCallback(R=>{if($t==="free"||$t==="basic"){mn("/pricing");return}R()},[$t,an,mn]),rr=F.useCallback(()=>{if(!L||L.state.selection.empty){re.error("Select text to link.");return}ce(()=>{E(""),m(!0)})},[L,ce]),Li=F.useCallback(()=>{ce(()=>{v(""),w(""),y(!0)})},[ce]),Ar=()=>{$t==="free"||$t==="basic"?mn("/pricing"):an({title:"Retry Blog Generation",description:`Are you sure you want to retry generating this blog?
It will be of 10 credits`,onConfirm:hl})},bn=F.useCallback(()=>{if(!x||!/https?:\/\//i.test(x)){re.error("Enter a valid URL.");return}if(L){const{from:R,to:K}=L.state.selection;L.chain().focus().setLink({href:x,target:"_blank",rel:"noopener noreferrer"}).setTextSelection({from:R,to:K}).run(),m(!1),re.success("Link added.")}},[x,L]),Ve=F.useCallback((R,K,se)=>{const de=se.current;if(!de)return;const we=de.selectionStart,qe=de.selectionEnd,it=de.value.substring(we,qe),Vt=`${R}${it}${K}`,Tt=de.value.substring(0,we)+Vt+de.value.substring(qe);i(Tt),Se(!0),requestAnimationFrame(()=>{const Zr=we+R.length+it.length;de.setSelectionRange(Zr,Zr),de.focus()})},[i]),fl=F.useCallback(()=>{if(!T||!/https?:\/\//i.test(T)){re.error("Enter a valid image URL.");return}if(T.includes("<script")||T.includes("<\/script")){re.error("Script tags are not allowed in image URLs.");return}if(t==="Normal"&&L){const{from:R}=L.state.selection;L.chain().focus().setImage({src:T,alt:C}).setTextSelection(R).run(),y(!1),re.success("Image added.")}else if(t==="Markdown"){const R=`![${C}](${T})`;Ve(R,"",at),y(!1),re.success("Image added.")}else if(t==="HTML"){const R=`<img src="${T}" alt="${C}" />`;Ve(R,"",He),y(!1),re.success("Image added.")}},[T,C,L,t,Ve]),Fn=F.useCallback(R=>{const K=R.target;if(K.selectionStart!==K.selectionEnd){const se=K.getBoundingClientRect(),de=window.pageYOffset||document.documentElement.scrollTop;H({top:se.top+de-40,left:se.left+10})}else H(null)},[]),Ss=()=>Xe(null,null,function*(){if(!(e!=null&&e._id)){re.error("Blog ID is missing.");return}if(!L&&t==="Normal"){re.error("Editor is not initialized.");return}let R,K,se;if(t==="Normal"){const we=L.state.selection;if(K=we.from,se=we.to,K===se){re.error("Please select some text to retry.");return}R=L.state.doc.textBetween(K,se,`
`)}else{const qe=(t==="Markdown"?at:He).current;if(!qe){re.error("Editor is not initialized.");return}if(K=qe.selectionStart,se=qe.selectionEnd,K===se){re.error("Please select some text to retry.");return}R=qe.value.substring(K,se)}me(R),S({from:K,to:se});const de={contentPart:R.trim()};L&&L.commands.blur();try{G(!0);const we=yield a1(e._id,de);we.data?(ue(we.data),Ae(!0)):re.error("No content received from retry.")}catch(we){console.error("Retry failed:",we),re.error(we.message||"Retry failed.")}finally{G(!1)}}),hl=()=>Xe(null,null,function*(){if(!(e!=null&&e._id)){re.error("Blog ID is missing.");return}const R={createNew:!0};try{yield xe(yE({id:e._id,payload:R})),mn("/blogs")}catch(K){console.error("Retry failed:",K),re.error(K.message||"Retry failed.")}}),Pa=()=>{if(Z){if(t==="Normal"&&L){const R=Ie(Z);L.chain().focus().deleteRange({from:z.from,to:z.to}).insertContentAt(z.from,R).setTextSelection({from:z.from,to:z.from+R.length}).run()}else{const K=(t==="Markdown"?at:He).current;i(se=>{const de=se.substring(0,z.from)+Z+se.substring(z.to);return K&&requestAnimationFrame(()=>{K.setSelectionRange(z.from,z.from+Z.length),K.focus()}),de})}re.success("Selected lines replaced successfully!"),Ae(!1),ue(null),me(null),S({from:0,to:0}),Se(!0)}},Ba=()=>{Ae(!1),ue(null),me(null),S({from:0,to:0}),re.info("Retry content discarded.")},pl=F.useCallback(R=>{if(R.target.tagName==="IMG"){const{src:K,alt:se}=R.target;J({src:K,alt:se||""}),w(se||""),rt(!0)}},[]);F.useEffect(()=>{var R;if(((R=e==null?void 0:e.images)==null?void 0:R.length)>0){let K=le;(le.match(/{Image:.*?}/g)||[]).forEach((de,we)=>{const qe=e.images[we];qe!=null&&qe.url&&(K=K.replace(de,`![${qe.alt||"Image"}](${qe.url})`))}),i(K)}},[e,le,i]);const sE=F.useCallback(()=>{if(P){if(t==="Normal"&&L){let R=!1;L.state.doc.descendants((K,se)=>{K.type.name==="image"&&K.attrs.src===P.src&&(L.chain().focus().deleteRange({from:se,to:se+1}).run(),R=!0)}),R?(re.success("Image deleted."),rt(!1),J(null),w(""),Se(!0)):re.error("Failed to delete image.")}else if(t==="Markdown"){const R=new RegExp(`!\\[${Nr(P.alt||"")}\\]\\(${Nr(P.src)}\\)`,"g");i(K=>{const se=K.replace(R,"");return Se(!0),se}),re.success("Image deleted."),rt(!1),J(null),w("")}else if(t==="HTML"){const R=new RegExp(`<img\\s+src="${Nr(P.src)}"\\s+alt="${Nr(P.alt||"")}"\\s*/>`,"g");i(K=>{const de=Ie(K).replace(R,""),we=dt(de);return Se(!0),we}),re.success("Image deleted."),rt(!1),J(null),w("")}}},[P,L,t,i,Ie,dt]);F.useEffect(()=>{var R;if(t==="Normal"&&L&&((R=L==null?void 0:L.view)!=null&&R.dom)){const K=L.view.dom;return K.addEventListener("click",pl),()=>{K&&K.removeEventListener("click",pl)}}},[L,t,pl]);const hh=F.useCallback(()=>{if(!P||!C){re.error("Alt text is required.");return}if(t==="Normal"&&L){let R=!1;L.state.doc.descendants((K,se)=>{K.type.name==="image"&&K.attrs.src===P.src&&(L.chain().focus().setNodeSelection(se).setImage({src:P.src,alt:C}).run(),R=!0)}),R?(re.success("Image alt text updated."),rt(!1),J(null),w(""),Se(!0)):re.error("Failed to update image alt text.")}else if(t==="Markdown"){const R=new RegExp(`!\\[${Nr(P.alt||"")}\\]\\(${Nr(P.src)}\\)`,"g"),K=`![${C}](${P.src})`;i(se=>{const de=se.replace(R,K);return Se(!0),de}),re.success("Image alt text updated."),rt(!1),J(null),w("")}else if(t==="HTML"){const R=new RegExp(`<img\\s+src="${Nr(P.src)}"\\s+alt="${Nr(P.alt||"")}"\\s*/>`,"g"),K=`<img src="${P.src}" alt="${C}" />`;i(se=>{const we=Ie(se).replace(R,K),qe=dt(we);return Se(!0),qe}),re.success("Image alt text updated."),rt(!1),J(null),w("")}},[P,C,L,t,i,Ie,dt]),Nr=R=>R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),aE=F.useCallback(R=>{st?mt(R):n(R)},[st,n]),oE=F.useCallback(()=>{Se(!1),n(Et),mt(null)},[Et,n]),uE=F.useCallback(()=>{mt(null)},[]),lE=R=>!!new DOMParser().parseFromString(R,"text/html").querySelector("script"),cE=F.useCallback(R=>{const K=R.target.files[0];if(!K)return;const se=t==="Markdown"&&K.name.endsWith(".md"),de=t==="HTML"&&K.name.endsWith(".html");if(!se&&!de){re.error(`Please upload a ${t==="Markdown"?".md":".html"} file.`);return}const we=new FileReader;we.onload=qe=>{let it=qe.target.result;if(de&&lE(it)){re.error("Script tags are not allowed in imported HTML content for security reasons.");return}i(it),Se(!0),re.success(`${K.name} imported successfully!`)},we.onerror=()=>{re.error("Failed to read the file.")},we.readAsText(K),R.target.value=null},[t,i]),ph=({editorRef:R,mode:K})=>{if(!$||!R.current)return null;const se={Markdown:[{icon:g.jsx(Ua,{className:"w-4 h-4"}),action:()=>ce(()=>Ve("**","**",R))},{icon:g.jsx(ja,{className:"w-4 h-4"}),action:()=>ce(()=>Ve("*","*",R))},{icon:g.jsx(ws,{className:"w-4 h-4"}),action:()=>ce(()=>Ve("[","](url)",R))},{icon:g.jsx(ti,{className:"w-4 h-4"}),action:Li}],HTML:[{icon:g.jsx(Ua,{className:"w-4 h-4"}),action:()=>ce(()=>Ve("<strong>","</strong>",R))},{icon:g.jsx(ja,{className:"w-4 h-4"}),action:()=>ce(()=>Ve("<em>","</em>",R))},{icon:g.jsx(ws,{className:"w-4 h-4"}),action:()=>ce(()=>Ve('<a href="url">',"</a>",R))},{icon:g.jsx(ti,{className:"w-4 h-4"}),action:Li}]};return g.jsx(Ke.div,{className:"absolute flex gap-2 bg-white shadow-lg p-2 rounded border z-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:$,children:se[K].map((de,we)=>g.jsx(Pe,{title:de.icon.type.name,children:g.jsx("button",{onClick:de.action,className:"p-1 rounded hover:bg-gray-100",children:de.icon})},we))})},dE=F.useCallback(R=>R.trim().startsWith("<!DOCTYPE html>")||R.trim().startsWith("<html"),[]),fE=()=>{$t==="free"||$t==="basic"?mn("/pricing"):an({title:"Rewrite Selected Lines",description:"Do you want to rewrite the selected lines? You can rewrite only 3 times.",onConfirm:Ss})},hE=()=>g.jsxs("div",{className:"bg-white border-x border-gray-200 shadow-sm px-4 py-2 flex items-center",children:[g.jsx("div",{className:"flex gap-1",children:[1,2,3].map(R=>g.jsx(Pe,{title:`Heading ${R}`,children:g.jsxs("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleHeading({level:R}).run():t==="HTML"?Ve(`<h${R}>`,`</h${R}>`,He):Ve(`${"#".repeat(R)} `,"",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("heading",{level:R}))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":`Heading ${R}`,type:"button",children:[R===1&&g.jsx(iT,{className:"w-4 h-4"}),R===2&&g.jsx(Ih,{className:"w-4 h-4"}),R===3&&g.jsx(oT,{className:"w-4 h-4"})]})},R))}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Pe,{title:"Bold",children:g.jsx("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleBold().run():t==="HTML"?Ve("<strong>","</strong>",He):Ve("**","**",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("bold"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Bold",type:"button",children:g.jsx(Ua,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Italic",children:g.jsx("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleItalic().run():t==="HTML"?Ve("<em>","</em>",He):Ve("*","*",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("italic"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Italic",type:"button",children:g.jsx(ja,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Underline",children:g.jsx("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleUnderline().run():t==="HTML"?Ve("<u>","</u>",He):Ve("<u>","</u>",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("underline"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Underline",type:"button",children:g.jsx(NT,{className:"w-4 h-4"})})})]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx("div",{className:"flex gap-1",children:["left","center"," personally"].map(R=>g.jsx(Pe,{title:`Align ${R}`,children:g.jsxs("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().setTextAlign(R).run():Ve(`<div style="text-align: ${R};">`,"</div>",t==="HTML"?He:at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive({textAlign:R}))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":`Align ${R}`,type:"button",children:[R==="left"&&g.jsx(JE,{className:"w-4 h-4"}),R==="center"&&g.jsx(QE,{className:"w-4 h-4"}),R==="right"&&g.jsx(eT,{className:"w-4 h-4"})]})},R))}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Pe,{title:"Bullet List",children:g.jsx("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleBulletList().run():t==="HTML"?Ve(`<ul>
<li>`,`</li>
</ul>`,He):Ve("- ","",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("bulletList"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Bullet List",type:"button",children:g.jsx(pT,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Ordered List",children:g.jsx("button",{onClick:()=>ce(()=>{t==="Normal"?L.chain().focus().toggleOrderedList().run():t==="HTML"?Ve(`<ol>
<li>`,`</li>
</ol>`,He):Ve("1. ","",at)}),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${t==="Normal"&&(L!=null&&L.isActive("orderedList"))?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Ordered List",type:"button",children:g.jsx(fT,{className:"w-4 h-4"})})})]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Pe,{title:"Link",children:g.jsx("button",{onClick:rr,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Link",type:"button",children:g.jsx(ws,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Image",children:g.jsx("button",{onClick:Li,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Image",type:"button",children:g.jsx(ti,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Undo",children:g.jsx("button",{onClick:()=>ce(()=>L==null?void 0:L.chain().focus().undo().run()),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Undo",type:"button",children:g.jsx(OT,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Redo",children:g.jsx("button",{onClick:()=>ce(()=>L==null?void 0:L.chain().focus().redo().run()),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Redo",type:"button",children:g.jsx(ET,{className:"w-4 h-4"})})}),!ot&&g.jsx(Pe,{title:"Rewrite",children:g.jsx("button",{onClick:()=>ce(()=>{an({title:"Rewrite Selected Lines",description:"Do you want to rewrite the selected lines? You can rewrite only 3 times.",onConfirm:Ss})}),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Rewrite",type:"button",children:g.jsx(wh,{className:"w-4 h-4"})})}),g.jsx(Pe,{title:"Copy",children:g.jsx("button",{onClick:()=>ce(()=>{navigator.clipboard.writeText(t==="HTML"?kt:le),re.success("Content copied to clipboard!")}),className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Copy",type:"button",children:g.jsx(vE,{className:"w-4 h-4"})})}),!ot&&g.jsx(Pe,{title:"Regenerate Content",children:g.jsx("button",{onClick:Ar,className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Regenerate",type:"button",children:g.jsx(_E,{className:"w-4 h-4"})})}),(t==="Markdown"||t==="HTML")&&g.jsx(Pe,{title:`Import ${t==="Markdown"?".md":".html"} File`,children:g.jsx("button",{onClick:()=>{var R;return(R=Me.current)==null?void 0:R.click()},className:"p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 flex items-center justify-center","aria-label":"Import File",type:"button",children:g.jsx(LE,{className:"w-4 h-4"})})})]}),(t==="Markdown"||t==="HTML")&&g.jsx("input",{type:"file",ref:Me,style:{display:"none"},accept:t==="Markdown"?".md":".html",onChange:cE}),g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx(dr,{value:d,onChange:R=>ce(()=>h(R)),className:"w-32","aria-label":"Font",children:Nm.map(R=>g.jsx(dr.Option,{value:R.value,children:R.label},R.value))}),(t==="Markdown"||t==="HTML")&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),g.jsx(Pe,{title:D?"Hide Preview":"Show Preview",children:g.jsx("button",{onClick:()=>B(!D),className:`p-2 rounded-md transition-colors duration-150 flex items-center justify-center ${D?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,"aria-label":"Toggle Preview",type:"button",children:D?g.jsx(RE,{className:"w-4 h-4"}):g.jsx(Md,{className:"w-4 h-4"})})})]})]}),pE=()=>{if(l||!j||(e==null?void 0:e.status)==="pending")return g.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-300px)] bg-white border rounded-lg",children:g.jsx(Cc,{})});if(D&&(t==="Markdown"||t==="HTML")){if(t==="HTML"&&dE(kt)){const R=IE.sanitize(kt,{USE_PROFILES:{html:!0},ADD_TAGS:["style"],ADD_ATTR:["target"]});return g.jsx("div",{className:`p-8 rounded-lg rounded-t-none overflow-y-auto custom-scroll h-screen border border-gray-200 ${d}`,children:g.jsx("iframe",{srcDoc:R,title:"HTML Preview",sandbox:"allow-same-origin"})})}return g.jsx("div",{className:`p-8 rounded-lg rounded-t-none overflow-y-auto custom-scroll h-screen border border-gray-200 bg-white ${d}`,children:g.jsx(Eo,{remarkPlugins:[To],rehypePlugins:[wo],components:{a:({href:R,children:K})=>g.jsx(Pe,{title:R,placement:"top",children:g.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:K})}),img:({src:R,alt:K})=>g.jsx("img",{src:R,alt:K,className:"rounded-lg mx-auto my-3 w-3/4 h-auto shadow-sm"}),h1:({children:R})=>g.jsx("h1",{className:"text-2xl font-bold",children:R}),h2:({children:R})=>g.jsx("h2",{className:"text-xl font-semibold",children:R}),h3:({children:R})=>g.jsx("h3",{className:"text-lg font-medium",children:R}),p:({children:R})=>g.jsx("p",{className:"mb-4 leading-relaxed text-gray-700",children:Qn.Children.map(R,(K,se)=>{if(typeof K=="string"){let de=K,we=[],qe=0;const it=[...a].sort((Vt,Tt)=>Tt.original.length-Vt.original.length);for(;de.length>0;){let Vt=!1;for(const Tt of it){const Zr=new RegExp(Tt.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),ei=de.match(Zr);if(ei&&ei.index===0){we.push(g.jsxs("span",{className:"suggestion-highlight",onMouseEnter:()=>ke(Tt),onMouseLeave:()=>ke(null),children:[ei[0],O===Tt&&g.jsxs("div",{className:"suggestion-tooltip",style:{top:"100%",left:0},children:[g.jsxs("p",{className:"text-sm mb-2",children:[g.jsx("strong",{children:"Suggested:"})," ",Tt.change]}),g.jsx("button",{className:"bg-blue-600 text-white px-2 py-1 rounded",onClick:()=>o(Tt.original,Tt.change),children:"Replace"})]})]},`${se}-${qe++}`)),de=de.slice(ei[0].length),Vt=!0;break}}if(!Vt){let Tt=de.length;for(const Zr of it){const ei=new RegExp(Zr.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),ml=de.match(ei);ml&&ml.index<Tt&&(Tt=ml.index)}Tt===de.length?(we.push(g.jsx("span",{children:de},`${se}-${qe++}`)),de=""):(we.push(g.jsx("span",{children:de.slice(0,Tt)},`${se}-${qe++}`)),de=de.slice(Tt))}}return we}return K})}),ul:({children:R})=>g.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2 text-gray-700",children:R}),ol:({children:R})=>g.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-gray-700",children:R}),li:({children:R})=>g.jsx("li",{className:"leading-relaxed",children:R}),code:qe=>{var it=qe,{node:R,inline:K,className:se,children:de}=it,we=on(it,["node","inline","className","children"]);const Vt=/language-(\w+)/.exec(se||"");return!K&&Vt?g.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-lg",children:g.jsx("code",ne(I({className:se},we),{children:de}))}):g.jsx("code",ne(I({className:"bg-gray-100 text-red-600 px-1 rounded"},we),{children:de}))}},children:le})})}return g.jsxs("div",{className:"bg-white border rounded-lg rounded-t-none shadow-sm",children:[t==="Normal"&&g.jsxs("div",{className:"h-screen overflow-auto custom-scroll",children:[L&&g.jsxs(WC,{editor:L,className:"flex gap-2 bg-white shadow-lg p-2 rounded-lg border border-gray-200",children:[g.jsx(Pe,{title:"Bold",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{ce(()=>{L.chain().focus().toggleBold().run()})},children:g.jsx(Ua,{className:"w-5 h-5"})})}),g.jsx(Pe,{title:"Italic",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{ce(()=>{L.chain().focus().toggleItalic().run()})},children:g.jsx(ja,{className:"w-5 h-5"})})}),g.jsx(Pe,{title:"Heading",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:()=>{ce(()=>{L.chain().focus().toggleHeading({level:2}).run()})},children:g.jsx(Ih,{className:"w-5 h-5"})})}),g.jsx(Pe,{title:"Link",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:rr,children:g.jsx(ws,{className:"w-5 h-5"})})}),g.jsx(Pe,{title:"Image",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:Li,children:g.jsx(ti,{className:"w-5 h-5"})})}),!ot&&g.jsx(Pe,{title:"Rewrite",placement:"top",children:g.jsx("button",{className:"p-2 rounded hover:bg-gray-200 text-gray-600",onClick:fE,children:g.jsx(wh,{className:"w-4 h-4"})})})]}),g.jsx(Lw,{editor:L}),oe instanceof HTMLElement&&g.jsxs("div",{className:"proof-ui-bubble",ref:ve,style:{position:"absolute",top:wr.top,left:wr.left},children:[g.jsxs("div",{style:{marginBottom:4},children:["Replace with: ",g.jsx("strong",{children:oe.dataset.suggestion})]}),g.jsx("button",{onClick:Re,children:" Accept"}),g.jsx("button",{onClick:je,style:{marginLeft:6},children:" Reject"})]})]}),t==="Markdown"&&g.jsxs("div",{className:"h-screen",children:[g.jsx("textarea",{ref:at,value:le,onChange:R=>{i(R.target.value),Se(!0)},onMouseUp:Fn,onKeyUp:Fn,className:`w-full h-full p-4 text-sm focus:outline-none resize-none bg-white code-textarea custom-scroll ${d}`,placeholder:"Enter Markdown here...\\nUse # for headings, **bold**, *italic*, - for lists",style:{whiteSpace:"pre-wrap",lineHeight:"1.5"}}),g.jsx(ph,{editorRef:at,mode:"Markdown"})]}),t==="HTML"&&g.jsxs("div",{className:"h-screen",children:[g.jsx("textarea",{ref:He,value:kt,onChange:R=>{i(R.target.value),Se(!0)},onMouseUp:Fn,onKeyUp:Fn,className:"w-full h-full font-mono text-sm p-4 focus:outline-none resize-none bg-white code-textarea custom-scroll",placeholder:"<h1>HTML Title</h1>\\n<p>Paragraph with <a href='https://example.com'>link</a></p>\\n<img src='image.jpg' alt='description' />",style:{whiteSpace:"pre-wrap",lineHeight:"1.5"}}),g.jsx(ph,{editorRef:He,mode:"HTML"})]})]})};return g.jsxs(Ke.div,{className:"flex-1 bg-gray-50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[(Y||u)&&g.jsx(Ke.div,{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},children:g.jsx(Cc,{})}),pe&&g.jsx(Ke.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Generated Content"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Original Text"}),g.jsx("div",{className:"p-4 bg-gray-100 rounded-md",children:g.jsx(Eo,{remarkPlugins:[To],rehypePlugins:[wo],className:"prose",components:{a:({href:R,children:K})=>g.jsx(Pe,{title:R,placement:"top",children:g.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:K})}),strong:({children:R})=>g.jsx("strong",{className:"font-bold",children:R})},children:ye||"No text selected"})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Improved Text"}),g.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:g.jsx(Eo,{remarkPlugins:[To],rehypePlugins:[wo],className:"prose",components:{a:({href:R,children:K})=>g.jsx(Pe,{title:R,placement:"top",children:g.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:K})}),strong:({children:R})=>g.jsx("strong",{className:"font-bold",children:R})},children:Z})})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:Ba,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Reject"}),g.jsx("button",{onClick:Pa,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Accept"})]})]})}),Et&&g.jsx(pr,{title:"Unsaved Changes",open:!0,onOk:oE,onCancel:uE,okText:"Continue without Saving",cancelText:"Cancel",centered:!0,children:g.jsx("p",{className:"text-sm text-gray-600",children:"You have unsaved changes. Switching tabs may cause you to lose your work. Are you sure you want to continue?"})}),!ot&&g.jsx("div",{className:"flex border-b bg-white shadow-sm border-x",children:["Normal","Markdown","HTML"].map(R=>g.jsx("button",{onClick:()=>aE(R),className:`editor-tab ${t===R?"active":""}`,children:R},R))}),hE(),pE(),g.jsxs(pr,{title:"Insert Link",open:f,onOk:bn,onCancel:()=>m(!1),okText:"Insert Link",cancelText:"Cancel",centered:!0,children:[g.jsx(Fr,{value:x,onChange:R=>E(R.target.value),placeholder:"https://example.com",className:"w-full mt-4",prefix:g.jsx(ws,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Include http:// or https://"})]}),g.jsxs(pr,{title:"Edit Image Alt Text",open:ct,onOk:hh,onCancel:()=>{rt(!1),J(null),w("")},okText:"Update Alt Text",cancelText:"Cancel",footer:[g.jsx(Dt,{onClick:sE,danger:!0,icon:g.jsx(OE,{className:"w-4 h-4"}),children:"Delete Image"},"delete"),g.jsx(Dt,{onClick:()=>{rt(!1),J(null),w("")},children:"Cancel"},"cancel"),g.jsx(Dt,{type:"primary",onClick:hh,children:"Update Alt Text"},"ok")],centered:!0,children:[g.jsx(Fr,{value:C,onChange:R=>w(R.target.value),placeholder:"Image description",className:"w-full mt-4",prefix:g.jsx(ti,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Provide alt text for accessibility"}),P&&g.jsx("div",{className:"mt-4",children:g.jsx("img",{src:P.src,alt:C||P.alt,className:"max-w-full h-auto rounded-lg"})})]}),g.jsxs(pr,{title:"Insert Image",open:b,onOk:fl,onCancel:()=>y(!1),okText:"Insert Image",cancelText:"Cancel",centered:!0,children:[g.jsx(Fr,{value:T,onChange:R=>v(R.target.value),placeholder:"https://example.com/image.jpg",className:"w-full mt-4",prefix:g.jsx(ti,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Include http:// or https://"}),g.jsx(Fr,{value:C,onChange:R=>w(R.target.value),placeholder:"Image description",className:"w-full mt-4",prefix:g.jsx(ti,{className:"w-4 h-4 text-gray-400"})}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Provide alt text for accessibility"})]})]})},YM=["Blogging","Technology","Lifestyle","Travel","Food & Drink","Health & Wellness","Fashion","Business","Education","Entertainment","Photography","Fitness","Marketing","Finance","DIY & Crafts"],KM=({isCategoryModalOpen:e,setIsCategoryModalOpen:t,onSubmit:n,initialCategory:r="",initialIncludeTableOfContents:i=!1})=>{const[s,a]=F.useState(""),[o,u]=F.useState(r),[l,c]=F.useState(i),[d,h]=F.useState(!1),{categories:f,error:m}=hi(C=>C.wordpress),b=F.useCallback(C=>{if(o){re.error("Only one category can be selected.");return}u(C),h(!1)},[o]),y=F.useCallback(()=>{u(""),h(!1)},[]);F.useCallback(()=>{if(s.trim()){if(o===s.trim()){re.error("Category already selected.");return}u(s.trim()),a(""),h(!1)}},[s,o]);const x=F.useCallback(C=>{c(C.target.checked)},[]),E=F.useCallback(()=>{if(!o){h(!0),re.error("Please select a category.");return}n({category:o,includeTableOfContents:l}),t(!1),u(""),c(!1),a(""),h(!1)},[o,l,n,t]),T=F.useCallback(()=>{t(!1),u(""),c(!1),a(""),h(!1)},[t]),v=F.useCallback(C=>{if(C.length>1){re.error("Only one category can be selected.");return}const w=C.length>0?C[0]:"";u(w),h(!1)},[]);return g.jsx(pr,{title:"Select Category",open:e,onCancel:T,footer:g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx(Dt,{onClick:T,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Cancel category selection",children:"Cancel"}),g.jsx(Dt,{type:"primary",onClick:E,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Confirm category selection",children:"Confirm"})]}),centered:!0,width:600,children:g.jsxs("div",{className:"p-3 space-y-4",children:[g.jsx(No,{children:o&&g.jsxs(Ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500 text-white rounded-full text-sm w-fit",children:[g.jsx("span",{className:"truncate max-w-[150px]",children:o}),g.jsx(Ke.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:y,className:"text-white hover:text-gray-200","aria-label":`Remove category ${o}`,children:g.jsx(Io,{size:15})})]})}),!m&&(f==null?void 0:f.length)>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Auto-Generated Categories"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 overflow-y-auto p-3 rounded-md border border-indigo-200 bg-indigo-50 max-h-96",children:f.map(C=>g.jsxs(Ke.div,{onClick:()=>b(C.name),whileHover:{scale:1.02,backgroundColor:"#e0e7ff"},className:`flex items-center justify-between p-3 rounded-md bg-white border ${d&&!o?"border-red-500":"border-indigo-200"} text-sm font-medium cursor-pointer transition-all duration-200 ${o===C.name?"bg-indigo-100 border-indigo-400":o?"opacity-50 cursor-not-allowed":""}`,children:[g.jsx("span",{className:"truncate",children:C.name}),!o&&g.jsx(Ke.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-indigo-600 hover:text-indigo-700","aria-label":`Add category ${C.name}`,children:g.jsx(Oo,{size:16})})]},C.id||C.name))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Select or Add Category"}),g.jsx(dr,{mode:"tags",placeholder:"Select or type a category",value:o?[o]:[],onChange:v,className:"w-full",allowClear:!0,showSearch:!0,filterOption:(C,w)=>w.label.toLowerCase().includes(C.toLowerCase()),options:YM.map(C=>({value:C,label:C})),styles:{popup:{root:{borderRadius:"8px"}}},"aria-label":"Select or add a category"}),d&&!o&&g.jsx(Ke.p,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 text-sm text-red-500",children:"Please select a category"})]}),g.jsxs("div",{className:"flex items-center justify-between py-2",children:[g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Include Table of Contents",g.jsx("p",{className:"text-xs text-gray-500",children:"Generate a table of contents for each blog."})]}),g.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",name:"includeTableOfContents",checked:l,onChange:x,className:"sr-only peer","aria-label":"Toggle table of contents"}),g.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})},{Panel:Im}=o1,GM=({blog:e,keywords:t,setKeywords:n,onPost:r,activeTab:i,handleReplace:s,setProofreadingResults:a,proofreadingResults:o,handleSave:u,posted:l,isPosting:c,formData:d,editorContent:h})=>{var Me,ot,ct,rt,P,J,xe,le,Ie,dt,gn;const[f,m]=F.useState(""),[b,y]=F.useState(!1),[x,E]=F.useState(null),[T,v]=F.useState(!1),[C,w]=F.useState(!1),[D,B]=F.useState(!1),[j,_]=F.useState("overview"),$=hi(L=>L.auth.user),H=(Me=$==null?void 0:$.subscription)==null?void 0:Me.plan,Y=Rd(),G=Lu(),{handlePopup:Z}=i1(),{loading:ue}=hi(L=>L.analysis),[ye,me]=F.useState(!1),{analysisResult:z}=hi(L=>L.analysis),S=e==null?void 0:e._id,pe=z==null?void 0:z[S];Wi.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1});const Ae=L=>L?L.trim().split(/\s+/).filter(oe=>oe.length>0).length:0;F.useEffect(()=>{G(EE()).unwrap()},[G]),F.useEffect(()=>{E(null)},[e==null?void 0:e._id]);const O=F.useCallback(()=>Xe(null,null,function*(){if(!e||!e.title||!e.content){re.error("Blog title or content is missing for analysis.");return}const L=t&&t.length>0?t:(e==null?void 0:e.focusKeywords)||e.keywords;try{const oe=yield G(TE({blogId:e._id,title:e.title,content:e.content,keywords:L})).unwrap();E(oe),_("analysis")}catch(oe){console.error("Failed to fetch competitive analysis:",{error:oe.message,status:oe.status,response:oe.response}),re.error("Failed to perform competitive analysis.")}}),[e,t,G]);F.useEffect(()=>{T&&(O(),v(!1))},[T,O]),F.useEffect(()=>{var L,oe;(e!=null&&e.seoScore||(L=e==null?void 0:e.generatedMetadata)!=null&&L.competitorsAnalysis)&&E(I({blogScore:e.seoScore},(oe=e==null?void 0:e.generatedMetadata)==null?void 0:oe.competitorsAnalysis))},[e]);const ke=F.useCallback(L=>{n(oe=>oe.filter(ve=>ve!==L))},[n]),st=F.useCallback(()=>{if(f.trim()){const L=f.split(",").map(oe=>oe.trim().toLowerCase()).filter(oe=>oe&&!t.map(ve=>ve.toLowerCase()).includes(oe));L.length>0&&n(oe=>[...oe,...L]),m("")}},[f,t,n]),Se=F.useCallback(L=>{L.key==="Enter"&&(L.preventDefault(),st())},[st]),Et=F.useCallback(()=>Xe(null,null,function*(){if(!e||!e.content){re.error("Blog content is required for proofreading.");return}if(ue){re.error("Please wait for Competitive Analysis to complete before starting Proofreading.");return}y(!0);try{const L=yield G(kE({id:e._id})).unwrap();a(L),_("suggestions"),re.success("Proofreading suggestions loaded successfully!")}catch(L){console.error("Error fetching proofreading suggestions:",{error:L.message,status:L.status,response:L.response}),re.error("Failed to fetch proofreading suggestions.")}finally{y(!1)}}),[e,G,ue,a]),mt=F.useCallback(()=>{if(o.length===0){re.info("No suggestions available to apply.");return}o.forEach(L=>{s(L.original,L.change)}),a([]),re.success("All proofreading suggestions applied successfully!")},[o,s,a]),kt=F.useCallback(()=>{var ce,rr;if(["free","basic"].includes((ce=H==null?void 0:H.toLowerCase)==null?void 0:ce.call(H))){Y("/pricing");return}const L=e==null?void 0:e.seoScore,oe=(rr=e==null?void 0:e.generatedMetadata)==null?void 0:rr.competitors,ve=typeof L=="number"&&L>=0,Re=Array.isArray(oe)&&oe.length>0;return Z(!ve&&!Re&&!!!x?{title:"Competitive Analysis",description:"Do you really want to run competitive analysis? It will cost 10 credits.",confirmText:"Run",cancelText:"Cancel",onConfirm:()=>O()}:{title:"Run Competitive Analysis Again?",description:"You have already performed a competitive analysis for this blog. Would you like to run it again? This will cost 10 credits.",confirmText:"Run",cancelText:"Cancel",onConfirm:()=>O()})},[H,e,Z,Y,x,O]),Rt=F.useCallback(()=>{var L;["free","basic"].includes((L=H==null?void 0:H.toLowerCase)==null?void 0:L.call(H))?Y("/pricing"):Z({title:"AI Proofreading",description:`Do you really want to proofread the blog? 
It will cost ${ME("blog.proofread")} credits.`,onConfirm:Et})},[H,Z,Y,Et]),He=F.useCallback(()=>{Z({title:"Rewrite Keywords",description:"Do you want to rewrite the entire content with added keywords? You can rewrite only 3 times.",onConfirm:u})},[Z,u]),at=F.useCallback(L=>Xe(null,null,function*(){if(!h){re.error("No content to export.");return}const oe=(e==null?void 0:e.title)||"Untitled Blog";if(L==="markdown"){const ve=new Blob([h],{type:"text/markdown"}),Re=URL.createObjectURL(ve),je=document.createElement("a");je.href=Re,je.download=`${oe}.md`,je.click(),URL.revokeObjectURL(Re),re.success("Markdown exported successfully!")}else if(L==="html"){const ve=Wi.parse(h,{gfm:!0}),Re=new Blob([ve],{type:"text/html"}),je=URL.createObjectURL(Re),ce=document.createElement("a");ce.href=je,ce.download=`${oe}.html`,ce.click(),URL.revokeObjectURL(je),re.success("HTML exported successfully!")}}),[h,e]),pn=g.jsxs(bl,{children:[g.jsx(bl.Item,{onClick:()=>at("markdown"),children:"Export as Markdown"},"markdown"),g.jsx(bl.Item,{onClick:()=>at("html"),children:"Export as HTML"},"html")]}),wr=F.useCallback(L=>L>=80?"bg-green-100 text-green-700 border-green-200":L>=60?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200",[]),Cr=F.useCallback(({category:L,includeTableOfContents:oe})=>{try{r(ne(I({},d),{categories:L,includeTableOfContents:oe}))}catch(ve){console.error("Failed to post blog:",{error:ve.message,status:ve.status,response:ve.response}),re.error("Failed to post blog. Please try again.")}},[d,r]),mn=F.useCallback(()=>{w(!0)},[]);if(ue)return g.jsx("div",{className:"flex items-center",children:g.jsx(Cc,{message:"Running Competitive Analysis"})});const an=({title:L,description:oe,isPro:ve,isLoading:Re,onClick:je,buttonText:ce,icon:rr})=>g.jsxs(Ke.div,{whileHover:{scale:1.02,boxShadow:"0px 0px 5px 0px rgba(0, 0, 0, 0.8)",transition:{duration:.2}},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[g.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[g.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:g.jsx(rr,{className:"w-4 h-4 text-blue-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[g.jsx("h3",{className:"font-semibold text-gray-900",children:L}),ve&&g.jsx(jE,{className:"text-2xl ml-auto mr-2"})]}),g.jsx("p",{className:"text-sm text-gray-600",children:oe})]})]}),g.jsx(Dt,{onClick:je,loading:Re,disabled:Re,type:"primary",className:"w-full py-2 text-sm px-4 rounded-lg font-medium transition-all duration-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg",ghost:ve,children:Re?"Processing...":ce})]}),Pn=({title:L,score:oe,icon:ve})=>g.jsxs("div",{className:`p-3 rounded-lg border ${wr(oe||0)}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ve,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:L})]}),oe>0&&g.jsxs("span",{className:"text-lg font-bold",children:[oe,g.jsx("span",{className:"text-xs ml-1",children:"/100"})]})]}),(oe||0)===0?g.jsx("p",{className:"text-xs text-gray-500 text-center p-2 bg-gray-50 rounded-lg",children:"Run Competitive Analysis to get score"}):g.jsx("div",{className:"w-full bg-white/50 rounded-full h-2",children:g.jsx("div",{style:{width:`${oe}%`,transition:"width 0.5s ease"},className:`h-2 rounded-full ${oe>=80?"bg-green-500":oe>=60?"bg-yellow-500":"bg-red-500"}`})})]}),$t=({competitors:L})=>{const[oe,ve]=F.useState(!1),Re=oe?L:L==null?void 0:L.slice(0,5);return g.jsxs("div",{className:"space-y-2 relative",children:[(L==null?void 0:L.length)>5&&g.jsx("span",{className:"absolute top-0 right-0 text-[10px] bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full",children:L.length}),Re==null?void 0:Re.map((je,ce)=>g.jsxs(Ke.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:ce*.05},className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:g.jsx("span",{className:"text-xs font-medium text-blue-600",children:ce+1})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium mb-1 text-gray-900 truncate",children:je.title}),g.jsxs("a",{href:je.link||je.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[je.score&&g.jsxs(Ah,{color:"blue",children:[(je.score*100).toFixed(2),"%"]}),"Visit ",g.jsx(Ch,{className:"w-3 h-3"})]})]})]},ce)),(L==null?void 0:L.length)>5&&!oe&&g.jsxs("button",{onClick:()=>ve(!0),className:"text-xs text-blue-600 hover:text-blue-700 text-center w-full",children:["+",L.length-5," more competitors"]})]})},Bn=({insights:L})=>{const[oe,ve]=F.useState(!1),[Re,je]=F.useState(new Set),ce=Object.entries(L||{}),rr=oe?ce:ce.slice(0,3),Li=Ar=>{const bn=new Set(Re);bn.has(Ar)?bn.delete(Ar):bn.add(Ar),je(bn)};return g.jsxs("div",{className:"space-y-3",children:[rr.map(([Ar,bn],Ve)=>{const fl=Re.has(Ve),Fn=typeof bn=="object"?"Multiple insights available":bn==null?void 0:bn.toString(),Ss=(Fn==null?void 0:Fn.length)>120&&!fl,hl=Ss?Fn.slice(0,120)+"...":Fn,Pa=bn.match(/\((\d+\/\d+)\)$/),Ba=Pa?Pa[1]:null;return g.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:Ve*.05},className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(za,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("p",{className:"font-medium text-blue-900 text-sm mb-1",children:Ar.replace(/([A-Z])/g," $1").trim()}),g.jsxs("p",{children:[" ",Ba&&g.jsx(Ah,{color:"blue",children:Ba.replace("/"," / ")})]})]}),g.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed cursor-pointer select-none",onClick:()=>Li(Ve),children:[hl,Ss&&g.jsx("span",{className:"text-blue-500 ml-1",children:"(more)"})]})]})]})},Ar)}),ce.length>5&&g.jsx("button",{onClick:()=>ve(!oe),className:"text-xs text-blue-600 hover:text-blue-700 text-center w-full",children:oe?"Show less":`+${ce.length-5} more insights`})]})},Ee=({suggestion:L,index:oe,onApply:ve})=>g.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:oe*.05},className:"border border-gray-200 rounded-lg p-3 bg-white hover:shadow-sm transition-shadow",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(zE,{className:"w-4 h-4 text-orange-500"}),g.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Original"})]}),g.jsx("div",{className:"p-2 bg-red-50 border border-red-100 rounded text-xs text-gray-700 leading-relaxed",children:L.original})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx($E,{className:"w-4 h-4 text-green-500"}),g.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Suggested"})]}),g.jsx("div",{className:"p-2 bg-green-50 border border-green-100 rounded text-xs text-gray-700 leading-relaxed",children:L.change})]}),g.jsx(Dt,{size:"small",type:"primary",ghost:!0,onClick:()=>{s(L.original,L.change),ve(oe)},className:"w-full",children:"Apply This Change"})]})});return D?g.jsx(Ke.div,{initial:{x:"100%"},animate:{x:"calc(100% - 60px)"},className:"fixed top-[17.5rem] right-0 transform -translate-y-1/2 z-50",children:g.jsx(Pe,{title:"Maximize Sidebar",placement:"left",children:g.jsx(Dt,{onClick:()=>B(!1),className:"h-12 rounded-lg",icon:g.jsx(gT,{className:"w-4 h-4"})})})}):g.jsxs(g.Fragment,{children:[g.jsxs(Ke.div,{initial:{x:"100%"},animate:{x:0},transition:{type:"spring",stiffness:300,damping:30},className:"w-96 bg-white shadow-xl flex flex-col",children:[g.jsxs("div",{className:"p-4 border border-l-0 bg-gradient-to-r rounded-tr-md from-blue-50 to-purple-50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold",children:"Content Analysis"}),g.jsx("p",{className:"text-xs text-gray-600",children:"Optimize your content performance"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[!["free","basic"].includes((ot=H==null?void 0:H.toLowerCase)==null?void 0:ot.call(H))&&g.jsx(Pe,{title:"Export Content",placement:"left",children:g.jsx(PE,{overlay:pn,trigger:["click"],children:g.jsx(Dt,{size:"small",icon:g.jsx(BE,{className:"w-4 h-4"})})})}),g.jsx(Pe,{title:"Minimize sidebar",placement:"left",children:g.jsx(Dt,{size:"small",icon:g.jsx(xT,{className:"w-4 h-4"}),onClick:()=>B(!0)})}),g.jsx(Pe,{title:"Content settings",children:g.jsx(Dt,{size:"small",icon:g.jsx(l1,{className:"w-4 h-4"}),onClick:()=>me(!0)})})]})]}),g.jsx("div",{className:"flex justify-between items-center mt-6 px-2",children:[{key:"overview",label:"Overview",icon:Nh},{key:"analysis",label:"Analysis",icon:Ha},{key:"suggestions",label:"Suggestions",icon:za,badge:o.length}].map(({key:L,label:oe,icon:ve,badge:Re})=>g.jsxs("button",{onClick:()=>_(L),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-150
        ${j===L?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[g.jsx(ve,{className:"w-4 h-4"}),oe]},L))})]}),g.jsx("div",{className:"flex-1 max-h-screen overflow-y-auto custom-scroll border-r",children:g.jsxs(No,{mode:"wait",children:[j==="overview"&&g.jsxs(Ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(CT,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Keywords"})]}),t.length>0&&g.jsxs("button",{type:"text",onClick:()=>{var L;["free"].includes((L=H==null?void 0:H.toLowerCase)==null?void 0:L.call(H))?DE({featureName:"Keyword Optimization",navigate:Y}):He()},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-opacity-80 transition-colors text-sm font-medium
                    bg-green-50 text-green-600 border-green-300 border hover:bg-green-100`,children:[["free"].includes((ct=H==null?void 0:H.toLowerCase)==null?void 0:ct.call(H))?g.jsx(FE,{className:"w-3 h-3"}):g.jsx(u1,{className:"w-3 h-3"}),"Optimize"]})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:g.jsx(No,{children:t.map((L,oe)=>g.jsxs(Ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full border border-blue-200",children:[g.jsx("span",{className:"truncate max-w-[120px]",children:L}),g.jsx("button",{onClick:()=>ke(L),className:"ml-1 text-blue-600 hover:text-blue-800",children:g.jsx(Io,{className:"w-3 h-3"})})]},L))})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:f,onChange:L=>m(L.target.value),onKeyDown:Se,placeholder:"Add keywords...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),g.jsx(Dt,{size:"small",type:"primary",onClick:st,icon:g.jsx(Oo,{className:"w-4 h-4"})})]}),t.length===0&&g.jsx("p",{className:"text-xs text-gray-500 text-center py-2",children:"No keywords added yet"})]}),g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{className:"flex items-center gap-2 ",children:[g.jsx(Nh,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Performance Metrics"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[g.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-blue-600",children:Ae(h)}),g.jsx("div",{className:"text-xs text-blue-600",children:"Words"})]}),g.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-purple-600",children:t==null?void 0:t.length}),g.jsx("div",{className:"text-xs text-purple-600",children:"Keywords"})]})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsx(Pn,{title:"Content Score",score:e==null?void 0:e.blogScore,icon:fo}),g.jsx(Pn,{title:"SEO Score",score:((rt=pe==null?void 0:pe.insights)==null?void 0:rt.blogScore)||(e==null?void 0:e.seoScore),icon:Ha})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(HE,{className:"w-4 h-4 text-blue-600"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"AI Tools"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(an,{title:"Competitive Analysis",description:"Compare with top competitors",isPro:["free","basic"].includes((P=H==null?void 0:H.toLowerCase)==null?void 0:P.call(H)),isLoading:ue,onClick:kt,buttonText:"Run Analysis",icon:Ha}),i==="Normal"&&g.jsx(an,{title:"AI Proofreading",description:"Grammar and style improvements",isPro:["free","basic"].includes((J=H==null?void 0:H.toLowerCase)==null?void 0:J.call(H)),isLoading:b,onClick:Rt,buttonText:"Proofread Content",icon:fo})]})]})]},"overview"),j==="analysis"&&g.jsx(Ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-4",children:x||pe?g.jsxs(o1,{defaultActiveKey:["1"],ghost:!0,expandIconPosition:"end",children:[((le=(pe==null?void 0:pe.competitors)||((xe=e==null?void 0:e.generatedMetadata)==null?void 0:xe.competitors))==null?void 0:le.length)>0&&g.jsx(Im,{header:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Md,{className:"w-4 h-4 text-blue-600"}),g.jsx("span",{className:"font-medium",children:"Top Competitors"})]}),children:g.jsx($t,{competitors:(pe==null?void 0:pe.competitors)||((Ie=e==null?void 0:e.generatedMetadata)==null?void 0:Ie.competitors)})},"1"),(((dt=x==null?void 0:x.insights)==null?void 0:dt.analysis)||(x==null?void 0:x.analysis))&&g.jsx(Im,{header:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(za,{className:"w-4 h-4 text-orange-500"}),g.jsx("span",{className:"font-medium",children:"Key Insights"})]}),children:g.jsx(Bn,{insights:((gn=x==null?void 0:x.insights)==null?void 0:gn.analysis)||(x==null?void 0:x.analysis)})},"2")]}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx(Ha,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No analysis results yet"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Run competitive analysis to see insights"})]})},"analysis"),j==="suggestions"&&g.jsx(Ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-4 space-y-4",children:b?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(Ke.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600",children:"Analyzing content..."})]}):o.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(za,{className:"w-4 h-4 text-orange-500"}),g.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"Suggestions"}),g.jsx(UE,{count:o.length})]}),g.jsx(Dt,{size:"small",type:"primary",onClick:mt,disabled:o.length===0,className:"text-xs",children:"Apply All"})]}),g.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:o.map((L,oe)=>g.jsx(Ee,{suggestion:L,index:oe,onApply:ve=>{const Re=o.filter((je,ce)=>ce!==ve);a(Re)}},oe))})]}):g.jsxs("div",{className:"text-center py-8",children:[g.jsx(fo,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),g.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No suggestions available"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Run AI proofreading to get suggestions"})]})},"suggestions")]})}),g.jsxs("div",{className:"p-4 border border-l-0 rounded-br-md border-gray-200 bg-gray-50",children:[g.jsx(Ke.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:g.jsx(Dt,{type:"primary",size:"large",onClick:mn,loading:c,disabled:c,className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-green-600 to-emerald-600 border-0 hover:shadow-lg",children:c?"Posting...":e!=null&&e.wordpress?"Re-Post":"Post Blog"})}),(l==null?void 0:l.link)&&g.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-3 text-center",children:g.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 text-sm hover:text-blue-700 font-medium",children:["View Published Post",g.jsx(Ch,{className:"w-4 h-4"})]})})]})]}),g.jsx(pr,{title:"Content Enhancement Summary",open:ye,onCancel:()=>me(!1),footer:null,centered:!0,width:480,children:g.jsx(QM,{features:(e==null?void 0:e.options)||{}})}),g.jsx(KM,{isCategoryModalOpen:C,setIsCategoryModalOpen:w,onSubmit:Cr,initialCategory:d.category,initialIncludeTableOfContents:d.includeTableOfContents})]})},QM=({features:e})=>g.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-3",children:[g.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Here are the content enhancement features currently applied to your blog:"}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(e||{}).length>0?Object.entries(e).map(([t,n])=>{const r=!!n;return g.jsxs(Ke.div,{whileHover:{backgroundColor:"#f8fafc"},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100 transition-colors duration-150",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-gray-400"}`}),g.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t.replace(/([A-Z])/g," $1").trim()})]}),g.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${r?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:r?"Enabled":"Disabled"})]},t)}):g.jsxs("div",{className:"text-center py-6",children:[g.jsx(l1,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-gray-500",children:"No enhancement features configured"})]})})]});var Be;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(Be||(Be={}));function XM(e){return e.type===Be.Tag||e.type===Be.Script||e.type===Be.Style}const JM=Be.Root,ZM=Be.Text,eD=Be.Directive,tD=Be.Comment,nD=Be.Script,rD=Be.Style,iD=Be.Tag,sD=Be.CDATA,aD=Be.Doctype;let Ty=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Ay(this,t)}};class nh extends Ty{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}class Cd extends nh{constructor(){super(...arguments),this.type=Be.Text}get nodeType(){return 3}}class ky extends nh{constructor(){super(...arguments),this.type=Be.Comment}get nodeType(){return 8}}class Sy extends nh{constructor(t,n){super(n),this.name=t,this.type=Be.Directive}get nodeType(){return 1}}class rh extends Ty{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class wy extends rh{constructor(){super(...arguments),this.type=Be.CDATA}get nodeType(){return 4}}class Ad extends rh{constructor(){super(...arguments),this.type=Be.Root}get nodeType(){return 9}}let Cy=class extends rh{constructor(t,n,r=[],i=t==="script"?Be.Script:t==="style"?Be.Style:Be.Tag){super(r),this.name=t,this.attribs=n,this.type=i}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,r;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(r=this["x-attribsPrefix"])===null||r===void 0?void 0:r[t]}})}};function ih(e){return XM(e)}function oD(e){return e.type===Be.CDATA}function uD(e){return e.type===Be.Text}function lD(e){return e.type===Be.Comment}function cD(e){return e.type===Be.Directive}function dD(e){return e.type===Be.Root}function Ay(e,t=!1){let n;if(uD(e))n=new Cd(e.data);else if(lD(e))n=new ky(e.data);else if(ih(e)){const r=t?Tc(e.children):[],i=new Cy(e.name,I({},e.attribs),r);r.forEach(s=>s.parent=i),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=I({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=I({},e["x-attribsPrefix"])),n=i}else if(oD(e)){const r=t?Tc(e.children):[],i=new wy(r);r.forEach(s=>s.parent=i),n=i}else if(dD(e)){const r=t?Tc(e.children):[],i=new Ad(r);r.forEach(s=>s.parent=i),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else if(cD(e)){const r=new Sy(e.name,e.data);e["x-name"]!=null&&(r["x-name"]=e["x-name"],r["x-publicId"]=e["x-publicId"],r["x-systemId"]=e["x-systemId"]),n=r}else throw new Error(`Not implemented yet: ${e.type}`);return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Tc(e){const t=e.map(n=>Ay(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const Om={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class fD{constructor(t,n,r){this.dom=[],this.root=new Ad(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(r=n,n=Om),typeof t=="object"&&(n=t,t=void 0),this.callback=t!=null?t:null,this.options=n!=null?n:Om,this.elementCB=r!=null?r:null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Ad(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const r=this.options.xmlMode?Be.Tag:void 0,i=new Cy(t,n,void 0,r);this.addNode(i),this.tagStack.push(i)}ontext(t){const{lastNode:n}=this;if(n&&n.type===Be.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const r=new Cd(t);this.addNode(r),this.lastNode=r}}oncomment(t){if(this.lastNode&&this.lastNode.type===Be.Comment){this.lastNode.data+=t;return}const n=new ky(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Cd(""),n=new wy([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const r=new Sy(t,n);this.addNode(r)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],r=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),r&&(t.prev=r,r.next=t),t.parent=n,this.lastNode=null}}const hD=/\n/g;function pD(e){const t=[...e.matchAll(hD)].map((r=>r.index||0));t.unshift(-1);const n=Nd(t,0,t.length);return r=>Ny(n,r)}function Nd(e,t,n){if(n-t==1)return{offset:e[t],index:t+1};const r=Math.ceil((t+n)/2),i=Nd(e,t,r),s=Nd(e,r,n);return{offset:i.offset,low:i,high:s}}function Ny(e,t){return(function(n){return Object.prototype.hasOwnProperty.call(n,"index")})(e)?{line:e.index,column:t-e.offset}:Ny(e.high.offset<t?e.high:e.low,t)}function Iy(e,t="",n={}){const r=typeof t!="string"?t:n,i=typeof t=="string"?t:"",s=e.map(mD),a=!!r.lineNumbers;return function(o,u=0){const l=a?pD(o):()=>({line:0,column:0});let c=u;const d=[];e:for(;c<o.length;){let h=!1;for(const f of s){f.regex.lastIndex=c;const m=f.regex.exec(o);if(m&&m[0].length>0){if(!f.discard){const b=l(c),y=typeof f.replace=="string"?m[0].replace(new RegExp(f.regex.source,f.regex.flags),f.replace):m[0];d.push({state:i,name:f.name,text:y,offset:c,len:m[0].length,line:b.line,column:b.column})}if(c=f.regex.lastIndex,h=!0,f.push){const b=f.push(o,c);d.push(...b.tokens),c=b.offset}if(f.pop)break e;break}}if(!h)break}return{tokens:d,offset:c,complete:o.length<=c}}}function mD(e,t){return ne(I({},e),{regex:gD(e,t)})}function gD(e,t){if(e.name.length===0)throw new Error(`Rule #${t} has empty name, which is not allowed.`);if((function(n){return Object.prototype.hasOwnProperty.call(n,"regex")})(e))return(function(n){if(n.global)throw new Error(`Regular expression /${n.source}/${n.flags} contains the global flag, which is not allowed.`);return n.sticky?n:new RegExp(n.source,n.flags+"y")})(e.regex);if((function(n){return Object.prototype.hasOwnProperty.call(n,"str")})(e)){if(e.str.length===0)throw new Error(`Rule #${t} ("${e.name}") has empty "str" property, which is not allowed.`);return new RegExp(vm(e.str),"y")}return new RegExp(vm(e.name),"y")}function vm(e){return e.replace(/[-[\]{}()*+!<=:?./\\^$|#\s,]/g,"\\$&")}function Sr(e,t){return(n,r)=>{let i=r,s;return r<n.tokens.length&&(s=e(n.tokens[r],n,r),s!==void 0&&i++),s===void 0?{matched:!1}:{matched:!0,position:i,value:s}}}function sh(e,t){return e.matched?{matched:!0,position:e.position,value:t(e.value,e.position)}:e}function Ou(e,t){return e.matched?t(e):e}function nn(e,t){return(n,r)=>sh(e(n,r),(i,s)=>t(i,n,r,s))}function vu(e,t){return(n,r)=>{const i=e(n,r);return i.matched?i:{matched:!0,position:r,value:t}}}function ll(...e){return(t,n)=>{for(const r of e){const i=r(t,n);if(i.matched)return i}return{matched:!1}}}function _i(e,t){return(n,r)=>{const i=e(n,r);return i.matched?i:t(n,r)}}function bD(e,t){return(n,r)=>{const i=[];let s=!0;do{const a=e(n,r);a.matched&&t(a.value,i.length+1,n,r,a.position)?(i.push(a.value),r=a.position):s=!1}while(s);return{matched:!0,position:r,value:i}}}function ah(e){return bD(e,()=>!0)}function xD(e){return Yt(e,ah(e),(t,n)=>[t,...n])}function Yt(e,t,n){return(r,i)=>Ou(e(r,i),s=>sh(t(r,s.position),(a,o)=>n(s.value,a,r,i,o)))}function yD(e,t){return Yt(e,t,n=>n)}function _m(e,t){return Yt(e,t,(n,r)=>r)}function oh(e,t,n,r){return(i,s)=>Ou(e(i,s),a=>Ou(t(i,a.position),o=>sh(n(i,o.position),(u,l)=>r(a.value,o.value,u,i,s,l))))}function Oy(e,t,n){return oh(e,t,n,(r,i)=>i)}function ED(...e){return(t,n)=>{const r=[];let i=n;for(const s of e){const a=s(t,i);if(a.matched)r.push(a.value),i=a.position;else return{matched:!1}}return{matched:!0,position:i,value:r}}}function TD(...e){return kD(ED(...e))}function kD(e){return nn(e,t=>t.flatMap(n=>n))}function SD(e,t){return(n,r)=>{let i=!0,s=e,a=r;do{const o=t(s,n,a)(n,a);o.matched?(s=o.value,a=o.position):i=!1}while(i);return{matched:!0,position:a,value:s}}}function wD(e,t,n){return SD(e,r=>nn(t,(i,s,a,o)=>n(r,i,s,a,o)))}function CD(e,t,n){return AD(e,r=>wD(r,Yt(t,n,(i,s)=>[i,s]),(i,[s,a])=>s(i,a)))}function AD(e,t){return(n,r)=>Ou(e(n,r),i=>t(i.value,n,r,i.position)(n,i.position))}const ND="(?:[ \\t\\r\\n\\f]*)",vy="(?:\\n|\\r\\n|\\r|\\f)",cl="[^\\x00-\\x7F]",Ra="(?:\\\\[0-9a-f]{1,6}(?:\\r\\n|[ \\n\\r\\t\\f])?)",Ma="(?:\\\\[^\\n\\r\\f0-9a-f])",ID=`(?:[_a-z]|${cl}|${Ra}|${Ma})`,_y=`(?:[_a-z0-9-]|${cl}|${Ra}|${Ma})`,OD=`(?:${_y}+)`,vD=`(?:[-]?${ID}${_y}*)`,_D=`'([^\\n\\r\\f\\\\']|\\\\${vy}|${cl}|${Ra}|${Ma})*'`,LD=`"([^\\n\\r\\f\\\\"]|\\\\${vy}|${cl}|${Ra}|${Ma})*"`,RD=Iy([{name:"ws",regex:new RegExp(ND)},{name:"hash",regex:new RegExp(`#${OD}`,"i")},{name:"ident",regex:new RegExp(vD,"i")},{name:"str1",regex:new RegExp(_D,"i")},{name:"str2",regex:new RegExp(LD,"i")},{name:"*"},{name:"."},{name:","},{name:"["},{name:"]"},{name:"="},{name:">"},{name:"|"},{name:"+"},{name:"~"},{name:"^"},{name:"$"}]),MD=Iy([{name:"unicode",regex:new RegExp(Ra,"i")},{name:"escape",regex:new RegExp(Ma,"i")},{name:"any",regex:new RegExp("[\\s\\S]","i")}]);function Ly([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function DD(e){return e.reduce(Ly,[0,0,0])}const PD=Sr(e=>e.name==="unicode"?String.fromCodePoint(parseInt(e.text.slice(1),16)):void 0),BD=Sr(e=>e.name==="escape"?e.text.slice(1):void 0),FD=Sr(e=>e.name==="any"?e.text:void 0),HD=nn(ah(ll(PD,BD,FD)),e=>e.join(""));function uh(e){const t=MD(e);return HD({tokens:t.tokens,options:void 0},0).value}function Ze(e){return Sr(t=>t.name===e?!0:void 0)}const lh=Sr(e=>e.name==="ws"?null:void 0),Id=vu(lh,null);function ya(e){return Oy(Id,e,Id)}const Ea=Sr(e=>e.name==="ident"?uh(e.text):void 0),UD=Sr(e=>e.name==="hash"?uh(e.text.slice(1)):void 0),jD=Sr(e=>e.name.startsWith("str")?uh(e.text.slice(1,-1)):void 0),Ry=yD(vu(Ea,""),Ze("|")),ch=_i(Yt(Ry,Ea,(e,t)=>({name:t,namespace:e})),nn(Ea,e=>({name:e,namespace:null}))),zD=_i(Yt(Ry,Ze("*"),e=>({type:"universal",namespace:e,specificity:[0,0,0]})),nn(Ze("*"),()=>({type:"universal",namespace:null,specificity:[0,0,0]}))),$D=nn(ch,({name:e,namespace:t})=>({type:"tag",name:e,namespace:t,specificity:[0,0,1]})),VD=Yt(Ze("."),Ea,(e,t)=>({type:"class",name:t,specificity:[0,1,0]})),qD=nn(UD,e=>({type:"id",name:e,specificity:[1,0,0]})),Lm=Sr(e=>{if(e.name==="ident"){if(e.text==="i"||e.text==="I")return"i";if(e.text==="s"||e.text==="S")return"s"}}),WD=_i(Yt(jD,vu(_m(Id,Lm),null),(e,t)=>({value:e,modifier:t})),Yt(Ea,vu(_m(lh,Lm),null),(e,t)=>({value:e,modifier:t}))),YD=ll(nn(Ze("="),()=>"="),Yt(Ze("~"),Ze("="),()=>"~="),Yt(Ze("|"),Ze("="),()=>"|="),Yt(Ze("^"),Ze("="),()=>"^="),Yt(Ze("$"),Ze("="),()=>"$="),Yt(Ze("*"),Ze("="),()=>"*=")),KD=oh(Ze("["),ya(ch),Ze("]"),(e,{name:t,namespace:n})=>({type:"attrPresence",name:t,namespace:n,specificity:[0,1,0]})),GD=Oy(Ze("["),oh(ya(ch),YD,ya(WD),({name:e,namespace:t},n,{value:r,modifier:i})=>({type:"attrValue",name:e,namespace:t,matcher:n,value:r,modifier:i,specificity:[0,1,0]})),Ze("]")),QD=_i(KD,GD),XD=_i(zD,$D),Rm=ll(qD,VD,QD),Mm=nn(_i(TD(XD,ah(Rm)),xD(Rm)),e=>({type:"compound",list:e,specificity:DD(e.map(t=>t.specificity))})),JD=ll(nn(Ze(">"),()=>">"),nn(Ze("+"),()=>"+"),nn(Ze("~"),()=>"~"),Yt(Ze("|"),Ze("|"),()=>"||")),ZD=_i(ya(JD),nn(lh,()=>" ")),e9=CD(Mm,nn(ZD,e=>(t,n)=>({type:"compound",list:[...n.list,{type:"combinator",combinator:e,left:t,specificity:t.specificity}],specificity:Ly(t.specificity,n.specificity)})),Mm);function t9(e,t){if(!(typeof t=="string"||t instanceof String))throw new Error("Expected a selector string. Actual input is not a string!");const n=RD(t);if(!n.complete)throw new Error(`The input "${t}" was only partially tokenized, stopped at offset ${n.offset}!
`+Dm(t,n.offset));const r=ya(e)({tokens:n.tokens,options:void 0},0);if(!r.matched)throw new Error(`No match for "${t}" input!`);if(r.position<n.tokens.length){const i=n.tokens[r.position];throw new Error(`The input "${t}" was only partially parsed, stopped at offset ${i.offset}!
`+Dm(t,i.offset,i.len))}return r.value}function Dm(e,t,n=1){return`${e.replace(/(\t)|(\r)|(\n)/g,(r,i,s)=>i?"":s?"":"")}
${"".padEnd(t)}${"^".repeat(n)}`}function n9(e){return t9(e9,e)}function Yn(e){if(!e.type)throw new Error("This is not an AST node.");switch(e.type){case"universal":return uo(e.namespace)+"*";case"tag":return uo(e.namespace)+$i(e.name);case"class":return"."+$i(e.name);case"id":return"#"+$i(e.name);case"attrPresence":return`[${uo(e.namespace)}${$i(e.name)}]`;case"attrValue":return`[${uo(e.namespace)}${$i(e.name)}${e.matcher}"${r9(e.value)}"${e.modifier?e.modifier:""}]`;case"combinator":return Yn(e.left)+e.combinator;case"compound":return e.list.reduce((t,n)=>n.type==="combinator"?Yn(n)+t:t+Yn(n),"");case"list":return e.list.map(Yn).join(",")}}function uo(e){return e||e===""?$i(e)+"|":""}function Co(e){return`\\${e.codePointAt(0).toString(16)} `}function $i(e){return e.replace(/(^[0-9])|(^-[0-9])|(^-$)|([-0-9a-zA-Z_]|[^\x00-\x7F])|(\x00)|([\x01-\x1f]|\x7f)|([\s\S])/g,(t,n,r,i,s,a,o,u)=>n?Co(n):r?"-"+Co(r.slice(1)):i?"\\-":s||(a?"":o?Co(o):"\\"+u))}function r9(e){return e.replace(/(")|(\\)|(\x00)|([\x01-\x1f]|\x7f)/g,(t,n,r,i,s)=>n?'\\"':r?"\\\\":i?"":Co(s))}function Ao(e){if(!e.type)throw new Error("This is not an AST node.");switch(e.type){case"compound":{e.list.forEach(Ao),e.list.sort((t,n)=>Dy(Pm(t),Pm(n)));break}case"combinator":{Ao(e.left);break}case"list":{e.list.forEach(Ao),e.list.sort((t,n)=>Yn(t)<Yn(n)?-1:1);break}}return e}function Pm(e){switch(e.type){case"universal":return[1];case"tag":return[1];case"id":return[2];case"class":return[3,e.name];case"attrPresence":return[4,Yn(e)];case"attrValue":return[5,Yn(e)];case"combinator":return[15,Yn(e)]}}function My(e,t){return Dy(e,t)}function Dy(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("Arguments must be arrays.");const n=e.length<t.length?e.length:t.length;for(let r=0;r<n;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return e.length-t.length}class Bm{constructor(t){this.branches=ds(i9(t))}build(t){return t(this.branches)}}function i9(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++){const[i,s]=e[r],a=s9(n9(i));n[r]={ast:a,terminal:{type:"terminal",valueContainer:{index:r,value:s,specificity:a.specificity}}}}return n}function s9(e){return Py(e),Ao(e),e}function Py(e){const t=[];e.list.forEach(n=>{switch(n.type){case"class":t.push({matcher:"~=",modifier:null,name:"class",namespace:null,specificity:n.specificity,type:"attrValue",value:n.name});break;case"id":t.push({matcher:"=",modifier:null,name:"id",namespace:null,specificity:n.specificity,type:"attrValue",value:n.name});break;case"combinator":Py(n.left),t.push(n);break;case"universal":break;default:t.push(n);break}}),e.list=t}function ds(e){const t=[];for(;e.length;){const n=Hy(e,a=>!0,By),{matches:r,nonmatches:i,empty:s}=o9(e,n);e=i,r.length&&t.push(u9(n,r)),s.length&&t.push(...a9(s))}return t}function a9(e){const t=[];for(const n of e){const r=n.terminal;if(r.type==="terminal")t.push(r);else{const{matches:i,rest:s}=h9(r.cont,a=>a.type==="terminal");i.forEach(a=>t.push(a)),s.length&&(r.cont=s,t.push(r))}}return t}function o9(e,t){const n=[],r=[],i=[];for(const s of e){const a=s.ast.list;a.length?(a.some(u=>By(u)===t)?n:r).push(s):i.push(s)}return{matches:n,nonmatches:r,empty:i}}function By(e){switch(e.type){case"attrPresence":return`attrPresence ${e.name}`;case"attrValue":return`attrValue ${e.name}`;case"combinator":return`combinator ${e.combinator}`;default:return e.type}}function u9(e,t){if(e==="tag")return l9(t);if(e.startsWith("attrValue "))return d9(e.substring(10),t);if(e.startsWith("attrPresence "))return c9(e.substring(13),t);if(e==="combinator >")return Fm(">",t);if(e==="combinator +")return Fm("+",t);throw new Error(`Unsupported selector kind: ${e}`)}function l9(e){const t=dh(e,r=>r.type==="tag",r=>r.name);return{type:"tagName",variants:Object.entries(t).map(([r,i])=>({type:"variant",value:r,cont:ds(i.items)}))}}function c9(e,t){for(const n of t)Fy(n,r=>r.type==="attrPresence"&&r.name===e);return{type:"attrPresence",name:e,cont:ds(t)}}function d9(e,t){const n=dh(t,i=>i.type==="attrValue"&&i.name===e,i=>`${i.matcher} ${i.modifier||""} ${i.value}`),r=[];for(const i of Object.values(n)){const s=i.oneSimpleSelector,a=f9(s),o=ds(i.items);r.push({type:"matcher",matcher:s.matcher,modifier:s.modifier,value:s.value,predicate:a,cont:o})}return{type:"attrValue",name:e,matchers:r}}function f9(e){if(e.modifier==="i"){const t=e.value.toLowerCase();switch(e.matcher){case"=":return n=>t===n.toLowerCase();case"~=":return n=>n.toLowerCase().split(/[ \t]+/).includes(t);case"^=":return n=>n.toLowerCase().startsWith(t);case"$=":return n=>n.toLowerCase().endsWith(t);case"*=":return n=>n.toLowerCase().includes(t);case"|=":return n=>{const r=n.toLowerCase();return t===r||r.startsWith(t)&&r[t.length]==="-"}}}else{const t=e.value;switch(e.matcher){case"=":return n=>t===n;case"~=":return n=>n.split(/[ \t]+/).includes(t);case"^=":return n=>n.startsWith(t);case"$=":return n=>n.endsWith(t);case"*=":return n=>n.includes(t);case"|=":return n=>t===n||n.startsWith(t)&&n[t.length]==="-"}}}function Fm(e,t){const n=dh(t,i=>i.type==="combinator"&&i.combinator===e,i=>Yn(i.left)),r=[];for(const i of Object.values(n)){const s=ds(i.items),a=i.oneSimpleSelector.left;r.push({ast:a,terminal:{type:"popElement",cont:s}})}return{type:"pushElement",combinator:e,cont:ds(r)}}function dh(e,t,n){const r={};for(;e.length;){const i=Hy(e,t,n),s=c=>t(c)&&n(c)===i,a=c=>c.ast.list.some(s),{matches:o,rest:u}=p9(e,a);let l=null;for(const c of o){const d=Fy(c,s);l||(l=d)}if(l==null)throw new Error("No simple selector is found.");r[i]={oneSimpleSelector:l,items:o},e=u}return r}function Fy(e,t){const n=e.ast.list,r=new Array(n.length);let i=-1;for(let a=n.length;a-- >0;)t(n[a])&&(r[a]=!0,i=a);if(i==-1)throw new Error("Couldn't find the required simple selector.");const s=n[i];return e.ast.list=n.filter((a,o)=>!r[o]),s}function Hy(e,t,n){const r={};for(const a of e){const o={};for(const u of a.ast.list.filter(t))o[n(u)]=!0;for(const u of Object.keys(o))r[u]?r[u]++:r[u]=1}let i="",s=0;for(const a of Object.entries(r))a[1]>s&&(i=a[0],s=a[1]);return i}function h9(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return{matches:n,rest:r}}function p9(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return{matches:n,rest:r}}class m9{constructor(t){this.f=t}pickAll(t){return this.f(t)}pick1(t,n=!1){const r=this.f(t),i=r.length;if(i===0)return null;if(i===1)return r[0].value;const s=n?g9:b9;let a=r[0];for(let o=1;o<i;o++){const u=r[o];s(a,u)&&(a=u)}return a.value}}function g9(e,t){const n=My(t.specificity,e.specificity);return n>0||n===0&&t.index<e.index}function b9(e,t){const n=My(t.specificity,e.specificity);return n>0||n===0&&t.index>e.index}function Hm(e){return new m9(ks(e))}function ks(e){const t=e.map(x9);return(n,...r)=>t.flatMap(i=>i(n,...r))}function x9(e){switch(e.type){case"terminal":{const t=[e.valueContainer];return(n,...r)=>t}case"tagName":return y9(e);case"attrValue":return T9(e);case"attrPresence":return E9(e);case"pushElement":return k9(e);case"popElement":return w9(e)}}function y9(e){const t={};for(const n of e.variants)t[n.value]=ks(n.cont);return(n,...r)=>{const i=t[n.name];return i?i(n,...r):[]}}function E9(e){const t=e.name,n=ks(e.cont);return(r,...i)=>Object.prototype.hasOwnProperty.call(r.attribs,t)?n(r,...i):[]}function T9(e){const t=[];for(const r of e.matchers){const i=r.predicate,s=ks(r.cont);t.push((a,o,...u)=>i(a)?s(o,...u):[])}const n=e.name;return(r,...i)=>{const s=r.attribs[n];return s||s===""?t.flatMap(a=>a(s,r,...i)):[]}}function k9(e){const t=ks(e.cont),n=e.combinator==="+"?Uy:S9;return(r,...i)=>{const s=n(r);return s===null?[]:t(s,r,...i)}}const Uy=e=>{const t=e.prev;return t===null?null:ih(t)?t:Uy(t)},S9=e=>{const t=e.parent;return t&&ih(t)?t:null};function w9(e){const t=ks(e.cont);return(n,r,...i)=>t(r,...i)}const jy=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),zy=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var kc;const C9=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Od=(kc=String.fromCodePoint)!==null&&kc!==void 0?kc:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function $y(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=C9.get(e))!==null&&t!==void 0?t:e}var Nt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Nt||(Nt={}));const A9=32;var On;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(On||(On={}));function vd(e){return e>=Nt.ZERO&&e<=Nt.NINE}function N9(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_F||e>=Nt.LOWER_A&&e<=Nt.LOWER_F}function I9(e){return e>=Nt.UPPER_A&&e<=Nt.UPPER_Z||e>=Nt.LOWER_A&&e<=Nt.LOWER_Z||vd(e)}function O9(e){return e===Nt.EQUALS||I9(e)}var wt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(wt||(wt={}));var ai;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ai||(ai={}));class v9{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=wt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ai.Strict}startEntity(t){this.decodeMode=t,this.state=wt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case wt.EntityStart:return t.charCodeAt(n)===Nt.NUM?(this.state=wt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=wt.NamedEntity,this.stateNamedEntity(t,n));case wt.NumericStart:return this.stateNumericStart(t,n);case wt.NumericDecimal:return this.stateNumericDecimal(t,n);case wt.NumericHex:return this.stateNumericHex(t,n);case wt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|A9)===Nt.LOWER_X?(this.state=wt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=wt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(vd(i)||N9(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(vd(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Nt.SEMI)this.consumed+=1;else if(this.decodeMode===ai.Strict)return 0;return this.emitCodePoint($y(this.result),this.consumed),this.errors&&(t!==Nt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&On.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=qy(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===ai.Attribute&&(s===0||O9(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&On.VALUE_LENGTH)>>14,s!==0){if(a===Nt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==ai.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&On.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~On.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case wt.NamedEntity:return this.result!==0&&(this.decodeMode!==ai.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case wt.NumericDecimal:return this.emitNumericEntity(0,2);case wt.NumericHex:return this.emitNumericEntity(0,3);case wt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case wt.EntityStart:return 0}}}function Vy(e){let t="";const n=new v9(e,r=>t+=Od(r));return function(i,s){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){t+=i.slice(a,o),n.startEntity(s);const l=n.write(i,o+1);if(l<0){a=o+n.end();break}a=o+l,o=l===0?a+1:a}const u=t+i.slice(a);return t="",u}}function qy(e,t,n,r){const i=(t&On.BRANCH_LENGTH)>>7,s=t&On.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let a=n,o=a+i-1;for(;a<=o;){const u=a+o>>>1,l=e[u];if(l<r)a=u+1;else if(l>r)o=u-1;else return e[u+i]}return-1}Vy(jy);Vy(zy);var ae;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(ae||(ae={}));var V;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"})(V||(V={}));function lr(e){return e===ae.Space||e===ae.NewLine||e===ae.Tab||e===ae.FormFeed||e===ae.CarriageReturn}function lo(e){return e===ae.Slash||e===ae.Gt||lr(e)}function Um(e){return e>=ae.Zero&&e<=ae.Nine}function _9(e){return e>=ae.LowerA&&e<=ae.LowerZ||e>=ae.UpperA&&e<=ae.UpperZ}function L9(e){return e>=ae.UpperA&&e<=ae.UpperF||e>=ae.LowerA&&e<=ae.LowerF}var qn;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(qn||(qn={}));const Jt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class R9{constructor({xmlMode:t=!1,decodeEntities:n=!0},r){this.cbs=r,this.state=V.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=V.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=t,this.decodeEntities=n,this.entityTrie=t?zy:jy}reset(){this.state=V.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=V.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(t){t===ae.Lt||!this.decodeEntities&&this.fastForwardTo(ae.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=V.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===ae.Amp&&(this.state=V.BeforeEntity)}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?lo(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=V.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===ae.Gt||lr(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Jt.TitleEnd?this.decodeEntities&&t===ae.Amp&&(this.state=V.BeforeEntity):this.fastForwardTo(ae.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===ae.Lt)}stateCDATASequence(t){t===Jt.Cdata[this.sequenceIndex]?++this.sequenceIndex===Jt.Cdata.length&&(this.state=V.InCommentLike,this.currentSequence=Jt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=V.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Jt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=V.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!lo(t):_9(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=V.SpecialStartSequence}stateBeforeTagName(t){if(t===ae.ExclamationMark)this.state=V.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===ae.Questionmark)this.state=V.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,!this.xmlMode&&n===Jt.TitleEnd[2]?this.startSpecial(Jt.TitleEnd,3):this.state=!this.xmlMode&&n===Jt.ScriptEnd[2]?V.BeforeSpecialS:V.InTagName}else t===ae.Slash?this.state=V.BeforeClosingTagName:(this.state=V.Text,this.stateText(t))}stateInTagName(t){lo(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){lr(t)||(t===ae.Gt?this.state=V.Text:(this.state=this.isTagStartChar(t)?V.InClosingTagName:V.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===ae.Gt||lr(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.state=V.Text,this.baseState=V.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===ae.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=V.InSpecialTag,this.sequenceIndex=0):this.state=V.Text,this.baseState=this.state,this.sectionStart=this.index+1):t===ae.Slash?this.state=V.InSelfClosingTag:lr(t)||(this.state=V.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===ae.Gt?(this.cbs.onselfclosingtag(this.index),this.state=V.Text,this.baseState=V.Text,this.sectionStart=this.index+1,this.isSpecial=!1):lr(t)||(this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===ae.Eq||lo(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=V.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===ae.Eq?this.state=V.BeforeAttributeValue:t===ae.Slash||t===ae.Gt?(this.cbs.onattribend(qn.NoValue,this.index),this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t)):lr(t)||(this.cbs.onattribend(qn.NoValue,this.index),this.state=V.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===ae.DoubleQuote?(this.state=V.InAttributeValueDq,this.sectionStart=this.index+1):t===ae.SingleQuote?(this.state=V.InAttributeValueSq,this.sectionStart=this.index+1):lr(t)||(this.sectionStart=this.index,this.state=V.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===ae.DoubleQuote?qn.Double:qn.Single,this.index),this.state=V.BeforeAttributeName):this.decodeEntities&&t===ae.Amp&&(this.baseState=this.state,this.state=V.BeforeEntity)}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,ae.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,ae.SingleQuote)}stateInAttributeValueNoQuotes(t){lr(t)||t===ae.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(qn.Unquoted,this.index),this.state=V.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===ae.Amp&&(this.baseState=this.state,this.state=V.BeforeEntity)}stateBeforeDeclaration(t){t===ae.OpeningSquareBracket?(this.state=V.CDATASequence,this.sequenceIndex=0):this.state=t===ae.Dash?V.BeforeComment:V.InDeclaration}stateInDeclaration(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=V.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=V.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===ae.Dash?(this.state=V.InCommentLike,this.currentSequence=Jt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=V.InDeclaration}stateInSpecialComment(t){(t===ae.Gt||this.fastForwardTo(ae.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=V.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===Jt.ScriptEnd[3]?this.startSpecial(Jt.ScriptEnd,4):n===Jt.StyleEnd[3]?this.startSpecial(Jt.StyleEnd,4):(this.state=V.InTagName,this.stateInTagName(t))}stateBeforeEntity(t){this.entityExcess=1,this.entityResult=0,t===ae.Number?this.state=V.BeforeNumericEntity:t===ae.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=V.InNamedEntity,this.stateInNamedEntity(t))}stateInNamedEntity(t){if(this.entityExcess+=1,this.trieIndex=qy(this.entityTrie,this.trieCurrent,this.trieIndex+1,t),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&On.VALUE_LENGTH;if(n){const r=(n>>14)-1;if(!this.allowLegacyEntity()&&t!==ae.Semi)this.trieIndex+=r;else{const i=this.index-this.entityExcess+1;i>this.sectionStart&&this.emitPartial(this.sectionStart,i),this.entityResult=this.trieIndex,this.trieIndex+=r,this.entityExcess=0,this.sectionStart=this.index+1,r===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&On.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~On.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(t){(t|32)===ae.LowerX?(this.entityExcess++,this.state=V.InHexEntity):(this.state=V.InNumericEntity,this.stateInNumericEntity(t))}emitNumericEntity(t){const n=this.index-this.entityExcess-1;n+2+ +(this.state===V.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(t),this.emitCodePoint($y(this.entityResult))),this.state=this.baseState}stateInNumericEntity(t){t===ae.Semi?this.emitNumericEntity(!0):Um(t)?(this.entityResult=this.entityResult*10+(t-ae.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(t){t===ae.Semi?this.emitNumericEntity(!0):Um(t)?(this.entityResult=this.entityResult*16+(t-ae.Zero),this.entityExcess++):L9(t)?(this.entityResult=this.entityResult*16+((t|32)-ae.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===V.Text||this.baseState===V.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===V.Text||this.state===V.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===V.InAttributeValueDq||this.state===V.InAttributeValueSq||this.state===V.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case V.Text:{this.stateText(t);break}case V.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case V.InSpecialTag:{this.stateInSpecialTag(t);break}case V.CDATASequence:{this.stateCDATASequence(t);break}case V.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case V.InAttributeName:{this.stateInAttributeName(t);break}case V.InCommentLike:{this.stateInCommentLike(t);break}case V.InSpecialComment:{this.stateInSpecialComment(t);break}case V.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case V.InTagName:{this.stateInTagName(t);break}case V.InClosingTagName:{this.stateInClosingTagName(t);break}case V.BeforeTagName:{this.stateBeforeTagName(t);break}case V.AfterAttributeName:{this.stateAfterAttributeName(t);break}case V.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case V.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case V.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case V.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case V.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case V.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case V.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case V.InDeclaration:{this.stateInDeclaration(t);break}case V.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case V.BeforeComment:{this.stateBeforeComment(t);break}case V.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case V.InNamedEntity:{this.stateInNamedEntity(t);break}case V.BeforeEntity:{this.stateBeforeEntity(t);break}case V.InHexEntity:{this.stateInHexEntity(t);break}case V.InNumericEntity:{this.stateInNumericEntity(t);break}default:this.stateBeforeNumericEntity(t)}this.index++}this.cleanup()}finish(){this.state===V.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.state===V.InCommentLike?this.currentSequence===Jt.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===V.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===V.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===V.InTagName||this.state===V.BeforeAttributeName||this.state===V.BeforeAttributeValue||this.state===V.AfterAttributeName||this.state===V.InAttributeName||this.state===V.InAttributeValueSq||this.state===V.InAttributeValueDq||this.state===V.InAttributeValueNq||this.state===V.InClosingTagName||this.cbs.ontext(this.sectionStart,t)}emitPartial(t,n){this.baseState!==V.Text&&this.baseState!==V.InSpecialTag?this.cbs.onattribdata(t,n):this.cbs.ontext(t,n)}emitCodePoint(t){this.baseState!==V.Text&&this.baseState!==V.InSpecialTag?this.cbs.onattribentity(t):this.cbs.ontextentity(t)}}const Bi=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ue=new Set(["p"]),jm=new Set(["thead","tbody"]),zm=new Set(["dd","dt"]),$m=new Set(["rt","rp"]),M9=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ue],["h1",Ue],["h2",Ue],["h3",Ue],["h4",Ue],["h5",Ue],["h6",Ue],["select",Bi],["input",Bi],["output",Bi],["button",Bi],["datalist",Bi],["textarea",Bi],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",zm],["dt",zm],["address",Ue],["article",Ue],["aside",Ue],["blockquote",Ue],["details",Ue],["div",Ue],["dl",Ue],["fieldset",Ue],["figcaption",Ue],["figure",Ue],["footer",Ue],["form",Ue],["header",Ue],["hr",Ue],["main",Ue],["nav",Ue],["ol",Ue],["pre",Ue],["section",Ue],["table",Ue],["ul",Ue],["rt",$m],["rp",$m],["tbody",jm],["tfoot",jm]]),D9=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Vm=new Set(["math","svg"]),qm=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),P9=/\s|\//;class B9{constructor(t,n={}){var r,i,s,a,o;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t!=null?t:{},this.lowerCaseTagNames=(r=n.lowerCaseTags)!==null&&r!==void 0?r:!n.xmlMode,this.lowerCaseAttributeNames=(i=n.lowerCaseAttributeNames)!==null&&i!==void 0?i:!n.xmlMode,this.tokenizer=new((s=n.Tokenizer)!==null&&s!==void 0?s:R9)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}ontext(t,n){var r,i;const s=this.getSlice(t,n);this.endIndex=n-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,s),this.startIndex=n}ontextentity(t){var n,r;const i=this.tokenizer.getSectionStart();this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,Od(t)),this.startIndex=i}isVoidElement(t){return!this.options.xmlMode&&D9.has(t)}onopentagname(t,n){this.endIndex=n;let r=this.getSlice(t,n);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)}emitOpenTag(t){var n,r,i,s;this.openTagStart=this.startIndex,this.tagname=t;const a=!this.options.xmlMode&&M9.get(t);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const o=this.stack.pop();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,o,!0)}this.isVoidElement(t)||(this.stack.push(t),Vm.has(t)?this.foreignContext.push(!0):qm.has(t)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,r;this.startIndex=this.openTagStart,this.attribs&&((r=(n=this.cbs).onopentag)===null||r===void 0||r.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var r,i,s,a,o,u;this.endIndex=n;let l=this.getSlice(t,n);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(Vm.has(l)||qm.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((i=(r=this.cbs).onopentagname)===null||i===void 0||i.call(r,"br"),(a=(s=this.cbs).onopentag)===null||a===void 0||a.call(s,"br",{},!0),(u=(o=this.cbs).onclosetag)===null||u===void 0||u.call(o,"br",!1));else{const c=this.stack.lastIndexOf(l);if(c!==-1)if(this.cbs.onclosetag){let d=this.stack.length-c;for(;d--;)this.cbs.onclosetag(this.stack.pop(),d!==0)}else this.stack.length=c;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,r;const i=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===i&&((r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,i,!t),this.stack.pop())}onattribname(t,n){this.startIndex=t;const r=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=Od(t)}onattribend(t,n){var r,i;this.endIndex=n,(i=(r=this.cbs).onattribute)===null||i===void 0||i.call(r,this.attribname,this.attribvalue,t===qn.Double?'"':t===qn.Single?"'":t===qn.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(P9);let r=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r}ondeclaration(t,n){this.endIndex=n;const r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`!${i}`,`!${r}`)}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const i=this.getInstructionName(r);this.cbs.onprocessinginstruction(`?${i}`,`?${r}`)}this.startIndex=n+1}oncomment(t,n,r){var i,s,a,o;this.endIndex=n,(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,this.getSlice(t,n-r)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=n+1}oncdata(t,n,r){var i,s,a,o,u,l,c,d,h,f;this.endIndex=n;const m=this.getSlice(t,n-r);this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,m),(l=(u=this.cbs).oncdataend)===null||l===void 0||l.call(u)):((d=(c=this.cbs).oncomment)===null||d===void 0||d.call(c,`[CDATA[${m}]]`),(f=(h=this.cbs).oncommentend)===null||f===void 0||f.call(h)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,r,i;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(r=this.cbs).onparserinit)===null||i===void 0||i.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let r=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,n-this.bufferOffset);return r}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}}const Wm=/["&'<>$\x80-\uFFFF]/g,F9=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),H9=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function Wy(e){let t="",n=0,r;for(;(r=Wm.exec(e))!==null;){const i=r.index,s=e.charCodeAt(i),a=F9.get(s);a!==void 0?(t+=e.substring(n,i)+a,n=i+1):(t+=`${e.substring(n,i)}&#x${H9(e,i).toString(16)};`,n=Wm.lastIndex+=+((s&64512)===55296))}return t+e.substr(n)}function Yy(e,t){return function(r){let i,s=0,a="";for(;i=e.exec(r);)s!==i.index&&(a+=r.substring(s,i.index)),a+=t.get(i[0].charCodeAt(0)),s=i.index+1;return a+r.substring(s)}}const U9=Yy(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),j9=Yy(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),z9=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),$9=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),V9=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function q9(e){return e.replace(/"/g,"&quot;")}function W9(e,t){var n;if(!e)return;const r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?q9:t.xmlMode||t.encodeEntities!=="utf8"?Wy:U9;return Object.keys(e).map(i=>{var s,a;const o=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=$9.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&o===""?i:`${i}="${r(o)}"`}).join(" ")}const Ym=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function dl(e,t={}){const n="length"in e?e:[e];let r="";for(let i=0;i<n.length;i++)r+=Y9(n[i],t);return r}function Y9(e,t){switch(e.type){case JM:return dl(e.children,t);case aD:case eD:return X9(e);case tD:return eP(e);case sD:return Z9(e);case nD:case rD:case iD:return Q9(e,t);case ZM:return J9(e,t)}}const K9=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),G9=new Set(["svg","math"]);function Q9(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=z9.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&K9.has(e.parent.name)&&(t=ne(I({},t),{xmlMode:!1}))),!t.xmlMode&&G9.has(e.name)&&(t=ne(I({},t),{xmlMode:"foreign"}));let r=`<${e.name}`;const i=W9(e.attribs,t);return i&&(r+=` ${i}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&Ym.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=dl(e.children,t)),(t.xmlMode||!Ym.has(e.name))&&(r+=`</${e.name}>`)),r}function X9(e){return`<${e.data}>`}function J9(e,t){var n;let r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&V9.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?Wy(r):j9(r)),r}function Z9(e){return`<![CDATA[${e.children[0].data}]]>`}function eP(e){return`<!--${e.data}-->`}function tP(e,t){const n=new fD(void 0,t);return new B9(n,t).end(e),n.root}var Sc,Km;function nP(){if(Km)return Sc;Km=1;var e=function(E){return t(E)&&!n(E)};function t(x){return!!x&&typeof x=="object"}function n(x){var E=Object.prototype.toString.call(x);return E==="[object RegExp]"||E==="[object Date]"||s(x)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function s(x){return x.$$typeof===i}function a(x){return Array.isArray(x)?[]:{}}function o(x,E){return E.clone!==!1&&E.isMergeableObject(x)?b(a(x),x,E):x}function u(x,E,T){return x.concat(E).map(function(v){return o(v,T)})}function l(x,E){if(!E.customMerge)return b;var T=E.customMerge(x);return typeof T=="function"?T:b}function c(x){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(x).filter(function(E){return Object.propertyIsEnumerable.call(x,E)}):[]}function d(x){return Object.keys(x).concat(c(x))}function h(x,E){try{return E in x}catch(T){return!1}}function f(x,E){return h(x,E)&&!(Object.hasOwnProperty.call(x,E)&&Object.propertyIsEnumerable.call(x,E))}function m(x,E,T){var v={};return T.isMergeableObject(x)&&d(x).forEach(function(C){v[C]=o(x[C],T)}),d(E).forEach(function(C){f(x,C)||(h(x,C)&&T.isMergeableObject(E[C])?v[C]=l(C,T)(x[C],E[C],T):v[C]=o(E[C],T))}),v}function b(x,E,T){T=T||{},T.arrayMerge=T.arrayMerge||u,T.isMergeableObject=T.isMergeableObject||e,T.cloneUnlessOtherwiseSpecified=o;var v=Array.isArray(E),C=Array.isArray(x),w=v===C;return w?v?T.arrayMerge(x,E,T):m(x,E,T):o(E,T)}b.all=function(E,T){if(!Array.isArray(E))throw new Error("first argument should be an array");return E.reduce(function(v,C){return b(v,C,T)},{})};var y=b;return Sc=y,Sc}var rP=nP();const Ky=Ta(rP);function fh(e,t,n=()=>{}){if(e===void 0){const r=function(...i){return t(r,...i)};return r}return e>=0?function(...r){return t(fh(e-1,t,n),...r)}:n}function Gy(e,t){let n=0,r=e.length;for(;n<r&&e[n]===t;)++n;for(;r>n&&e[r-1]===t;)--r;return n>0||r<e.length?e.substring(n,r):e}function iP(e,t){let n=e.length;for(;n>0&&e[n-1]===t;)--n;return n<e.length?e.substring(0,n):e}function sP(e){return e.replace(/[\s\S]/g,t=>"\\u"+t.charCodeAt().toString(16).padStart(4,"0"))}function Qy(e,t){const n=new Map;for(let r=e.length;r-- >0;){const i=e[r],s=t(i);n.set(s,n.has(s)?Ky(i,n.get(s),{arrayMerge:aP}):i)}return[...n.values()].reverse()}const aP=(e,t,n)=>[...t];function fs(e,t){for(const n of t){if(!e)return;e=e[n]}return e}function Gm(e,t="a",n=26){const r=[];do e-=1,r.push(e%n),e=e/n>>0;while(e>0);const i=t.charCodeAt(0);return r.reverse().map(s=>String.fromCharCode(i+s)).join("")}const wc=["I","X","C","M"],Qm=["V","L","D"];function Xm(e){return[...e+""].map(t=>+t).reverse().map((t,n)=>t%5<4?(t<5?"":Qm[n])+wc[n].repeat(t%5):wc[n]+(t<5?Qm[n]:wc[n+1])).reverse().join("")}class Xy{constructor(t,n=void 0){this.lines=[],this.nextLineWords=[],this.maxLineLength=n||t.wordwrap||Number.MAX_VALUE,this.nextLineAvailableChars=this.maxLineLength,this.wrapCharacters=fs(t,["longWordSplit","wrapCharacters"])||[],this.forceWrapOnLimit=fs(t,["longWordSplit","forceWrapOnLimit"])||!1,this.stashedSpace=!1,this.wordBreakOpportunity=!1}pushWord(t,n=!1){this.nextLineAvailableChars<=0&&!n&&this.startNewLine();const r=this.nextLineWords.length===0,i=t.length+(r?0:1);if(i<=this.nextLineAvailableChars||n)this.nextLineWords.push(t),this.nextLineAvailableChars-=i;else{const[s,...a]=this.splitLongWord(t);r||this.startNewLine(),this.nextLineWords.push(s),this.nextLineAvailableChars-=s.length;for(const o of a)this.startNewLine(),this.nextLineWords.push(o),this.nextLineAvailableChars-=o.length}}popWord(){const t=this.nextLineWords.pop();if(t!==void 0){const n=this.nextLineWords.length===0,r=t.length+(n?0:1);this.nextLineAvailableChars+=r}return t}concatWord(t,n=!1){if(this.wordBreakOpportunity&&t.length>this.nextLineAvailableChars)this.pushWord(t,n),this.wordBreakOpportunity=!1;else{const r=this.popWord();this.pushWord(r?r.concat(t):t,n)}}startNewLine(t=1){this.lines.push(this.nextLineWords),t>1&&this.lines.push(...Array.from({length:t-1},()=>[])),this.nextLineWords=[],this.nextLineAvailableChars=this.maxLineLength}isEmpty(){return this.lines.length===0&&this.nextLineWords.length===0}clear(){this.lines.length=0,this.nextLineWords.length=0,this.nextLineAvailableChars=this.maxLineLength}toString(){return[...this.lines,this.nextLineWords].map(t=>t.join(" ")).join(`
`)}splitLongWord(t){const n=[];let r=0;for(;t.length>this.maxLineLength;){const i=t.substring(0,this.maxLineLength),s=t.substring(this.maxLineLength),a=i.lastIndexOf(this.wrapCharacters[r]);if(a>-1)t=i.substring(a+1)+s,n.push(i.substring(0,a+1));else if(r++,r<this.wrapCharacters.length)t=i+s;else{if(this.forceWrapOnLimit){if(n.push(i),t=s,t.length>this.maxLineLength)continue}else t=i+s;break}}return n.push(t),n}}class Da{constructor(t=null){this.next=t}getRoot(){return this.next?this.next:this}}class Vn extends Da{constructor(t,n=null,r=1,i=void 0){super(n),this.leadingLineBreaks=r,this.inlineTextBuilder=new Xy(t,i),this.rawText="",this.stashedLineBreaks=0,this.isPre=n&&n.isPre,this.isNoWrap=n&&n.isNoWrap}}class Jm extends Vn{constructor(t,n=null,{interRowLineBreaks:r=1,leadingLineBreaks:i=2,maxLineLength:s=void 0,maxPrefixLength:a=0,prefixAlign:o="left"}={}){super(t,n,i,s),this.maxPrefixLength=a,this.prefixAlign=o,this.interRowLineBreaks=r}}class oi extends Vn{constructor(t,n=null,{leadingLineBreaks:r=1,maxLineLength:i=void 0,prefix:s=""}={}){super(t,n,r,i),this.prefix=s}}class Zm extends Da{constructor(t=null){super(t),this.rows=[],this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class e1 extends Da{constructor(t=null){super(t),this.cells=[],this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class ui extends Da{constructor(t,n=null,r=void 0){super(n),this.inlineTextBuilder=new Xy(t,r),this.rawText="",this.stashedLineBreaks=0,this.isPre=n&&n.isPre,this.isNoWrap=n&&n.isNoWrap}}class oP extends Da{constructor(t=null,n){super(t),this.transform=n}}function uP(e){return[...e].map(t=>"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0")).join("")}class lP{constructor(t){this.whitespaceChars=t.preserveNewlines?t.whitespaceCharacters.replace(/\n/g,""):t.whitespaceCharacters;const n=uP(this.whitespaceChars);if(this.leadingWhitespaceRe=new RegExp(`^[${n}]`),this.trailingWhitespaceRe=new RegExp(`[${n}]$`),this.allWhitespaceOrEmptyRe=new RegExp(`^[${n}]*$`),this.newlineOrNonWhitespaceRe=new RegExp(`(\\n|[^\\n${n}])`,"g"),this.newlineOrNonNewlineStringRe=new RegExp("(\\n|[^\\n]+)","g"),t.preserveNewlines){const r=new RegExp(`\\n|[^\\n${n}]+`,"gm");this.shrinkWrapAdd=function(i,s,a=(u=>u),o=!1){if(!i)return;const u=s.stashedSpace;let l=!1,c=r.exec(i);if(c)for(l=!0,c[0]===`
`?s.startNewLine():u||this.testLeadingWhitespace(i)?s.pushWord(a(c[0]),o):s.concatWord(a(c[0]),o);(c=r.exec(i))!==null;)c[0]===`
`?s.startNewLine():s.pushWord(a(c[0]),o);s.stashedSpace=u&&!l||this.testTrailingWhitespace(i)}}else{const r=new RegExp(`[^${n}]+`,"g");this.shrinkWrapAdd=function(i,s,a=(u=>u),o=!1){if(!i)return;const u=s.stashedSpace;let l=!1,c=r.exec(i);if(c)for(l=!0,u||this.testLeadingWhitespace(i)?s.pushWord(a(c[0]),o):s.concatWord(a(c[0]),o);(c=r.exec(i))!==null;)s.pushWord(a(c[0]),o);s.stashedSpace=u&&!l||this.testTrailingWhitespace(i)}}}addLiteral(t,n,r=!0){if(!t)return;const i=n.stashedSpace;let s=!1,a=this.newlineOrNonNewlineStringRe.exec(t);if(a)for(s=!0,a[0]===`
`?n.startNewLine():i?n.pushWord(a[0],r):n.concatWord(a[0],r);(a=this.newlineOrNonNewlineStringRe.exec(t))!==null;)a[0]===`
`?n.startNewLine():n.pushWord(a[0],r);n.stashedSpace=i&&!s}testLeadingWhitespace(t){return this.leadingWhitespaceRe.test(t)}testTrailingWhitespace(t){return this.trailingWhitespaceRe.test(t)}testContainsWords(t){return!this.allWhitespaceOrEmptyRe.test(t)}countNewlinesNoWords(t){this.newlineOrNonWhitespaceRe.lastIndex=0;let n=0,r;for(;(r=this.newlineOrNonWhitespaceRe.exec(t))!==null;)if(r[0]===`
`)n++;else return 0;return n}}class cP{constructor(t,n,r=void 0){this.options=t,this.picker=n,this.metadata=r,this.whitespaceProcessor=new lP(t),this._stackItem=new Vn(t),this._wordTransformer=void 0}pushWordTransform(t){this._wordTransformer=new oP(this._wordTransformer,t)}popWordTransform(){if(!this._wordTransformer)return;const t=this._wordTransformer.transform;return this._wordTransformer=this._wordTransformer.next,t}startNoWrap(){this._stackItem.isNoWrap=!0}stopNoWrap(){this._stackItem.isNoWrap=!1}_getCombinedWordTransformer(){const t=this._wordTransformer?(r=>Jy(r,this._wordTransformer)):void 0,n=this.options.encodeCharacters;return t?n?r=>n(t(r)):t:n}_popStackItem(){const t=this._stackItem;return this._stackItem=t.next,t}addLineBreak(){(this._stackItem instanceof Vn||this._stackItem instanceof oi||this._stackItem instanceof ui)&&(this._stackItem.isPre?this._stackItem.rawText+=`
`:this._stackItem.inlineTextBuilder.startNewLine())}addWordBreakOpportunity(){(this._stackItem instanceof Vn||this._stackItem instanceof oi||this._stackItem instanceof ui)&&(this._stackItem.inlineTextBuilder.wordBreakOpportunity=!0)}addInline(t,{noWordTransform:n=!1}={}){if(this._stackItem instanceof Vn||this._stackItem instanceof oi||this._stackItem instanceof ui){if(this._stackItem.isPre){this._stackItem.rawText+=t;return}if(!(t.length===0||this._stackItem.stashedLineBreaks&&!this.whitespaceProcessor.testContainsWords(t))){if(this.options.preserveNewlines){const r=this.whitespaceProcessor.countNewlinesNoWords(t);if(r>0){this._stackItem.inlineTextBuilder.startNewLine(r);return}}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.shrinkWrapAdd(t,this._stackItem.inlineTextBuilder,n?void 0:this._getCombinedWordTransformer(),this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}}addLiteral(t){if((this._stackItem instanceof Vn||this._stackItem instanceof oi||this._stackItem instanceof ui)&&t.length!==0){if(this._stackItem.isPre){this._stackItem.rawText+=t;return}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.addLiteral(t,this._stackItem.inlineTextBuilder,this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}openBlock({leadingLineBreaks:t=1,reservedLineLength:n=0,isPre:r=!1}={}){const i=Math.max(20,this._stackItem.inlineTextBuilder.maxLineLength-n);this._stackItem=new Vn(this.options,this._stackItem,t,i),r&&(this._stackItem.isPre=!0)}closeBlock({trailingLineBreaks:t=1,blockTransform:n=void 0}={}){const r=this._popStackItem(),i=n?n(ii(r)):ii(r);co(this._stackItem,i,r.leadingLineBreaks,Math.max(r.stashedLineBreaks,t))}openList({maxPrefixLength:t=0,prefixAlign:n="left",interRowLineBreaks:r=1,leadingLineBreaks:i=2}={}){this._stackItem=new Jm(this.options,this._stackItem,{interRowLineBreaks:r,leadingLineBreaks:i,maxLineLength:this._stackItem.inlineTextBuilder.maxLineLength,maxPrefixLength:t,prefixAlign:n})}openListItem({prefix:t=""}={}){if(!(this._stackItem instanceof Jm))throw new Error("Can't add a list item to something that is not a list! Check the formatter.");const n=this._stackItem,r=Math.max(t.length,n.maxPrefixLength),i=Math.max(20,n.inlineTextBuilder.maxLineLength-r);this._stackItem=new oi(this.options,n,{prefix:t,maxLineLength:i,leadingLineBreaks:n.interRowLineBreaks})}closeListItem(){const t=this._popStackItem(),n=t.next,r=Math.max(t.prefix.length,n.maxPrefixLength),i=`
`+" ".repeat(r),a=(n.prefixAlign==="right"?t.prefix.padStart(r):t.prefix.padEnd(r))+ii(t).replace(/\n/g,i);co(n,a,t.leadingLineBreaks,Math.max(t.stashedLineBreaks,n.interRowLineBreaks))}closeList({trailingLineBreaks:t=2}={}){const n=this._popStackItem(),r=ii(n);r&&co(this._stackItem,r,n.leadingLineBreaks,t)}openTable(){this._stackItem=new Zm(this._stackItem)}openTableRow(){if(!(this._stackItem instanceof Zm))throw new Error("Can't add a table row to something that is not a table! Check the formatter.");this._stackItem=new e1(this._stackItem)}openTableCell({maxColumnWidth:t=void 0}={}){if(!(this._stackItem instanceof e1))throw new Error("Can't add a table cell to something that is not a table row! Check the formatter.");this._stackItem=new ui(this.options,this._stackItem,t)}closeTableCell({colspan:t=1,rowspan:n=1}={}){const r=this._popStackItem(),i=Gy(ii(r),`
`);r.next.cells.push({colspan:t,rowspan:n,text:i})}closeTableRow(){const t=this._popStackItem();t.next.rows.push(t.cells)}closeTable({tableToString:t,leadingLineBreaks:n=2,trailingLineBreaks:r=2}){const i=this._popStackItem(),s=t(i.rows);s&&co(this._stackItem,s,n,r)}toString(){return ii(this._stackItem.getRoot())}}function ii(e){if(!(e instanceof Vn||e instanceof oi||e instanceof ui))throw new Error("Only blocks, list items and table cells can be requested for text contents.");return e.inlineTextBuilder.isEmpty()?e.rawText:e.rawText+e.inlineTextBuilder.toString()}function co(e,t,n,r){if(!(e instanceof Vn||e instanceof oi||e instanceof ui))throw new Error("Only blocks, list items and table cells can contain text.");const i=ii(e),s=Math.max(e.stashedLineBreaks,n);e.inlineTextBuilder.clear(),i?e.rawText=i+`
`.repeat(s)+t:(e.rawText=t,e.leadingLineBreaks=s),e.stashedLineBreaks=r}function Jy(e,t){return t?Jy(t.transform(e),t.next):e}function dP(e={}){const t=e.selectors.filter(a=>!a.format);if(t.length)throw new Error("Following selectors have no specified format: "+t.map(a=>`\`${a.selector}\``).join(", "));const n=new Bm(e.selectors.map(a=>[a.selector,a])).build(Hm);typeof e.encodeCharacters!="function"&&(e.encodeCharacters=mP(e.encodeCharacters));const r=new Bm(e.baseElements.selectors.map((a,o)=>[a,o+1])).build(Hm);function i(a){return hP(a,e,r)}const s=fh(e.limits.maxDepth,pP,function(a,o){o.addInline(e.limits.ellipsis||"")});return function(a,o=void 0){return fP(a,o,e,n,i,s)}}function fP(e,t,n,r,i,s){const a=n.limits.maxInputLength;a&&e&&e.length>a&&(console.warn(`Input length ${e.length} is above allowed limit of ${a}. Truncating without ellipsis.`),e=e.substring(0,a));const o=tP(e,{decodeEntities:n.decodeEntities}),u=i(o.children),l=new cP(n,r,t);return s(u,l),l.toString()}function hP(e,t,n){const r=[];function i(a,o){o=o.slice(0,t.limits.maxChildNodes);for(const u of o){if(u.type!=="tag")continue;const l=n.pick1(u);if(l>0?r.push({selectorIndex:l,element:u}):u.children&&a(u.children),r.length>=t.limits.maxBaseElements)return}}return fh(t.limits.maxDepth,i)(e),t.baseElements.orderBy!=="occurrence"&&r.sort((a,o)=>a.selectorIndex-o.selectorIndex),t.baseElements.returnDomByDefault&&r.length===0?e:r.map(a=>a.element)}function pP(e,t,n){if(!t)return;const r=n.options;t.length>r.limits.maxChildNodes&&(t=t.slice(0,r.limits.maxChildNodes),t.push({data:r.limits.ellipsis,type:"text"}));for(const s of t)switch(s.type){case"text":{n.addInline(s.data);break}case"tag":{const a=n.picker.pick1(s),o=r.formatters[a.format];o(s,e,n,a.options||{});break}}}function mP(e){if(!e||Object.keys(e).length===0)return;const t=Object.entries(e).filter(([,s])=>s!==!1),n=new RegExp(t.map(([s])=>`(${sP([...s][0])})`).join("|"),"g"),r=t.map(([,s])=>s),i=(s,...a)=>r[a.findIndex(o=>o)];return s=>s.replace(n,i)}function gP(e,t,n,r){}function bP(e,t,n,r){n.addLiteral(r.string||"")}function xP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.addLiteral(r.string||""),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function yP(e,t,n,r){t(e.children,n)}function EP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function Zy(e){const t=e.attribs&&e.attribs.length?" "+Object.entries(e.attribs).map(([n,r])=>r===""?n:`${n}=${r.replace(/"/g,"&quot;")}`).join(" "):"";return`<${e.name}${t}>`}function eE(e){return`</${e.name}>`}function TP(e,t,n,r){n.startNoWrap(),n.addLiteral(Zy(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(eE(e)),n.stopNoWrap()}function kP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(Zy(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(eE(e)),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function SP(e,t,n,r){n.startNoWrap(),n.addLiteral(dl(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap()}function wP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(dl(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function CP(e,t,n,r){n.addLiteral(r.prefix||""),t(e.children,n),n.addLiteral(r.suffix||"")}var AP=Object.freeze({__proto__:null,block:EP,blockHtml:wP,blockString:xP,blockTag:kP,inline:yP,inlineHtml:SP,inlineString:bP,inlineSurround:CP,inlineTag:TP,skip:gP});function _u(e,t){return e[t]||(e[t]=[]),e[t]}function NP(e,t=0){for(;e[t];)t++;return t}function IP(e,t){for(let n=0;n<t;n++){const r=_u(e,n);for(let i=0;i<n;i++){const s=_u(e,i);if(r[i]||s[n]){const a=r[i];r[i]=s[n],s[n]=a}}}}function OP(e,t,n,r){for(let i=0;i<e.rowspan;i++){const s=_u(t,n+i);for(let a=0;a<e.colspan;a++)s[r+a]=e}}function _d(e,t){return e[t]===void 0&&(e[t]=t===0?0:1+_d(e,t-1)),e[t]}function t1(e,t,n,r){e[t+n]=Math.max(_d(e,t+n),_d(e,t)+r)}function vP(e,t,n){const r=[];let i=0;const s=e.length,a=[0];for(let l=0;l<s;l++){const c=_u(r,l),d=e[l];let h=0;for(let f=0;f<d.length;f++){const m=d[f];h=NP(c,h),OP(m,r,l,h),h+=m.colspan,m.lines=m.text.split(`
`);const b=m.lines.length;t1(a,l,m.rowspan,b+t)}i=c.length>i?c.length:i}IP(r,s>i?s:i);const o=[],u=[0];for(let l=0;l<i;l++){let c=0,d;const h=Math.min(s,r[l].length);for(;c<h;)if(d=r[l][c],d){if(!d.rendered){let f=0;for(let m=0;m<d.lines.length;m++){const b=d.lines[m],y=a[c]+m;o[y]=(o[y]||"").padEnd(u[l])+b,f=b.length>f?b.length:f}t1(u,l,d.colspan,f+n),d.rendered=!0}c+=d.rowspan}else{const f=a[c];o[f]=o[f]||"",c++}}return o.join(`
`)}function _P(e,t,n,r){n.addLineBreak()}function LP(e,t,n,r){n.addWordBreakOpportunity()}function RP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),n.addInline("-".repeat(r.length||n.options.wordwrap||40)),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function MP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function DP(e,t,n,r){n.openBlock({isPre:!0,leadingLineBreaks:r.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function PP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2}),r.uppercase!==!1?(n.pushWordTransform(i=>i.toUpperCase()),t(e.children,n),n.popWordTransform()):t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2})}function BP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks||2,reservedLineLength:2}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks||2,blockTransform:i=>(r.trimEmptyLines!==!1?Gy(i,`
`):i).split(`
`).map(s=>"> "+s).join(`
`)})}function Ld(e,t){if(!t)return e;const n=typeof t[0]=="string"?t[0]:"[",r=typeof t[1]=="string"?t[1]:"]";return n+e+r}function tE(e,t,n,r,i){const s=typeof t=="function"?t(e,r,i):e;return s[0]==="/"&&n?iP(n,"/")+s:s}function FP(e,t,n,r){const i=e.attribs||{},s=i.alt?i.alt:"",a=i.src?tE(i.src,r.pathRewrite,r.baseUrl,n.metadata,e):"",o=a?s?s+" "+Ld(a,r.linkBrackets):Ld(a,r.linkBrackets):s;n.addInline(o,{noWordTransform:!0})}function HP(e,t,n,r){function i(){if(r.ignoreHref||!e.attribs||!e.attribs.href)return"";let a=e.attribs.href.replace(/^mailto:/,"");return r.noAnchorUrl&&a[0]==="#"?"":(a=tE(a,r.pathRewrite,r.baseUrl,n.metadata,e),a)}const s=i();if(!s)t(e.children,n);else{let a="";n.pushWordTransform(u=>(u&&(a+=u),u)),t(e.children,n),n.popWordTransform(),r.hideLinkHrefIfSameAsText&&s===a||n.addInline(a?" "+Ld(s,r.linkBrackets):s,{noWordTransform:!0})}}function nE(e,t,n,r,i){const s=fs(e,["parent","name"])==="li";let a=0;const o=(e.children||[]).filter(u=>u.type!=="text"||!/^\s*$/.test(u.data)).map(function(u){if(u.name!=="li")return{node:u,prefix:""};const l=s?i().trimStart():i();return l.length>a&&(a=l.length),{node:u,prefix:l}});if(o.length){n.openList({interRowLineBreaks:1,leadingLineBreaks:s?1:r.leadingLineBreaks||2,maxPrefixLength:a,prefixAlign:"left"});for(const{node:u,prefix:l}of o)n.openListItem({prefix:l}),t([u],n),n.closeListItem();n.closeList({trailingLineBreaks:s?1:r.trailingLineBreaks||2})}}function UP(e,t,n,r){const i=r.itemPrefix||" * ";return nE(e,t,n,r,()=>i)}function jP(e,t,n,r){let i=Number(e.attribs.start||"1");const s=zP(e.attribs.type);return nE(e,t,n,r,()=>" "+s(i++)+". ")}function zP(e="1"){switch(e){case"a":return t=>Gm(t,"a");case"A":return t=>Gm(t,"A");case"i":return t=>Xm(t).toLowerCase();case"I":return t=>Xm(t);case"1":default:return t=>t.toString()}}function $P(e){const t=[],n=[];for(const r of e)r.startsWith(".")?t.push(r.substring(1)):r.startsWith("#")&&n.push(r.substring(1));return{classes:t,ids:n}}function VP(e,t){if(t===!0)return!0;if(!e)return!1;const{classes:n,ids:r}=$P(t),i=(e.class||"").split(" "),s=(e.id||"").split(" ");return i.some(a=>n.includes(a))||s.some(a=>r.includes(a))}function qP(e,t,n,r){return VP(e.attribs,n.options.tables)?rE(e,t,n,r):WP(e,t,n,r)}function WP(e,t,n,r){n.openBlock({leadingLineBreaks:r.leadingLineBreaks}),t(e.children,n),n.closeBlock({trailingLineBreaks:r.trailingLineBreaks})}function rE(e,t,n,r){n.openTable(),e.children.forEach(s),n.closeTable({tableToString:a=>{var o,u;return vP(a,(o=r.rowSpacing)!=null?o:0,(u=r.colSpacing)!=null?u:3)},leadingLineBreaks:r.leadingLineBreaks,trailingLineBreaks:r.trailingLineBreaks});function i(a){const o=+fs(a,["attribs","colspan"])||1,u=+fs(a,["attribs","rowspan"])||1;n.openTableCell({maxColumnWidth:r.maxColumnWidth}),t(a.children,n),n.closeTableCell({colspan:o,rowspan:u})}function s(a){if(a.type!=="tag")return;const o=r.uppercaseHeaderCells!==!1?u=>{n.pushWordTransform(l=>l.toUpperCase()),i(u),n.popWordTransform()}:i;switch(a.name){case"thead":case"tbody":case"tfoot":case"center":a.children.forEach(s);return;case"tr":{n.openTableRow();for(const u of a.children)if(u.type==="tag")switch(u.name){case"th":{o(u);break}case"td":{i(u);break}}n.closeTableRow();break}}}}var YP=Object.freeze({__proto__:null,anchor:HP,blockquote:BP,dataTable:rE,heading:PP,horizontalLine:RP,image:FP,lineBreak:_P,orderedList:jP,paragraph:MP,pre:DP,table:qP,unorderedList:UP,wbr:LP});const KP={baseElements:{selectors:["body"],orderBy:"selectors",returnDomByDefault:!0},decodeEntities:!0,encodeCharacters:{},formatters:{},limits:{ellipsis:"...",maxBaseElements:void 0,maxChildNodes:void 0,maxDepth:void 0,maxInputLength:1<<24},longWordSplit:{forceWrapOnLimit:!1,wrapCharacters:[]},preserveNewlines:!1,selectors:[{selector:"*",format:"inline"},{selector:"a",format:"anchor",options:{baseUrl:null,hideLinkHrefIfSameAsText:!1,ignoreHref:!1,linkBrackets:["[","]"],noAnchorUrl:!0}},{selector:"article",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"aside",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"blockquote",format:"blockquote",options:{leadingLineBreaks:2,trailingLineBreaks:2,trimEmptyLines:!0}},{selector:"br",format:"lineBreak"},{selector:"div",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"footer",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"form",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"h1",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h2",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h3",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h4",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h5",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h6",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"header",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"hr",format:"horizontalLine",options:{leadingLineBreaks:2,length:void 0,trailingLineBreaks:2}},{selector:"img",format:"image",options:{baseUrl:null,linkBrackets:["[","]"]}},{selector:"main",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"nav",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"ol",format:"orderedList",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"p",format:"paragraph",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"pre",format:"pre",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"section",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"table",format:"table",options:{colSpacing:3,leadingLineBreaks:2,maxColumnWidth:60,rowSpacing:0,trailingLineBreaks:2,uppercaseHeaderCells:!0}},{selector:"ul",format:"unorderedList",options:{itemPrefix:" * ",leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"wbr",format:"wbr"}],tables:[],whitespaceCharacters:` 	\r
\f`,wordwrap:80},GP=(e,t,n)=>[...e,...t],iE=(e,t,n)=>[...t],QP=(e,t,n)=>e.some(r=>typeof r=="object")?GP(e,t):iE(e,t);function XP(e={}){return e=Ky(KP,e,{arrayMerge:iE,customMerge:t=>t==="selectors"?QP:void 0}),e.formatters=Object.assign({},AP,YP,e.formatters),e.selectors=Qy(e.selectors,(t=>t.selector)),ZP(e),dP(e)}function JP(e,t={},n=void 0){return XP(t)(e,n)}function ZP(e){if(e.tags){const n=Object.entries(e.tags).map(([r,i])=>ne(I({},i),{selector:r||"*"}));e.selectors.push(...n),e.selectors=Qy(e.selectors,(r=>r.selector))}function t(n,r,i){const s=r.pop();for(const a of r){let o=n[a];o||(o={},n[a]=o),n=o}n[s]=i}if(e.baseElement){const n=e.baseElement;t(e,["baseElements","selectors"],Array.isArray(n)?n:[n])}e.returnDomByDefault!==void 0&&t(e,["baseElements","returnDomByDefault"],e.returnDomByDefault);for(const n of e.selectors)n.format==="anchor"&&fs(n,["options","noLinkBrackets"])&&t(n,["options","linkBrackets"],!1)}const e7=({closeFnc:e,isOpen:t,handleSubmit:n,errors:r,setErrors:i,formData:s,setFormData:a})=>{var ue,ye,me;const[o,u]=F.useState(0),[l,c]=F.useState(null),[d,h]=F.useState(!1),[f,m]=F.useState([]),[b,y]=F.useState(!1),[x,E]=F.useState(!1),T=x?s.keywords:s.keywords.slice(0,18),v=Lu();F.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const C=()=>{if(o===0&&!l){i(z=>ne(I({},z),{template:!0})),re.error("Please select a template before proceeding.");return}i(z=>ne(I({},z),{template:!1})),u(1)},w=()=>u(0),D=()=>e(),B=z=>{c(xl[z].name),a(S=>ne(I({},S),{template:xl[z].name})),i(S=>ne(I({},S),{template:!1}))},j=(z,S)=>{a(pe=>ne(I({},pe),{[S]:z.target.value})),i(pe=>ne(I({},pe),{[S]:!1}))},_=z=>{a(S=>ne(I({},S),{tone:z})),i(S=>ne(I({},S),{tone:!1}))},$=(z,S)=>{const pe=S==="keywords"?"keywordInput":"focusKeywordInput";a(Ae=>ne(I({},Ae),{[pe]:z.target.value})),i(Ae=>ne(I({},Ae),{[S]:!1}))},H=z=>{const S=z==="keywords"?"keywordInput":"focusKeywordInput",pe=s[S].trim();if(!pe){i(ke=>ne(I({},ke),{[z]:!0})),re.error("Please enter a keyword.");return}const Ae=new Set(s[z].map(ke=>ke.trim().toLowerCase())),O=pe.split(",").map(ke=>ke.trim()).filter(ke=>ke&&!Ae.has(ke.toLowerCase()));if(O.length===0){i(ke=>ne(I({},ke),{[z]:!0})),re.error("Please enter valid, non-duplicate keywords separated by commas.");return}if(z==="focusKeywords"&&s[z].length+O.length>3){i(ke=>ne(I({},ke),{[z]:!0})),re.error("You can only add up to 3 focus keywords.");return}a(ke=>ne(I({},ke),{[z]:[...ke[z],...O],[S]:""})),i(ke=>ne(I({},ke),{[z]:!1}))},Y=(z,S)=>{const pe=[...s[S]];pe.splice(z,1),a(ne(I({},s),{[S]:pe}))},G=(z,S)=>{z.key==="Enter"&&(z.preventDefault(),H(S))},Z=()=>Xe(null,null,function*(){if(!s.topic.trim()){i(z=>ne(I({},z),{topic:!0})),re.error("Please enter a topic before generating titles.");return}if(s.focusKeywords.length<1&&s.keywords.length<1){i(z=>ne(I({},z),{focusKeywords:!0,keywords:!0})),re.error("Please add at least one focus keyword or secondary keyword.");return}h(!0);try{const z=yield v(SE(I({keywords:s.focusKeywords,focusKeywords:s.keywords,topic:s.topic,template:l},b&&{oldTitles:f}))).unwrap();m(z),y(!0),re.success("Titles generated successfully!")}catch(z){console.error("Failed to generate titles:",z),re.error((z==null?void 0:z.message)||"Failed to generate titles. Please try again.")}finally{h(!1)}});return F.useEffect(()=>{y(!1),m([])},[]),g.jsx(pr,{title:o===0?"Select Template":"Create Simple Blog",open:t,onCancel:D,footer:o===0?[g.jsx("button",{onClick:C,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90","aria-label":"Proceed to next step",children:"Next"},"next")]:[g.jsx("button",{onClick:w,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300","aria-label":"Go to previous step",children:"Previous"},"previous"),g.jsx("button",{onClick:n,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 ml-3","aria-label":"Submit blog",children:"Submit"},"submit")],width:800,centered:!0,children:g.jsxs("div",{className:"p-2",children:[o===0&&g.jsxs("div",{className:"p-3",children:[g.jsx(VE,{children:xl.map((z,S)=>g.jsx("div",{className:`cursor-pointer transition-all duration-200 ${l===z.name?"border-gray-300 border-2 rounded-lg":""}`,onClick:()=>B(S),children:g.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm",children:[g.jsx("div",{className:"relative",children:g.jsx("img",{src:z.imgSrc||"/placeholder.svg",alt:z.name,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-2 mt-2",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:z.name}),g.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:z.description})]})]})},S))}),r.template&&g.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please select a template."})]}),o===1&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Topic ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(Fr,{value:s.topic,onChange:z=>j(z,"topic"),placeholder:"Enter blog topic...",className:`w-full px-3 py-2 border ${r.topic?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Blog topic"}),r.topic&&g.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Topic cannot be empty."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tone ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs(dr,{value:s.tone,onChange:_,className:`w-full ${r.tone?"border-red-500":""}`,"aria-label":"Blog tone",children:[g.jsx(dr.Option,{value:"Informative",children:"Informative"}),g.jsx(dr.Option,{value:"Casual",children:"Casual"}),g.jsx(dr.Option,{value:"Professional",children:"Professional"}),g.jsx(dr.Option,{value:"Persuasive",children:"Persuasive"}),g.jsx(dr.Option,{value:"Humorous",children:"Humorous"})]}),r.tone&&g.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Tone cannot be empty."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Focus Keywords (max 3) ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Fr,{value:s.focusKeywordInput,onChange:z=>$(z,"focusKeywords"),onKeyDown:z=>G(z,"focusKeywords"),placeholder:"Enter focus keywords, separated by commas",className:`flex-1 px-3 py-2 border ${r.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Focus keywords"}),g.jsx("button",{onClick:()=>H("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center","aria-label":"Add focus keyword",children:g.jsx(Oo,{size:16})})]}),g.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.focusKeywords.map((z,S)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[z,g.jsx("button",{onClick:()=>Y(S,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove focus keyword ${z}`,children:g.jsx(Io,{size:16})})]},S))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Keywords ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Fr,{value:s.keywordInput,onChange:z=>$(z,"keywords"),onKeyDown:z=>G(z,"keywords"),placeholder:"Enter secondary keywords, separated by commas",className:`flex-1 px-3 py-2 border ${r.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Secondary keywords"}),g.jsx("button",{onClick:()=>H("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center","aria-label":"Add keyword",children:g.jsx(Oo,{size:16})})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[T.map((z,S)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[z,g.jsx("button",{onClick:()=>Y(S,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove keyword ${z}`,children:g.jsx(Io,{size:16})})]},`${z}-${S}`)),s.keywords.length>18&&g.jsx("span",{onClick:()=>E(z=>!z),className:"text-xs font-medium text-blue-600 self-center cursor-pointer flex items-center gap-1",children:x?g.jsx(g.Fragment,{children:"Show less"}):g.jsxs(g.Fragment,{children:["+",s.keywords.length-18," more"]})})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx(Fr,{value:s.title,onChange:z=>j(z,"title"),placeholder:"Enter blog title...",className:`w-full px-3 flex-1 py-2 border ${r.title?"border-red-500":"border-gray-200"} rounded-md text-sm focus:ring-2 focus:ring-blue-600`,"aria-label":"Blog title"}),g.jsx("button",{onClick:Z,disabled:d,className:`px-4 py-2 bg-gradient-to-r from-[#1B6FC9] to-[#4C9FE8] text-white rounded-lg flex items-center ${d?"opacity-50 cursor-not-allowed":"hover:from-[#1B6FC9]/90 hover:to-[#4C9FE8]/90"}`,children:d?g.jsx(qE,{size:"small"}):b?g.jsxs(g.Fragment,{children:[g.jsx(WE,{size:16,className:"mr-2"}),"Generate More"]}):g.jsxs(g.Fragment,{children:[g.jsx(u1,{size:16,className:"mr-2"}),"Generate Titles"]})})]}),f.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:f.map((z,S)=>{const pe=z===s.title;return g.jsx("div",{className:"relative group",children:g.jsx("button",{type:"button",onClick:()=>{a(Ae=>ne(I({},Ae),{title:z})),i(Ae=>ne(I({},Ae),{title:!1}))},className:`px-3 py-1 rounded-full text-sm border transition truncate max-w-[200px] sm:max-w-[300px] ${pe?"bg-[#1B6FC9] text-white border-[#1B6FC9]":"bg-gray-100 text-gray-700 border-gray-300 opacity-60 hover:opacity-100 hover:bg-gray-200"}`,"aria-label":`Select title: ${z}`,children:z})},S)})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Choose length of Blog ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"range",min:"500",max:"5000",value:(ue=s.userDefinedLength)!=null?ue:1e3,onChange:z=>j(z,"userDefinedLength"),placeholder:"Enter desired word count...",className:"w-full h-1 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#1B6FC9]",style:{background:`linear-gradient(to right, #1B6FC9 ${(((ye=s==null?void 0:s.userDefinedLength)!=null?ye:1e3)-500)/45}%, #e5e7eb 0%)`},"aria-label":"Desired word count"}),g.jsxs("span",{className:"mt-2 text-sm text-gray-600 block",children:[(me=s==null?void 0:s.userDefinedLength)!=null?me:1e3," words"]})]})]})]})})},G7=()=>{var $t,Bn;const{id:e}=wE(),t=Lu(),n=hi(Ee=>Ee.blog.selectedBlog),[r,i]=F.useState("Normal"),[s,a]=F.useState(!0),[o,u]=F.useState([]),[l,c]=F.useState(""),[d,h]=F.useState(""),[f,m]=F.useState([]),[b,y]=F.useState(!1),[x,E]=F.useState(null),[T,v]=F.useState(!1),[C,w]=F.useState(null),[D,B]=F.useState(!1),[j,_]=F.useState({category:"",includeTableOfContents:!1}),[$,H]=F.useState(!e),Y=hi(Ee=>Ee.auth.user),G=(Bn=Y==null?void 0:Y.plan)!=null?Bn:($t=Y==null?void 0:Y.subscription)==null?void 0:$t.plan,Z=Rd(),ye=s1().pathname===`/blog-editor/${n==null?void 0:n._id}`,[me,z]=F.useState(!1),[S,pe]=F.useState({title:"",topic:"",tone:"Informative",focusKeywords:[],keywords:[],userDefinedLength:1200,focusKeywordInput:"",keywordInput:"",template:""}),[Ae,O]=F.useState({title:!1,topic:!1,tone:!1,focusKeywords:!1,keywords:!1,userDefinedLength:!1,template:!1});F.useEffect(()=>{e&&(a(!0),t(Th(e)).unwrap().catch(()=>re.error("Failed to load blog.")).finally(()=>a(!1)))},[e,t]),F.useEffect(()=>{n&&(u(n.keywords||[]),h(n.title||""),c(n.content?JP(n.content,{wordwrap:!1,selectors:[{selector:"a",options:{baseUrl:""}},{selector:"img",format:"skip"}]}):""),w(n.wordpress||null),_({category:n.category||"",includeTableOfContents:n.includeTableOfContents||!1,title:n.title||""}))},[n]);const ke=(Ee,Me)=>{if(typeof Ee!="string"||typeof Me!="string"){re.error("Invalid suggestion format.");return}const ot=new RegExp(Ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");c(ct=>ct.replace(ot,Me)),m(ct=>ct.filter(rt=>rt.original!==Ee))},st=Ee=>Xe(null,null,function*(){var Me,ot;if(B(!0),!d){re.error("Blog title is missing."),B(!1);return}if(!l.trim()){re.error("Blog content is empty."),B(!1);return}if(!Ee.categories){re.error("Please select a category."),B(!1);return}try{const ct={blogId:n._id,title:d,content:l,categories:Ee.categories,includeTableOfContents:Ee.includeTableOfContents},rt=C?yield Sh.put("/wordpress",ct):yield Sh.post("/wordpress",ct);w(rt==null?void 0:rt.data),re.success(`Blog ${C?"updated":"posted"} successfully!`)}catch(ct){re.error(((ot=(Me=ct.response)==null?void 0:Me.data)==null?void 0:ot.message)||`Failed to ${C?"update":"post to"} WordPress.`)}finally{B(!1)}}),Se=Ee=>Ee.trim().split(/\s+/).filter(Me=>Me.length>0).length,Et=()=>Xe(null,null,function*(){if(G==="free"||G==="basic"){Z("/pricing");return}if(!d.trim()){re.error("Blog title is required.");return}v(!0);try{const Ee=yield t(kh({id:n._id,title:d,content:l,published:n==null?void 0:n.published,focusKeywords:n==null?void 0:n.focusKeywords,keywords:o})).unwrap();return re.success("Blog updated successfully"),a(!0),setTimeout(()=>{t(Th(e)).unwrap().finally(()=>a(!1))},2e3),Ee}catch(Ee){console.error("Error updating the blog:",Ee),re.error("Failed to save blog.")}finally{v(!1)}}),mt=()=>Xe(null,null,function*(){v(!0);try{yield t(kh({id:n._id,title:d,content:l,published:n==null?void 0:n.published,focusKeywords:n==null?void 0:n.focusKeywords,keywords:o})).unwrap();const Ee=yield a1(n._id);Ee.data?(E(Ee.data),y(!0),re.success("Review the suggested content.")):re.error("No content received from retry.")}catch(Ee){console.error("Error updating the blog:",Ee),re.error("Failed to save blog.")}finally{v(!1)}}),{Title:kt}=CE,Rt=()=>{x&&(c(x),re.success("Content updated successfully!")),y(!1),E(null)},He=()=>{y(!1),E(null),re.info("Changes discarded.")},at={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},pn=()=>{var Me,ot,ct;(!((Me=S.title)!=null&&Me.trim())||!((ot=S.topic)!=null&&ot.trim())||!((ct=S.tone)!=null&&ct.trim())||!S.template||!S.userDefinedLength||S.userDefinedLength<=0||!S.focusKeywords||S.focusKeywords.length===0||!S.keywords||S.keywords.length===0)&&!e&&Z("/blogs"),H(!1)},wr=()=>Xe(null,null,function*(){var ot,ct,rt;const Ee={title:(ot=S.title)==null?void 0:ot.trim(),topic:(ct=S.topic)==null?void 0:ct.trim(),tone:(rt=S.tone)==null?void 0:rt.trim(),focusKeywords:S.focusKeywords,keywords:S.keywords,userDefinedLength:Number(S.userDefinedLength),template:S.template},Me={};if(Ee.title||(Me.title=!0),Ee.topic||(Me.topic=!0),Ee.tone||(Me.tone=!0),Ee.template||(Me.template=!0),(!Ee.userDefinedLength||Ee.userDefinedLength<=0)&&(Me.userDefinedLength=!0),(!Ee.focusKeywords||Ee.focusKeywords.length===0)&&(Me.focusKeywords=!0),(!Ee.keywords||Ee.keywords.length===0)&&(Me.keywords=!0),Object.keys(Me).length>0){O(P=>I(I({},P),Me)),re.error("Please fill all required fields correctly.");return}try{const P=yield t(NE({blogData:Ee,user:Y})).unwrap();H(!1),Z(`/blog-editor/${P._id}`)}catch(P){console.error("Failed to create blog:",P),re.error((P==null?void 0:P.message)||"Failed to create blog")}}),Cr=Ee=>{const Me=Ee.target.value;Se(Me)<=60?(h(Me),_(ot=>ne(I({},ot),{title:Me}))):re.error("Title exceeds 60 words.")},mn=()=>{if(!l.trim()){re.error("Please write some content to preview.");return}z(!0)},an=()=>z(!1),Pn=()=>l.trim()?`<div class="prose prose-lg"><h1>${d||topic||"Your Blog Title"}</h1>${l}</div>`:`<h1>${d||"Preview Title"}</h1><p>No content available for preview.</p>`;return g.jsxs(g.Fragment,{children:[g.jsx(AE,{children:g.jsx("title",{children:"Blog Editor | GenWrite"})}),g.jsxs("div",{className:`h-screen flex flex-col ${$?"blur-sm":""}`,children:[g.jsxs(pr,{open:b,centered:!0,footer:[g.jsx(Dt,{onClick:He,style:{background:"#f5f5f5",color:"#595959"},children:"Reject"},"reject"),g.jsx(Dt,{type:"primary",onClick:Rt,children:"Accept"},"accept")],onCancel:He,width:700,className:"rounded-lg",children:[g.jsx(kt,{level:3,style:{marginBottom:"16px"},children:"Suggested Content"}),g.jsx("div",{style:{padding:"16px",background:"#f5f5f5",borderRadius:"4px",marginBottom:"16px"},children:g.jsx(Eo,{remarkPlugins:[To],rehypePlugins:[wo],className:"prose",components:{a:({href:Ee,children:Me})=>g.jsx("a",{href:Ee,target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff"},children:Me}),strong:({children:Ee})=>g.jsx("strong",{style:{fontWeight:"bold"},children:Ee})},children:x})})]}),g.jsx(pr,{title:"Blog Preview",open:me,onCancel:an,footer:[g.jsx("button",{onClick:an,className:"px-4 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-500 focus:outline-none focus:bg-gray-500","aria-label":"Close preview",children:"Close"},"close")],width:800,centered:!0,children:g.jsx("div",{className:"prose prose-lg max-w-none p-4",dangerouslySetInnerHTML:{__html:Pn()}})}),g.jsxs("div",{className:"flex mt-5 pb-5",children:[g.jsxs("div",{className:"flex-1 flex flex-col",children:[g.jsxs("header",{className:"bg-white shadow-lg border rounded-tl-lg border-gray-200 p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:g.jsx(fo,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Blog":"Create New Blog"}),g.jsx("p",{className:"text-gray-600 text-sm",children:"Write and optimize your content"})]})]}),g.jsxs("div",{className:"flex gap-2",children:[ye&&g.jsxs("button",{onClick:mn,className:"px-4 py-2 bg-gradient-to-r from-[#1B6FC9] to-[#4C9FE8] text-white rounded-lg hover:from-[#1B6FC9]/90 hover:to-[#4C9FE8]/90 flex items-center","aria-label":"Preview blog",children:[g.jsx(Md,{size:16,className:"mr-2"}),"Preview"]}),g.jsx("button",{onClick:Et,className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-all duration-300 ${T||!d.trim()||!l.trim()||Se(d)>60?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-105"}`,disabled:T||!d.trim()||!l.trim()||Se(d)>60,"aria-label":"Save blog",children:T?g.jsxs(g.Fragment,{children:[g.jsx(YE,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):g.jsxs(g.Fragment,{children:[g.jsx(kT,{className:"w-4 h-4"}),"Save Blog"]})})]})]}),ye&&g.jsxs("div",{className:"mt-4",children:[g.jsx("div",{className:"flex gap-2 flex-col sm:flex-row",children:g.jsx("input",{type:"text",value:d,onChange:Cr,placeholder:"Enter your blog title...",className:`flex-1 text-2xl sm:text-3xl font-bold text-gray-900 placeholder-gray-400 border-none outline-none resize-none ${Se(d)>60?"text-red-600":""}`,"aria-label":"Blog title"})}),g.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[Se(d),"/60 words (optimal for SEO)",Se(d)>60&&g.jsx("span",{className:"text-red-600 ml-2",children:"Title exceeds 60 words"})]})]})]}),g.jsx(No,{children:g.jsx(Ke.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:at,transition:{duration:.3},className:"flex-grow",children:s?g.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-120px)]",children:g.jsx(KE,{className:"animate-spin h-8 w-8 text-blue-600"})}):g.jsx(WM,{keywords:o,setKeywords:u,blog:n,activeTab:r,setActiveTab:i,proofreadingResults:f,handleReplace:ke,content:l,setContent:c,title:d,setTitle:h,isSavingKeyword:T})},r)})]}),g.jsx(GM,{blog:n,keywords:o,setKeywords:u,onPost:st,activeTab:r,handleReplace:ke,proofreadingResults:f,setProofreadingResults:m,handleSave:mt,posted:C,isPosting:D,formData:j,title:d,editorContent:l})]})]}),g.jsx(e7,{closeFnc:pn,isOpen:$,handleSubmit:wr,errors:Ae,setErrors:O,formData:S,setFormData:pe})]})};export{G7 as default};
