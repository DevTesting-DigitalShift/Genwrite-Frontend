var J=Object.defineProperty,Z=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Y=(d,p,m)=>p in d?J(d,p,{enumerable:!0,configurable:!0,writable:!0,value:m}):d[p]=m,o=(d,p)=>{for(var m in p||(p={}))ee.call(p,m)&&Y(d,m,p[m]);if(A)for(var m of A(p))se.call(p,m)&&Y(d,m,p[m]);return d},l=(d,p)=>Z(d,_(p));import{r as y,u as te,b as re,J as ae,a as oe,z as le,j as s,M as ne,Q as v,dX as ie}from"./index-DuVGJ3NY.js";import{g as de}from"./getEstimatedCost-DJiO1C-B.js";import{T as ce}from"./TemplateSelection-CB7koIs4.js";import{P as j}from"./plus-DWWd_A7c.js";import{X as N}from"./x-DSGKfFb3.js";import"./clsx-B-dksMZM.js";import"./index-DPA9QB48.js";import"./gapSize-U1swVQyS.js";import"./index-CF9L43pP.js";import"./Input-DJ3ywq4e.js";import"./SearchOutlined-DUKzpQFG.js";import"./search-M1A6czeT.js";import"./createLucideIcon-BNZq4Tlu.js";import"./index-BcLVot0q.js";import"./crown-DmCimvAn.js";import"./index-B8Gw-z5D.js";const Le=({type:d="quick",closeFnc:p})=>{var D,$,E;const[m,C]=y.useState(0),[b,g]=y.useState([]),K={topic:"",performKeywordResearch:!1,addImages:!1,imageSource:"unsplash",template:null,templateIds:[],keywords:[],focusKeywords:[],otherLinkInput:"",focusKeywordInput:"",keywordInput:""},I={topic:"",template:"",focusKeywords:"",keywords:"",otherLinks:""},[i,h]=y.useState(K),[x,c]=y.useState(I),q=te(),z=re(),{handlePopup:M}=ae(),f=oe(le);(D=f==null?void 0:f.subscription)==null||D.plan;const Q=()=>{if(m===0){if(!i.template){c(e=>l(o({},e),{template:"Please select a template."}));return}c(e=>l(o({},e),{template:""})),C(1)}},L=()=>{h(K),g([]),c(I),p()},S=e=>{const{name:t,value:n}=e.target;h(a=>l(o({},a),{[t]:n})),c(a=>l(o({},a),{[t]:""}))},T=()=>{const e={topic:i.topic.trim()?"":"Please enter a topic.",focusKeywords:!i.performKeywordResearch&&i.focusKeywords.length===0?"Please add at least one focus keyword.":"",keywords:!i.performKeywordResearch&&i.keywords.length===0?"Please add at least one secondary keyword.":"",otherLinks:b.length===0&&d==="yt"?"Please add at least one valid link.":""};if(c(e),Object.values(e).some(n=>n)){v.error("Please fill all required fields correctly.");return}if(b.length>3){c(n=>l(o({},n),{otherLinks:"You can only add up to 3 links."})),v.error("You can only add up to 3 links.");return}const t=l(o({},i),{type:d,otherLinks:b});M({title:`${d==="quick"?"Quick":"Youtube"} Blog Generation`,description:s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:[d==="quick"?"Quick":"Youtube"," blog generation will cost you"," ",s.jsxs("b",{children:[de("blog.quick")," credits"]}),"."]}),s.jsx("br",{}),s.jsx("span",{children:"Are you sure you want to proceed?"})]}),onConfirm:()=>{q(ie({blogData:t,user:f,navigate:z,type:d})),L()}})},U=y.useCallback(e=>{h(t=>{var n,a;return l(o({},t),{template:(a=(n=e==null?void 0:e[0])==null?void 0:n.name)!=null?a:null,templateIds:e==null?void 0:e.map(u=>u.id)})}),c(t=>l(o({},t),{template:""}))},[]),P=(e,t)=>{const n=t==="keywords"?"keywordInput":"focusKeywordInput";h(a=>l(o({},a),{[n]:e.target.value})),c(a=>l(o({},a),{[t]:""}))},k=e=>{const t=e==="keywords"?"keywordInput":"focusKeywordInput",n=i[t].trim();if(!n){c(r=>l(o({},r),{[e]:"Please enter a keyword."}));return}const a=new Set(i[e].map(r=>r.trim().toLowerCase())),u=n.split(",").map(r=>r.trim()).filter(r=>r!==""&&!a.has(r.toLowerCase()));if(u.length===0){c(r=>l(o({},r),{[e]:"Please enter valid, non-duplicate keywords separated by commas."}));return}if(e==="focusKeywords"&&i[e].length+u.length>3){c(r=>l(o({},r),{[e]:"You can only add up to 3 focus keywords."}));return}h(r=>l(o({},r),{[e]:[...r[e],...u],[t]:""})),c(r=>l(o({},r),{[e]:""}))},R=(e,t)=>{const n=[...i[t]];n.splice(e,1),h(l(o({},i),{[t]:n})),c(a=>l(o({},a),{[t]:""}))},F=(e,t)=>{e.key==="Enter"&&(e.preventDefault(),k(t))},V=e=>{try{const t=new URL(e),n=t.hostname.toLowerCase().replace("www.","");if(!n.includes("youtube.com")&&!n.includes("youtu.be"))return null;let a=null;if(n==="youtube.com"||n==="m.youtube.com"){const u=t.pathname;u.startsWith("/watch")?a=t.searchParams.get("v"):u.startsWith("/embed/")?a=u.split("/embed/")[1].split("/")[0].split("?")[0]:u.startsWith("/v/")?a=u.split("/v/")[1].split("/")[0].split("?")[0]:u.startsWith("/shorts/")&&(a=u.split("/shorts/")[1].split("/")[0].split("?")[0])}else n==="youtu.be"&&(a=t.pathname.slice(1).split("/")[0].split("?")[0]);return a}catch(t){return null}},W=e=>{switch(d){case"yt":const t=V(e);if(!t||!/^[a-zA-Z0-9_-]{11}$/.test(t))return{valid:!1,error:"Please enter a valid YouTube video link with a proper video ID."};break;default:try{new URL(e)}catch(a){return{valid:!1,error:"Please enter a valid URL (e.g., https://example.com)."}}}return{valid:!0}},B=()=>{var u;const e=(u=i.otherLinkInput)==null?void 0:u.trim(),t=3;if(!e){c(r=>l(o({},r),{otherLinks:`Please enter valid ${d==="yt"?"youtube":"reference"} links.`}));return}const n=e.split(",").map(r=>r.trim()).filter(r=>r!==""),a=[];for(let r of n){if(b.includes(r)||a.includes(r))continue;const w=W(r);if(!w.valid){c(H=>l(o({},H),{otherLinks:w.error})),v.error(w.error);return}a.push(r)}if(a.length===0){c(r=>l(o({},r),{otherLinks:"No valid, unique links found."}));return}if(b.length+a.length>t){c(r=>l(o({},r),{otherLinks:`You can only add up to ${t} links.`}));return}g([...b,...a]),h(r=>l(o({},r),{otherLinkInput:""})),c(r=>l(o({},r),{otherLinks:""}))},G=e=>{e.key==="Enter"&&(e.preventDefault(),B())},O=e=>{const t=[...b];t.splice(e,1),g(t),c(n=>l(o({},n),{otherLinks:""}))},X=[{id:"unsplash",label:"Stock Images",value:"unsplash"},{id:"ai-generated",label:"AI-Generated Images",value:"ai-generated"}];return s.jsx(ne,{title:`Generate ${d==="quick"?"Quick":"Youtube"} Blog`,open:!0,onCancel:L,footer:m===0?[s.jsx("button",{onClick:Q,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Next step",children:"Next"},"next")]:[s.jsx("button",{onClick:()=>C(0),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors","aria-label":"Previous step",children:"Previous"},"previous"),s.jsx("button",{onClick:T,className:"px-6 py-2 bg-[#1B6FC9] text-white rounded-lg hover:bg-[#1B6FC9]/90 transition-colors ml-3","aria-label":"Submit quick blog",children:"Submit"},"submit")],width:800,centered:!0,transitionName:"",maskTransitionName:"",destroyOnHidden:!0,children:s.jsxs("div",{className:"p-2 space-y-2",children:[m===0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`!max-h-[75vh] overflow-clip p-4 pt-0 ${x.template?"border-2 border-red-500 rounded-lg p-2":""}`,children:s.jsx(ce,{userSubscriptionPlan:(E=($=f==null?void 0:f.subscription)==null?void 0:$.plan)!=null?E:"free",onClick:U,preSelectedIds:i.templateIds})}),x.template&&s.jsx("p",{className:"text-red-500 text-sm mt-2",children:x.template})]}),m===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Topic ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"topic",value:i.topic,onChange:S,className:`w-full px-3 py-2 border ${x.topic?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter the blog topic","aria-label":"Blog topic"}),x.topic&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.topic})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Perform Keyword Research"}),s.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.performKeywordResearch,onChange:e=>h(t=>l(o({},t),{performKeywordResearch:e.target.checked,focusKeywords:e.target.checked?[]:t.focusKeywords,keywords:e.target.checked?[]:t.keywords,focusKeywordInput:"",keywordInput:""})),className:"sr-only peer"}),s.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),s.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),!i.performKeywordResearch&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Focus Keywords (Max 3) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i.focusKeywordInput,onChange:e=>P(e,"focusKeywords"),onKeyDown:e=>F(e,"focusKeywords"),className:`flex-1 px-3 py-2 border ${x.focusKeywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter focus keywords, separated by commas","aria-label":"Focus keywords"}),s.jsx("button",{onClick:()=>k("focusKeywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add focus keywords",children:s.jsx(j,{size:16})})]}),x.focusKeywords&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.focusKeywords}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.focusKeywords.map((e,t)=>s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e,s.jsx("button",{onClick:()=>R(t,"focusKeywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${e}`,children:s.jsx(N,{size:16})})]},t))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Keywords ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i.keywordInput,onChange:e=>P(e,"keywords"),onKeyDown:e=>F(e,"keywords"),className:`flex-1 px-3 py-2 border ${x.keywords?"border-red-500":"border-gray-200"} rounded-md text-sm bg-gray-50`,placeholder:"Enter secondary keywords, separated by commas","aria-label":"Secondary keywords"}),s.jsx("button",{onClick:()=>k("keywords"),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add secondary keywords",children:s.jsx(j,{size:16})})]}),x.keywords&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.keywords}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.keywords.map((e,t)=>s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e,s.jsx("button",{onClick:()=>R(t,"keywords"),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${e}`,children:s.jsx(N,{size:16})})]},t))})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Add Images"}),s.jsxs("label",{className:"relative inline-block w-11 h-6 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.addImages,onChange:e=>h(t=>l(o({},t),{addImages:e.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full transition-colors duration-200 peer-checked:bg-[#1B6FC9]"}),s.jsx("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 bg-white rounded-full border border-gray-300 transition-transform duration-200 peer-checked:translate-x-5"})]})]}),i.addImages&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Image Source"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 mx-auto w-full mb-2",children:X.map(e=>s.jsxs("label",{htmlFor:e.id,className:`relative border rounded-lg px-4 py-3 flex items-center gap-3 justify-center cursor-pointer transition-all duration-150
                      ${i.imageSource===e.value?"border-blue-600 bg-blue-50":"border-gray-300"} hover:shadow-sm w-full`,children:[s.jsx("input",{type:"radio",id:e.id,name:"imageSource",value:e.value,checked:i.imageSource===e.value,onChange:S,className:"hidden"}),s.jsx("span",{className:"text-sm font-medium text-gray-800",children:e.label})]},e.id))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d==="yt"?"YouTube Video Links ":"Reference Links (e.g., articles, websites)"," ","(Max 3 links) ",d==="yt"&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:i.otherLinkInput,onChange:e=>h(t=>l(o({},t),{otherLinkInput:e.target.value})),onKeyDown:e=>G(e),className:"flex-1 px-3 py-2 border rounded-md text-sm bg-gray-50",placeholder:"Enter full URLs (e.g., https://example.com), separated by commas","aria-label":"Reference/Video links"}),s.jsx("button",{onClick:()=>B(),className:"px-4 py-2 bg-[#1B6FC9] text-white rounded-md text-sm flex items-center hover:bg-[#1B6FC9]/90 transition-colors","aria-label":"Add reference/video links",children:s.jsx(j,{size:16})})]}),x.otherLinks&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.otherLinks}),s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((e,t)=>s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e,s.jsx("button",{onClick:()=>O(t),className:"ml-1 text-blue-400 hover:text-blue-600","aria-label":`Remove ${e}`,children:s.jsx(N,{size:16})})]},t))})]})]})]})]})})};export{Le as default};
