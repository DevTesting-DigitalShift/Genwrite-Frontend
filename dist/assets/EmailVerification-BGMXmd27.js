var x=(a,i,s)=>new Promise((l,f)=>{var v=n=>{try{m(s.next(n))}catch(c){f(c)}},r=n=>{try{m(s.throw(n))}catch(c){f(c)}},m=n=>n.done?l(n.value):Promise.resolve(n.value).then(v,r);m((s=s.apply(a,i)).next())});import{j as e}from"./tiptap-BabmW22p.js";import{b as t,o as z,h as F,L}from"./vendor-CcjAMWu8.js";import{v as M}from"./index-CHEUOGl9.js";import{I as P,H as p,C as B,T as H,G as $,l as q,B as S,J as A,f as V,s as G}from"./antd-8WQTeuab.js";import"./utils-DIb0lvMo.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function y(){return y=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a},y.apply(this,arguments)}const Y=(a,i)=>t.createElement(P,y({},a,{ref:i,icon:J})),_=t.forwardRef(Y),{Title:D,Text:g}=H;function ee(){const[a]=p.useForm(),[i,s]=t.useState(!1),[l,f]=t.useState(!1),[v,r]=t.useState(""),[m,n]=t.useState(""),[c,C]=t.useState(!1),[o,b]=t.useState(0),[w,E]=t.useState(!0),{email:h}=z(),N=F();t.useEffect(()=>{h&&(n(h),a.setFieldsValue({email:h}))},[h]),t.useEffect(()=>{if(o>0){const d=setTimeout(()=>b(o-1),1e3);return()=>clearTimeout(d)}else E(!0)},[o]);const I=()=>{b(60),E(!1)},{mutateAsync:T}=M(),R=()=>x(null,null,function*(){var d,j;try{s(!0),r("");const u=yield a.validateFields(["email"]);n(u.email),yield T({email:u.email}),I(),C(!0)}catch(u){r(((j=(d=u.response)==null?void 0:d.data)==null?void 0:j.message)||u.message||"Failed to send verification email")}finally{s(!1)}}),O=d=>x(null,null,function*(){try{s(!0),r(""),d.code==="123456"?(f(!0),G.success("Email Verified ðŸŽ‰"),setTimeout(()=>N("/dashboard"),1200)):r("Invalid verification code.")}catch(j){r("Verification failed.")}finally{s(!1)}}),k=()=>x(null,null,function*(){w&&(yield R())});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(B,{className:"w-full max-w-md shadow-xl border-0",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(_,{className:"text-blue-600 text-2xl"})}),e.jsx(D,{level:3,children:"Verify Your Email"})]}),e.jsx(p,{form:a,layout:"vertical",onFinish:O,children:e.jsxs($,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(p.Item,{name:"email",rules:[{required:!0,message:"Email required"},{type:"email",message:"Invalid email"}],children:e.jsx(q,{placeholder:"you@example.com",size:"large"})}),!c&&e.jsx(S,{type:"primary",size:"large",loading:i,block:!0,onClick:R,children:"Send Link"}),c&&e.jsxs(e.Fragment,{children:[e.jsx(A,{message:e.jsxs("div",{children:[e.jsx(g,{strong:!0,children:m}),e.jsx("br",{}),e.jsx(g,{type:"secondary",children:"Check your inbox and click on link."})]}),type:"info",showIcon:!0}),e.jsx(S,{size:"large",className:"w-full",onClick:k,disabled:!w||i,icon:o>0?e.jsx(V,{spin:!0}):e.jsx(V,{}),children:o>0?`${o}s`:"Resend"})]})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(L,{to:"/pricing",children:e.jsx(g,{type:"secondary",className:"hover:text-blue-600 transition-colors",children:"Back"})})})]})})}export{ee as default};
