var De=(o,a,s)=>new Promise((r,w)=>{var f=c=>{try{p(s.next(c))}catch(u){w(u)}},C=c=>{try{p(s.throw(c))}catch(u){w(u)}},p=c=>c.done?r(c.value):Promise.resolve(c.value).then(f,C);p((s=s.apply(o,a)).next())});import{r as n,I,$ as Te,j as e,u as nt,z as lt,ak as ot,a as it,x as ct,a0 as dt,a2 as ut,H as mt,m as k,aJ as ft,B as E,T as Q,Y as W,an as ht,aK as gt,b as pt}from"./index-CjBclZHk.js";import{b as xt}from"./SkeletonLoader-CFWRxiKx.js";import{d as l}from"./dayjs.min-BZdD_RTt.js";import{F as bt}from"./fuse-CLoWdkAE.js";import{u as vt}from"./useQuery-Cvtk-OwF.js";import{u as Re}from"./useMutation-BhSzs4iL.js";import{c as yt}from"./clsx-B-dksMZM.js";import{l as Be}from"./lodash-hUTukrNo.js";import{D as wt}from"./index-Bb6krdwS.js";import{P as Ot}from"./plus-i5dpVSJq.js";import{I as jt}from"./index-oBzIHmYG.js";import{X as St}from"./x-DAr7XR67.js";import{S as Ct}from"./search-CZ7Cysc8.js";import{P as re}from"./index-Baa0CDKd.js";import{c as ke}from"./createLucideIcon-DtkLMP4-.js";import{R as $t}from"./refresh-ccw-2WixNlEc.js";import{R as ne}from"./rotate-ccw-Wg4HSMoj.js";import{B as Nt}from"./index-Db9QNt2Y.js";import{P as Mt}from"./index-DIcUV8FC.js";import{T as At}from"./trash-2-CbuwzB7m.js";import{P as Dt}from"./Pagination-C8NY0Srr.js";import"./Overflow-CsJj574k.js";import"./index-DF22Jz3U.js";import"./index-fLTjHvzU.js";import"./SearchOutlined-C1iZLzGn.js";import"./Input-CNIC77rG.js";import"./LeftOutlined-C1tD-dul.js";import"./useBreakpoint-Qm7Z5GFA.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],Bt=ke("arrow-down-up",Rt);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],It=ke("funnel",Lt);var Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function le(){return le=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},le.apply(this,arguments)}const Tt=(o,a)=>n.createElement(I,le({},o,{ref:a,icon:Pt})),kt=n.forwardRef(Tt);var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};function oe(){return oe=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},oe.apply(this,arguments)}const Ft=(o,a)=>n.createElement(I,oe({},o,{ref:a,icon:Et})),zt=n.forwardRef(Ft);var Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};function ie(){return ie=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},ie.apply(this,arguments)}const _t=(o,a)=>n.createElement(I,ie({},o,{ref:a,icon:Ht})),Le=n.forwardRef(_t);var Ut={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function ce(){return ce=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},ce.apply(this,arguments)}const Yt=(o,a)=>n.createElement(I,ce({},o,{ref:a,icon:Ut})),qt=n.forwardRef(Yt);var Vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};function de(){return de=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},de.apply(this,arguments)}const Gt=(o,a)=>n.createElement(I,de({},o,{ref:a,icon:Vt})),Kt=n.forwardRef(Gt);var Qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194zm-72 388v134H354V706c0-42.2 16.4-81.9 46.3-111.7C430.1 564.4 469.8 548 512 548s81.9 16.4 111.7 46.3C653.6 624.1 670 663.8 670 706zm0-388c0 42.2-16.4 81.9-46.3 111.7C593.9 459.6 554.2 476 512 476s-81.9-16.4-111.7-46.3A156.63 156.63 0 01354 318V184h316v134z"}}]},name:"hourglass",theme:"outlined"};function ue(){return ue=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},ue.apply(this,arguments)}const Wt=(o,a)=>n.createElement(I,ue({},o,{ref:a,icon:Qt})),Zt=n.forwardRef(Wt);var Jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};function me(){return me=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},me.apply(this,arguments)}const Xt=(o,a)=>n.createElement(I,me({},o,{ref:a,icon:Jt})),es=n.forwardRef(Xt);var ts={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM310.3 167.1a8 8 0 00-12.6 0L185.7 309c-4.2 5.3-.4 13 6.3 13h76v530c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V322h76c6.7 0 10.5-7.8 6.3-13l-112-141.9z"}}]},name:"sort-descending",theme:"outlined"};function fe(){return fe=Object.assign?Object.assign.bind():function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},fe.apply(this,arguments)}const ss=(o,a)=>n.createElement(I,fe({},o,{ref:a,icon:ts})),as=n.forwardRef(ss);var Z={exports:{}},rs=Z.exports,Ie;function ns(){return Ie||(Ie=1,(function(o,a){(function(s,r){o.exports=r()})(rs,(function(){return function(s,r,w){r.prototype.isBetween=function(f,C,p,c){var u=w(f),O=w(C),D=(c=c||"()")[0]==="(",v=c[1]===")";return(D?this.isAfter(u,p):!this.isBefore(u,p))&&(v?this.isBefore(O,p):!this.isAfter(O,p))||(D?this.isBefore(u,p):!this.isAfter(u,p))&&(v?this.isAfter(O,p):!this.isBefore(O,p))}}}))})(Z)),Z.exports}var ls=ns();const os=Te(ls);var J={exports:{}},is=J.exports,Pe;function cs(){return Pe||(Pe=1,(function(o,a){(function(s,r){o.exports=r()})(is,(function(){var s="minute",r=/[+-]\d\d(?::?\d\d)?/g,w=/([+-]|\d\d)/g;return function(f,C,p){var c=C.prototype;p.utc=function(i){var h={date:i,utc:!0,args:arguments};return new C(h)},c.utc=function(i){var h=p(this.toDate(),{locale:this.$L,utc:!0});return i?h.add(this.utcOffset(),s):h},c.local=function(){return p(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(i){i.utc&&(this.$u=!0),this.$utils().u(i.$offset)||(this.$offset=i.$offset),u.call(this,i)};var O=c.init;c.init=function(){if(this.$u){var i=this.$d;this.$y=i.getUTCFullYear(),this.$M=i.getUTCMonth(),this.$D=i.getUTCDate(),this.$W=i.getUTCDay(),this.$H=i.getUTCHours(),this.$m=i.getUTCMinutes(),this.$s=i.getUTCSeconds(),this.$ms=i.getUTCMilliseconds()}else O.call(this)};var D=c.utcOffset;c.utcOffset=function(i,h){var $=this.$utils().u;if($(i))return this.$u?0:$(this.$offset)?D.call(this):this.$offset;if(typeof i=="string"&&(i=(function(N){N===void 0&&(N="");var B=N.match(r);if(!B)return null;var M=(""+B[0]).match(w)||["-",0,0],A=M[0],T=60*+M[1]+ +M[2];return T===0?0:A==="+"?T:-T})(i),i===null))return this;var m=Math.abs(i)<=16?60*i:i;if(m===0)return this.utc(h);var y=this.clone();if(h)return y.$offset=m,y.$u=!1,y;var b=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(y=this.local().add(m+b,s)).$offset=m,y.$x.$localOffset=b,y};var v=c.format;c.format=function(i){var h=i||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,h)},c.valueOf=function(){var i=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*i},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var P=c.toDate;c.toDate=function(i){return i==="s"&&this.$offset?p(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():P.call(this)};var j=c.diff;c.diff=function(i,h,$){if(i&&this.$u===i.$u)return j.call(this,i,h,$);var m=this.local(),y=p(i).local();return j.call(m,y,h,$)}}}))})(J)),J.exports}var ds=cs();const us=Te(ds);l.extend(us);const{RangePicker:ms}=wt;function fs({value:o,onChange:a,minDate:s,maxDate:r}){const w={"Last 7 Days":[l().subtract(6,"day").startOf("day").isBefore(s)?s:l().subtract(6,"day").startOf("day"),r.endOf("day")],"Last 30 Days":[l().subtract(29,"day").startOf("day").isBefore(s)?s:l().subtract(29,"day").startOf("day"),r.endOf("day")],"Last 3 Months":[l().subtract(3,"month").startOf("day").isBefore(s)?s:l().subtract(3,"month").startOf("day"),r.endOf("day")],"Last 6 Months":[l().subtract(6,"month").startOf("day").isBefore(s)?s:l().subtract(6,"month").startOf("day"),r.endOf("day")],"Last 1 Year":[l().subtract(1,"year").startOf("day").isBefore(s)?s:l().subtract(1,"year").startOf("day"),r.endOf("day")]};return e.jsx("div",{children:e.jsx(ms,{presets:Object.entries(w).map(([f,C])=>({label:f,value:C})),value:o,minDate:s,maxDate:r,onChange:f=>{a(f?[l(f[0]).startOf("day"),l(f[1]).endOf("day")]:[null,null])},format:"YYYY-MM-DD",placeholder:["Start date","End date"],className:"w-full rounded-lg border-gray-300 shadow-sm"})})}l.extend(os);const R=100,Us=()=>{var we,Oe,je,Se,Ce,$e,Ne,Me;const o=nt(),a=lt(),s=ot(),r=it(ct),w=(r==null?void 0:r.id)||"guest",f=JSON.parse(sessionStorage.getItem(`user_${w}_filters`))||{},[C,p]=n.useState([]),[c,u]=n.useState(f.currentPage||1),[O,D]=n.useState(6),[v,P]=n.useState(f.sortType||"updatedAt"),[j,i]=n.useState(f.sortOrder||"desc"),[h,$]=n.useState(f.statusFilter||"all"),[m,y]=n.useState([f.dateRangeStart?l(f.dateRangeStart):null,f.dateRangeEnd?l(f.dateRangeEnd):null]),[b,N]=n.useState([f.presetDateRangeStart?l(f.presetDateRangeStart):l().startOf("year").startOf("day"),f.presetDateRangeEnd?l(f.presetDateRangeEnd):l().endOf("day")]),[B,M]=n.useState(f.activePresetLabel||"All"),[A,T]=n.useState(f.searchTerm||""),[Ee,z]=n.useState(!1),[Fe,H]=n.useState(!1),[ze,F]=n.useState(!1),{handlePopup:He}=dt(),_e=120,[X,Ue]=n.useState(0),[_,L]=n.useState(R);n.useEffect(()=>{const t={sortType:v,sortOrder:j,statusFilter:h,searchTerm:A,activePresetLabel:B,dateRangeStart:m[0]?m[0].toISOString():null,dateRangeEnd:m[1]?m[1].toISOString():null,presetDateRangeStart:b[0]?b[0].toISOString():null,presetDateRangeEnd:b[1]?b[1].toISOString():null,currentPage:c};sessionStorage.setItem(`user_${w}_filters`,JSON.stringify(t))},[w,v,j,h,A,m,b,B,c]),n.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[c]);const Ye=n.useCallback(()=>{P("updatedAt"),i("desc"),$("all"),y([null,null]),N([l().startOf("year").startOf("day"),l().endOf("day")]),M("All"),T(""),u(1),L(R),sessionStorage.removeItem(`user_${w}_filters`)},[w]),qe=n.useCallback(()=>{T(""),u(1)},[]),ee=v==="updatedAt"&&j==="desc",Ve=n.useMemo(()=>A||!ee||h!=="all"||m[0]||b[0]&&!b[0].isSame(l().startOf("year").startOf("day")),[A,ee,h,m,b]),Ge=n.useCallback(()=>v==="title"&&j==="asc"?"A-Z":v==="title"&&j==="desc"?"Z-A":v==="createdAt"&&j==="desc"?"Newest":v==="createdAt"&&j==="asc"?"Oldest":"Recently Updated",[v,j]),Ke=n.useCallback(()=>{switch(h){case"complete":return"Completed";case"pending":return"Pending";case"failed":return"Failed";default:return"All"}},[h]);n.useCallback(()=>B||(m[0]&&m[1]?`${l(m[0]).format("MMM DD")} - ${l(m[1]).format("MMM DD")}`:"All Dates"),[B,m]);const Qe=n.useCallback(()=>De(null,null,function*(){const t={start:m[0]?l(m[0]).startOf("day").toISOString():b[0]?l(b[0]).startOf("day").toISOString():void 0,end:m[1]?l(m[1]).endOf("day").toISOString():b[1]?l(b[1]).endOf("day").toISOString():void 0,limit:_};return(yield o(ut(t)).unwrap()).data||[]}),[o,m,b,_]),{data:U=[],isLoading:te}=vt({queryKey:["blogs",(Oe=(we=m[0])==null?void 0:we.toISOString())!=null?Oe:null,(Se=(je=m[1])==null?void 0:je.toISOString())!=null?Se:null,($e=(Ce=b[0])==null?void 0:Ce.toISOString())!=null?$e:null,(Me=(Ne=b[1])==null?void 0:Ne.toISOString())!=null?Me:null,_],queryFn:Qe,staleTime:300*1e3,gcTime:10080*60*1e3,refetchOnWindowFocus:!1,onError:t=>{console.error("Failed to fetch blogs:",{error:t.message,status:t.status,response:t.response}),W.error("Failed to load blogs. Please try again.")}});n.useEffect(()=>{const t=pt();if(t)return t.on("blog:statusChanged",d=>{console.debug("Blog status changed:",d),s.invalidateQueries({queryKey:["blogs"]}),d.blogId&&s.invalidateQueries({queryKey:["blog",d.blogId]})}),()=>{t.off("blog:statusChanged")}},[s]);const he=Re({mutationFn:t=>o(ht({id:t})).unwrap(),onSuccess:()=>{s.invalidateQueries({queryKey:["blogs"],exact:!1}),W.success("Blog retry initiated.")},onError:t=>{console.error("Failed to retry blog:",t),W.error("Failed to retry blog.")}}),ge=Re({mutationFn:t=>o(gt(t)).unwrap(),onSuccess:()=>{s.invalidateQueries({queryKey:["blogs"],exact:!1})},onError:t=>{console.error("Failed to archive blog:",t),W.error("Failed to archive blog.")}}),pe=n.useMemo(()=>new bt(U,{keys:[{name:"title",weight:.5},{name:"content",weight:.3},{name:"focusKeywords",weight:.2}],threshold:.3,includeScore:!0,shouldSort:!0}),[U]),We=n.useMemo(()=>Be.debounce(t=>{T(t),u(1)},300),[]),se=n.useMemo(()=>{let t=U;A.trim()&&(t=pe.search(A).map(({item:g})=>g)),h!=="all"&&(t=t.filter(g=>g.status===h));const d=[...t];return v==="title"?d.sort((g,x)=>j==="asc"?g.title.localeCompare(x.title):x.title.localeCompare(g.title)):v==="updatedAt"?d.sort((g,x)=>j==="asc"?new Date(g.updatedAt)-new Date(x.updatedAt):new Date(x.updatedAt)-new Date(g.updatedAt)):v==="createdAt"&&d.sort((g,x)=>j==="asc"?new Date(g.createdAt)-new Date(x.createdAt):new Date(x.createdAt)-new Date(g.createdAt)),{blogs:d.slice((c-1)*O,c*O),total:d.length}},[U,A,h,v,j,c,O,pe]);n.useEffect(()=>{p(se.blogs),Ue(se.total)},[se]),n.useEffect(()=>{const t=Be.debounce(()=>{window.innerWidth>=1024?D(15):window.innerWidth>=768?D(12):D(6),u(1)},200);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),t.cancel()}},[]);const xe=n.useCallback(t=>{a(`/toolbox/${t._id}`)},[a]),be=n.useCallback(t=>{a(`/blog-editor/${t._id}`)},[a]),Ze=n.useCallback(t=>{he.mutate(t)},[he]),Je=n.useCallback(t=>{ge.mutate(t)},[ge]),ve=n.useCallback((t,d=_e)=>t?t.length>d?t.substring(0,d)+"...":t:"",[]),ye=n.useCallback(t=>{var d,g,x;return(x=(g=(d=t==null?void 0:t.replace(/<[^>]*>/g,""))==null?void 0:d.replace(/[\\*#=_~`>\-]+/g,""))==null?void 0:g.replace(/\s{2,}/g," "))==null?void 0:x.trim()},[]),Xe=n.useMemo(()=>[{label:"A-Z (Ascending)",icon:e.jsx(es,{}),onClick:()=>{P("title"),i("asc"),z(!1),u(1)}},{label:"Z-A (Descending)",icon:e.jsx(as,{}),onClick:()=>{P("title"),i("desc"),z(!1),u(1)}},{label:"Newest Blog",icon:e.jsx(zt,{}),onClick:()=>{P("createdAt"),i("desc"),z(!1),u(1)}},{label:"Oldest Blog",icon:e.jsx(kt,{}),onClick:()=>{P("createdAt"),i("asc"),z(!1),u(1)}}],[]),et=n.useMemo(()=>[{label:"All Status",icon:e.jsx(Le,{}),onClick:()=>{$("all"),H(!1),u(1)}},{label:"Status: Completed",icon:e.jsx(Le,{}),onClick:()=>{$("complete"),H(!1),u(1)}},{label:"Status: Pending",icon:e.jsx(Zt,{}),onClick:()=>{$("pending"),H(!1),u(1)}},{label:"Status: Failed",icon:e.jsx(qt,{}),onClick:()=>{$("failed"),H(!1),u(1)}}],[]),tt=n.useMemo(()=>[{label:"Last 7 Days",value:[l().subtract(7,"days").startOf("day"),l().endOf("day")],onClick:()=>{N([l().subtract(7,"days").startOf("day"),l().endOf("day")]),y([null,null]),M("Last 7 Days"),u(1),F(!1),L(R)}},{label:"Last 30 Days",value:[l().subtract(30,"days").startOf("day"),l().endOf("day")],onClick:()=>{N([l().subtract(30,"days").startOf("day"),l().endOf("day")]),y([null,null]),M("Last 30 Days"),u(1),F(!1),L(R)}},{label:"Last 3 Months",value:[l().subtract(3,"months").startOf("day"),l().endOf("day")],onClick:()=>{N([l().subtract(3,"months").startOf("day"),l().endOf("day")]),y([null,null]),M("Last 3 Months"),u(1),F(!1),L(R)}},{label:"Last 6 Months",value:[l().subtract(6,"months").startOf("day"),l().endOf("day")],onClick:()=>{N([l().subtract(6,"months").startOf("day"),l().endOf("day")]),y([null,null]),M("Last 6 Months"),u(1),F(!1),L(R)}},{label:"All",value:[l().startOf("year").startOf("day"),l().endOf("day")],onClick:()=>{N([l().startOf("year").startOf("day"),l().endOf("day")]),y([null,null]),M("All"),u(1),F(!1),L(R)}}],[]);return e.jsxs("div",{className:"p-2 md:p-4 lg:p-8 max-w-full",children:[e.jsx(mt,{children:e.jsx("title",{children:"Blogs | GenWrite"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 mt-5 p-2 md:mt-0 md:p-0",children:[e.jsx(k.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blogs Generated"}),e.jsx(k.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"text-gray-500 text-sm mt-2 max-w-md",children:"All our blogs in one place. Explore insights, tips, and strategies to level up your content creation."})]}),e.jsx(k.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(ft,{to:"/blog-editor",className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-[#1B6FC9] hover:bg-[#1B6FC9]/90 text-white rounded-lg transition-colors text-xs sm:text-sm font-medium",children:[e.jsx(Ot,{className:"w-4 sm:w-5 h-4 sm:h-5"}),"New Blog"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 bg-white p-4 sm:p-6 rounded-lg mb-6",children:[e.jsx("div",{className:"flex-1 flex items-center gap-2",children:e.jsx(jt,{placeholder:"Search blogs...",value:A,onChange:t=>We(t.target.value),prefix:e.jsx(Ct,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-500"}),suffix:A?e.jsx(St,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-500 cursor-pointer",onClick:qe}):null,className:"rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-300 text-xs sm:text-sm","aria-label":"Search blogs"})}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 items-center",children:[e.jsx(re,{open:Ee,onOpenChange:t=>z(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:Xe.map(({label:t,icon:d,onClick:g})=>e.jsx(Q,{title:t,placement:"left",children:e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:d}),e.jsx("span",{children:t})]})},t))}),children:e.jsx(k.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(E,{type:"default",icon:e.jsx(Bt,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${ee?"":"border-blue-400 bg-blue-50 text-blue-600"}`,children:["Sort: ",Ge()]})})}),e.jsx(re,{open:Fe,onOpenChange:t=>H(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:et.map(({label:t,icon:d,onClick:g})=>e.jsx(Q,{title:t,placement:"left",children:e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:d}),e.jsx("span",{children:t})]})},t))}),children:e.jsx(k.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(E,{type:"default",icon:e.jsx(It,{className:"w-4 sm:w-5 h-4 sm:h-5"}),className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${h!=="all"?"border-green-400 bg-green-50 text-green-600":""}`,children:["Filter: ",Ke()]})})}),e.jsx(re,{open:ze,onOpenChange:t=>F(t),trigger:"click",placement:"bottomRight",content:e.jsx("div",{className:"min-w-[180px] sm:min-w-[200px] rounded-lg space-y-1",children:tt.map(({label:t,onClick:d})=>e.jsx(Q,{title:t,placement:"left",children:e.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-base sm:text-lg",children:e.jsx(Kt,{})}),e.jsx("span",{children:t})]})},t))})}),e.jsx(k.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(E,{type:"default",icon:e.jsx($t,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:()=>s.invalidateQueries(["blogs"]),className:"p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm",children:"Refresh"})}),e.jsx(k.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(E,{type:"default",icon:e.jsx(ne,{className:"w-4 sm:w-5 h-4 sm:h-5"}),onClick:Ye,className:`p-2 sm:p-3 rounded-lg border-gray-300 shadow-sm hover:bg-gray-100 w-full sm:w-auto text-xs sm:text-sm ${Ve?"border-red-400 bg-red-50 text-red-600":""}`,children:"Reset"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(fs,{value:m,minDate:r!=null&&r.createdAt?l(r==null?void 0:r.createdAt):void 0,maxDate:l(),onChange:t=>{y(t?[l(t[0]).startOf("day"),l(t[1]).endOf("day")]:[null,null]),N([null,null]),M(""),u(1),L(R)},className:yt("w-full rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-300 text-xs sm:text-sm",(m[0]||b[0])&&"!border-purple-400 !shadow-purple-100"),format:"YYYY-MM-DD",placeholder:["Start date","End date"],"aria-label":"Select date range"})})]}),te?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[...Array(O)].map((t,d)=>e.jsx("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6",children:e.jsx(xt,{})},d))}):C.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center",style:{minHeight:"calc(100vh - 270px)"},children:[e.jsx("img",{src:"Images/no-blog.png",alt:"No blogs",className:"w-20 sm:w-24"}),e.jsx("p",{className:"text-lg sm:text-xl mt-5",children:"No blogs available."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8 place-items-center p-2",children:C.map(t=>{const d=t.isManuallyEdited===!0,{_id:g,title:x,status:S,createdAt:st,content:Ae,aiModel:Y,focusKeywords:ae,updatedAt:at,wordpress:V,agendaJob:G}=t,K=/gemini/gi.test(Y);return e.jsx(Nt.Ribbon,{text:e.jsx("span",{className:"flex items-center justify-center gap-1 py-1 font-medium tracking-wide text-xs sm:text-sm",children:d?e.jsx(e.Fragment,{children:"Manually Generated"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:`./Images/${K?"gemini":Y==="claude"?"claude":"chatgpt"}.png`,alt:K?"Gemini":Y==="claude"?"Claude":"ChatGPT",width:16,height:16,loading:"lazy",className:"bg-white"}),K?"Gemini 2.0 flash":Y==="claude"?"Claude 4 sonnet":"Gpt 4.1 nano"]})}),className:"absolute top-0",color:d?"#9CA3AF":K?"#4796E3":Y==="claude"?"#9368F8":"#74AA9C",children:e.jsxs("div",{className:`bg-white shadow-md hover:shadow-xl transition-all duration-300 rounded-lg p-4 sm:p-6 min-h-[180px] min-w-0 relative ${d?"border-gray-500":S==="failed"?"border-red-500":S==="pending"||S==="in-progress"?"border-yellow-500":"border-green-500"} border-2`,title:x,children:[e.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-2 -mt-2",children:new Date(st).toLocaleDateString("en-US",{dateStyle:"medium"})}),d?e.jsx("div",{className:"cursor-pointer",onClick:()=>be(t),role:"button",tabIndex:0,onKeyDown:q=>q.key==="Enter"&&be(t),"aria-label":`View blog ${x}`,children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-base sm:text-lg capitalize font-semibold text-gray-900 !text-left max-w-full",children:x}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:ve(ye(Ae))||""})]})}):e.jsx(Q,{title:S==="complete"?x:S==="failed"?"Blog generation failed":S==="pending"?`Pending Blog will be generated ${G!=null&&G.nextRunAt?"at "+new Date(G.nextRunAt).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"shortly"}`:`Blog generation is ${S}`,color:S==="complete"?"green":S==="failed"?"red":"#eab308",children:e.jsx("div",{className:"cursor-pointer",onClick:()=>{(S==="complete"||S==="failed")&&xe(t)},role:"button",tabIndex:0,onKeyDown:q=>q.key==="Enter"&&(S==="complete"||S==="failed")&&xe(t),"aria-label":`View blog ${x}`,children:e.jsxs("div",{className:"flex flex-col gap-4 items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-base sm:text-lg capitalize font-semibold text-gray-900 !text-left max-w-full",children:x}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 line-clamp-3 break-all",children:ve(ye(Ae))||""})]})})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:ae==null?void 0:ae.map((q,rt)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2 sm:px-2.5 py-0.5 rounded-full",children:q},rt))}),S==="failed"&&e.jsx(Mt,{title:"Retry Blog Generation",description:"Are you sure you want to retry generating this blog?",icon:e.jsx(ne,{style:{color:"red"},size:15,className:"mt-1 mr-1"}),okText:"Yes",cancelText:"No",onConfirm:()=>Ze(g),children:e.jsx(E,{type:"text",className:"p-2 hover:!border-blue-500 hover:text-blue-500","aria-label":"Retry blog generation",children:e.jsx(ne,{className:"w-4 sm:w-5 h-4 sm:h-5"})})}),e.jsx(E,{type:"text",className:"p-2 hover:!border-red-500 hover:text-red-500",onClick:()=>He({title:"Move to Trash",description:e.jsxs("span",{className:"my-2",children:["Blog ",e.jsx("b",{children:x})," will be moved to trash. You can restore it later."]}),confirmText:"Delete",onConfirm:()=>{Je(g)},confirmProps:{type:"text",className:"border-red-500 hover:bg-red-500 hover:text-white"},cancelProps:{danger:!1}}),"aria-label":`Move blog ${x} to trash`,children:e.jsx(At,{className:"w-4 sm:w-5 h-4 sm:h-5"})})]}),e.jsxs("div",{className:"mt-3 -mb-2 flex justify-end text-xs sm:text-sm text-right text-gray-500 font-medium",children:[(V==null?void 0:V.postedOn)&&e.jsxs("span",{className:"",children:["Posted on:"," ",new Date(V.postedOn).toLocaleDateString("en-US",{dateStyle:"medium"})]}),e.jsxs("span",{className:"ml-auto",children:["Last updated:"," ",new Date(at).toLocaleDateString("en-US",{dateStyle:"medium"})]})]})]})},g)})}),X>O&&e.jsx("div",{className:"flex justify-center mt-6 sm:mt-8",children:e.jsx(Dt,{current:c,total:X,pageSize:O,onChange:(t,d)=>{u(t),d!==O&&(D(d),u(1))},showTotal:t=>`Total ${t} blogs`,responsive:!0,showSizeChanger:!1,pageSizeOptions:["6","12","15"],disabled:te,className:"text-xs sm:text-sm"})}),U.length===_&&_!==-1&&c===Math.ceil(X/O)&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(E,{onClick:()=>L(t=>t+R),disabled:te,children:"Load More"})})]})]})};export{Us as default};
