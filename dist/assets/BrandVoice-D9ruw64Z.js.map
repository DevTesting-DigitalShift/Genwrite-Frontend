{"version":3,"file":"BrandVoice-D9ruw64Z.js","sources":["../../src/components/brandvoice/BrandVoice.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { FaEdit, FaTimes } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { sendBrandVoice } from \"../../store/slices/blogSlice\";\r\nimport axiosInstance from \"@api/index\";\r\n\r\nconst BrandVoice = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const user = useSelector(state => state.auth.user);\r\n\r\n  // State to store form data\r\n  const [formData, setFormData] = useState({\r\n    nameOfVoice: \"\",\r\n    postLink: \"\",\r\n    keywords: [],\r\n    describeBrand: \"\",\r\n    selectedVoice: null,\r\n    uploadedFile: null,\r\n  });\r\n\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [brands, setBrands] = useState([]);\r\n\r\n  const fetchBrands = async () => {\r\n    try {\r\n      const res = await axiosInstance.get(\"/brand\");\r\n      let brandsArr = Array.isArray(res.data) ? res.data : (res.data ? [res.data] : []);\r\n      console.log(\"Fetched brands:\", brandsArr);\r\n      setBrands(brandsArr);\r\n      if (brandsArr.length > 0 && !formData.selectedVoice) {\r\n        setFormData((prev) => ({ ...prev, selectedVoice: brandsArr[0] }));\r\n      }\r\n    } catch (err) {\r\n      setBrands([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBrands();\r\n  }, []);\r\n\r\n  const handleEdit = (brand) => {\r\n    setFormData({\r\n      nameOfVoice: brand.nameOfVoice,\r\n      postLink: brand.postLink,\r\n      keywords: Array.isArray(brand.keywords) ? brand.keywords : [],\r\n      describeBrand: brand.describeBrand,\r\n      selectedVoice: brand,\r\n      uploadedFile: null,\r\n      _id: brand._id,\r\n    });\r\n  };\r\n\r\n  // Save (update or create) brand voice\r\n  const handleSave = async () => {\r\n    try {\r\n      setIsUploading(true);\r\n      const payload = {\r\n        nameOfVoice: formData.nameOfVoice?.trim(),\r\n        postLink: formData.postLink?.trim(),\r\n        keywords: Array.isArray(formData.keywords)\r\n          ? formData.keywords.map((k) => String(k).trim()).filter(Boolean)\r\n          : [],\r\n        describeBrand: formData.describeBrand?.trim(),\r\n        userId: user?._id // send userId to backend\r\n      };\r\n      if (!payload.nameOfVoice || !payload.postLink || !payload.describeBrand || payload.keywords.length === 0) {\r\n        setIsUploading(false);\r\n        alert(\"All fields are required and at least one keyword must be provided.\");\r\n        return;\r\n      }\r\n      try {\r\n        new URL(payload.postLink);\r\n      } catch {\r\n        setIsUploading(false);\r\n        alert(\"Please enter a valid URL for the post link.\");\r\n        return;\r\n      }\r\n      let res;\r\n      if (formData._id) {\r\n        // Update existing brand\r\n        res = await axiosInstance.put(`/brand/${formData._id}`, payload);\r\n      } else {\r\n        // Create new brand\r\n        res = await axiosInstance.post(\"/brand/addBrand\", payload);\r\n      }\r\n      setIsUploading(false);\r\n      fetchBrands();\r\n      setFormData({\r\n        nameOfVoice: \"\",\r\n        postLink: \"\",\r\n        keywords: [],\r\n        describeBrand: \"\",\r\n        selectedVoice: null,\r\n        uploadedFile: null,\r\n        _id: undefined,\r\n      });\r\n    } catch (err) {\r\n      setIsUploading(false);\r\n      alert(\r\n        err?.response?.data?.message ||\r\n          err?.response?.data?.errors?.[0]?.msg ||\r\n          \"Failed to save brand voice. Please check your input.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  // Delete brand voice\r\n  const handleDelete = async (brand) => {\r\n    try {\r\n      await axiosInstance.delete(`/brand/${brand._id}`);\r\n      fetchBrands();\r\n      if (formData.selectedVoice && formData.selectedVoice._id === brand._id) {\r\n        setFormData((prev) => ({ ...prev, selectedVoice: null }));\r\n      }\r\n    } catch (err) {\r\n      alert(\"Failed to delete brand voice.\");\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSelect = (voice) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      selectedVoice: voice,\r\n    }));\r\n  };\r\n\r\n  // CSV upload for keywords (only .csv, works on mobile/desktop)\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file && file.type === \"text/csv\") {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        // Parse CSV: split by comma, newline, or semicolon\r\n        const text = e.target.result;\r\n        let keywords = text\r\n          .split(/,|\\n|;/)\r\n          .map((kw) => kw.trim())\r\n          .filter((kw) => kw.length > 0);\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          uploadedFile: file.name,\r\n          keywords: Array.from(new Set([...prev.keywords, ...keywords])),\r\n        }));\r\n      };\r\n      reader.readAsText(file);\r\n    } else {\r\n      // Optionally show error: only CSV allowed\r\n      // toast.error(\"Please upload a CSV file\");\r\n    }\r\n  };\r\n\r\n  const handleRemoveFile = (fileName) => {\r\n    setFormData({\r\n      ...formData,\r\n      uploadedFile: null,\r\n      keywords: formData.keywords.filter((keyword) => keyword !== fileName),\r\n    });\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === \"Enter\" && inputValue.trim()) {\r\n      setFormData({\r\n        ...formData,\r\n        keywords: [...formData.keywords, inputValue.trim()],\r\n      });\r\n      setInputValue(\"\");\r\n    }\r\n  };\r\n\r\n  const handleRemoveKeyword = (keyword) => {\r\n    setFormData({\r\n      ...formData,\r\n      keywords: formData.keywords.filter((k) => k !== keyword),\r\n    });\r\n  };\r\n\r\n  const renderKeywords = () => {\r\n    const latestKeywords = formData.keywords.slice(-3);\r\n    const remainingCount = formData.keywords.length - latestKeywords.length;\r\n\r\n    return (\r\n      <>\r\n        {remainingCount > 0 && (\r\n          <motion.div \r\n            className=\"flex items-center bg-indigo-100 text-indigo-700 rounded-md px-2 py-1 mr-2\"\r\n            initial={{ scale: 0.8 }}\r\n            animate={{ scale: 1 }}\r\n          >\r\n            <span className=\"text-sm\">{`+${remainingCount}`}</span>\r\n          </motion.div>\r\n        )}\r\n        {latestKeywords.map((keyword, index) => (\r\n          <motion.div\r\n            key={index}\r\n            className=\"flex items-center bg-indigo-100 text-indigo-700 rounded-md px-2 py-1 mr-2\"\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.8 }}\r\n            whileHover={{ scale: 1.05 }}\r\n          >\r\n            <span className=\"text-sm\">{keyword}</span>\r\n            <FaTimes\r\n              className=\"ml-1 cursor-pointer text-indigo-500 hover:text-indigo-700 transition-colors\"\r\n              onClick={() => handleRemoveKeyword(keyword)}\r\n            />\r\n          </motion.div>\r\n        ))}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      className=\"flex gap-8 justify-around p-6\"\r\n    >\r\n      {/* Left Section */}\r\n      <motion.div \r\n        className=\"w-[60%] bg-white rounded-xl p-6 shadow-lg border border-gray-100\"\r\n        initial={{ x: -20 }}\r\n        animate={{ x: 0 }}\r\n      >\r\n        <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"\r\n>\r\n          Letâ€™s create your Brand Voice\r\n        </h1>\r\n        <p className=\"text-gray-500 mb-6\">\r\n          Prototype group pixel duplicate ellipse hand draft style rotate.\r\n          Layout follower scale comment flows draft select.\r\n        </p>\r\n        \r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 block mb-2\">\r\n              Name of Voice\r\n            </label>\r\n            <motion.input\r\n              type=\"text\"\r\n              name=\"nameOfVoice\"\r\n              value={formData.nameOfVoice}\r\n              onChange={handleInputChange}\r\n              placeholder=\"e.g., How to get?\"\r\n              className=\"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n              whileFocus={{ scale: 1.01 }}\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 block mb-2\">\r\n              Paste link of your post or blog *\r\n            </label>\r\n            <motion.input\r\n              type=\"text\"\r\n              name=\"postLink\"\r\n              value={formData.postLink}\r\n              onChange={handleInputChange}\r\n              placeholder=\"e.g., How to get?\"\r\n              className=\"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n              whileFocus={{ scale: 1.01 }}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"text-center my-4 relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-gray-300\">\r\n                \r\n              </div>\r\n            </div>\r\n            <div className=\"relative flex justify-center\">\r\n              <span className=\"bg-white px-4 text-gray-500\">OR</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 block mb-2\">\r\n              Keywords*\r\n            </label>\r\n            <motion.div \r\n              className=\"flex items-center bg-white border border-gray-300 rounded-lg p-2 flex-wrap gap-2\"\r\n              whileHover={{ boxShadow: \"0 0 0 3px rgba(99, 102, 241, 0.2)\" }}\r\n            >\r\n              {renderKeywords()}\r\n              <input\r\n                type=\"text\"\r\n                value={inputValue}\r\n                onChange={(e) => setInputValue(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                className=\"flex-grow p-2 bg-white border-none outline-none rounded-l-md\"\r\n                placeholder=\"e.g., Fun\"\r\n              />\r\n              <label\r\n                htmlFor=\"file-upload\"\r\n                className=\"flex items-center cursor-pointer\"\r\n              >\r\n                <motion.div \r\n                  className=\"bg-indigo-100 p-2 rounded-lg\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                >\r\n                  <img\r\n                    src=\"./Images/upload.png\"\r\n                    alt=\"Upload\"\r\n                    className=\"w-6 h-6\"\r\n                  />\r\n                </motion.div>\r\n              </label>\r\n              <input\r\n                id=\"file-upload\"\r\n                type=\"file\"\r\n                className=\"hidden\"\r\n                onChange={handleFileChange}\r\n                accept=\".csv\"\r\n              />\r\n            </motion.div>\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 block mb-2\">\r\n              Describe your Brand\r\n            </label>\r\n            <motion.textarea\r\n              name=\"describeBrand\"\r\n              value={formData.describeBrand}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Write a blog on how to cook pasta\"\r\n              className=\"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n              rows=\"4\"\r\n              whileFocus={{ scale: 1.01 }}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"text-right\">\r\n            <motion.button\r\n              className=\"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-3 rounded-lg font-medium shadow-md hover:shadow-lg transition-all\"\r\n              onClick={handleSave}\r\n              whileHover={{ scale: 1.03, y: -2 }}\r\n              whileTap={{ scale: 0.98 }}\r\n            >\r\n              Save Brand Voice\r\n            </motion.button>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Divider */}\r\n      <div className=\"h-auto w-px bg-gray-200 mx-2\"></div>\r\n\r\n      {/* Right Section */}\r\n      <motion.div \r\n        className=\"flex-1 bg-white rounded-xl p-6 shadow-lg border border-gray-100\"\r\n        initial={{ x: 20 }}\r\n        animate={{ x: 0 }}\r\n      >\r\n        <h1 className=\"text-xl font-bold text-gray-800 mb-4\">\r\n          Selected Brand Voice\r\n        </h1>\r\n\r\n        <div className=\"mb-8\">\r\n          <AnimatePresence>\r\n            {formData.selectedVoice ? (\r\n              <motion.div \r\n                className=\"rounded-xl bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 p-4 shadow-sm\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0 }}\r\n                whileHover={{ y: -5 }}\r\n              >\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h1 className=\"text-indigo-700 font-medium\">\r\n                    {formData.selectedVoice.nameOfVoice}\r\n                  </h1>\r\n                  <div className=\"flex space-x-2\">\r\n                    <motion.button \r\n                      className=\"text-indigo-500 hover:text-indigo-700\"\r\n                      whileHover={{ scale: 1.1 }}\r\n                      whileTap={{ scale: 0.9 }}\r\n                      onClick={() => handleEdit(formData.selectedVoice)}\r\n                    >\r\n                      <FaEdit />\r\n                    </motion.button>\r\n                    <motion.button \r\n                      className=\"text-gray-500 hover:text-red-500\"\r\n                      whileHover={{ scale: 1.1 }}\r\n                      whileTap={{ scale: 0.9 }}\r\n                      onClick={() => handleDelete(formData.selectedVoice)}\r\n                    >\r\n                      <img src=\"/Images/trash.png\" alt=\"Delete\" className=\"w-4 h-4\" />\r\n                    </motion.button>\r\n                  </div>\r\n                </div>\r\n                <p className=\"text-gray-600 mt-2 text-sm\">\r\n                  {formData.selectedVoice.describeBrand?.length > 100\r\n                    ? `${formData.selectedVoice.describeBrand.substring(0, 100)}...`\r\n                    : formData.selectedVoice.describeBrand}\r\n                </p>\r\n              </motion.div>\r\n            ) : (\r\n              <motion.div \r\n                className=\"p-6 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 text-center\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n              >\r\n                <p className=\"text-gray-500\">\r\n                  No brand voice selected. Select one from below.\r\n                </p>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        <h2 className=\"text-xl font-bold text-gray-800 mb-4\">\r\n          Select Brand Voice\r\n        </h2>\r\n        \r\n        <div className=\"space-y-4 max-h-[500px] overflow-y-auto pr-2\">\r\n          {brands.map((item) => (\r\n            <YourVoicesComponent\r\n              key={item._id}\r\n              id={item._id}\r\n              brandName={item.nameOfVoice}\r\n              brandVoice={item.describeBrand}\r\n              onSelect={() => handleSelect(item)}\r\n              isSelected={formData.selectedVoice?._id === item._id}\r\n              onEdit={() => handleEdit(item)}\r\n              onDelete={() => handleDelete(item)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Update YourVoicesComponent to accept onEdit and onDelete\r\nconst YourVoicesComponent = ({ id, brandName, brandVoice, onSelect, isSelected, onEdit, onDelete }) => {\r\n  return (\r\n    <motion.div\r\n      className={`p-4 rounded-xl cursor-pointer transition-all ${\r\n        isSelected \r\n          ? \"bg-gradient-to-r from-indigo-100 to-purple-100 border-2 border-indigo-300 shadow-md\" \r\n          : \"bg-white border border-gray-200 hover:border-indigo-300\"\r\n      }`}\r\n      onClick={onSelect}\r\n      whileHover={{ \r\n        y: -3,\r\n        boxShadow: \"0 4px 12px rgba(99, 102, 241, 0.1)\"\r\n      }}\r\n      whileTap={{ scale: 0.98 }}\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.2 }}\r\n    >\r\n      <div className=\"flex justify-between items-center\">\r\n        <h1 className={`font-medium ${\r\n          isSelected ? \"text-indigo-700\" : \"text-gray-700\"\r\n        }`}>\r\n          {brandName}\r\n        </h1>\r\n        <div className=\"flex space-x-2\">\r\n          <motion.button\r\n            className=\"text-indigo-500 hover:text-indigo-700\"\r\n            whileHover={{ scale: 1.1 }}\r\n            whileTap={{ scale: 0.9 }}\r\n            onClick={e => { e.stopPropagation(); onEdit(); }}\r\n          >\r\n            <FaEdit />\r\n          </motion.button>\r\n          <motion.button\r\n            className=\"text-gray-500 hover:text-red-500\"\r\n            whileHover={{ scale: 1.1 }}\r\n            whileTap={{ scale: 0.9 }}\r\n            onClick={e => { e.stopPropagation(); onDelete(); }}\r\n          >\r\n            <img src=\"/Images/trash.png\" alt=\"Delete\" className=\"w-4 h-4\" />\r\n          </motion.button>\r\n        </div>\r\n      </div>\r\n      <p className=\"text-sm text-gray-600 mt-2\">\r\n        {brandVoice.length > 100\r\n          ? `${brandVoice.substring(0, 100)}...`\r\n          : brandVoice}\r\n      </p>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default BrandVoice;"],"names":["BrandVoice","useDispatch","useNavigate","user","useSelector","state","formData","setFormData","useState","inputValue","setInputValue","isUploading","setIsUploading","brands","setBrands","fetchBrands","res","axiosInstance","brandsArr","prev","useEffect","handleEdit","brand","handleSave","payload","_a","_b","k","_c","err","_e","_d","_i","_h","_g","_f","handleDelete","handleInputChange","e","name","value","handleSelect","voice","handleFileChange","event","file","reader","keywords","kw","handleKeyDown","handleRemoveKeyword","keyword","renderKeywords","latestKeywords","remainingCount","jsxs","Fragment","jsx","motion","index","FaTimes","AnimatePresence","FaEdit","item","YourVoicesComponent","id","brandName","brandVoice","onSelect","isSelected","onEdit","onDelete"],"mappings":"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"}